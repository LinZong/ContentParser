var nico=nico||{};nico.extDll=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n},function(t,e,n){"use strict";t.exports=n(2)},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(3),i=n(4),o=n(13),a=n(21),s=n(15),u=n(22),c=n(28),l=n(29),h=n(32),f=s.createElement,d=s.createFactory,p=s.cloneElement,v=r,g=function(t){return t},y={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:h},Component:i.Component,PureComponent:i.PureComponent,createElement:f,cloneElement:p,isValidElement:s.isValidElement,PropTypes:u,createClass:l,createFactory:d,createMixin:g,DOM:a,version:c,__spread:v};t.exports=y},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,a,s=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)i.call(r,c)&&(s[c]=r[c]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var l=0;l<a.length;l++)o.call(r,a[l])&&(s[a[l]]=r[a[l]])}}return s}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function i(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function o(){}var a=n(5),s=n(3),u=n(6),c=(n(9),n(10));n(11),n(12);r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?a("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i,s(i.prototype,r.prototype),i.prototype.isPureReactComponent=!0,t.exports={Component:r,PureComponent:i}},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){}var i=(n(7),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")}});t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(8),i=r;t.exports=i},function(t,e){"use strict";/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
function n(t){return function(){return t}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=!1;t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r={};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=function(){};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return(""+t).replace(b,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);y(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?c(u,i,n,g.thatReturnsArgument):null!=u&&(v.isValidElement(u)&&(u=v.cloneAndReplaceKey(u,o+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function c(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(e,a,i,o);y(t,u,c),s.release(c)}function l(t,e,n){if(null==t)return t;var r=[];return c(t,r,null,e,n),r}function h(t,e,n){return null}function f(t,e){return y(t,h,null)}function d(t){var e=[];return c(t,e,null,g.thatReturnsArgument),e}var p=n(14),v=n(15),g=n(8),y=n(18),m=p.twoArgumentPooler,_=p.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},p.addPoolingTo(i,m),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p.addPoolingTo(s,_);var E={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:f,toArray:d};t.exports=E},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=n(5),i=(n(11),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},u=function(t){var e=this;t instanceof e?void 0:r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,l=i,h=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||l,n.poolSize||(n.poolSize=c),n.release=u,n},f={addPoolingTo:h,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=f},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return void 0!==t.ref}function i(t){return void 0!==t.key}var o=n(3),a=n(16),s=(n(7),n(9),Object.prototype.hasOwnProperty),u=n(17),c={key:!0,ref:!0,__self:!0,__source:!0},l=function(t,e,n,r,i,o,a){var s={$$typeof:u,type:t,key:e,ref:n,props:a,_owner:o};return s};l.createElement=function(t,e,n){var o,u={},h=null,f=null,d=null,p=null;if(null!=e){r(e)&&(f=e.ref),i(e)&&(h=""+e.key),d=void 0===e.__self?null:e.__self,p=void 0===e.__source?null:e.__source;for(o in e)s.call(e,o)&&!c.hasOwnProperty(o)&&(u[o]=e[o])}var v=arguments.length-2;if(1===v)u.children=n;else if(v>1){for(var g=Array(v),y=0;y<v;y++)g[y]=arguments[y+2];u.children=g}if(t&&t.defaultProps){var m=t.defaultProps;for(o in m)void 0===u[o]&&(u[o]=m[o])}return l(t,h,f,d,p,a.current,u)},l.createFactory=function(t){var e=l.createElement.bind(null,t);return e.type=t,e},l.cloneAndReplaceKey=function(t,e){var n=l(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},l.cloneElement=function(t,e,n){var u,h=o({},t.props),f=t.key,d=t.ref,p=t._self,v=t._source,g=t._owner;if(null!=e){r(e)&&(d=e.ref,g=a.current),i(e)&&(f=""+e.key);var y;t.type&&t.type.defaultProps&&(y=t.type.defaultProps);for(u in e)s.call(e,u)&&!c.hasOwnProperty(u)&&(void 0===e[u]&&void 0!==y?h[u]=y[u]:h[u]=e[u])}var m=arguments.length-2;if(1===m)h.children=n;else if(m>1){for(var _=Array(m),b=0;b<m;b++)_[b]=arguments[b+2];h.children=_}return l(t.type,f,d,p,v,g,h)},l.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===u},t.exports=l},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var n={current:null};t.exports=n},function(t,e){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var n="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var f=typeof t;if("undefined"!==f&&"boolean"!==f||(t=null),null===t||"string"===f||"number"===f||"object"===f&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var d,p,v=0,g=""===e?l:e+h;if(Array.isArray(t))for(var y=0;y<t.length;y++)d=t[y],p=g+r(d,y),v+=i(d,p,n,o);else{var m=u(t);if(m){var _,b=m.call(t);if(m!==t.entries)for(var E=0;!(_=b.next()).done;)d=_.value,p=g+r(d,E++),v+=i(d,p,n,o);else for(;!(_=b.next()).done;){var T=_.value;T&&(d=T[1],p=g+c.escape(T[0])+h+r(d,0),v+=i(d,p,n,o))}}else if("object"===f){var x="",S=String(t);a("31","[object Object]"===S?"object with keys {"+Object.keys(t).join(", ")+"}":S,x)}}return v}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(5),s=(n(16),n(17)),u=n(19),c=(n(11),n(20)),l=(n(7),"."),h=":";t.exports=o},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){var e=t&&(r&&t[r]||t[i]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+t).replace(e,function(t){return n[t]});return"$"+r}function r(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+r).replace(e,function(t){return n[t]})}var i={escape:n,unescape:r};t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(15),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),"var":i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(15),i=r.isValidElement,o=n(23);t.exports=o(i)},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";var r=n(24);t.exports=function(t){var e=!1;return r(t,e)}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(){return null}var i=n(25),o=n(26),a=n(27),s=function(){};t.exports=function(t,e){function n(t){var e=t&&(O&&t[O]||t[C]);if("function"==typeof e)return e}function u(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function c(t){this.message=t,this.stack=""}function l(t){function n(n,r,i,a,s,u,l){if(a=a||P,u=u||i,l!==o){if(e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}return null==r[i]?n?new c(null===r[i]?"The "+s+" `"+u+"` is marked as required "+("in `"+a+"`, but its value is `null`."):"The "+s+" `"+u+"` is marked as required in "+("`"+a+"`, but its value is `undefined`.")):null:t(r,i,a,s,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function h(t){function e(e,n,r,i,o,a){var s=e[n],u=S(s);if(u!==t){var l=w(s);return new c("Invalid "+i+" `"+o+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return l(e)}function f(){return l(r)}function d(t){function e(e,n,r,i,a){if("function"!=typeof t)return new c("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){var u=S(s);return new c("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<s.length;l++){var h=t(s,l,r,i,a+"["+l+"]",o);if(h instanceof Error)return h}return null}return l(e)}function p(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){var s=S(a);return new c("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected a single ReactElement."))}return null}return l(e)}function v(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||P,s=A(e[n]);return new c("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+r+"`, expected ")+("instance of `"+a+"`."))}return null}return l(e)}function g(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(u(a,t[s]))return null;var l=JSON.stringify(t);return new c("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return Array.isArray(t)?l(e):r}function y(t){function e(e,n,r,i,a){if("function"!=typeof t)return new c("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=S(s);if("object"!==u)return new c("Invalid "+i+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."));for(var l in s)if(s.hasOwnProperty(l)){var h=t(s,l,r,i,a+"."+l,o);if(h instanceof Error)return h}return null}return l(e)}function m(t){function e(e,n,r,i,a){for(var s=0;s<t.length;s++){var u=t[s];if(null==u(e,n,r,i,a,o))return null}return new c("Invalid "+i+" `"+a+"` supplied to "+("`"+r+"`."))}if(!Array.isArray(t))return r;for(var n=0;n<t.length;n++){var i=t[n];if("function"!=typeof i)return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+R(i)+" at index "+n+"."),r}return l(e)}function _(){function t(t,e,n,r,i){return T(t[e])?null:new c("Invalid "+r+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return l(t)}function b(t){function e(e,n,r,i,a){var s=e[n],u=S(s);if("object"!==u)return new c("Invalid "+i+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."));for(var l in t){var h=t[l];if(h){var f=h(s,l,r,i,a+"."+l,o);if(f)return f}}return null}return l(e)}function E(t){function e(e,n,r,a,s){var u=e[n],l=S(u);if("object"!==l)return new c("Invalid "+a+" `"+s+"` of type `"+l+"` "+("supplied to `"+r+"`, expected `object`."));var h=i({},e[n],t);for(var f in h){var d=t[f];if(!d)return new c("Invalid "+a+" `"+s+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var p=d(u,f,r,a,s+"."+f,o);if(p)return p}return null}return l(e)}function T(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(T);if(null===e||t(e))return!0;var r=n(e);if(!r)return!1;var i,o=r.call(e);if(r!==e.entries){for(;!(i=o.next()).done;)if(!T(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!T(a[1]))return!1}return!0;default:return!1}}function x(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function S(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":x(e,t)?"symbol":e}function w(t){if("undefined"==typeof t||null===t)return""+t;var e=S(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function R(t){var e=w(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function A(t){return t.constructor&&t.constructor.name?t.constructor.name:P}var O="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",P="<<anonymous>>",M={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:f(),arrayOf:d,element:p(),instanceOf:v,node:_(),objectOf:y,oneOf:g,oneOfType:m,shape:b,exact:E};return c.prototype=Error.prototype,M.checkPropTypes=a,M.PropTypes=M,M}},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,s,u=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(u[s[h]]=r[s[h]])}}return u}},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
"use strict";function r(t,e,n,r,i){}t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";t.exports="15.6.2"},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(4),i=r.Component,o=n(15),a=o.isValidElement,s=n(6),u=n(30);t.exports=u(i,a,s)},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return t}function i(t,e,n){function i(t,e){var n=m.hasOwnProperty(e)?m[e]:null;x.hasOwnProperty(e)&&u("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&u("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function o(t,n){if(n){u("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),u(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,o=r.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(t,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==c){var s=n[a],l=r.hasOwnProperty(a);if(i(l,a),b.hasOwnProperty(a))b[a](t,s);else{var h=m.hasOwnProperty(a),p="function"==typeof s,v=p&&!h&&!l&&n.autobind!==!1;if(v)o.push(a,s),r[a]=s;else if(l){var g=m[a];u(h&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?r[a]=f(r[a],s):"DEFINE_MANY"===g&&(r[a]=d(r[a],s))}else r[a]=s}}}else;}function l(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in b;u(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in t;if(o){var a=_.hasOwnProperty(n)?_[n]:null;return u("DEFINE_MANY_MERGED"===a,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],r))}t[n]=r}}}function h(t,e){u(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(u(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return h(i,n),h(i,r),i}}function d(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function p(t,e){var n=e.bind(t);return n}function v(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=p(t,i)}}function g(t){var e=r(function(t,r,i){this.__reactAutoBindPairs.length&&v(this),this.props=t,this.context=r,this.refs=s,this.updater=i||n,this.state=null;var o=this.getInitialState?this.getInitialState():null;u("object"==typeof o&&!Array.isArray(o),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=o});e.prototype=new S,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],y.forEach(o.bind(null,e)),o(e,E),o(e,t),o(e,T),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),u(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var i in m)e.prototype[i]||(e.prototype[i]=null);return e}var y=[],m={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},b={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)o(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=a({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=a({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=a({},t.propTypes,e)},statics:function(t,e){l(t,e)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},T={componentWillUnmount:function(){this.__isMounted=!1}},x={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},S=function(){};return a(S.prototype,t.prototype,x),g}var o,a=n(31),s=n(10),u=n(11),c="mixins";o={},t.exports=i},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,s,u=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(u[s[h]]=r[s[h]])}}return u}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return o.isValidElement(t)?void 0:i("143"),t}var i=n(5),o=n(15);n(11);t.exports=r},function(t,e,n){"use strict";t.exports=n(34)},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(35),i=n(39),o=n(163),a=n(60),s=n(57),u=n(168),c=n(169),l=n(170),h=n(171);n(7);i.inject();var f={findDOMNode:c,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=l(t)),t?r.getNodeFromInstance(t):null}},Mount:o,Reconciler:a});t.exports=f},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){return 1===t.nodeType&&t.getAttribute(p)===String(e)||8===t.nodeType&&t.nodeValue===" react-text: "+e+" "||8===t.nodeType&&t.nodeValue===" react-empty: "+e+" "}function i(t){for(var e;e=t._renderedComponent;)t=e;return t}function o(t,e){var n=i(t);n._hostNode=e,e[g]=n}function a(t){var e=t._hostNode;e&&(delete e[g],t._hostNode=null)}function s(t,e){if(!(t._flags&v.hasCachedChildNodes)){var n=t._renderedChildren,a=e.firstChild;t:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],c=i(u)._domID;if(0!==c){for(;null!==a;a=a.nextSibling)if(r(a,c)){o(u,a);continue t}h("32",c)}}t._flags|=v.hasCachedChildNodes}}function u(t){if(t[g])return t[g];for(var e=[];!t[g];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[g]);t=e.pop())n=r,e.length&&s(r,t);return n}function c(t){var e=u(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode?h("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:h("34"),t=t._hostParent;for(;e.length;t=e.pop())s(t,t._hostNode);return t._hostNode}var h=n(36),f=n(37),d=n(38),p=(n(11),f.ID_ATTRIBUTE_NAME),v=d,g="__reactInternalInstance$"+Math.random().toString(36).slice(2),y={getClosestInstanceFromNode:u,getInstanceFromNode:c,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:o,uncacheNode:a};t.exports=y},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){return(t&e)===e}var i=n(36),o=(n(11),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},c=t.DOMPropertyNames||{},l=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var f=h.toLowerCase(),d=n[h],p={attributeName:f,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(d,e.MUST_USE_PROPERTY),hasBooleanValue:r(d,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(d,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(d,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(d,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(p.hasBooleanValue+p.hasNumericValue+p.hasOverloadedBooleanValue<=1?void 0:i("50",h),u.hasOwnProperty(h)){var v=u[h];p.attributeName=v}a.hasOwnProperty(h)&&(p.attributeNamespace=a[h]),c.hasOwnProperty(h)&&(p.propertyName=c[h]),l.hasOwnProperty(h)&&(p.mutationMethod=l[h]),s.properties[h]=p}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},injection:o};t.exports=s},function(t,e){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={hasCachedChildNodes:1};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){x||(x=!0,m.EventEmitter.injectReactEventListener(y),m.EventPluginHub.injectEventPluginOrder(s),m.EventPluginUtils.injectComponentTree(f),m.EventPluginUtils.injectTreeTraversal(p),m.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:T,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:E,BeforeInputEventPlugin:o}),m.HostComponent.injectGenericComponentClass(h),m.HostComponent.injectTextComponentClass(v),m.DOMProperty.injectDOMPropertyConfig(i),m.DOMProperty.injectDOMPropertyConfig(c),m.DOMProperty.injectDOMPropertyConfig(b),m.EmptyComponent.injectEmptyComponentFactory(function(t){return new d(t)}),m.Updates.injectReconcileTransaction(_),m.Updates.injectBatchingStrategy(g),m.Component.injectEnvironment(l))}var i=n(40),o=n(41),a=n(56),s=n(69),u=n(70),c=n(75),l=n(76),h=n(89),f=n(35),d=n(134),p=n(135),v=n(136),g=n(137),y=n(138),m=n(141),_=n(142),b=n(150),E=n(151),T=n(152),x=!1;t.exports={inject:r}},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case"topCompositionStart":return R.compositionStart;case"topCompositionEnd":return R.compositionEnd;case"topCompositionUpdate":return R.compositionUpdate}}function a(t,e){return"topKeyDown"===t&&e.keyCode===_}function s(t,e){switch(t){case"topKeyUp":return m.indexOf(e.keyCode)!==-1;case"topKeyDown":return e.keyCode!==_;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function c(t,e,n,r){var i,c;if(b?i=o(t):O?s(t,n)&&(i=R.compositionEnd):a(t,n)&&(i=R.compositionStart),!i)return null;x&&(O||i!==R.compositionStart?i===R.compositionEnd&&O&&(c=O.getData()):O=v.getPooled(r));var l=g.getPooled(i,e,n,r);if(c)l.data=c;else{var h=u(n);null!==h&&(l.data=h)}return d.accumulateTwoPhaseDispatches(l),l}function l(t,e){switch(t){case"topCompositionEnd":return u(e);case"topKeyPress":var n=e.which;return n!==S?null:(A=!0,w);case"topTextInput":var r=e.data;return r===w&&A?null:r;default:return null}}function h(t,e){if(O){if("topCompositionEnd"===t||!b&&s(t,e)){var n=O.getData();return v.release(O),O=null,n}return null}switch(t){case"topPaste":return null;case"topKeyPress":return e.which&&!i(e)?String.fromCharCode(e.which):null;case"topCompositionEnd":return x?null:e.data;default:return null}}function f(t,e,n,r){var i;if(i=T?l(t,n):h(t,n),!i)return null;var o=y.getPooled(R.beforeInput,e,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var d=n(42),p=n(49),v=n(50),g=n(53),y=n(55),m=[9,13,27,32],_=229,b=p.canUseDOM&&"CompositionEvent"in window,E=null;p.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var T=p.canUseDOM&&"TextEvent"in window&&!E&&!r(),x=p.canUseDOM&&(!b||E&&E>8&&E<=11),S=32,w=String.fromCharCode(S),R={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},A=!1,O=null,C={eventTypes:R,extractEvents:function(t,e,n,r){return[c(t,e,n,r),f(t,e,n,r)]}};t.exports=C},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return y(t,r)}function i(t,e,n){var i=r(t,n,e);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&p.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?p.getParentInstance(e):null;p.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=y(t,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function c(t){g(t,o)}function l(t){g(t,a)}function h(t,e,n,r){p.traverseEnterLeave(n,r,s,t,e)}function f(t){g(t,u)}var d=n(43),p=n(45),v=n(47),g=n(48),y=(n(7),d.getListener),m={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:h};t.exports=m},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}function i(t,e,n){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(e));default:return!1}}var o=n(36),a=n(44),s=n(45),u=n(46),c=n(47),l=n(48),h=(n(11),{}),f=null,d=function(t,e){t&&(s.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},p=function(t){return d(t,!0)},v=function(t){return d(t,!1)},g=function(t){return"."+t._rootNodeID},y={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?o("94",e,typeof n):void 0;var r=g(t),i=h[e]||(h[e]={});i[r]=n;var s=a.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=h[e];if(i(e,t._currentElement.type,t._currentElement.props))return null;var r=g(t);return n&&n[r]},deleteListener:function(t,e){var n=a.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=h[e];if(r){var i=g(t);delete r[i]}},deleteAllListeners:function(t){var e=g(t);for(var n in h)if(h.hasOwnProperty(n)&&h[n][e]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(t,n),delete h[n][e]}},extractEvents:function(t,e,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var u=o[s];if(u){var l=u.extractEvents(t,e,n,r);l&&(i=c(i,l))}}return i},enqueueEvents:function(t){t&&(f=c(f,t))},processEventQueue:function(t){var e=f;f=null,t?l(e,p):l(e,v),f?o("95"):void 0,u.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};t.exports=y},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(n>-1?void 0:a("96",t),!c.plugins[n]){e.extractEvents?void 0:a("97",t),c.plugins[n]=e;var r=e.eventTypes;for(var o in r)i(r[o],e,o)?void 0:a("98",o,t)}}}function i(t,e,n){c.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,c.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,e,n)}return!0}return!!t.registrationName&&(o(t.registrationName,e,n),!0)}function o(t,e,n){c.registrationNameModules[t]?a("100",t):void 0,c.registrationNameModules[t]=e,c.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(36),s=(n(11),null),u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s?a("101"):void 0,s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]?a("102",n):void 0,u[n]=i,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return c.registrationNameModules[e.registrationName]||null;if(void 0!==e.phasedRegistrationNames){var n=e.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=c.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];c.plugins.length=0;var e=c.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=c.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=c},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return"topMouseUp"===t||"topTouchEnd"===t||"topTouchCancel"===t}function i(t){return"topMouseMove"===t||"topTouchMove"===t}function o(t){return"topMouseDown"===t||"topTouchStart"===t}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=y.getNodeFromInstance(r),e?v.invokeGuardedCallbackWithCatch(i,n,t):v.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)a(t,e,n[i],r[i]);else n&&a(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function c(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function l(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?p("103"):void 0,t.currentTarget=e?y.getNodeFromInstance(n):null;var r=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,r}function h(t){return!!t._dispatchListeners}var f,d,p=n(36),v=n(46),g=(n(11),n(7),{injectComponentTree:function(t){f=t},injectTreeTraversal:function(t){d=t}}),y={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:h,getInstanceFromNode:function(t){return f.getInstanceFromNode(t)},getNodeFromInstance:function(t){return f.getNodeFromInstance(t)},isAncestor:function(t,e){return d.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return d.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return d.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return d.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,i){return d.traverseEnterLeave(t,e,n,r,i)},injection:g};t.exports=y},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e,n){try{e(n)}catch(r){null===i&&(i=r)}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e){return null==e?i("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=n(36);n(11);t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(3),o=n(51),a=n(52);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=n(36),i=(n(11),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},u=function(t){var e=this;t instanceof e?void 0:r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,l=i,h=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||l,n.poolSize||(n.poolSize=c),n.release=u,n},f={addPoolingTo:h,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=f},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(49),o=null;t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(3),o=n(51),a=n(8),s=(n(7),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n){var r=R.getPooled(M.change,t,e,n);return r.type="change",T.accumulateTwoPhaseDispatches(r),r}function i(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function o(t){var e=r(k,t,O(t));w.batchedUpdates(a,e)}function a(t){E.enqueueEvents(t),E.processEventQueue(!1)}function s(t,e){L=t,k=e,L.attachEvent("onchange",o)}function u(){L&&(L.detachEvent("onchange",o),L=null,k=null)}function c(t,e){var n=A.updateValueIfChanged(t),r=e.simulated===!0&&F._allowSimulatedPassThrough;if(n||r)return t}function l(t,e){if("topChange"===t)return e}function h(t,e,n){"topFocus"===t?(u(),s(e,n)):"topBlur"===t&&u()}function f(t,e){L=t,k=e,L.attachEvent("onpropertychange",p)}function d(){L&&(L.detachEvent("onpropertychange",p),L=null,k=null)}function p(t){"value"===t.propertyName&&c(k,t)&&o(t)}function v(t,e,n){"topFocus"===t?(d(),f(e,n)):"topBlur"===t&&d()}function g(t,e,n){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return c(k,n)}function y(t){var e=t.nodeName;return e&&"input"===e.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function m(t,e,n){if("topClick"===t)return c(e,n)}function _(t,e,n){if("topInput"===t||"topChange"===t)return c(e,n)}function b(t,e){if(null!=t){var n=t._wrapperState||e._wrapperState;if(n&&n.controlled&&"number"===e.type){var r=""+e.value;e.getAttribute("value")!==r&&e.setAttribute("value",r)}}}var E=n(43),T=n(42),x=n(49),S=n(35),w=n(57),R=n(54),A=n(65),O=n(66),C=n(67),P=n(68),M={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},L=null,k=null,I=!1;x.canUseDOM&&(I=C("change")&&(!document.documentMode||document.documentMode>8));var D=!1;x.canUseDOM&&(D=C("input")&&(!document.documentMode||document.documentMode>9));var F={eventTypes:M,_allowSimulatedPassThrough:!0,_isInputEventSupported:D,extractEvents:function(t,e,n,o){var a,s,u=e?S.getNodeFromInstance(e):window;if(i(u)?I?a=l:s=h:P(u)?D?a=_:(a=g,s=v):y(u)&&(a=m),a){var c=a(t,e,n);if(c){var f=r(c,n,o);return f}}s&&s(t,u,e),"topBlur"===t&&b(e,u)}};t.exports=F},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){O.ReactReconcileTransaction&&T?void 0:l("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=f.getPooled(),this.reconcileTransaction=O.ReactReconcileTransaction.getPooled(!0)}function o(t,e,n,i,o,a){return r(),T.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==m.length?l("124",e,m.length):void 0,m.sort(a),_++;for(var n=0;n<e;n++){var r=m[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(p.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),o="React update: "+s.getName()}if(v.performUpdateIfNecessary(r,t.reconcileTransaction,_),i)for(var u=0;u<i.length;u++)t.callbackQueue.enqueue(i[u],r.getPublicInstance())}}function u(t){return r(),T.isBatchingUpdates?(m.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=_+1))):void T.batchedUpdates(u,t)}function c(t,e){y(T.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),b.enqueue(t,e),E=!0}var l=n(36),h=n(3),f=n(58),d=n(51),p=n(59),v=n(60),g=n(64),y=n(11),m=[],_=0,b=f.getPooled(),E=!1,T=null,x={initialize:function(){this.dirtyComponentsLength=m.length},close:function(){this.dirtyComponentsLength!==m.length?(m.splice(0,this.dirtyComponentsLength),R()):m.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[x,S];h(i.prototype,g,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,f.release(this.callbackQueue),this.callbackQueue=null,O.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return g.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),d.addPoolingTo(i);var R=function(){for(;m.length||E;){if(m.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(E){E=!1;var e=b;b=f.getPooled(),e.notifyAll(),f.release(e)}}},A={injectReconcileTransaction:function(t){t?void 0:l("126"),O.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:l("127"),"function"!=typeof t.batchedUpdates?l("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?l("129"):void 0,T=t}},O={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:R,injection:A,asap:c};t.exports=O},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(36),o=n(51),a=(n(11),function(){function t(e){r(this,t),this._callbacks=null,this._contexts=null,this._arg=e}return t.prototype.enqueue=function(t,e){this._callbacks=this._callbacks||[],this._callbacks.push(t),this._contexts=this._contexts||[],this._contexts.push(e)},t.prototype.notifyAll=function(){var t=this._callbacks,e=this._contexts,n=this._arg;if(t&&e){t.length!==e.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var r=0;r<t.length;r++)t[r].call(e[r],n);t.length=0,e.length=0}},t.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},t.prototype.rollback=function(t){this._callbacks&&this._contexts&&(this._callbacks.length=t,this._contexts.length=t)},t.prototype.reset=function(){this._callbacks=null,this._contexts=null},t.prototype.destructor=function(){this.reset()},t}());t.exports=o.addPoolingTo(a)},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var n={logTopLevelRenders:!1};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(61),o=(n(63),n(7),{mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(62),a={};a.attachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null,r=null;null!==t&&"object"==typeof t&&(n=t.ref,r=t._owner);var i=null,o=null;return null!==e&&"object"==typeof e&&(i=e.ref,o=e._owner),n!==i||"string"==typeof i&&o!==r},a.detachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&i(n,t,e._owner)}},t.exports=a},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)}var i=n(36),o=(n(11),{addComponentAsRefTo:function(t,e,n){r(n)?void 0:i("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r(n)?void 0:i("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2016-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=null;t.exports={debugTool:r}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=n(36),i=(n(11),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,i,o,a,s,u){this.isInTransaction()?r("27"):void 0;var c,l;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=t.call(e,n,i,o,a,s,u),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(o){}}}},closeAll:function(t){this.isInTransaction()?void 0:r("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,a=e[n],s=this.wrapperInitData[n];try{o=!0,s!==i&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){var e=t.type,n=t.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===e||"radio"===e)}function i(t){return t._wrapperState.valueTracker}function o(t,e){t._wrapperState.valueTracker=e}function a(t){t._wrapperState.valueTracker=null}function s(t){var e;return t&&(e=r(t)?""+t.checked:t.value),e}var u=n(35),c={_getTrackerFromNode:function(t){return i(u.getInstanceFromNode(t))},track:function(t){if(!i(t)){var e=u.getNodeFromInstance(t),n=r(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];e.hasOwnProperty(n)||"function"!=typeof s.get||"function"!=typeof s.set||(Object.defineProperty(e,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(t){c=""+t,s.set.call(this,t)}}),o(t,{getValue:function(){return c},setValue:function(t){c=""+t},stopTracking:function(){a(t),delete e[n]}}))}},updateValueIfChanged:function(t){if(!t)return!1;var e=i(t);if(!e)return c.track(t),!0;var n=e.getValue(),r=s(u.getNodeFromInstance(t));return r!==n&&(e.setValue(r),!0)},stopTracking:function(t){var e=i(t);e&&e.stopTracking()}};t.exports=c},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(49);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!r[t.type]:"textarea"===e}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(42),i=n(35),o=n(71),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(t,e,n,s){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==t&&"topMouseOver"!==t)return null;var u;if(s.window===s)u=s;else{var c=s.ownerDocument;u=c?c.defaultView||c.parentWindow:window}var l,h;if("topMouseOut"===t){l=e;var f=n.relatedTarget||n.toElement;h=f?i.getClosestInstanceFromNode(f):null}else l=null,h=e;if(l===h)return null;var d=null==l?u:i.getNodeFromInstance(l),p=null==h?u:i.getNodeFromInstance(h),v=o.getPooled(a.mouseLeave,l,n,s);v.type="mouseleave",v.target=d,v.relatedTarget=p;var g=o.getPooled(a.mouseEnter,h,n,s);return g.type="mouseenter",g.target=p,g.relatedTarget=d,r.accumulateEnterLeaveDispatches(v,g,l,h),[v,g]}};t.exports=s},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(72),o=n(73),a=n(74),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o=n(66),a={view:function(t){if(t.view)return t.view;var e=o(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=i[t];return!!r&&!!n[r]}function r(t){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(37),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,"default":o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(t,e){return null==e?t.removeAttribute("value"):void("number"!==t.type||t.hasAttribute("value")===!1?t.setAttribute("value",""+e):t.validity&&!t.validity.badInput&&t.ownerDocument.activeElement!==t&&t.setAttribute("value",""+e))}}};t.exports=c},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(77),i=n(88),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){l.insertTreeBefore(t,e,n)}function o(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):v(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,r){for(var i=e;;){var o=i.nextSibling;if(v(t,i,r),i===n)break;i=o}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function c(t,e,n){var r=t.parentNode,i=t.nextSibling;i===e?n&&v(r,document.createTextNode(n),i):n?(p(i,n),u(r,i,e)):u(r,t,e)}var l=n(78),h=n(84),f=(n(35),n(63),n(81)),d=n(80),p=n(82),v=f(function(t,e,n){t.insertBefore(e,n)}),g=h.dangerouslyReplaceNodeWithMarkup,y={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:c,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case"INSERT_MARKUP":i(t,s.content,r(t,s.afterNode));break;case"MOVE_EXISTING":o(t,s.fromNode,r(t,s.afterNode));break;case"SET_MARKUP":d(t,s.content);break;case"TEXT_CONTENT":p(t,s.content);break;case"REMOVE_NODE":a(t,s.fromNode)}}}};t.exports=y},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if(g){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)y(e,n[r],null);else null!=t.html?h(e,t.html):null!=t.text&&d(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function o(t,e){g?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){g?t.html=e:h(t.node,e)}function s(t,e){g?t.text=e:d(t.node,e)}function u(){return this.node.nodeName}function c(t){return{node:t,children:[],html:null,text:null,toString:u}}var l=n(79),h=n(80),f=n(81),d=n(82),p=1,v=11,g="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),y=f(function(t,e,n){e.node.nodeType===v||e.node.nodeType===p&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===l.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});c.insertTreeBefore=y,c.replaceChildWithTree=i,c.queueChild=o,c.queueHTML=a,c.queueText=s,t.exports=c},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r,i=n(49),o=n(79),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(81),c=u(function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild;n.firstChild;)t.appendChild(n.firstChild)}});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(c=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),l=null}t.exports=c},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(49),i=n(83),o=n(80),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){return 3===t.nodeType?void(t.nodeValue=e):void o(t,i(e))})),t.exports=a},function(t,e){/**
	 * Copyright (c) 2016-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * Based on the escape-html library, which is used under the MIT License below:
	 *
	 * Copyright (c) 2012-2013 TJ Holowaychuk
	 * Copyright (c) 2015 Andreas Lubbe
	 * Copyright (c) 2015 Tiancheng "Timothy" Gu
	 *
	 * Permission is hereby granted, free of charge, to any person obtaining
	 * a copy of this software and associated documentation files (the
	 * 'Software'), to deal in the Software without restriction, including
	 * without limitation the rights to use, copy, modify, merge, publish,
	 * distribute, sublicense, and/or sell copies of the Software, and to
	 * permit persons to whom the Software is furnished to do so, subject to
	 * the following conditions:
	 *
	 * The above copyright notice and this permission notice shall be
	 * included in all copies or substantial portions of the Software.
	 *
	 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
	 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
	 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
	 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
	 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
	 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
	 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
	 *
	 */
"use strict";function n(t){var e=""+t,n=i.exec(e);if(!n)return e;var r,o="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=e.substring(s,a)),s=a+1,o+=r}return s!==a?o+e.substring(s,a):o}function r(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var i=/["'&<>]/;t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(36),i=n(78),o=n(49),a=n(85),s=n(8),u=(n(11),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM?void 0:r("56"),e?void 0:r("57"),"HTML"===t.nodeName?r("58"):void 0,"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else i.replaceChildWithTree(t,e)}});t.exports=u},function(t,e,n){"use strict";function r(t){var e=t.match(l);return e&&e[1].toLowerCase()}function i(t,e){var n=c;c?void 0:u(!1);var i=r(t),o=i&&s(i);if(o){n.innerHTML=o[1]+t+o[2];for(var l=o[0];l--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e?void 0:u(!1),a(h).forEach(e));for(var f=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return f}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var o=n(49),a=n(86),s=n(87),u=n(11),c=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i},function(t,e,n){"use strict";function r(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?a(!1):void 0,"number"!=typeof e?a(!1):void 0,0===e||e-1 in t?void 0:a(!1),"function"==typeof t.callee?a(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var r=Array(e),i=0;i<e;i++)r[i]=t[i];return r}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return i(t)?Array.isArray(t)?t.slice():r(t):[t]}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var a=n(11);t.exports=o},function(t,e,n){"use strict";function r(t){return a?void 0:o(!1),f.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?f[t]:null}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
var i=n(49),o=n(11),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l},d=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];d.forEach(function(t){f[t]=h,s[t]=!0}),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(77),i=n(35),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);r.processUpdates(n,e)}};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t,e){e&&($[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?g("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?g("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&z in e.dangerouslySetInnerHTML?void 0:g("61")),null!=e.style&&"object"!=typeof e.style?g("62",r(t)):void 0)}function o(t,e,n,r){if(!(r instanceof I)){var i=t._hostContainerInfo,o=i._node&&i._node.nodeType===Y,s=o?i._node:i._ownerDocument;B(e,s),r.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;S.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;C.postMountWrapper(t)}function u(){var t=this;L.postMountWrapper(t)}function c(){var t=this;P.postMountWrapper(t)}function l(){F.track(this)}function h(){var t=this;t._rootNodeID?void 0:g("63");var e=j(t);switch(e?void 0:g("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[R.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in X)X.hasOwnProperty(n)&&t._wrapperState.listeners.push(R.trapBubbledEvent(n,X[n],e));break;case"source":t._wrapperState.listeners=[R.trapBubbledEvent("topError","error",e)];break;case"img":t._wrapperState.listeners=[R.trapBubbledEvent("topError","error",e),R.trapBubbledEvent("topLoad","load",e)];break;case"form":t._wrapperState.listeners=[R.trapBubbledEvent("topReset","reset",e),R.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[R.trapBubbledEvent("topInvalid","invalid",e)]}}function f(){M.postUpdateWrapper(this)}function d(t){Q.call(Z,t)||(J.test(t)?void 0:g("65",t),Z[t]=!0)}function p(t,e){return t.indexOf("-")>=0||null!=e.is}function v(t){var e=t.type;d(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var g=n(36),y=n(3),m=n(90),_=n(92),b=n(78),E=n(79),T=n(37),x=n(100),S=n(43),w=n(44),R=n(102),A=n(38),O=n(35),C=n(105),P=n(108),M=n(109),L=n(110),k=(n(63),n(111)),I=n(130),D=(n(8),n(83)),F=(n(11),n(67),n(119),n(65)),N=(n(133),n(7),A),U=S.deleteListener,j=O.getNodeFromInstance,B=R.listenTo,G=w.registrationNameModules,H={string:!0,number:!0},W="style",z="__html",V={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},Y=11,X={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},q={listing:!0,pre:!0,textarea:!0},$=y({menuitem:!0},K),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},Q={}.hasOwnProperty,tt=1;v.displayName="ReactDOMComponent",v.Mixin={mountComponent:function(t,e,n,r){this._rootNodeID=tt++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(h,this);break;case"input":C.mountWrapper(this,o,e),o=C.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(h,this);break;case"option":P.mountWrapper(this,o,e),o=P.getHostProps(this,o);break;case"select":M.mountWrapper(this,o,e),o=M.getHostProps(this,o),t.getReactMountReady().enqueue(h,this);break;case"textarea":L.mountWrapper(this,o,e),o=L.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(h,this)}i(this,o);var a,f;null!=e?(a=e._namespaceURI,f=e._tag):n._tag&&(a=n._namespaceURI,f=n._tag),(null==a||a===E.svg&&"foreignobject"===f)&&(a=E.html),a===E.html&&("svg"===this._tag?a=E.svg:"math"===this._tag&&(a=E.mathml)),this._namespaceURI=a;var d;if(t.useCreateElement){var p,v=n._ownerDocument;if(a===E.html)if("script"===this._tag){var g=v.createElement("div"),y=this._currentElement.type;g.innerHTML="<"+y+"></"+y+">",p=g.removeChild(g.firstChild)}else p=o.is?v.createElement(this._currentElement.type,o.is):v.createElement(this._currentElement.type);else p=v.createElementNS(a,this._currentElement.type);O.precacheNode(this,p),this._flags|=N.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(p),this._updateDOMProperties(null,o,t);var _=b(p);this._createInitialChildren(t,o,r,_),d=_}else{var T=this._createOpenTagMarkupAndPutListeners(t,o),S=this._createContentMarkup(t,o,r);d=!S&&K[this._tag]?T+"/>":T+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),o.autoFocus&&t.getReactMountReady().enqueue(m.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(u,this),o.autoFocus&&t.getReactMountReady().enqueue(m.focusDOMComponent,this);break;case"select":o.autoFocus&&t.getReactMountReady().enqueue(m.focusDOMComponent,this);break;case"button":o.autoFocus&&t.getReactMountReady().enqueue(m.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(c,this)}return d},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i)if(G.hasOwnProperty(r))i&&o(this,r,i,t);else{r===W&&(i&&(i=this._previousStyleCopy=y({},e.style)),i=_.createMarkupForStyles(i,this));var a=null;null!=this._tag&&p(this._tag,e)?V.hasOwnProperty(r)||(a=x.createMarkupForCustomAttribute(r,i)):a=x.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var r="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=H[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)r=D(o);else if(null!=a){var s=this.mountChildren(a,t,n);r=s.join("")}}return q[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(r,i.__html);else{var o=H[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)""!==o&&b.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,t,n),u=0;u<s.length;u++)b.queueChild(r,s[u])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var o=e.props,a=this._currentElement.props;switch(this._tag){case"input":o=C.getHostProps(this,o),a=C.getHostProps(this,a);break;case"option":o=P.getHostProps(this,o),a=P.getHostProps(this,a);break;case"select":o=M.getHostProps(this,o),a=M.getHostProps(this,a);break;case"textarea":o=L.getHostProps(this,o),a=L.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,t),this._updateDOMChildren(o,a,t,r),this._tag){case"input":C.updateWrapper(this),F.updateValueIfChanged(this);break;case"textarea":L.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(f,this)}},_updateDOMProperties:function(t,e,n){var r,i,a;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if(r===W){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else G.hasOwnProperty(r)?t[r]&&U(this,r):p(this._tag,t)?V.hasOwnProperty(r)||x.deleteValueForAttribute(j(this),r):(T.properties[r]||T.isCustomAttribute(r))&&x.deleteValueForProperty(j(this),r);for(r in e){var u=e[r],c=r===W?this._previousStyleCopy:null!=t?t[r]:void 0;if(e.hasOwnProperty(r)&&u!==c&&(null!=u||null!=c))if(r===W)if(u?u=this._previousStyleCopy=y({},u):this._previousStyleCopy=null,c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(a=a||{},a[i]=u[i])}else a=u;else if(G.hasOwnProperty(r))u?o(this,r,u,n):c&&U(this,r);else if(p(this._tag,e))V.hasOwnProperty(r)||x.setValueForAttribute(j(this),r,u);else if(T.properties[r]||T.isCustomAttribute(r)){var l=j(this);null!=u?x.setValueForProperty(l,r,u):x.deleteValueForProperty(l,r)}}a&&_.setValueForStyles(j(this),a,this)},_updateDOMChildren:function(t,e,n,r){var i=H[typeof t.children]?t.children:null,o=H[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=i?null:t.children,c=null!=o?null:e.children,l=null!=i||null!=a,h=null!=o||null!=s;null!=u&&null==c?this.updateChildren(null,n,r):l&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,r)},getHostNode:function(){return j(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"input":case"textarea":F.stopTracking(this);break;case"html":case"head":case"body":g("66",this._tag)}this.unmountChildren(t),O.uncacheNode(this),S.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return j(this)}},y(v.prototype,v.Mixin,k.Mixin),t.exports=v},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(35),i=n(91),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};t.exports=o},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(93),i=n(49),o=(n(63),n(94),n(96)),a=n(97),s=n(99),u=(n(7),s(function(t){return a(t)})),c=!1,l="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(f){c=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var d={createMarkupForStyles:function(t,e){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),a=t[r];null!=a&&(n+=u(r)+":",n+=o(r,a,e,i)+";")}return n||null},setValueForStyles:function(t,e,n){var i=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=0===a.indexOf("--"),u=o(a,e[a],n,s);if("float"!==a&&"cssFloat"!==a||(a=l),s)i.setProperty(a,u);else if(u)i[a]=u;else{var h=c&&r.shorthandPropertyExpansions[a];if(h)for(var f in h)i[f]="";else i[a]=""}}}};t.exports=d},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){i.forEach(function(e){r[n(e,t)]=r[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=a},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(95),o=/^-ms-/;t.exports=r},function(t,e){"use strict";function n(t){return t.replace(r,function(t,e){return e.toUpperCase()})}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var r=/-(.)/g;t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){var i=null==e||"boolean"==typeof e||""===e;if(i)return"";var a=isNaN(e);if(r||a||0===e||o.hasOwnProperty(t)&&o[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var i=n(93),o=(n(7),i.isUnitlessNumber);t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(98),o=/^ms-/;t.exports=r},function(t,e){"use strict";function n(t){return t.replace(r,"-$1").toLowerCase()}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var r=/([A-Z])/g;t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 * @typechecks static-only
	 */
"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return!!c.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(s.test(t)?(c[t]=!0,!0):(u[t]=!0,!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var o=n(37),a=(n(35),n(63),n(101)),s=(n(7),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},c={},l={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){if(i(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?r+'=""':r+"="+a(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var r=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(r){var a=r.mutationMethod;if(a)a(t,n);else{if(i(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?t.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(e))return void l.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(r(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?t[i]=!1:t[i]=""}else t.removeAttribute(n.attributeName)}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=l},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return'"'+i(t)+'"'}var i=n(83);t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=d++,h[t[v]]={}),h[t[v]]}var i,o=n(3),a=n(44),s=n(103),u=n(73),c=n(104),l=n(67),h={},f=!1,d=0,p={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=r(n),o=a.registrationNameDependencies[t],s=0;s<o.length;s++){var u=o[s];i.hasOwnProperty(u)&&i[u]||("topWheel"===u?l("wheel")?g.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?g.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):g.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?l("scroll",!0)?g.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):g.ReactEventListener.trapBubbledEvent("topScroll","scroll",g.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(l("focus",!0)?(g.ReactEventListener.trapCapturedEvent("topFocus","focus",n),g.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(g.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),g.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):p.hasOwnProperty(u)&&g.ReactEventListener.trapBubbledEvent(u,p[u],n),i[u]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var t=document.createEvent("MouseEvent");return null!=t&&"pageX"in t},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=g.supportsEventPageXY()),!i&&!f){var t=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),f=!0}}});t.exports=g},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(43),o={handleTopLevel:function(t,e,n,o){var a=i.extractEvents(t,e,n,o);r(a)}};t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return s[t]=e[n];return""}var o=n(49),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){this._rootNodeID&&f.updateWrapper(this)}function i(t){var e="checkbox"===t.type||"radio"===t.type;return e?null!=t.checked:null!=t.value}function o(t){var e=this._currentElement.props,n=c.executeOnChange(e,t);h.asap(r,this);var i=e.name;if("radio"===e.type&&null!=i){for(var o=l.getNodeFromInstance(this),s=o;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0;f<u.length;f++){var d=u[f];if(d!==o&&d.form===o.form){var p=l.getInstanceFromNode(d);p?void 0:a("90"),h.asap(r,p)}}}return n}var a=n(36),s=n(3),u=n(100),c=n(106),l=n(35),h=n(57),f=(n(11),n(7),{getHostProps:function(t,e){var n=c.getValue(e),r=c.getChecked(e),i=s({type:void 0,step:void 0,min:void 0,max:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:o.bind(t),controlled:i(e)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&u.setValueForProperty(l.getNodeFromInstance(t),"checked",n||!1);var r=l.getNodeFromInstance(t),i=c.getValue(e);if(null!=i)if(0===i&&""===r.value)r.value="0";else if("number"===e.type){var o=parseFloat(r.value,10)||0;(i!=o||i==o&&r.value!=i)&&(r.value=""+i)}else r.value!==""+i&&(r.value=""+i);else null==e.value&&null!=e.defaultValue&&r.defaultValue!==""+e.defaultValue&&(r.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(r.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=f},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink?s("87"):void 0}function i(t){r(t),null!=t.value||null!=t.onChange?s("88"):void 0}function o(t){r(t),null!=t.checked||null!=t.onChange?s("89"):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(36),u=n(107),c=n(23),l=n(2),h=c(l.isValidElement),f=(n(11),n(7),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),d={value:function(t,e,n){return!t[e]||f[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:h.func},p={},v={checkPropTypes:function(t,e,n){for(var r in d){if(d.hasOwnProperty(r))var i=d[r](e,r,t,"prop",null,u);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=v},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){var e="";return o.Children.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:u||(u=!0))}),e}var i=n(3),o=n(2),a=n(35),s=n(109),u=(n(7),!1),c={mountWrapper:function(t,e,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var u;if(u=null!=e.value?e.value+"":r(e.children),a=!1,Array.isArray(i)){for(var c=0;c<i.length;c++)if(""+i[c]===u){a=!0;break}}else a=""+i===u}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=a.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var o=r(e.children);return o&&(n.children=o),n}};t.exports=c},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=s.getValue(t);null!=e&&i(this,Boolean(t.multiple),e)}}function i(t,e,n){var r,i,o=u.getNodeFromInstance(t).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(3),s=n(106),u=n(35),c=n(57),l=(n(7),!1),h={getHostProps:function(t,e){return a({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=s.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:o.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||l||(l=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=s.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,i(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?i(t,Boolean(e.multiple),e.defaultValue):i(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=h},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){this._rootNodeID&&l.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return c.asap(r,this),n}var o=n(36),a=n(3),s=n(106),u=n(35),c=n(57),l=(n(11),n(7),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=s.getValue(e),r=n;if(null==n){var a=e.defaultValue,u=e.children;null!=u&&(null!=a?o("92"):void 0,Array.isArray(u)&&(u.length<=1?void 0:o("93"),u=u[0]),a=""+u),null==a&&(a=""),r=a}t._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t),n=e.textContent;n===t._wrapperState.initialValue&&(e.value=n)}});t.exports=l},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n){return{type:"INSERT_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:"MOVE_EXISTING",content:null,fromIndex:t._mountIndex,fromNode:f.getHostNode(t),toIndex:n,afterNode:e}}function o(t,e){return{type:"REMOVE_NODE",content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function c(t,e){h.processChildrenUpdates(t,e)}var l=n(36),h=n(112),f=(n(113),n(63),n(16),n(60)),d=n(114),p=(n(8),n(129)),v=(n(11),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return d.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,r,i,o){var a,s=0;return a=p(e,s),d.updateChildren(t,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,c=f.mountComponent(s,e,this,this._hostContainerInfo,n,u);s._mountIndex=o++,i.push(c)}return i},updateTextContent:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");var r=[s(t)];c(this,r)},updateMarkup:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");var r=[a(t)];c(this,r)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,t,o,i,e,n);if(a||r){var s,l=null,h=0,d=0,p=0,v=null;for(s in a)if(a.hasOwnProperty(s)){var g=r&&r[s],y=a[s];g===y?(l=u(l,this.moveChild(g,v,h,d)),d=Math.max(g._mountIndex,d),g._mountIndex=h):(g&&(d=Math.max(g._mountIndex,d)),l=u(l,this._mountChildAtIndex(y,o[p],v,h,e,n)),p++),h++,v=f.getHostNode(y)}for(s in i)i.hasOwnProperty(s)&&(l=u(l,this._unmountChild(r[s],i[s])));l&&c(this,l),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;d.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return i(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return o(t,e)},_mountChildAtIndex:function(t,e,n,r,i,o){return t._mountIndex=r,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=v},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=n(36),i=(n(11),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i?r("104"):void 0,o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e,n){(function(e){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){var i=void 0===t[n];null!=e&&i&&(t[n]=o(e,!0))}var i=n(60),o=n(116),a=(n(124),n(120)),s=n(125),u=(n(7),{instantiateChildren:function(t,e,n,i){if(null==t)return null;var o={};return s(t,r,o),o},updateChildren:function(t,e,n,r,s,u,c,l,h){if(e||t){var f,d;for(f in e)if(e.hasOwnProperty(f)){d=t&&t[f];var p=d&&d._currentElement,v=e[f];if(null!=d&&a(p,v))i.receiveComponent(d,v,s,l),e[f]=d;else{d&&(r[f]=i.getHostNode(d),i.unmountComponent(d,!1));var g=o(v,!0);e[f]=g;var y=i.mountComponent(g,s,u,c,l,h);n.push(y)}}for(f in t)!t.hasOwnProperty(f)||e&&e.hasOwnProperty(f)||(d=t[f],r[f]=i.getHostNode(d),i.unmountComponent(d,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}});t.exports=u}).call(e,n(115))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=p.length;e;){for(d=p,p=[];++g<e;)d&&d[g].run();g=-1,e=p.length}d=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,p=[],v=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t,e){var n;if(null===t||t===!1)n=c.create(o);else if("object"==typeof t){var s=t,u=s.type;if("function"!=typeof u&&"string"!=typeof u){var f="";f+=r(s._owner),a("130",null==u?u:typeof u,f)}"string"==typeof s.type?n=l.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof t||"number"==typeof t?n=l.createInstanceForText(t):a("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}var a=n(36),s=n(3),u=n(117),c=n(121),l=n(122),h=(n(123),n(11),n(7),function(t){this.construct(t)});s(h.prototype,u,{_instantiateReactComponent:o}),t.exports=o},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){}function i(t,e){}function o(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var s=n(36),u=n(3),c=n(2),l=n(112),h=n(16),f=n(46),d=n(113),p=(n(63),n(118)),v=n(60),g=n(10),y=(n(11),n(119)),m=n(120),_=(n(7),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var t=d.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return i(t,e),e};var b=1,E={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,u){this._context=u,this._mountOrder=b++,this._hostParent=e,this._hostContainerInfo=n;var l,h=this._currentElement.props,f=this._processContext(u),p=this._currentElement.type,v=t.getUpdateQueue(),y=o(p),m=this._constructComponent(y,h,f,v);y||null!=m&&null!=m.render?a(p)?this._compositeType=_.PureClass:this._compositeType=_.ImpureClass:(l=m,i(p,l),null===m||m===!1||c.isValidElement(m)?void 0:s("105",p.displayName||p.name||"Component"),m=new r(p),this._compositeType=_.StatelessFunctional);m.props=h,m.context=f,m.refs=g,m.updater=v,this._instance=m,d.set(m,this);var E=m.state;void 0===E&&(m.state=E=null),"object"!=typeof E||Array.isArray(E)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var T;return T=m.unstable_handleError?this.performInitialMountWithErrorHandling(l,e,n,t,u):this.performInitialMount(l,e,n,t,u),m.componentDidMount&&t.getReactMountReady().enqueue(m.componentDidMount,m),T},_constructComponent:function(t,e,n,r){return this._constructComponentWithoutOwner(t,e,n,r)},_constructComponentWithoutOwner:function(t,e,n,r){var i=this._currentElement.type;return t?new i(e,n,r):i(e,n,r)},performInitialMountWithErrorHandling:function(t,e,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(t,e,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(t,e,n,r,i)}return o},performInitialMount:function(t,e,n,r,i){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var s=p.getType(t);this._renderedNodeType=s;var u=this._instantiateReactComponent(t,s!==p.EMPTY);this._renderedComponent=u;var c=v.mountComponent(u,r,e,n,this._processChildContext(i),a);return c},getHostNode:function(){return v.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(v.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return g;var r={};for(var i in n)r[i]=t[i];return r},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(e=r.getChildContext()),e){"object"!=typeof n.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in e)i in n.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return u({},t,e)}return t},_checkContextTypes:function(t,e,n){},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?v.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,i){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u=!1;this._context===i?a=o.context:(a=this._processContext(i),u=!0);var c=e.props,l=n.props;e!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(l,a);var h=this._processPendingState(l,a),f=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?f=o.shouldComponentUpdate(l,h,a):this._compositeType===_.PureClass&&(f=!y(c,l)||!y(o.state,h))),this._updateBatchNumber=null,f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,l,h,a,t,i)):(this._currentElement=n,this._context=i,o.props=l,o.state=h,o.context=a)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=u({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];u(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a,s,u,c=this._instance,l=Boolean(c.componentDidUpdate);l&&(a=c.props,s=c.state,u=c.context),c.componentWillUpdate&&c.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,c.props=e,c.state=n,c.context=r,this._updateRenderedComponent(i,o),l&&i.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,u),c)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent(),o=0;if(m(r,i))v.receiveComponent(n,i,t,this._processChildContext(e));else{var a=v.getHostNode(n);v.unmountComponent(n,!1);var s=p.getType(i);this._renderedNodeType=s;var u=this._instantiateReactComponent(i,s!==p.EMPTY);this._renderedComponent=u;var c=v.mountComponent(u,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),o);this._replaceNodeWithMarkup(a,c,n)}},_replaceNodeWithMarkup:function(t,e,n){l.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t,e=this._instance;return t=e.render()},_renderValidatedComponent:function(){var t;if(this._compositeType!==_.StatelessFunctional){h.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{h.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||c.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=e.getPublicInstance(),i=n.refs===g?n.refs={}:n.refs;i[t]=r},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===_.StatelessFunctional?null:t},_instantiateReactComponent:null};t.exports=E},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var r=n(36),i=n(2),o=(n(11),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?o.EMPTY:i.isValidElement(t)?"function"==typeof t.type?o.COMPOSITE:o.HOST:void r("26",t)}});t.exports=o},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 * 
	 */
"use strict";function n(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function r(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(e,r[a])||!n(t[r[a]],e[r[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n,r={injectEmptyComponentFactory:function(t){n=t}},i={create:function(t){return n(t)}};i.injection=r,t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return s?void 0:a("111",t.type),new s(t)}function i(t){return new u(t)}function o(t){return t instanceof u}var a=n(36),s=(n(11),null),u=null,c={injectGenericComponentClass:function(t){s=t},injectTextComponentClass:function(t){u=t}},l={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:c};t.exports=l},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(){return r++}var r=1;t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+t).replace(e,function(t){return n[t]});return"$"+r}function r(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+r).replace(e,function(t){return n[t]})}var i={escape:n,unescape:r};t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var f=typeof t;if("undefined"!==f&&"boolean"!==f||(t=null),null===t||"string"===f||"number"===f||"object"===f&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var d,p,v=0,g=""===e?l:e+h;if(Array.isArray(t))for(var y=0;y<t.length;y++)d=t[y],p=g+r(d,y),v+=i(d,p,n,o);else{var m=u(t);if(m){var _,b=m.call(t);if(m!==t.entries)for(var E=0;!(_=b.next()).done;)d=_.value,p=g+r(d,E++),v+=i(d,p,n,o);else for(;!(_=b.next()).done;){var T=_.value;T&&(d=T[1],p=g+c.escape(T[0])+h+r(d,0),v+=i(d,p,n,o))}}else if("object"===f){var x="",S=String(t);a("31","[object Object]"===S?"object with keys {"+Object.keys(t).join(", ")+"}":S,x)}}return v}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(36),s=(n(16),n(126)),u=n(127),c=(n(11),n(124)),l=(n(7),"."),h=":";t.exports=o},function(t,e){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";var n="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){var e=t&&(r&&t[r]||t[i]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2016-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(o){return!1}}function i(t){var e=c(t);if(e){var n=e.childIDs;l(t),n.forEach(i)}}function o(t,e,n){return"\n    in "+(t||"Unknown")+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function a(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function s(t){var e,n=w.getDisplayName(t),r=w.getElement(t),i=w.getOwnerID(t);return i&&(e=w.getDisplayName(i)),o(n,r&&r._source,e)}var u,c,l,h,f,d,p,v=n(5),g=n(16),y=(n(11),n(7),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));if(y){var m=new Map,_=new Set;u=function(t,e){m.set(t,e)},c=function(t){return m.get(t)},l=function(t){m["delete"](t)},h=function(){return Array.from(m.keys())},f=function(t){_.add(t)},d=function(t){_["delete"](t)},p=function(){return Array.from(_.keys())}}else{var b={},E={},T=function(t){return"."+t},x=function(t){return parseInt(t.substr(1),10)};u=function(t,e){var n=T(t);b[n]=e},c=function(t){var e=T(t);return b[e]},l=function(t){var e=T(t);delete b[e]},h=function(){return Object.keys(b).map(x)},f=function(t){var e=T(t);E[e]=!0},d=function(t){var e=T(t);delete E[e]},p=function(){return Object.keys(E).map(x)}}var S=[],w={onSetChildren:function(t,e){var n=c(t);n?void 0:v("144"),n.childIDs=e;for(var r=0;r<e.length;r++){var i=e[r],o=c(i);o?void 0:v("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element?v("141"):void 0,o.isMounted?void 0:v("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t?v("142",i,o.parentID,t):void 0}},onBeforeMountComponent:function(t,e,n){var r={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};u(t,r)},onBeforeUpdateComponent:function(t,e){var n=c(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=c(t);e?void 0:v("144"),e.isMounted=!0;var n=0===e.parentID;n&&f(t)},onUpdateComponent:function(t){var e=c(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=c(t);if(e){e.isMounted=!1;var n=0===e.parentID;n&&d(t)}S.push(t)},purgeUnmountedComponents:function(){if(!w._preventPurging){for(var t=0;t<S.length;t++){var e=S[t];i(e)}S.length=0}},isMounted:function(t){var e=c(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=a(t),r=t._owner;e+=o(n,t._source,r&&r.getName())}var i=g.current,s=i&&i._debugID;return e+=w.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=s(t),t=w.getParentID(t);return e},getChildIDs:function(t){var e=c(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=w.getElement(t);return e?a(e):null},getElement:function(t){var e=c(t);return e?e.element:null},getOwnerID:function(t){var e=w.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=c(t);return e?e.parentID:null},getSource:function(t){var e=c(t),n=e?e.element:null,r=null!=n?n._source:null;return r},getText:function(t){var e=w.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=c(t);return e?e.updateCount:0},getRootIDs:p,getRegisteredIDs:h,pushNonStandardWarningStack:function(t,e){if("function"==typeof console.reactStack){var n=[],r=g.current,i=r&&r._debugID;try{for(t&&n.push({name:i?w.getDisplayName(i):null,fileName:e?e.fileName:null,lineNumber:e?e.lineNumber:null});i;){var o=w.getElement(i),a=w.getParentID(i),s=w.getOwnerID(i),u=s?w.getDisplayName(s):null,c=o&&o._source;n.push({name:u,fileName:c?c.fileName:null,lineNumber:c?c.lineNumber:null}),i=a}}catch(l){}}},popNonStandardWarningStack:function(){"function"!=typeof console.reactStackEnd}};t.exports=w},function(t,e,n){(function(e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e,n,r){if(t&&"object"==typeof t){var i=t,o=void 0===i[n];o&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return o(t,r,n),n}var o=(n(124),n(125));n(7);t.exports=i}).call(e,n(115))},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(3),o=n(51),a=n(64),s=(n(63),n(131)),u=[],c={enqueue:function(){}},l={getTransactionWrappers:function(){return u},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,l),o.addPoolingTo(r),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){}var o=n(132),a=(n(7),function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&o.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?o.enqueueForceUpdate(t):i(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?o.enqueueReplaceState(t,e):i(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?o.enqueueSetState(t,e):i(t,"setState")},t}());t.exports=a},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){u.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(36),s=(n(16),n(113)),u=(n(63),n(57)),c=(n(11),n(7),{isMounted:function(t){var e=s.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){c.validateCallback(e,n);var i=o(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void r(i)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e,n){var i=o(t,"replaceState");i&&(i._pendingStateQueue=[e],i._pendingReplaceState=!0,void 0!==n&&null!==n&&(c.validateCallback(n,"replaceState"),i._pendingCallbacks?i._pendingCallbacks.push(n):i._pendingCallbacks=[n]),r(i))},enqueueSetState:function(t,e){var n=o(t,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(e),r(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!=typeof t?a("122",e,i(t)):void 0}});t.exports=c},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=(n(3),n(8)),i=(n(7),r);t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(3),i=n(78),o=n(35),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(t,e,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,c=u.createComment(s);return o.precacheNode(this,c),i(c)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},function(t,e,n){/**
	 * Copyright (c) 2015-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){"_hostNode"in t?void 0:u("33"),"_hostNode"in e?void 0:u("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var i=0,o=e;o;o=o._hostParent)i++;for(;n-i>0;)t=t._hostParent,n--;for(;i-n>0;)e=e._hostParent,i--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t?void 0:u("35"),"_hostNode"in e?void 0:u("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function o(t){return"_hostNode"in t?void 0:u("36"),t._hostParent}function a(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var i;for(i=r.length;i-- >0;)e(r[i],"captured",n);for(i=0;i<r.length;i++)e(r[i],"bubbled",n)}function s(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var u=[];e&&e!==a;)u.push(e),e=e._hostParent;var c;for(c=0;c<s.length;c++)n(s[c],"bubbled",i);for(c=u.length;c-- >0;)n(u[c],"captured",o)}var u=n(36);n(11);t.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(36),i=n(3),o=n(77),a=n(78),s=n(35),u=n(83),c=(n(11),n(133),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(c.prototype,{mountComponent:function(t,e,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",c=" /react-text ";if(this._domID=i,this._hostParent=e,t.useCreateElement){var l=n._ownerDocument,h=l.createComment(o),f=l.createComment(c),d=a(l.createDocumentFragment());return a.queueChild(d,a(h)),this._stringText&&a.queueChild(d,a(l.createTextNode(this._stringText))),a.queueChild(d,a(f)),s.precacheNode(this,h),this._closingComment=f,d}var p=u(this._stringText);return t.renderToStaticMarkup?p:"<!--"+o+"-->"+p+"<!--"+c+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=c},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(){this.reinitializeTransaction()}var i=n(3),o=n(57),a=n(64),s=n(8),u={initialize:s,close:function(){f.isBatchingUpdates=!1}},c={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[c,u];i(r.prototype,a,{getTransactionWrappers:function(){return l}});var h=new r,f={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=f.isBatchingUpdates;return f.isBatchingUpdates=!0,a?t(e,n,r,i,o):h.perform(t,null,e,n,r,i,o)}};t.exports=f},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=h.getNodeFromInstance(t),n=e.parentNode;return h.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){var e=d(t.nativeEvent),n=h.getClosestInstanceFromNode(e),i=n;do t.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<t.ancestors.length;o++)n=t.ancestors[o],v._handleTopLevel(t.topLevelType,n,t.nativeEvent,d(t.nativeEvent))}function a(t){var e=p(window);t(e)}var s=n(3),u=n(139),c=n(49),l=n(51),h=n(35),f=n(57),d=n(66),p=n(140);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,n){return n?u.listen(n,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){return n?u.capture(n,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var n=i.getPooled(t,e);try{f.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=v},function(t,e,n){"use strict";/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var r=n(8),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
"use strict";function n(t){return t.Window&&t instanceof t.Window?{x:t.pageXOffset||t.document.documentElement.scrollLeft,y:t.pageYOffset||t.document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(37),i=n(43),o=n(45),a=n(112),s=n(121),u=n(102),c=n(122),l=n(57),h={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:l.injection};t.exports=h},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=t}var i=n(3),o=n(58),a=n(51),s=n(102),u=n(143),c=(n(63),n(64)),l=n(132),h={initialize:u.getSelectionInformation,close:u.restoreSelection},f={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p=[h,f,d],v={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return l},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,c,v),a.addPoolingTo(r),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){return o(document.documentElement,t)}var i=n(144),o=n(146),a=n(91),s=n(149),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=u},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(u){return null}var c=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),l=c?0:s.toString().length,h=s.cloneRange();h.selectNodeContents(t),h.setEnd(s.startContainer,s.startOffset);var f=r(h.startContainer,h.startOffset,h.endContainer,h.endOffset),d=f?0:h.toString().length,p=d+l,v=document.createRange();v.setStart(n,i),v.setEnd(o,a);var g=v.collapsed;return{start:g?p:d,end:g?d:p}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[l()].length,i=Math.min(e.start,r),o=void 0===e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(t,i),u=c(t,o);if(s&&u){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}var u=n(49),c=n(145),l=n(52),h=u.canUseDOM&&"selection"in document&&!("getSelection"in window),f={getOffsets:h?i:o,setOffsets:h?a:s};t.exports=f},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=e&&a>=e)return{node:i,offset:e-o};o=a}i=n(r(i))}}t.exports=i},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
var i=n(147);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
var i=n(148);t.exports=r},function(t,e){"use strict";/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
function n(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"==typeof n.Node?t instanceof n.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e){"use strict";/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * @typechecks
	 */
function n(t){if(t=t||("undefined"!=typeof document?document:void 0),"undefined"==typeof t)return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(t){i.Properties[t]=0,r[t]&&(i.DOMAttributeNames[t]=r[t])}),t.exports=i},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(m||null==v||v!==l())return null;var n=r(v);if(!y||!f(y,n)){y=n;var i=c.getPooled(p.select,g,t,e);return i.type="select",i.target=v,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(42),a=n(49),s=n(35),u=n(143),c=n(54),l=n(149),h=n(68),f=n(119),d=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,p={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},v=null,g=null,y=null,m=!1,_=!1,b={eventTypes:p,extractEvents:function(t,e,n,r){if(!_)return null;var o=e?s.getNodeFromInstance(e):window;switch(t){case"topFocus":(h(o)||"true"===o.contentEditable)&&(v=o,g=e,y=null);break;case"topBlur":v=null,g=null,y=null;break;case"topMouseDown":m=!0;break;case"topContextMenu":case"topMouseUp":return m=!1,i(n,r);case"topSelectionChange":if(d)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(t,e,n){"onSelect"===e&&(_=!0)}};t.exports=b},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function r(t){return"."+t._rootNodeID}function i(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}var o=n(36),a=n(139),s=n(42),u=n(35),c=n(153),l=n(154),h=n(54),f=n(155),d=n(156),p=n(71),v=n(159),g=n(160),y=n(161),m=n(72),_=n(162),b=n(8),E=n(157),T=(n(11),{}),x={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(t){var e=t[0].toUpperCase()+t.slice(1),n="on"+e,r="top"+e,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};T[t]=i,x[r]=i});var S={},w={eventTypes:T,extractEvents:function(t,e,n,r){var i=x[t];if(!i)return null;var a;switch(t){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=h;break;case"topKeyPress":if(0===E(n))return null;case"topKeyDown":case"topKeyUp":a=d;break;case"topBlur":case"topFocus":a=f;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=p;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=v;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=g;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=c;break;case"topTransitionEnd":a=y;break;case"topScroll":a=m;break;case"topWheel":a=_;break;case"topCopy":case"topCut":case"topPaste":a=l}a?void 0:o("86",t);var u=a.getPooled(i,e,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(t,e,n){if("onClick"===e&&!i(t._tag)){var o=r(t),s=u.getNodeFromInstance(t);S[o]||(S[o]=a.listen(s,"click",b))}},willDeleteListener:function(t,e){if("onClick"===e&&!i(t._tag)){var n=r(t);S[n].remove(),delete S[n]}}};t.exports=w},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(72),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(72),o=n(157),a=n(158),s=n(74),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(157),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(71),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(72),o=n(74),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(54),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(71),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===I?t.documentElement:t.firstChild:null}function o(t){return t.getAttribute&&t.getAttribute(M)||""}function a(t,e,n,r,i){var o;if(E.logTopLevelRenders){var a=t._currentElement.props.child,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name)}var u=S.mountComponent(t,n,null,_(t,e),i,0);t._renderedComponent._topLevelWrapper=t,j._mountImageIntoNode(u,e,t,r,n)}function s(t,e,n,r){var i=R.ReactReconcileTransaction.getPooled(!n&&b.useCreateElement);i.perform(a,null,t,e,i,n,r),R.ReactReconcileTransaction.release(i)}function u(t,e,n){for(S.unmountComponent(t,n),e.nodeType===I&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function c(t){var e=i(t);if(e){var n=m.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function l(t){return!(!t||t.nodeType!==k&&t.nodeType!==I&&t.nodeType!==D)}function h(t){var e=i(t),n=e&&m.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function f(t){var e=h(t);return e?e._hostContainerInfo._topLevelWrapper:null}var d=n(36),p=n(78),v=n(37),g=n(2),y=n(102),m=(n(16),n(35)),_=n(164),b=n(165),E=n(59),T=n(113),x=(n(63),n(166)),S=n(60),w=n(132),R=n(57),A=n(10),O=n(116),C=(n(11),n(80)),P=n(120),M=(n(7),v.ID_ATTRIBUTE_NAME),L=v.ROOT_ATTRIBUTE_NAME,k=1,I=9,D=11,F={},N=1,U=function(){this.rootID=N++};U.prototype.isReactComponent={},U.prototype.render=function(){return this.props.child},U.isReactTopLevelWrapper=!0;var j={TopLevelWrapper:U,_instancesByReactRootID:F,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,i){return j.scrollMonitor(r,function(){w.enqueueElementInternal(t,e,n),i&&w.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,n,r){l(e)?void 0:d("37"),y.ensureScrollValueMonitoring();var i=O(t,!1);R.batchedUpdates(s,i,e,n,r);var o=i._instance.rootID;return F[o]=i,i},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&T.has(t)?void 0:d("38"),j._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){w.validateCallback(r,"ReactDOM.render"),g.isValidElement(e)?void 0:d("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=g.createElement(U,{child:e});if(t){var u=T.get(t);a=u._processChildContext(u._context)}else a=A;var l=f(n);if(l){var h=l._currentElement,p=h.props.child;if(P(p,e)){var v=l._renderedComponent.getPublicInstance(),y=r&&function(){r.call(v)};return j._updateRootComponent(l,s,a,n,y),v}j.unmountComponentAtNode(n)}var m=i(n),_=m&&!!o(m),b=c(n),E=_&&!l&&!b,x=j._renderNewRootComponent(s,n,E,a)._renderedComponent.getPublicInstance();return r&&r.call(x),x},render:function(t,e,n){return j._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){l(t)?void 0:d("40");var e=f(t);if(!e){c(t),1===t.nodeType&&t.hasAttribute(L);return!1}return delete F[e._instance.rootID],R.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,o,a){if(l(e)?void 0:d("41"),o){var s=i(e);if(x.canReuseMarkup(t,s))return void m.precacheNode(n,s);var u=s.getAttribute(x.CHECKSUM_ATTR_NAME);s.removeAttribute(x.CHECKSUM_ATTR_NAME);var c=s.outerHTML;s.setAttribute(x.CHECKSUM_ATTR_NAME,u);var h=t,f=r(h,c),v=" (client) "+h.substring(f-20,f+20)+"\n (server) "+c.substring(f-20,f+20);e.nodeType===I?d("42",v):void 0}if(e.nodeType===I?d("43"):void 0,a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);p.insertTreeBefore(e,t,null)}else C(e,t),m.precacheNode(n,e.firstChild)}};t.exports=j},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===i?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var i=(n(133),9);t.exports=r},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var n={useCreateElement:!0,useFiber:!1};t.exports=n},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(167),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return o.test(t)?t:t.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(t);return i===n}};t.exports=a},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 * 
	 */
"use strict";function n(t){for(var e=1,n=0,i=0,o=t.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(e+=t.charCodeAt(i))+(e+=t.charCodeAt(i+1))+(e+=t.charCodeAt(i+2))+(e+=t.charCodeAt(i+3));e%=r,n%=r}for(;i<o;i++)n+=e+=t.charCodeAt(i);return e%=r,n%=r,e|n<<16}var r=65521;t.exports=n},function(t,e){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";t.exports="15.6.2"},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);return e?(e=s(e),e?o.getNodeFromInstance(e):null):void("function"==typeof t.render?i("44"):i("45",Object.keys(t)))}var i=n(36),o=(n(16),n(35)),a=n(113),s=n(170);n(11),n(7);t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";function r(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=n(118);t.exports=r},function(t,e,n){/**
	 * Copyright (c) 2013-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 *
	 */
"use strict";var r=n(163);t.exports=r.renderSubtreeIntoContainer},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(173),o=n(305),a=n(306),s=n(307),u=n(349),c=n(352),l=n(353),h=n(354),f=n(355);!function(t){t[t.STAGE=0]="STAGE",t[t.REMOVE=1]="REMOVE",t[t.UPDATE_POSITION=2]="UPDATE_POSITION"}(r||(r={}));var d=function(){function t(t,e){void 0===e&&(e={}),this.parentElementId=t,this._playing=!1,this.repeatSchedulers=[],this.threadManagementSetList=[],this._processUpdatingContentTime=function(){return 0},this.redrawReserveId=null,this.refreshCommentsPositionReserveId=null,this.clearReserveId=null,this.slotCount=o["default"].isDefined(e.slotCount)?e.slotCount:a["default"].DEFAULT_SLOT_COUNT,this.parentElement=document.getElementById(t),this.updateCanvasSize(),this.pixiRenderer=i["default"]().autoDetectRenderer(this._canvasWidth,this._canvasHeight,{transparent:!0,antialias:!0},!(o["default"].isDefined(e.useWebGL)?e.useWebGL:a["default"].DEFAULT_USING_WEBGL_STATUS)),this.parentElement.appendChild(this.pixiRenderer.view),this.fitCanvasToParent(),this.updateParentElementSize(),this.stage=new(i["default"]().Container),this.fontFamiliesProvider=new s["default"],this.setFontFamilies(e.fontFamilies),this.contentLengthMs=o["default"].isDefined(e.contentLengthMs)?Math.floor(e.contentLengthMs):a["default"].NO_CONTENT_LENGTH,this.resolution=o["default"].isDefined(e.resolution)?e.resolution:a["default"].DEFAULT_RESOLUTION,o["default"].isDefined(e.processUpdatingContentTime)&&(this.processUpdatingContentTime=e.processUpdatingContentTime),this.stagingCommentsIntervalMs=o["default"].isDefined(e.stagingCommentsIntervalMs)?e.stagingCommentsIntervalMs:a["default"].AUTO_STAGING_COMMENTS_INTERVAL}return t.prototype.getChatAtOffset=function(t,e){var n=[],r=t*(this._canvasWidth/this.parentElement.clientWidth),i=e*(this._canvasHeight/this.parentElement.clientHeight);return this.threadManagementSetList.forEach(function(t){var e=t.getChatAtOffset(r,i);n=n.concat(e)}),n},Object.defineProperty(t.prototype,"element",{get:function(){return this.pixiRenderer.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.stage.visible},set:function(t){this.stage.visible=t,this.reserveRedraw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.stage.alpha},set:function(t){t>1&&(t=1),t<0&&(t=0),this.stage.alpha=t,this.reserveRedraw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(t){var e=this;this._contentLengthMs=o["default"].isDefined(t)?Math.floor(t):a["default"].NO_CONTENT_LENGTH,this.threadManagementSetList.forEach(function(t){t.contentLengthMs=e._contentLengthMs})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),t.prototype.setFont=function(t,e){this._setFont(t,e,!0)},t.prototype._setFont=function(t,e,n){this.fontFamiliesProvider.setFont(t,e),n&&this.refreshComments()},t.prototype.setFontFamilies=function(t){var e=this;void 0===t&&(t={}),Object.keys(t).forEach(function(n){e._setFont(n,t[n])})},t.prototype.resetFont=function(t){this.fontFamiliesProvider.resetFont(t),this.refreshComments()},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.pixiRenderer.resolution},set:function(t){this.setResolution(t),this.updateCanvasDisplayOnResize()},enumerable:!0,configurable:!0}),t.prototype.setResolution=function(t){this.pixiRenderer.resolution=t,this.threadManagementSetList.forEach(function(e){e.resolution=t})},Object.defineProperty(t.prototype,"stagingCommentsIntervalMs",{get:function(){return this._stagingCommentsIntervalMs},set:function(t){var e=o["default"].isUndefined(this._stagingCommentsIntervalMs)||this._stagingCommentsIntervalMs!==t;this._stagingCommentsIntervalMs=t<=0||t===a["default"].AUTO_STAGING_COMMENTS_INTERVAL?a["default"].AUTO_STAGING_COMMENTS_INTERVAL:t,e&&this.setupUpdatingCommentsSchedule(this._stagingCommentsIntervalMs===a["default"].AUTO_STAGING_COMMENTS_INTERVAL)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processUpdatingContentTime",{set:function(t){this._processUpdatingContentTime=t},enumerable:!0,configurable:!0}),t.prototype.play=function(){this._playing=!0},t.prototype.pause=function(){this._playing=!1},t.prototype.draw=function(){this.pixiRenderer.render(this.stage)},t.prototype.clear=function(){this.pixiRenderer.render(new(i["default"]().Container)),this.threadManagementSetList.forEach(function(t){t.clear()})},t.prototype.onResizedParent=function(t){o["default"].isUndefined(t)&&this.parentWidth===this.parentElement.clientWidth&&this.parentHeight===this.parentElement.clientHeight||(o["default"].isDefined(t)&&this.setResolution(t),this.updateCanvasSize(),this.updateCanvasDisplayOnResize(),this.updateParentElementSize())},t.prototype.updateCanvasSize=function(){this._canvasWidth=Math.ceil(a["default"].BASE_CANVAS_HEIGHT/this.parentElement.clientHeight*this.parentElement.clientWidth),this._canvasHeight=a["default"].BASE_CANVAS_HEIGHT},t.prototype.updateCanvasDisplayOnResize=function(){var t=this;this.clear(),this.pixiRenderer.resize(this._canvasWidth,this._canvasHeight),this.fitCanvasToParent(),this.threadManagementSetList.forEach(function(e){e.resize(t._canvasWidth,t._canvasHeight)}),this.reserveRefreshCommentsPosition()},t.prototype.fitCanvasToParent=function(){var t=this.pixiRenderer.view;t.style.position="absolute",t.style.width=this.parentElement.clientWidth+"px",t.style.height=this.parentElement.clientHeight+"px",t.style.left="0",t.style.top="0"},t.prototype.updateParentElementSize=function(){this.parentWidth=this.parentElement.clientWidth,this.parentHeight=this.parentElement.clientHeight},t.prototype.createThread=function(t,e){var n=new f["default"]({width:this._canvasWidth,height:this._canvasHeight,threadParams:t,chatConverter:e,slotCount:this.slotCount,contentLengthMs:this._contentLengthMs,resolution:this.pixiRenderer.resolution,fontFamiliesProvider:this.fontFamiliesProvider});return this.threadManagementSetList.push(n),this.stage.addChild(n.displayObject),this.registerThreadManagementSetEvents(n),n.getThreadProcessor()},t.prototype.registerThreadManagementSetEvents=function(t){var e=this;t.event("needRedraw").on(function(){e.reserveRedraw()}),t.event("needClear").on(function(){e.reserveClear()}),t.event("needUpdate").on(function(){e._playing||e.updateComments([r.REMOVE,r.UPDATE_POSITION,r.STAGE],!0)}),t.event("needRefresh").on(function(){e.reserveRefreshCommentsPosition()}),t.event("checkRefresh").on(function(t){t>=0&&t<=e.getContentTimeMs()&&e.reserveRefreshCommentsPosition()})},t.prototype.deleteThread=function(t){var e=this.threadManagementSetList.findIndex(function(e){return e.hasSameThreadProcessor(t)});if(!(e<0)){var n=this.threadManagementSetList[e].displayObject;n.removeChildren(),this.stage.removeChild(n),this.threadManagementSetList.splice(e,1)}},t.prototype.getThreadList=function(){return this.threadManagementSetList.map(function(t){return t.getThreadProcessor()})},t.prototype.getThreadEffectControl=function(t){return Array.isArray(t)?this.getMultiThreadEffectControl(t):this.getSingleThreadEffectControl(t)},t.prototype.getAllThreadEffectControl=function(){return 0===this.threadManagementSetList.length?null:new h["default"](this.threadManagementSetList)},t.prototype.getMultiThreadEffectControl=function(t){var e=this.threadManagementSetList.filter(function(e){return t.some(function(t){return e.hasSameThreadProcessor(t)})});return 0===e.length?null:new h["default"](e)},t.prototype.getSingleThreadEffectControl=function(t){var e=this.threadManagementSetList.find(function(e){return e.hasSameThreadProcessor(t)});return o["default"].isUndefined(e)?null:new l["default"](e)},t.prototype.getContentTimeMs=function(){if(o["default"].isNull(this._processUpdatingContentTime))return 0;var t=this._processUpdatingContentTime();return this._contentLengthMs!==a["default"].NO_CONTENT_LENGTH&&this._contentLengthMs<t?this._contentLengthMs:Math.floor(t)},t.prototype.updateComments=function(t,e){this.updateCommentsByTarget(this.getContentTimeMs(),t,e)},t.prototype.updateCommentsByTarget=function(t,e,n){var i=this;void 0===n&&(n=!1),e.forEach(function(e){switch(e){case r.STAGE:i.stageComments(t);break;case r.REMOVE:i.removeFinishedStagingComments(t);break;case r.UPDATE_POSITION:i.updateCommentsPosition(t)}}),n&&this.draw()},t.prototype.refreshComments=function(){this.refreshCommentsByTarget(this.getContentTimeMs())},t.prototype.refreshCommentsByTarget=function(t){this.threadManagementSetList.forEach(function(e){e.refreshComments(t)}),this.draw()},t.prototype.reserveRedraw=function(){var t=this;o["default"].isNull(this.redrawReserveId)&&(this.redrawReserveId=window.setTimeout(function(){t.draw(),t.redrawReserveId=null},0))},t.prototype.reserveRefreshCommentsPosition=function(){var t=this;o["default"].isNull(this.refreshCommentsPositionReserveId)&&(this.refreshCommentsPositionReserveId=window.setTimeout(function(){t.refreshComments(),t.refreshCommentsPositionReserveId=null},0))},t.prototype.reserveClear=function(){var t=this;o["default"].isNull(this.clearReserveId)&&(this.clearReserveId=window.setTimeout(function(){t.clear(),t.clearReserveId=null},0))},t.prototype.stageComments=function(t){this.threadManagementSetList.forEach(function(e){e.stageComments(t)})},t.prototype.removeFinishedStagingComments=function(t){this.threadManagementSetList.forEach(function(e){e.removeFinishedStagingComments(t)})},t.prototype.updateCommentsPosition=function(t){this.threadManagementSetList.forEach(function(e){e.updateCommentsPosition(t)})},t.prototype.startUpdatingCommentsSchedule=function(){this.repeatSchedulers.forEach(function(t){t.start()})},t.prototype.stopUpdatingCommentsSchedule=function(){this.repeatSchedulers.forEach(function(t){t.stop()}),this.updateComments([r.REMOVE,r.UPDATE_POSITION,r.STAGE],!0)},t.prototype.setupUpdatingCommentsSchedule=function(t){var e=this;if(this.stopUpdatingCommentsSchedule(),this.repeatSchedulers.length=0,t){var n,i=0,o=!1;this.repeatSchedulers.push(new c["default"](function(t){return i=e.getContentTimeMs(),e._playing||i!==n?(o=!1,n<=i?(e.draw(),t.create(function(){e.updateCommentsByTarget(i,[r.REMOVE,r.UPDATE_POSITION,r.STAGE])},0)):e.refreshCommentsByTarget(i),void(n=i)):void(o||(o=!0,e.draw()))}))}else{var a,s,l=0,h=0,f=!1;this.repeatSchedulers.push(new c["default"](function(t){return l=e.getContentTimeMs(),e._playing||l!==a?(f=!1,a<=l?(e.draw(),t.create(function(){e.updateCommentsByTarget(l,[r.UPDATE_POSITION])},0)):e.refreshCommentsByTarget(l),void(a=l)):void(f||(f=!0,e.draw()))})),this.repeatSchedulers.push(new u["default"](function(t){h=e.getContentTimeMs(),(e._playing||h!==s)&&(s<=h&&e.updateCommentsByTarget(h,[r.REMOVE,r.STAGE]),s=h)},this._stagingCommentsIntervalMs))}this.startUpdatingCommentsSchedule()},t.prototype.dispose=function(){o["default"].isNull(this.pixiRenderer)||(this.repeatSchedulers.forEach(function(t){t.stop()}),o["default"].isNull(this.redrawReserveId)||window.clearTimeout(this.redrawReserveId),o["default"].isNull(this.refreshCommentsPositionReserveId)||window.clearTimeout(this.refreshCommentsPositionReserveId),o["default"].isNull(this.clearReserveId)||window.clearTimeout(this.clearReserveId),this.clear(),this.parentElement.removeChild(this.pixiRenderer.view),this.threadManagementSetList.forEach(function(t){t.dispose()}),this.threadManagementSetList.length=0,this.pixiRenderer=null)},Object.defineProperty(t,"frameRate",{get:function(){return c["default"].frameRate},set:function(t){t=t<=0||t===a["default"].AUTO_FRAME_RATE?a["default"].AUTO_FRAME_RATE:t,c["default"].frameRate=t},enumerable:!0,configurable:!0}),t.getActualFrameRate=function(){return c["default"].actualFrameRate},t}();d.frameRate=a["default"].AUTO_FRAME_RATE,function(t){t.AUTO_FRAME_RATE=a["default"].AUTO_FRAME_RATE,t.AUTO_STAGING_COMMENTS_INTERVAL=a["default"].AUTO_STAGING_COMMENTS_INTERVAL,t.NO_CONTENT_LENGTH=a["default"].NO_CONTENT_LENGTH}(d||(d={})),e["default"]=d},function(t,e,n){"use strict";function r(){return s||(s=n(174),s.utils._saidHello=!0,i(s)),s}function i(t){o(t),a(t)}function o(t){try{t.interaction.InteractionManager.prototype.mapPositionToPoint=function(t,e,n){var r;r=null===this.interactionDOMElement.parentElement?{x:0,y:0,width:0,height:0}:this.interactionDOMElement.getBoundingClientRect(),t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution}}catch(e){}}function a(t){try{t.Container.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t);try{this._renderCanvas(t)}catch(e){}for(var n=0,r=this.children.length;n<r;n++)this.children[n].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}}catch(e){}}Object.defineProperty(e,"__esModule",{value:!0});var s;e["default"]=r},function(t,e,n){(function(e){n(175);var r=t.exports=n(179);r.extras=n(241),r.filters=n(248),r.interaction=n(276),r.loaders=n(280),r.mesh=n(295),r.accessibility=n(301),r.loader=new r.loaders.Loader,Object.assign(r,n(304)),e.PIXI=r}).call(e,function(){return this}())},function(t,e,n){n(176),n(177),n(178)},function(t,e,n){Object.assign||(Object.assign=n(3))},function(t,e){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var n=Date.now(),r=["ms","moz","webkit","o"],i=0;i<r.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[r[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[r[i]+"CancelAnimationFrame"]||t[r[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+n-e;return r<0&&(r=0),n=e,setTimeout(function(){n=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(e,function(){return this}())},function(t,e){Math.sign||(Math.sign=function(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,n){/**
	 * @file        Main export of the PIXI core library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
var r=t.exports=Object.assign(n(180),n(181),{utils:n(190),ticker:n(195),DisplayObject:n(197),Container:n(209),Sprite:n(210),ParticleContainer:n(212),SpriteRenderer:n(213),ParticleRenderer:n(229),Text:n(232),Graphics:n(233),GraphicsData:n(235),GraphicsRenderer:n(236),Texture:n(200),BaseTexture:n(199),RenderTexture:n(198),VideoBaseTexture:n(201),TextureUvs:n(202),CanvasRenderer:n(239),CanvasGraphics:n(234),CanvasBuffer:n(208),WebGLRenderer:n(215),WebGLManager:n(206),ShaderManager:n(217),Shader:n(219),TextureShader:n(218),PrimitiveShader:n(221),ComplexPrimitiveShader:n(220),ObjectRenderer:n(214),RenderTarget:n(203),AbstractFilter:n(224),FXAAFilter:n(228),SpriteMaskFilter:n(223),autoDetectRenderer:function(t,e,n,i){return t=t||800,e=e||600,!i&&r.utils.isWebGLSupported()?new r.WebGLRenderer(t,e,n):new r.CanvasRenderer(t,e,n)}})},function(t,e){var n={VERSION:"__VERSION__",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};t.exports=n},function(t,e,n){t.exports={Point:n(182),Matrix:n(183),GroupD8:n(184),Circle:n(185),Ellipse:n(187),Polygon:n(188),Rectangle:n(186),RoundedRectangle:n(189)}},function(t,e){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},function(t,e,n){function r(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=n(182);r.prototype.constructor=r,t.exports=r,r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},r.prototype.apply=function(t,e){e=e||new i;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new i;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,o=t.y;return e.x=this.d*n*r+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*o+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},r.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},r.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){var c,l,h,f,d,p,v,g,y,m;return d=Math.sin(a),p=Math.cos(a),v=Math.cos(u),g=Math.sin(u),y=-Math.sin(s),m=Math.cos(s),c=p*i,l=d*i,h=-d*o,f=p*o,this.a=v*c+g*h,this.b=v*l+g*f,this.c=y*c+m*h,this.d=y*l+m*f,this.tx=t+(n*c+r*h),this.ty=e+(n*l+r*f),this},r.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.IDENTITY=new r,r.TEMP_MATRIX=new r},function(t,e,n){function r(t){return t<0?-1:t>0?1:0}function i(){for(var t=0;t<16;t++){var e=[];h.push(e);for(var n=0;n<16;n++)for(var i=r(o[t]*o[n]+s[t]*a[n]),f=r(a[t]*o[n]+u[t]*a[n]),d=r(o[t]*s[n]+s[t]*u[n]),p=r(a[t]*s[n]+u[t]*u[n]),v=0;v<16;v++)if(o[v]===i&&a[v]===f&&s[v]===d&&u[v]===p){e.push(v);break}}for(t=0;t<16;t++){var g=new l;g.set(o[t],a[t],s[t],u[t],0,0),c.push(g)}}var o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],s=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],c=[],l=n(183),h=[];i();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return o[t]},uY:function(t){return a[t]},vX:function(t){return s[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return h[t][e]},sub:function(t,e){return h[t][f.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e,n,r){var i=c[f.inv(e)];n=n||0,r=r||0,i.tx=n,i.ty=r,t.append(i)}};t.exports=f},function(t,e,n){function r(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0,this.type=o.SHAPES.CIRC}var i=n(186),o=n(180);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-e,i=this.radius*this.radius;return n*=n,r*=r,n+r<=i},r.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},function(t,e,n){function r(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.type=i.SHAPES.RECT}var i=n(180);r.prototype.constructor=r,t.exports=r,r.EMPTY=new r(0,0,0,0),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}},function(t,e,n){function r(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.type=o.SHAPES.ELIP}var i=n(186),o=n(180);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,n+r<=1},r.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},function(t,e,n){function r(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}if(e[0]instanceof i){for(var r=[],a=0,s=e.length;a<s;a++)r.push(e[a].x,e[a].y);e=r}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}var i=n(182),o=n(180);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.points.slice())},r.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1],l=s>e!=c>e&&t<(u-a)*(e-s)/(c-s)+a;l&&(n=!n)}return n}},function(t,e,n){function r(t,e,n,r,o){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.radius=o||20,this.type=i.SHAPES.RREC}var i=n(180);r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}},function(t,e,n){var r=n(180),i=t.exports={_uid:0,_saidHello:!1,EventEmitter:n(191),pluginTarget:n(192),async:n(193),uid:function(){return++i._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;n.src=t+"AP804Oa6"+e;var r=new Image;r.src=t+"/wCKxvRF"+e;var i=document.createElement("canvas");i.width=6,i.height=1;var o=i.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(n,0,0),o.drawImage(r,2,0);var a=o.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;e<t;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},getResolutionOfUrl:function(t){var e=r.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+r.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+r.VERSION+" - "+t+" - http://www.pixijs.com/");i._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!n||!n.getContextAttributes().stencil)}catch(r){return!1}},sign:function(t){return t?t<0?-1:1:0},removeItems:function(t,e,n){var r=t.length;if(!(e>=r||0===n)){n=e+n>r?r-e:n;for(var i=e,o=r-n;i<o;++i)t[i]=t[i+n];t.length=o}},TextureCache:{},BaseTextureCache:{}}},function(t,e,n){"use strict";function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){}var o=Object.prototype.hasOwnProperty,a="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var t,e=this._events,n=[];if(!e)return n;for(t in e)o.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},i.prototype.listeners=function(t,e){var n=a?a+t:t,r=this._events&&this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},i.prototype.emit=function(t,e,n,r,i,o){var s=a?a+t:t;if(!this._events||!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},i.prototype.on=function(t,e,n){var i=new r(e,n||this),o=a?a+t:t;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.once=function(t,e,n){var i=new r(e,n||this,(!0)),o=a?a+t:t;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):this._events[o]=i,this},i.prototype.removeListener=function(t,e,n,r){var i=a?a+t:t;if(!this._events||!this._events[i])return this;var o=this._events[i],s=[];if(e)if(o.fn)(o.fn!==e||r&&!o.once||n&&o.context!==n)&&s.push(o);else for(var u=0,c=o.length;u<c;u++)(o[u].fn!==e||r&&!o[u].once||n&&o[u].context!==n)&&s.push(o[u]);return s.length?this._events[i]=1===s.length?s[0]:s:delete this._events[i],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[a?a+t:t]:this._events=a?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,t.exports=i},function(t,e){function n(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}t.exports={mixin:function(t){n(t)}}},function(t,e,n){var r,i;(function(n,o,a){/*!
	 * async
	 * https://github.com/caolan/async
	 *
	 * Copyright 2010-2014 Caolan McMahon
	 * Released under the MIT license
	 */
!function(){function s(){}function u(t){return t}function c(t){return!!t}function l(t){return!t}function h(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function f(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function d(t){return W(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function v(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function g(t){return v(Array(t),function(t,e){return e})}function y(t,e,n){return p(t,function(t,r,i){n=e(n,t,r,i)}),n}function m(t,e){p(V(t),function(n){e(t[n],n)})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function b(t){var e,n,r=-1;return d(t)?(e=t.length,function(){return r++,r<e?r:null}):(n=V(t),e=n.length,function(){return r++,r<e?n[r]:null})}function E(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function T(t){return function(e,n,r){return t(e,r)}}function x(t){return function(e,n,r){r=f(r||s),e=e||[];var i=b(e);if(t<=0)return r(null);var o=!1,a=0,u=!1;!function c(){if(o&&a<=0)return r(null);for(;a<t&&!u;){var s=i();if(null===s)return o=!0,void(a<=0&&r(null));a+=1,n(e[s],s,h(function(t){a-=1,t?(r(t),u=!0):c()}))}}()}}function S(t){return function(e,n,r){return t(B.eachOf,e,n,r)}}function w(t){return function(e,n,r,i){return t(x(n),e,r,i)}}function R(t){return function(e,n,r){return t(B.eachOfSeries,e,n,r)}}function A(t,e,n,r){r=f(r||s),e=e||[];var i=d(e)?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function O(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(v(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function C(t,e,n,r){O(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function P(t,e,n){return function(r,i,o,a){function s(){a&&a(n(!1,void 0))}function u(t,r,i){return a?void o(t,function(r){a&&e(r)&&(a(n(!0,t)),a=o=!1),i()}):i()}arguments.length>3?t(r,i,u,s):(a=o,o=i,t(r,u,s))}}function M(t,e){return e}function L(t,e,n){n=n||s;var r=d(e)?[]:{};t(e,function(t,e,n){t(E(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function k(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function I(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,W(e)||(e=[e]),0===e.length&&t.idle()?B.setImmediate(function(){t.drain()}):(p(e,function(e){var i={data:e,callback:r||s};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void B.setImmediate(t.process))}function i(t,e){return function(){o-=1;var n=!1,r=arguments;p(e,function(t){p(a,function(e,r){e!==t||n||(a.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+o===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,a=[],u={tasks:[],concurrency:e,payload:n,saturated:s,empty:s,drain:s,started:!1,paused:!1,push:function(t,e){r(u,t,!1,e)},kill:function(){u.drain=s,u.tasks=[]},unshift:function(t,e){r(u,t,!0,e)},process:function(){for(;!u.paused&&o<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=v(e,function(t){return t.data});0===u.tasks.length&&u.empty(),o+=1,a.push(e[0]);var r=h(i(u,e));t(n,r)}},length:function(){return u.tasks.length},running:function(){return o},workersList:function(){return a},idle:function(){return u.tasks.length+o===0},pause:function(){u.paused=!0},resume:function(){if(u.paused!==!1){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;e<=t;e++)B.setImmediate(u.process)}}};return u}function D(t){return E(function(e,n){e.apply(null,n.concat([E(function(e,n){"object"==typeof console&&(e?console.error:console[t]&&p(n,function(t){}))})]))})}function F(t){return function(e,n,r){t(g(e),n,r)}}function N(t){return E(function(e,n){var r=E(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function U(t){return E(function(e){var n=e.pop();e.push(function(){var t=arguments;r?B.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var j,B={},G="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=G&&(j=G.async),B.noConflict=function(){return G.async=j,B};var H=Object.prototype.toString,W=Array.isArray||function(t){return"[object Array]"===H.call(t)},z=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},V=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},Y="function"==typeof o&&o,X=Y?function(t){Y(t)}:function(t){setTimeout(t,0)};"object"==typeof a&&"function"==typeof a.nextTick?B.nextTick=a.nextTick:B.nextTick=X,B.setImmediate=Y?X:B.nextTick,B.forEach=B.each=function(t,e,n){return B.eachOf(t,T(e),n)},B.forEachSeries=B.eachSeries=function(t,e,n){return B.eachOfSeries(t,T(e),n)},B.forEachLimit=B.eachLimit=function(t,e,n,r){return x(e)(t,T(n),r)},B.forEachOf=B.eachOf=function(t,e,n){function r(t){a--,t?n(t):null===i&&a<=0&&n(null)}n=f(n||s),t=t||[];for(var i,o=b(t),a=0;null!=(i=o());)a+=1,e(t[i],i,h(r));0===a&&n(null)},B.forEachOfSeries=B.eachOfSeries=function(t,e,n){function r(){var a=!0;return null===o?n(null):(e(t[o],o,h(function(t){if(t)n(t);else{if(o=i(),null===o)return n(null);a?B.setImmediate(r):r()}})),void(a=!1))}n=f(n||s),t=t||[];var i=b(t),o=i();r()},B.forEachOfLimit=B.eachOfLimit=function(t,e,n,r){x(e)(t,n,r)},B.map=S(A),B.mapSeries=R(A),B.mapLimit=w(A),B.inject=B.foldl=B.reduce=function(t,e,n,r){B.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},B.foldr=B.reduceRight=function(t,e,n,r){var i=v(t,u).reverse();B.reduce(i,e,n,r)},B.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=W(t)?[]:{}),B.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},B.select=B.filter=S(O),B.selectLimit=B.filterLimit=w(O),B.selectSeries=B.filterSeries=R(O),B.reject=S(C),B.rejectLimit=w(C),B.rejectSeries=R(C),B.any=B.some=P(B.eachOf,c,u),B.someLimit=P(B.eachOfLimit,c,u),B.all=B.every=P(B.eachOf,l,l),B.everyLimit=P(B.eachOfLimit,l,l),B.detect=P(B.eachOf,u,M),B.detectSeries=P(B.eachOfSeries,u,M),B.detectLimit=P(B.eachOfLimit,u,M),B.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}B.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,v(e.sort(r),function(t){return t.value}))})},B.auto=function(t,e,n){function r(t){d.unshift(t)}function i(t){var e=_(d,t);e>=0&&d.splice(e,1)}function o(){u--,p(d.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(n=e,e=null),n=f(n||s);var a=V(t),u=a.length;if(!u)return n(null);e||(e=u);var c={},l=0,h=!1,d=[];r(function(){u||n(null,c)}),p(a,function(a){function s(){return l<e&&y(v,function(t,e){return t&&c.hasOwnProperty(e)},!0)&&!c.hasOwnProperty(a)}function u(){s()&&(l++,i(u),d[d.length-1](p,c))}if(!h){for(var f,d=W(t[a])?t[a]:[t[a]],p=E(function(t,e){if(l--,e.length<=1&&(e=e[0]),t){var r={};m(c,function(t,e){r[e]=t}),r[a]=e,h=!0,n(t,r)}else c[a]=e,B.setImmediate(o)}),v=d.slice(0,d.length-1),g=v.length;g--;){if(!(f=t[v[g]]))throw new Error("Has nonexistent dependency in "+v.join(", "));if(W(f)&&_(f,a)>=0)throw new Error("Has cyclic dependencies")}s()?(l++,d[d.length-1](p,c)):r(u)}})},B.retry=function(t,e,n){function r(t,e){if("number"==typeof e)t.times=parseInt(e,10)||o;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||o,t.interval=parseInt(e.interval,10)||a}}function i(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;u.times;){var i=!(u.times-=1);s.push(n(u.task,i)),!i&&u.interval>0&&s.push(r(u.interval))}B.series(s,function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)})}var o=5,a=0,s=[],u={times:o,interval:a},c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return c<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&r(u,t),u.callback=n,u.task=e,u.callback?i():i},B.waterfall=function(t,e){function n(t){return E(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),U(t).apply(null,i)}})}if(e=f(e||s),!W(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(B.iterator(t))():e()},B.parallel=function(t,e){L(B.eachOf,t,e)},B.parallelLimit=function(t,e,n){L(x(e),t,n)},B.series=function(t,e){L(B.eachOfSeries,t,e)},B.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},B.apply=E(function(t,e){return E(function(n){return t.apply(null,e.concat(n))})}),B.concat=S(k),B.concatSeries=R(k),B.whilst=function(t,e,n){if(n=n||s,t()){var r=E(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},B.doWhilst=function(t,e,n){var r=0;return B.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},B.until=function(t,e,n){return B.whilst(function(){return!t.apply(this,arguments)},e,n)},B.doUntil=function(t,e,n){return B.doWhilst(t,function(){return!e.apply(this,arguments)},n)},B.during=function(t,e,n){n=n||s;var r=E(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},B.doDuring=function(t,e,n){var r=0;B.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},B.queue=function(t,e){var n=I(function(e,n){t(e[0],n)},e,1);return n},B.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,W(e)||(e=[e]),0===e.length?B.setImmediate(function(){t.drain()}):void p(e,function(e){var a={data:e,priority:i,callback:"function"==typeof o?o:s};t.tasks.splice(r(t.tasks,a,n)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),B.setImmediate(t.process)})}var o=B.queue(t,e);return o.push=function(t,e,n){i(o,t,e,n)},delete o.unshift,o},B.cargo=function(t,e){return I(t,1,e)},B.log=D("log"),B.dir=D("dir"),B.memoize=function(t,e){var n={},r={},i=Object.prototype.hasOwnProperty;e=e||u;var o=E(function(o){var a=o.pop(),s=e.apply(null,o);i.call(n,s)?B.setImmediate(function(){a.apply(null,n[s])}):i.call(r,s)?r[s].push(a):(r[s]=[a],t.apply(null,o.concat([E(function(t){n[s]=t;var e=r[s];delete r[s];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},B.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},B.times=F(B.map),B.timesSeries=F(B.mapSeries),B.timesLimit=function(t,e,n,r){return B.mapLimit(g(t),e,n,r)},B.seq=function(){var t=arguments;return E(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=s,B.reduce(t,e,function(t,e,r){e.apply(n,t.concat([E(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},B.compose=function(){return B.seq.apply(null,Array.prototype.reverse.call(arguments))},B.applyEach=N(B.eachOf),B.applyEachSeries=N(B.eachOfSeries),B.forever=function(t,e){function n(t){return t?r(t):void i(n)}var r=h(e||s),i=U(t);n()},B.ensureAsync=U,B.constant=E(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),B.wrapSync=B.asyncify=function(t){return E(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}z(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof t&&t.exports?t.exports=B:(r=[],i=function(){return B}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()}).call(e,function(){return this}(),n(194).setImmediate,n(115))},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(115).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=!(arguments.length<2)&&s.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(194).setImmediate,n(194).clearImmediate)},function(t,e,n){var r=n(196),i=new r;i.autoStart=!0,t.exports={shared:i,Ticker:r}},function(t,e,n){function r(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(a,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new o,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var i=n(180),o=n(191),a="tick";Object.defineProperties(r.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,i.TARGET_FPMS);this._maxElapsedMS=1/e}}}),r.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(a,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e){return this._emitter.on(a,t,e),this._startIfPossible(),this},r.prototype.addOnce=function(t,e){return this._emitter.once(a,t,e),this._startIfPossible(),this},r.prototype.remove=function(t,e){return this._emitter.off(a,t,e),this._emitter.listeners(a,!0)||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.update=function(t){var e;t=t||performance.now(),e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.TARGET_FPMS*this.speed,this._emitter.emit(a,this.deltaTime),this.lastTime=t},t.exports=r},function(t,e,n){function r(){a.call(this),this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.skew=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var i=n(181),o=n(198),a=n(191),s=n(180),u=new i.Matrix,c={worldTransform:new i.Matrix,worldAlpha:1,children:[]};r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),r.prototype.updateTransform=function(){var t,e,n,r,i,o,a=this.parent.worldTransform,c=this.worldTransform;this.skew.x||this.skew.y?(u.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),c.a=u.a*a.a+u.b*a.c,c.b=u.a*a.b+u.b*a.d,c.c=u.c*a.a+u.d*a.c,c.d=u.c*a.b+u.d*a.d,c.tx=u.tx*a.a+u.ty*a.c+a.tx,c.ty=u.tx*a.b+u.ty*a.d+a.ty):this.rotation%s.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,n=-this._sr*this.scale.y,r=this._cr*this.scale.y,i=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(i-=this.pivot.x*t+this.pivot.y*n,o-=this.pivot.x*e+this.pivot.y*r),c.a=t*a.a+e*a.c,c.b=t*a.b+e*a.d,c.c=n*a.a+r*a.c,c.d=n*a.b+r*a.d,c.tx=i*a.a+o*a.c+a.tx,c.ty=i*a.b+o*a.d+a.ty):(t=this.scale.x,r=this.scale.y,i=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*r,c.a=t*a.a,c.b=t*a.b,c.c=r*a.c,c.d=r*a.d,c.tx=i*a.a+o*a.c+a.tx,c.ty=i*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},r.prototype.displayObjectUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(t){return i.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},r.prototype.toGlobal=function(t){return this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t)},r.prototype.toLocal=function(t,e,n){return e&&(t=e.toGlobal(t)),this.parent?this.displayObjectUpdateTransform():(this.parent=c,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,n)},r.prototype.renderWebGL=function(t){},r.prototype.renderCanvas=function(t){},r.prototype.generateTexture=function(t,e,n){var r=this.getLocalBounds(),i=new o(t,0|r.width,0|r.height,e,n);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.position.x=t||0,this.position.y=e||0,this.scale.x=n?n:1,this.scale.y=r?r:1,this.rotation=i||0,this.skew.x=o||0,this.skew.y=a||0,this.pivot.x=s||0,this.pivot.y=u||0,this},r.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},function(t,e,n){function r(t,e,n,r,h){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,n=n||100,h=h||l.RESOLUTION;var f=new i;if(f.width=e,f.height=n,f.resolution=h,f.scaleMode=r||l.SCALE_MODES.DEFAULT,f.hasLoaded=!0,o.call(this,f,new c.Rectangle(0,0,e,n)),this.width=e,this.height=n,this.resolution=h,this.render=null,this.renderer=t,this.renderer.type===l.RENDERER_TYPE.WEBGL){var d=this.renderer.gl;this.textureBuffer=new a(d,this.width,this.height,f.scaleMode,this.resolution),this.baseTexture._glTextures[d.id]=this.textureBuffer.texture,this.filterManager=new s(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,n),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new u(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=n(199),o=n(200),a=n(203),s=n(205),u=n(208),c=n(181),l=n(180),h=new c.Matrix;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.resize=function(t,e,n){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,n&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},r.prototype.clear=function(){this.valid&&(this.renderer.type===l.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},r.prototype.renderWebGL=function(t,e,n,r){if(this.valid){if(r=void 0===r||r,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,r){t.worldTransform.identity(),t.currentBounds=null;var i,o,a=t.children;for(i=0,o=a.length;i<o;++i)a[i].updateTransform()}var s=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,n),this.renderer.filterManager=s}},r.prototype.renderCanvas=function(t,e,n,r){if(this.valid){r=!!r;var i=h;i.identity(),e&&i.append(e);var o=t.worldTransform;t.worldTransform=i,t.worldAlpha=1;var a,s,u=t.children;for(a=0,s=u.length;a<s;++a)u[a].updateTransform();n&&this.textureBuffer.clear();var c=this.textureBuffer.context,l=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,c),this.renderer.resolution=l,t.worldTransform===i&&(t.worldTransform=o)}},r.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},r.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},r.prototype.getBase64=function(){return this.getCanvas().toDataURL()},r.prototype.getCanvas=function(){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,n=this.textureBuffer.size.height,r=new Uint8Array(4*e*n);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,n,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new u(e,n),o=i.context.getImageData(0,0,e,n);return o.data.set(r),i.context.putImageData(o,0,0),i.canvas}return this.textureBuffer.canvas},r.prototype.getPixels=function(){var t,e;if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var r=new Uint8Array(4*t*e);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(0,0,t,e,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},r.prototype.getPixel=function(t,e){if(this.renderer.type===l.RENDERER_TYPE.WEBGL){var n=this.renderer.gl,r=new Uint8Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,this.textureBuffer.frameBuffer),n.readPixels(t,e,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.bindFramebuffer(n.FRAMEBUFFER,null),r}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},function(t,e,n){function r(t,e,n){a.call(this),this.uid=i.uid(),this.resolution=n||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||o.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var i=n(190),o=n(180),a=n(191);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},r.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var n=this;t.onload=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),n.emit("loaded",n))},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},r.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},r.fromImage=function(t,e,n){var o=i.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var a=new Image;e&&(a.crossOrigin=""),o=new r(a,n),o.imageUrl=t,a.src=t,i.BaseTextureCache[t]=o,o.resolution=i.getResolutionOfUrl(t)}return o},r.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.uid());var n=i.BaseTextureCache[t._pixiId];return n||(n=new r(t,e),i.BaseTextureCache[t._pixiId]=n),n}},function(t,e,n){function r(t,e,n,i,o){if(s.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new u.Rectangle(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=n||e,this._rotate=+(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";t.hasLoaded?(this.noFrame&&(e=new u.Rectangle(0,0,t.width,t.height),t.on("update",this.onBaseTextureUpdated,this)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this)}var i=n(199),o=n(201),a=n(202),s=n(191),u=n(181),c=n(190);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}}}),r.prototype.update=function(){this.baseTexture.update()},r.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new u.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.emit("update",this)},r.prototype.onBaseTextureUpdated=function(t){this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},r.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},r.prototype.clone=function(){return new r(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},r.prototype._updateUvs=function(){this._uvs||(this._uvs=new a),this._uvs.set(this.crop,this.baseTexture,this.rotate)},r.fromImage=function(t,e,n){var o=c.TextureCache[t];return o||(o=new r(i.fromImage(t,e,n)),c.TextureCache[t]=o),o},r.fromFrame=function(t){var e=c.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},r.fromCanvas=function(t,e){return new r(i.fromCanvas(t,e))},r.fromVideo=function(t,e){return"string"==typeof t?r.fromVideoUrl(t,e):new r(o.fromVideo(t,e))},r.fromVideoUrl=function(t,e){return new r(o.fromUrl(t,e))},r.addTextureToCache=function(t,e){c.TextureCache[e]=t},r.removeTextureFromCache=function(t){var e=c.TextureCache[t];return delete c.TextureCache[t],delete c.BaseTextureCache[t],e},r.EMPTY=new r(new i)},function(t,e,n){function r(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),o.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}var o=n(199),a=n(190);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,t.exports=r,r.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},r.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},r.prototype._onPlayStop=function(){this.autoUpdate=!1},r.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},r.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete a.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),o.prototype.destroy.call(this)},r.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+a.uid());var n=a.BaseTextureCache[t._pixiId];return n||(n=new r(t,e),a.BaseTextureCache[t._pixiId]=n),n},r.fromUrl=function(t,e){var n=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)n.appendChild(i(t[o].src||t[o],t[o].mime));else n.appendChild(i(t.src||t,t.mime));return n.load(),n.play(),r.fromVideo(n,e)},r.fromUrls=r.fromUrl},function(t,e,n){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}t.exports=r;var i=n(184);r.prototype.set=function(t,e,n){var r=e.width,o=e.height;if(n){var a=i.isSwapWidthHeight(n),s=(a?t.height:t.width)/2/r,u=(a?t.width:t.height)/2/o,c=t.x/r+s,l=t.y/o+u;n=i.add(n,i.NW),this.x0=c+s*i.uX(n),this.y0=l+u*i.uY(n),n=i.add(n,2),this.x1=c+s*i.uX(n),this.y1=l+u*i.uY(n),n=i.add(n,2),this.x2=c+s*i.uX(n),this.y2=l+u*i.uY(n),n=i.add(n,2),this.x3=c+s*i.uX(n),this.y3=l+u*i.uY(n)}else this.x0=t.x/r,this.y0=t.y/o,this.x1=(t.x+t.width)/r,this.y1=t.y/o,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/o,this.x3=t.x/r,this.y3=(t.y+t.height)/o}},function(t,e,n){var r=n(181),i=n(190),o=n(180),a=n(204),s=function(t,e,n,s,u,c){if(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=u||o.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,
this.stencilBuffer=null,this.stencilMaskStack=new a,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=s||o.SCALE_MODES.DEFAULT,this.root=c,!this.root){this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===o.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST);var l=i.isPowerOfTwo(e,n);l?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}this.resize(e,n)};s.prototype.constructor=s,t.exports=s,s.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},s.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},s.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},s.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},s.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t*this.resolution,e*this.resolution,0,n.RGBA,n.UNSIGNED_BYTE,null),this.stencilBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencilBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var r=this.frame||this.size;this.calculateProjection(r)}},s.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},function(t,e){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,t.exports=n},function(t,e,n){function r(t){i.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new u.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var i=n(206),o=n(203),a=n(180),s=n(207),u=n(181);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new s(t)},r.prototype.setFilterStack=function(t){this.filterStack=t},r.prototype.pushFilter=function(t,e){var n=t.filterArea?t.filterArea.clone():t.getBounds();n.x=0|n.x,n.y=0|n.y,n.width=0|n.width,n.height=0|n.height;var r=0|e[0].padding;if(n.x-=r,n.y-=r,n.width+=2*r,n.height+=2*r,this.renderer.currentRenderTarget.transform){var i=this.renderer.currentRenderTarget.transform;n.x+=i.tx,n.y+=i.ty,this.capFilterArea(n),n.x-=i.tx,n.y-=i.ty}else this.capFilterArea(n);if(n.width>0&&n.height>0){this.currentFrame=n;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},r.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],n=t.renderTarget;if(t.renderTarget){var r=e.renderTarget,i=this.renderer.gl;this.currentFrame=n.frame,this.quad.map(this.textureSize,n.frame),i.bindBuffer(i.ARRAY_BUFFER,this.quad.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=t.filter;if(i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,i.FLOAT,!1,0,32),i.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,i.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,n,r),this.returnRenderTarget(n);else{for(var s=n,u=this.getRenderTarget(!0),c=0;c<o.length-1;c++){var l=o[c];l.uniforms.dimensions&&(l.uniforms.dimensions.value[0]=this.renderer.width,l.uniforms.dimensions.value[1]=this.renderer.height,l.uniforms.dimensions.value[2]=this.quad.vertices[0],l.uniforms.dimensions.value[3]=this.quad.vertices[5]),l.applyFilter(this.renderer,s,u);var h=s;s=u,u=h}o[o.length-1].applyFilter(this.renderer,s,r),this.returnRenderTarget(s),this.returnRenderTarget(u)}return t.filter}},r.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new o(this.renderer.gl,this.textureSize.width,this.textureSize.height,a.SCALE_MODES.LINEAR,this.renderer.resolution*a.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},r.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},r.prototype.applyFilter=function(t,e,n,r){var i=this.renderer.gl;this.renderer.setRenderTarget(n),r&&n.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),this.renderer.drawCount++},r.prototype.calculateMappedMatrix=function(t,e,n){var r=e.worldTransform.copy(u.Matrix.TEMP_MATRIX),i=e._texture.baseTexture,o=n.identity(),a=this.textureSize.height/this.textureSize.width;o.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),o.scale(1,a);var s=this.textureSize.width/i.width,c=this.textureSize.height/i.height;return r.tx/=i.width*s,r.ty/=i.width*s,r.invert(),o.prepend(r),o.scale(1,1/a),o.scale(s,c),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},r.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var n=0;n<this.texturePool.length;n++)this.texturePool[n].resize(t,e)},r.prototype.destroy=function(){this.quad.destroy(),i.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},function(t,e){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,t.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},function(t,e){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var n=0,r=0;this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t.exports=n},function(t,e){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){this.context=null,this.canvas=null}},function(t,e,n){function r(){a.call(this),this.children=[]}var i=n(181),o=n(190),a=n(197),s=n(198),u=new i.Matrix;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}}),r.prototype.onChildrenChange=function(){},r.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},r.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);if(n<0||r<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);o.removeItems(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},r.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},r.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;n<e;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(r===-1)return;t.parent=null,o.removeItems(this.children,r,1),this.onChildrenChange(r),t.emit("removed",this)}return t},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,o.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},r.prototype.removeChildren=function(t,e){var n,r,i=t||0,o="number"==typeof e?e:this.children.length,a=o-i;if(a>0&&a<=o){for(n=this.children.splice(i,a),r=0;r<n.length;++r)n[r].parent=null;for(this.onChildrenChange(t),r=0;r<n.length;++r)n[r].emit("removed",this);return n}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.generateTexture=function(t,e,n){var r=this.getLocalBounds(),i=new s(t,0|r.width,0|r.height,n,e);return u.tx=-r.x,u.ty=-r.y,i.render(this,u),i},r.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;t<e;++t)this.children[t].updateTransform()}},r.prototype.containerUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return i.Rectangle.EMPTY;for(var t,e,n,r=1/0,o=1/0,a=-(1/0),s=-(1/0),u=!1,c=0,l=this.children.length;c<l;++c){var h=this.children[c];h.visible&&(u=!0,t=this.children[c].getBounds(),r=r<t.x?r:t.x,o=o<t.y?o:t.y,e=t.width+t.x,n=t.height+t.y,a=a>e?a:e,s=s>n?s:n)}if(!u)return i.Rectangle.EMPTY;var f=this._bounds;f.x=r,f.y=o,f.width=a-r,f.height=s-o,this._currentBounds=f}return this._currentBounds},r.prototype.containerGetBounds=r.prototype.getBounds,r.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var e=0,n=this.children.length;e<n;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(i.Matrix.IDENTITY)},r.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,n;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,n=this.children.length;e<n;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,n=this.children.length;e<n;++e)this.children[e].renderWebGL(t)}},r.prototype._renderWebGL=function(t){},r.prototype._renderCanvas=function(t){},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},r.prototype.destroy=function(t){if(a.prototype.destroy.call(this),t)for(var e=0,n=this.children.length;e<n;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},function(t,e,n){function r(t){a.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=c.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||o.EMPTY}var i=n(181),o=n(200),a=n(209),s=n(211),u=n(190),c=n(180),l=new i.Point,h=i.GroupD8,f=new i.Matrix;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(t){var e=u.sign(this.scale.x)||1;this.scale.x=e*t/this.texture._frame.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(t){var e=u.sign(this.scale.y)||1;this.scale.y=e*t/this.texture._frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=u.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=u.sign(this.scale.y)*this._height/this.texture.frame.height)},r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},r.prototype.getBounds=function(t){if(!this._currentBounds){var e,n,r,i,o=this._texture._frame.width,a=this._texture._frame.height,s=o*(1-this.anchor.x),u=o*-this.anchor.x,c=a*(1-this.anchor.y),l=a*-this.anchor.y,h=t||this.worldTransform,f=h.a,d=h.b,p=h.c,v=h.d,g=h.tx,y=h.ty,m=f*u+p*l+g,_=v*l+d*u+y,b=f*s+p*l+g,E=v*l+d*s+y,T=f*s+p*c+g,x=v*c+d*s+y,S=f*u+p*c+g,w=v*c+d*u+y;if(e=m,e=b<e?b:e,e=T<e?T:e,e=S<e?S:e,r=_,r=E<r?E:r,r=x<r?x:r,r=w<r?w:r,n=m,n=b>n?b:n,n=T>n?T:n,n=S>n?S:n,i=_,i=E>i?E:i,i=x>i?x:i,i=w>i?w:i,this.children.length){var R=this.containerGetBounds();s=R.x,u=R.x+R.width,c=R.y,l=R.y+R.height,e=e<s?e:s,r=r<c?r:c,n=n>u?n:u,i=i>l?i:l}var A=this._bounds;A.x=e,A.width=n-e,A.y=r,A.height=i-r,this._currentBounds=A}return this._currentBounds},r.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e,n=this._texture._frame.width,r=this._texture._frame.height,i=-n*this.anchor.x;return l.x>i&&l.x<i+n&&(e=-r*this.anchor.y,l.y>e&&l.y<e+r)},r.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var n,r,i=this._texture,o=this.worldTransform,a=i.crop.width,u=i.crop.height;t.context.globalAlpha=this.worldAlpha;var l=i.baseTexture.scaleMode===c.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==l&&(t.context[t.smoothProperty]=l),2===(3&i.rotate)&&(a=i.crop.height,u=i.crop.width),i.trim?(n=i.crop.width/2+i.trim.x-this.anchor.x*i.trim.width,r=i.crop.height/2+i.trim.y-this.anchor.y*i.trim.height):(n=(.5-this.anchor.x)*i._frame.width,r=(.5-this.anchor.y)*i._frame.height),i.rotate&&(o.copy(f),o=f,h.matrixAppendRotationInv(o,i.rotate,n,r),n=0,r=0),n-=a/2,r-=u/2,t.roundPixels?(t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution|0,o.ty*t.resolution|0),n=0|n,r=0|r):t.context.setTransform(o.a,o.b,o.c,o.d,o.tx*t.resolution,o.ty*t.resolution);var d=i.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=s.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,a*d,u*d,n*t.resolution,r*t.resolution,a*t.resolution,u*t.resolution)):t.context.drawImage(i.baseTexture.source,i.crop.x*d,i.crop.y*d,a*d,u*d,n*t.resolution,r*t.resolution,a*t.resolution,u*t.resolution)}}},r.prototype.destroy=function(t,e){a.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},r.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new r(e)},r.fromImage=function(t,e,n){return new r(o.fromImage(t,e,n))}},function(t,e,n){var r=n(190),i={};t.exports=i,i.getTintedTexture=function(t,e){var n=t.texture;e=i.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var o=i.canvas||document.createElement("canvas");if(i.tintMethod(n,e,o),i.convertTintToImage){var a=new Image;a.src=o.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=o,i.canvas=null;return o},i.tintWithMultiply=function(t,e,n){var r=n.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithOverlay=function(t,e,n){var r=n.getContext("2d"),i=t.baseTexture.resolution,o=t.crop.clone();o.x*=i,o.y*=i,o.width*=i,o.height*=i,n.width=o.width,n.height=o.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,o.width,o.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},i.tintWithPerPixel=function(t,e,n){var i=n.getContext("2d"),o=t.baseTexture.resolution,a=t.crop.clone();a.x*=o,a.y*=o,a.width*=o,a.height*=o,n.width=a.width,n.height=a.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);for(var s=r.hex2rgb(e),u=s[0],c=s[1],l=s[2],h=i.getImageData(0,0,a.width,a.height),f=h.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=c,f[d+2]*=l;i.putImageData(h,0,0)},i.roundColor=function(t){var e=i.cacheStepsPerColorChannel,n=r.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),r.rgb2hex(n)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=r.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},function(t,e,n){function r(t,e,n){i.call(this),n=n||15e3,t=t||15e3;var r=16384;n>r&&(n=r),n>t&&(n=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=n,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=o.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var i=n(209),o=n(180);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},r.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0,u=t.blendModes[this.blendMode];u!==e.globalCompositeOperation&&(e.globalCompositeOperation=u),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var c=0;c<this.children.length;++c){var l=this.children[c];if(l.visible){var h=l.texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),i=l.anchor.x*(-h.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-h.height*l.scale.y)+l.position.y+.5,a=h.width*l.scale.x,s=h.height*l.scale.y;else{r||(r=!0),l.displayObjectUpdateTransform();var f=l.worldTransform;t.roundPixels?e.setTransform(f.a,f.b,f.c,f.d,0|f.tx,0|f.ty):e.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),i=l.anchor.x*-h.width+.5,o=l.anchor.y*-h.height+.5,a=h.width,s=h.height}e.drawImage(l.texture.baseTexture.source,h.x,h.y,h.width,h.height,i,o,a,s)}}}},r.prototype.destroy=function(){if(i.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},function(t,e,n){function r(t){i.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=a.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,n=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(n);for(var r=0,o=0;r<n;r+=6,o+=4)this.indices[r+0]=o+0,this.indices[r+1]=o+1,this.indices[r+2]=o+2,this.indices[r+3]=o+0,this.indices[r+4]=o+2,this.indices[r+5]=o+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var i=n(214),o=n(215),a=n(180);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,o.registerPlugin("sprite",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var n=e._uvs;if(n){var r,i,o,a,s=t.anchor.x,u=t.anchor.y;if(e.trim&&void 0===t.tileScale){var c=e.trim;i=c.x-s*c.width,r=i+e.crop.width,a=c.y-u*c.height,o=a+e.crop.height}else r=e._frame.width*(1-s),i=e._frame.width*-s,o=e._frame.height*(1-u),a=e._frame.height*-u;var l=this.currentBatchSize*this.vertByteSize,h=t.worldTransform,f=h.a,d=h.b,p=h.c,v=h.d,g=h.tx,y=h.ty,m=this.colors,_=this.positions;if(this.renderer.roundPixels){var b=this.renderer.resolution;_[l]=((f*i+p*a+g)*b|0)/b,_[l+1]=((v*a+d*i+y)*b|0)/b,_[l+5]=((f*r+p*a+g)*b|0)/b,_[l+6]=((v*a+d*r+y)*b|0)/b,_[l+10]=((f*r+p*o+g)*b|0)/b,_[l+11]=((v*o+d*r+y)*b|0)/b,_[l+15]=((f*i+p*o+g)*b|0)/b,_[l+16]=((v*o+d*i+y)*b|0)/b}else _[l]=f*i+p*a+g,_[l+1]=v*a+d*i+y,_[l+5]=f*r+p*a+g,_[l+6]=v*a+d*r+y,_[l+10]=f*r+p*o+g,_[l+11]=v*o+d*r+y,_[l+15]=f*i+p*o+g,_[l+16]=v*o+d*i+y;_[l+2]=n.x0,_[l+3]=n.y0,_[l+7]=n.x1,_[l+8]=n.y1,_[l+12]=n.x2,_[l+13]=n.y2,_[l+17]=n.x3,_[l+18]=n.y3;var E=t.tint;m[l+4]=m[l+9]=m[l+14]=m[l+19]=(E>>16)+(65280&E)+((255&E)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,n)}for(var r,i,o,a,s=0,u=0,c=null,l=this.renderer.blendModeManager.currentBlendMode,h=null,f=!1,d=!1,p=0,v=this.currentBatchSize;p<v;p++)a=this.sprites[p],r=a._texture.baseTexture,i=a.blendMode,o=a.shader||this.shader,f=l!==i,d=h!==o,(c!==r||f||d)&&(this.renderBatch(c,s,u),u=p,s=0,c=r,f&&(l=i,this.renderer.blendModeManager.setBlendMode(l)),d&&(h=o,t=h.shaders?h.shaders[e.id]:h,t||(t=h.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),s++;this.renderBatch(c,s,u),this.currentBatchSize=0}},r.prototype.renderBatch=function(t,e,n){if(0!==e){var r=this.renderer.gl;t._glTextures[r.id]?r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]):this.renderer.updateTexture(t),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*n*2),this.renderer.drawCount++}},r.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},function(t,e,n){function r(t){i.call(this,t)}var i=n(206);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(t){}},function(t,e,n){function r(t,e,n){n=n||{},i.call(this,"WebGL",t,e,n),this.type=p.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!n.forceFXAA&&n.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:n.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new o(this),this.maskManager=new a(this),this.stencilManager=new s(this),this.filterManager=new u(this),this.blendModeManager=new c(this),this.currentRenderTarget=null,this.currentRenderer=new h(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var i=n(216),o=n(217),a=n(222),s=n(226),u=n(205),c=n(227),l=n(203),h=n(214),f=n(228),d=n(190),p=n(180);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,d.pluginTarget.mixin(r),r.glContextId=0,r.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=r.glContextId++,t.id=this.glContextId,t.renderer=this},r.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new l(t,this.width,this.height,null,this.resolution,(!0)),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new f])},r.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var n=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?n.clearColor(0,0,0,0):n.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),n.clear(n.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},r.prototype.renderDisplayObject=function(t,e,n){this.setRenderTarget(e),n&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),
this.gl.viewport(0,0,this.width,this.height))},r.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===p.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===p.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===p.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},r.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var n=this._managedTextures.indexOf(t);n!==-1&&d.removeItems(this._managedTextures,n,1)}},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},r.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var n=this._managedTextures[e];this.destroyTexture(n,!0),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this)}i.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl.flush(),this.gl=null},r.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[p.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],this.blendModes[p.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],this.blendModes[p.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[p.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[p.DRAW_MODES.LINES]=t.LINES,this.drawModes[p.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[p.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[p.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},function(t,e,n){function r(t,e,n,r){if(s.call(this),i.sayHello(t),r)for(var u in a.DEFAULT_RENDER_OPTIONS)"undefined"==typeof r[u]&&(r[u]=a.DEFAULT_RENDER_OPTIONS[u]);else r=a.DEFAULT_RENDER_OPTIONS;this.type=a.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=n||600,this.view=r.view||document.createElement("canvas"),this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.roundPixels=r.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=r.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var i=n(190),o=n(181),a=n(180),s=n(191);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=i.hex2string(t),i.hex2rgb(t,this._backgroundColorRgb)}}}),r.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},r.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},function(t,e,n){function r(t){i.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var i=n(206),o=n(218),a=n(220),s=n(221),u=n(190);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,u.pluginTarget.mixin(r),t.exports=r,r.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new o(this),this.primitiveShader=new s(this),this.complexPrimitiveShader=new a(this)},r.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var n in t)this.tempAttribState[t[n]]=!0;var r=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},r.prototype.setShader=function(t){return this._currentId!==t.uid&&(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},r.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},function(t,e,n){function r(t,e,n,o,a){var s={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(o)for(var u in o)s[u]=o[u];var c={aVertexPosition:0,aTextureCoord:0,aColor:0};if(a)for(var l in a)c[l]=a[l];e=e||r.defaultVertexSrc,n=n||r.defaultFragmentSrc,i.call(this,t,e,n,s,c)}var i=n(219);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),r.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},function(t,e,n){function r(t,e,n,r,o){if(!e||!n)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=i.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=r||{},this.attributes=o||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=n,this.init()}var i=n(190);r.prototype.constructor=r,t.exports=r,r.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},r.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},r.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},r.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),n=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||(""!==t.getProgramInfoLog(r),t.deleteProgram(r),r=null),t.deleteShader(e),t.deleteShader(n),this.program=r},r.prototype.syncUniform=function(t){var e,n,r=t._location,o=t.value,a=this.gl;switch(t.type){case"b":case"bool":case"boolean":a.uniform1i(r,o?1:0);break;case"i":case"1i":a.uniform1i(r,o);break;case"f":case"1f":a.uniform1f(r,o);break;case"2f":a.uniform2f(r,o[0],o[1]);break;case"3f":a.uniform3f(r,o[0],o[1],o[2]);break;case"4f":a.uniform4f(r,o[0],o[1],o[2],o[3]);break;case"v2":a.uniform2f(r,o.x,o.y);break;case"v3":a.uniform3f(r,o.x,o.y,o.z);break;case"v4":a.uniform4f(r,o.x,o.y,o.z,o.w);break;case"1iv":a.uniform1iv(r,o);break;case"2iv":a.uniform2iv(r,o);break;case"3iv":a.uniform3iv(r,o);break;case"4iv":a.uniform4iv(r,o);break;case"1fv":a.uniform1fv(r,o);break;case"2fv":a.uniform2fv(r,o);break;case"3fv":a.uniform3fv(r,o);break;case"4fv":a.uniform4fv(r,o);break;case"m2":case"mat2":case"Matrix2fv":a.uniformMatrix2fv(r,t.transpose,o);break;case"m3":case"mat3":case"Matrix3fv":a.uniformMatrix3fv(r,t.transpose,o);break;case"m4":case"mat4":case"Matrix4fv":a.uniformMatrix4fv(r,t.transpose,o);break;case"c":"number"==typeof o&&(o=i.hex2rgb(o)),a.uniform3f(r,o[0],o[1],o[2]);break;case"iv1":a.uniform1iv(r,o);break;case"iv":a.uniform3iv(r,o);break;case"fv1":a.uniform1fv(r,o);break;case"fv":a.uniform3fv(r,o);break;case"v2v":for(t._array||(t._array=new Float32Array(2*o.length)),e=0,n=o.length;e<n;++e)t._array[2*e]=o[e].x,t._array[2*e+1]=o[e].y;a.uniform2fv(r,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*o.length)),e=0,n=o.length;e<n;++e)t._array[3*e]=o[e].x,t._array[3*e+1]=o[e].y,t._array[3*e+2]=o[e].z;a.uniform3fv(r,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*o.length)),e=0,n=o.length;e<n;++e)t._array[4*e]=o[e].x,t._array[4*e+1]=o[e].y,t._array[4*e+2]=o[e].z,t._array[4*e+3]=o[e].w;a.uniform4fv(r,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;a.activeTexture(a["TEXTURE"+this.textureCount]);var s=t.value.baseTexture._glTextures[a.id];s||(this.initSampler2D(t),s=t.value.baseTexture._glTextures[a.id]),a.bindTexture(a.TEXTURE_2D,s),a.uniform1i(t._location,this.textureCount),this.textureCount++}},r.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},r.prototype.initSampler2D=function(t){var e=this.gl,n=t.value.baseTexture;if(n.hasLoaded)if(t.textureData){var r=t.textureData;n._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,n._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,r.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.magFilter?r.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapS?r.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapT?r.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(n)},r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},r.prototype._glCompile=function(t,e){var n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:null}},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=n(219);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=n(219);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){function r(t){i.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=n(206),o=n(223);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},r.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},r.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool.pop();n||(n=[new o(e)]),n[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,n)},r.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},r.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},r.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},function(t,e,n){(function(e){function r(t){var n=new o.Matrix;i.call(this,a.readFileSync(e+"/spriteMaskFilter.vert","utf8"),a.readFileSync(e+"/spriteMaskFilter.frag","utf8"),{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:n.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=n}var i=n(224),o=n(181),a=n(225);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var i=this.getShader(t);r.applyFilter(i,e,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})}).call(e,"/")},function(t,e,n){function r(t,e,n){this.shaders=[],this.padding=0,this.uniforms=n||{},this.vertexSrc=t||i.defaultVertexSrc,this.fragmentSrc=e||i.defaultFragmentSrc}var i=n(218);r.prototype.constructor=r,t.exports=r,r.prototype.getShader=function(t){var e=t.gl,n=this.shaders[e.id];return n||(n=new i(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=n),n},r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);t.filterManager.applyFilter(i,e,n,r)},r.prototype.syncUniform=function(t){for(var e=0,n=this.shaders.length;e<n;++e)this.shaders[e].syncUniform(t)}},function(t,e){},function(t,e,n){function r(t){i.call(this,t),this.stencilMaskStack=null}var i=n(206),o=n(190);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},r.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var n=this.renderer.gl,r=this.stencilMaskStack;this.bindGraphics(t,e),0===r.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),r.reverse=!0,r.count=0),r.stencilStack.push(e);var i=r.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===e.mode?(n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),r.reverse?(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),r.reverse?n.stencilFunc(n.EQUAL,255-(i+1),255):n.stencilFunc(n.EQUAL,i+1,255),r.reverse=!r.reverse):(r.reverse?(n.stencilFunc(n.EQUAL,i,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-i,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),r.reverse?n.stencilFunc(n.EQUAL,i+1,255):n.stencilFunc(n.EQUAL,255-(i+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),r.count++},r.prototype.bindGraphics=function(t,e){var n,r=this.renderer.gl;1===e.mode?(n=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(t.tint)),r.uniform3fv(n.uniforms.color._location,e.color),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,8,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(n=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(n),r.uniformMatrix3fv(n.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(n.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(n.uniforms.tint._location,o.hex2rgb(t.tint)),r.uniform1f(n.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(n.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},r.prototype.popStencil=function(t,e){var n=this.renderer.gl,r=this.stencilMaskStack;if(r.stencilStack.pop(),r.count--,0===r.stencilStack.length)n.disable(n.STENCIL_TEST);else{var i=r.count;this.bindGraphics(t,e),n.colorMask(!1,!1,!1,!1),1===e.mode?(r.reverse=!r.reverse,r.reverse?(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,e.indices.length-4,n.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)):(r.reverse?(n.stencilFunc(n.EQUAL,i+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(i+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0),this.renderer.drawCount++,r.reverse?n.stencilFunc(n.EQUAL,i,255):n.stencilFunc(n.EQUAL,255-i,255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},r.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},function(t,e,n){function r(t){i.call(this,t),this.currentBlendMode=99999}var i=n(206);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},function(t,e,n){(function(e){function r(){i.call(this,o.readFileSync(e+"/FXAA.vert","utf8"),o.readFileSync(e+"/FXAA.frag","utf8"),{resolution:{type:"v2",value:{x:1,y:1}}})}var i=n(224),o=n(225);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager,i=this.getShader(t);r.applyFilter(i,e,n)}}).call(e,"/")},function(t,e,n){function r(t){i.call(this,t);var e=98304;this.indices=new Uint16Array(e);for(var n=0,r=0;n<e;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new u.Matrix}var i=n(214),o=n(215),a=n(230),s=n(231),u=n(181);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,o.registerPlugin("particle",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},r.prototype.render=function(t){var e=t.children,n=e.length,r=t._maxSize,i=t._batchSize;if(0!==n){n>r&&(n=r),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var o=this.renderer.gl,a=t.worldTransform.copy(this.tempMatrix);a.prepend(this.renderer.currentRenderTarget.projectionMatrix),o.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,a.toArray(!0)),o.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var s=e[0]._texture.baseTexture;if(s._glTextures[o.id])o.bindTexture(o.TEXTURE_2D,s._glTextures[o.id]);else{if(!this.renderer.updateTexture(s))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var u=0,c=0;u<n;u+=i,c+=1){var l=n-u;l>i&&(l=i);var h=t._buffers[c];h.uploadDynamic(e,u,l),t._bufferToUpdate===c&&(h.uploadStatic(e,u,l),t._bufferToUpdate=c+1),h.bind(this.shader),o.drawElements(o.TRIANGLES,6*l,o.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},r.prototype.generateBuffers=function(t){var e,n=this.renderer.gl,r=[],i=t._maxSize,o=t._batchSize,a=t._properties;for(e=0;e<i;e+=o)r.push(new s(n,this.properties,a,o));return r},r.prototype.uploadVertices=function(t,e,n,r,i,o){for(var a,s,u,c,l,h,f,d,p,v=0;v<n;v++)a=t[e+v],s=a._texture,c=a.scale.x,l=a.scale.y,s.trim?(u=s.trim,f=u.x-a.anchor.x*u.width,h=f+s.crop.width,p=u.y-a.anchor.y*u.height,d=p+s.crop.height):(h=s._frame.width*(1-a.anchor.x),f=s._frame.width*-a.anchor.x,d=s._frame.height*(1-a.anchor.y),p=s._frame.height*-a.anchor.y),r[o]=f*c,r[o+1]=p*l,r[o+i]=h*c,r[o+i+1]=p*l,r[o+2*i]=h*c,r[o+2*i+1]=d*l,r[o+3*i]=f*c,r[o+3*i+1]=d*l,o+=4*i},r.prototype.uploadPosition=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},r.prototype.uploadRotation=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},r.prototype.uploadUvs=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},r.prototype.uploadAlpha=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].alpha;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},r.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),i.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},function(t,e,n){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var i=n(218);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e){function n(t,e,n,r){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;i++){var o=e[i];n[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,t.exports=n,n.prototype.initBuffers=function(){var t,e,n=this.gl,r=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=r,r+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferData(n.ARRAY_BUFFER,this.dynamicData,n.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=i,i+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferData(n.ARRAY_BUFFER,this.staticData,n.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,n){for(var r=this.gl,i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,n,this.dynamicData,this.dynamicStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,n){for(var r=this.gl,i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,n,this.staticData,this.staticStride,o.offset)}r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,n=this.gl;for(n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],n.vertexAttribPointer(e.attribute,e.size,n.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],n.vertexAttribPointer(e.attribute,e.size,n.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},function(t,e,n){function r(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||u.RESOLUTION,this._text=null,this._style=null;var r=o.fromCanvas(this.canvas);r.trim=new a.Rectangle,i.call(this,r),this.text=t,this.style=e}var i=n(210),o=n(200),a=n(181),s=n(190),u=n(180);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.fontPropertiesCache={},r.fontPropertiesCanvas=document.createElement("canvas"),r.fontPropertiesContext=r.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(r.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(t){this.scale.x=t/this._texture._frame.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(t){this.scale.y=t/this._texture._frame.height,this._height=t}},style:{get:function(){return this._style},set:function(t){t=t||{},"number"==typeof t.fill&&(t.fill=s.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=s.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=s.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.breakWords=t.breakWords||!1,t.letterSpacing=t.letterSpacing||0,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,
t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=t.wordWrap?this.wordWrap(this._text):this._text,n=e.split(/(?:\r\n|\r|\n)/),r=new Array(n.length),i=0,o=this.determineFontProperties(t.font),a=0;a<n.length;a++){var s=this.context.measureText(n[a]).width+(n[a].length-1)*t.letterSpacing;r[a]=s,i=Math.max(i,s)}var u=i+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance),this.canvas.width=Math.ceil((u+this.context.lineWidth)*this.resolution);var c=this.style.lineHeight||o.fontSize+t.strokeThickness,l=c*n.length;t.dropShadow&&(l+=t.dropShadowDistance),this.canvas.height=Math.ceil((l+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit;var h,f;if(t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(a=0;a<n.length;a++)h=t.strokeThickness/2,f=t.strokeThickness/2+a*c+o.ascent,"right"===t.align?h+=i-r[a]:"center"===t.align&&(h+=(i-r[a])/2),t.fill&&this.drawLetterSpacing(n[a],h+d,f+p+t.padding)}for(this.context.fillStyle=t.fill,a=0;a<n.length;a++)h=t.strokeThickness/2,f=t.strokeThickness/2+a*c+o.ascent,"right"===t.align?h+=i-r[a]:"center"===t.align&&(h+=(i-r[a])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(n[a],h,f+t.padding,!0),t.fill&&this.drawLetterSpacing(n[a],h,f+t.padding);this.updateTexture()},r.prototype.drawLetterSpacing=function(t,e,n,r){var i=this._style,o=i.letterSpacing;if(0===o)return void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var a,s=String.prototype.split.call(t,""),u=0,c=e;u<t.length;)a=s[u++],r?this.context.strokeText(a,c,n):this.context.fillText(a,c,n),c+=this.context.measureText(a).width+o},r.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-e.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*e.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},r.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),i.prototype.renderWebGL.call(this,t)},r.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),i.prototype._renderCanvas.call(this,t)},r.prototype.determineFontProperties=function(t){var e=r.fontPropertiesCache[t];if(!e){e={};var n=r.fontPropertiesCanvas,i=r.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),a=Math.ceil(i.measureText("M").width),s=2*a;a=1.4*a|0,n.width=o,n.height=s,i.fillStyle="#f00",i.fillRect(0,0,o,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,a);var u,c,l=i.getImageData(0,0,o,s).data,h=l.length,f=4*o,d=0,p=!1;for(u=0;u<a;u++){for(c=0;c<f;c+=4)if(255!==l[d+c]){p=!0;break}if(p)break;d+=f}for(e.ascent=a-u,d=h-f,p=!1,u=s;u>a;u--){for(c=0;c<f;c+=4)if(255!==l[d+c]){p=!0;break}if(p)break;d-=f}e.descent=u-a,e.fontSize=e.ascent+e.descent,r.fontPropertiesCache[t]=e}return e},r.prototype.wordWrap=function(t){for(var e="",n=t.split("\n"),r=this._style.wordWrapWidth,i=0;i<n.length;i++){for(var o=r,a=n[i].split(" "),s=0;s<a.length;s++){var u=this.context.measureText(a[s]).width;if(this._style.breakWords&&u>r)for(var c=a[s].split(""),l=0;l<c.length;l++){var h=this.context.measureText(c[l]).width;h>o?(e+="\n"+c[l],o=r-h):(0===l&&(e+=" "),e+=c[l],o-=h)}else{var f=u+this.context.measureText(" ").width;0===s||f>o?(s>0&&(e+="\n"),e+=a[s],o=r-u):(o-=f,e+=" "+a[s])}}i<n.length-1&&(e+="\n")}return e},r.prototype.getBounds=function(t){return this.dirty&&this.updateText(),i.prototype.getBounds.call(this,t)},r.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t||t)}},function(t,e,n){function r(){i.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new c.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var i=n(209),o=n(200),a=n(208),s=n(234),u=n(235),c=n(181),l=n(180),h=new c.Point;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.clone=function(){var t=new r;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},r.prototype.lineStyle=function(t,e,n){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===n?1:n,this.currentPath)if(this.currentPath.shape.points.length){var r=new c.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},r.prototype.moveTo=function(t,e){var n=new c.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},r.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},r.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,a=20,s=this.currentPath.shape.points;0===s.length&&this.moveTo(0,0);for(var u=s[s.length-2],c=s[s.length-1],l=0,h=1;h<=a;++h)l=h/a,i=u+(t-u)*l,o=c+(e-c)*l,s.push(i+(t+(n-t)*l-i)*l,o+(e+(r-e)*l-o)*l);return this.dirty=this.boundsDirty=!0,this},r.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,u,c,l,h=20,f=this.currentPath.shape.points,d=f[f.length-2],p=f[f.length-1],v=0,g=1;g<=h;++g)v=g/h,a=1-v,s=a*a,u=s*a,c=v*v,l=c*v,f.push(u*d+3*s*v*t+3*a*c*n+l*i,u*p+3*s*v*e+3*a*c*r+l*o);return this.dirty=this.boundsDirty=!0,this},r.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,c=a-t,l=r-e,h=n-t,f=Math.abs(u*h-c*l);if(f<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=u*u+c*c,p=l*l+h*h,v=u*l+c*h,g=i*Math.sqrt(d)/f,y=i*Math.sqrt(p)/f,m=g*v/d,_=y*v/p,b=g*h+y*c,E=g*l+y*u,T=c*(y+m),x=u*(y+m),S=h*(g+_),w=l*(g+_),R=Math.atan2(x-E,T-b),A=Math.atan2(w-E,S-b);this.arc(b+t,E+e,i,R,A,c*l>h*u)}return this.dirty=this.boundsDirty=!0,this},r.prototype.arc=function(t,e,n,r,i,o){if(o=o||!1,r===i)return this;!o&&i<=r?i+=2*Math.PI:o&&r<=i&&(r+=2*Math.PI);var a=o?(r-i)*-1:i-r,s=40*Math.ceil(Math.abs(a)/(2*Math.PI));if(0===a)return this;var u=t+Math.cos(r)*n,c=e+Math.sin(r)*n;this.currentPath?this.currentPath.shape.points.push(u,c):this.moveTo(u,c);for(var l=this.currentPath.shape.points,h=a/(2*s),f=2*h,d=Math.cos(h),p=Math.sin(h),v=s-1,g=v%1/v,y=0;y<=v;y++){var m=y+g*y,_=h+r+f*m,b=Math.cos(_),E=-Math.sin(_);l.push((d*b+p*E)*n+t,(d*-E+p*b)*n+e)}return this.dirty=this.boundsDirty=!0,this},r.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(t,e,n,r){return this.drawShape(new c.Rectangle(t,e,n,r)),this},r.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new c.RoundedRectangle(t,e,n,r,i)),this},r.prototype.drawCircle=function(t,e,n){return this.drawShape(new c.Circle(t,e,n)),this},r.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new c.Ellipse(t,e,n,r)),this},r.prototype.drawPolygon=function(t){var e=t,n=!0;if(e instanceof c.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var i=new c.Polygon(e);return i.closed=n,this.drawShape(i),this},r.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},r.prototype.generateTexture=function(t,e,n){e=e||1;var r=this.getLocalBounds(),i=new a(r.width*e,r.height*e),u=o.fromCanvas(i.canvas,n);return u.baseTexture.resolution=e,i.context.scale(e,e),i.context.translate(-r.x,-r.y),s.renderGraphics(this,i.context),u},r.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},r.prototype._renderCanvas=function(t){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,n=this.worldTransform,r=t.blendModes[this.blendMode];r!==e.globalCompositeOperation&&(e.globalCompositeOperation=r);var i=t.resolution;e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),s.renderGraphics(this,e)}},r.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return c.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,n=e.x,r=e.width+e.x,i=e.y,o=e.height+e.y,a=t||this.worldTransform,s=a.a,u=a.b,l=a.c,h=a.d,f=a.tx,d=a.ty,p=s*r+l*o+f,v=h*o+u*r+d,g=s*n+l*o+f,y=h*o+u*n+d,m=s*n+l*i+f,_=h*i+u*n+d,b=s*r+l*i+f,E=h*i+u*r+d,T=p,x=v,S=p,w=v;S=g<S?g:S,S=m<S?m:S,S=b<S?b:S,w=y<w?y:w,w=_<w?_:w,w=E<w?E:w,T=g>T?g:T,T=m>T?m:T,T=b>T?b:T,x=y>x?y:x,x=_>x?_:x,x=E>x?E:x,this._bounds.x=S,this._bounds.width=T-S,this._bounds.y=w,this._bounds.height=x-w,this._currentBounds=this._bounds}return this._currentBounds},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);for(var e=this.graphicsData,n=0;n<e.length;n++){var r=e[n];if(r.fill&&r.shape&&r.shape.contains(h.x,h.y))return!0}return!1},r.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),n=1/0,r=-(1/0);if(this.graphicsData.length)for(var i,o,a,s,u,c,h=0;h<this.graphicsData.length;h++){var f=this.graphicsData[h],d=f.type,p=f.lineWidth;if(i=f.shape,d===l.SHAPES.RECT||d===l.SHAPES.RREC)a=i.x-p/2,s=i.y-p/2,u=i.width+p,c=i.height+p,t=a<t?a:t,e=a+u>e?a+u:e,n=s<n?s:n,r=s+c>r?s+c:r;else if(d===l.SHAPES.CIRC)a=i.x,s=i.y,u=i.radius+p/2,c=i.radius+p/2,t=a-u<t?a-u:t,e=a+u>e?a+u:e,n=s-c<n?s-c:n,r=s+c>r?s+c:r;else if(d===l.SHAPES.ELIP)a=i.x,s=i.y,u=i.width+p/2,c=i.height+p/2,t=a-u<t?a-u:t,e=a+u>e?a+u:e,n=s-c<n?s-c:n,r=s+c>r?s+c:r;else{o=i.points;for(var v=0;v<o.length;v+=2)a=o[v],s=o[v+1],t=a-p<t?a-p:t,e=a+p>e?a+p:e,n=s-p<n?s-p:n,r=s+p>r?s+p:r}}else t=0,e=0,n=0,r=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=n-g,this._localBounds.height=r-n+2*g},r.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===l.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},r.prototype.destroy=function(){i.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var n=0;n<this._webgl[e].data.length;++n)this._webgl[e].data[n].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},function(t,e,n){var r=n(180),i={};t.exports=i,i.renderGraphics=function(t,e){var n=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=o.shape,s=o._fillTint,u=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===r.SHAPES.POLY){e.beginPath();var c=a.points;e.moveTo(c[0],c[1]);for(var l=1;l<c.length/2;l++)e.lineTo(c[2*l],c[2*l+1]);a.closed&&e.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===r.SHAPES.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fillRect(a.x,a.y,a.width,a.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.strokeRect(a.x,a.y,a.width,a.height));else if(o.type===r.SHAPES.CIRC)e.beginPath(),e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke());else if(o.type===r.SHAPES.ELIP){var h=2*a.width,f=2*a.height,d=a.x-h/2,p=a.y-f/2;e.beginPath();var v=.5522848,g=h/2*v,y=f/2*v,m=d+h,_=p+f,b=d+h/2,E=p+f/2;e.moveTo(d,E),e.bezierCurveTo(d,E-y,b-g,p,b,p),e.bezierCurveTo(b+g,p,m,E-y,m,E),e.bezierCurveTo(m,E+y,b+g,_,b,_),e.bezierCurveTo(b-g,_,d,E+y,d,E),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===r.SHAPES.RREC){var T=a.x,x=a.y,S=a.width,w=a.height,R=a.radius,A=Math.min(S,w)/2|0;R=R>A?A:R,e.beginPath(),e.moveTo(T,x+R),e.lineTo(T,x+w-R),e.quadraticCurveTo(T,x+w,T+R,x+w),e.lineTo(T+S-R,x+w),e.quadraticCurveTo(T+S,x+w,T+S,x+w-R),e.lineTo(T+S,x+R),e.quadraticCurveTo(T+S,x,T+S-R,x),e.lineTo(T+R,x),e.quadraticCurveTo(T,x,T,x+R),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*n,e.fillStyle="#"+("00000"+(0|s).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*n,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}}},i.renderGraphicsMask=function(t,e){var n=t.graphicsData.length;if(0!==n){e.beginPath();for(var i=0;i<n;i++){var o=t.graphicsData[i],a=o.shape;if(o.type===r.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===r.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var c=2*a.width,l=2*a.height,h=a.x-c/2,f=a.y-l/2,d=.5522848,p=c/2*d,v=l/2*d,g=h+c,y=f+l,m=h+c/2,_=f+l/2;e.moveTo(h,_),e.bezierCurveTo(h,_-v,m-p,f,m,f),e.bezierCurveTo(m+p,f,g,_-v,g,_),e.bezierCurveTo(g,_+v,m+p,y,m,y),e.bezierCurveTo(m-p,y,h,_+v,h,_),e.closePath()}else if(o.type===r.SHAPES.RREC){var b=a.x,E=a.y,T=a.width,x=a.height,S=a.radius,w=Math.min(T,x)/2|0;S=S>w?w:S,e.moveTo(b,E+S),e.lineTo(b,E+x-S),e.quadraticCurveTo(b,E+x,b+S,E+x),e.lineTo(b+T-S,E+x),e.quadraticCurveTo(b+T,E+x,b+T,E+x-S),e.lineTo(b+T,E+S),e.quadraticCurveTo(b+T,E,b+T-S,E),e.lineTo(b+S,E),e.quadraticCurveTo(b,E,b,E+S),e.closePath()}}}},i.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}}}},function(t,e){function n(t,e,n,r,i,o,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this._lineTint=e,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=a,this.type=a.type}n.prototype.constructor=n,t.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},function(t,e,n){function r(t){s.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var i=n(190),o=n(181),a=n(180),s=n(214),u=n(215),c=n(237),l=n(238);r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,u.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){s.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},r.prototype.render=function(t){var e,n=this.renderer,r=n.gl,o=n.shaderManager.plugins.primitiveShader;!t.dirty&&t._webGL[r.id]||this.updateGraphics(t);var a=t._webGL[r.id];n.blendModeManager.setBlendMode(t.blendMode);for(var s=0,u=a.data.length;s<u;s++)e=a.data[s],1===a.data[s].mode?(n.stencilManager.pushStencil(t,e),r.uniform1f(n.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),n.stencilManager.popStencil(t,e)):(o=n.shaderManager.primitiveShader,n.shaderManager.setShader(o),r.uniformMatrix3fv(o.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),r.uniformMatrix3fv(o.uniforms.projectionMatrix._location,!1,n.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(o.uniforms.tint._location,i.hex2rgb(t.tint)),r.uniform1f(o.uniforms.alpha._location,t.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,e.buffer),r.vertexAttribPointer(o.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(o.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.indexBuffer),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0)),n.drawCount++},r.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[e.id];n||(n=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var r;if(t.clearDirty){for(t.clearDirty=!1,r=0;r<n.data.length;r++){var i=n.data[r];i.reset(),this.graphicsDataPool.push(i)}n.data=[],n.lastIndex=0}var o;for(r=n.lastIndex;r<t.graphicsData.length;r++){var s=t.graphicsData[r];if(s.type===a.SHAPES.POLY){if(s.points=s.shape.points.slice(),s.shape.closed&&(s.points[0]===s.points[s.points.length-2]&&s.points[1]===s.points[s.points.length-1]||s.points.push(s.points[0],s.points[1])),s.fill&&s.points.length>=6)if(s.points.length<2*this.maximumSimplePolySize){o=this.switchMode(n,0);var u=this.buildPoly(s,o);u||(o=this.switchMode(n,1),this.buildComplexPoly(s,o))}else o=this.switchMode(n,1),this.buildComplexPoly(s,o);s.lineWidth>0&&(o=this.switchMode(n,0),this.buildLine(s,o))}else o=this.switchMode(n,0),s.type===a.SHAPES.RECT?this.buildRectangle(s,o):s.type===a.SHAPES.CIRC||s.type===a.SHAPES.ELIP?this.buildCircle(s,o):s.type===a.SHAPES.RREC&&this.buildRoundedRectangle(s,o);n.lastIndex++}for(r=0;r<n.data.length;r++)o=n.data[r],o.dirty&&o.upload()},r.prototype.switchMode=function(t,e){var n;return t.data.length?(n=t.data[t.data.length-1],(n.points.length>32e4||n.mode!==e||1===e)&&(n=this.graphicsDataPool.pop()||new c(t.gl),n.mode=e,t.data.push(n))):(n=this.graphicsDataPool.pop()||new c(t.gl),n.mode=e,t.data.push(n)),n.dirty=!0,n},r.prototype.buildRectangle=function(t,e){var n=t.shape,r=n.x,o=n.y,a=n.width,s=n.height;if(t.fill){var u=i.hex2rgb(t.fillColor),c=t.fillAlpha,l=u[0]*c,h=u[1]*c,f=u[2]*c,d=e.points,p=e.indices,v=d.length/6;d.push(r,o),d.push(l,h,f,c),d.push(r+a,o),d.push(l,h,f,c),d.push(r,o+s),d.push(l,h,f,c),d.push(r+a,o+s),d.push(l,h,f,c),p.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var g=t.points;t.points=[r,o,r+a,o,r+a,o+s,r,o+s,r,o],this.buildLine(t,e),t.points=g}},r.prototype.buildRoundedRectangle=function(t,e){var n=t.shape,r=n.x,o=n.y,a=n.width,s=n.height,u=n.radius,c=[];if(c.push(r,o+u),this.quadraticBezierCurve(r,o+s-u,r,o+s,r+u,o+s,c),this.quadraticBezierCurve(r+a-u,o+s,r+a,o+s,r+a,o+s-u,c),this.quadraticBezierCurve(r+a,o+u,r+a,o,r+a-u,o,c),this.quadraticBezierCurve(r+u,o,r,o,r,o+u+1e-10,c),t.fill){var h=i.hex2rgb(t.fillColor),f=t.fillAlpha,d=h[0]*f,p=h[1]*f,v=h[2]*f,g=e.points,y=e.indices,m=g.length/6,_=l(c,null,2),b=0;for(b=0;b<_.length;b+=3)y.push(_[b]+m),y.push(_[b]+m),y.push(_[b+1]+m),y.push(_[b+2]+m),y.push(_[b+2]+m);for(b=0;b<c.length;b++)g.push(c[b],c[++b],d,p,v,f)}if(t.lineWidth){var E=t.points;t.points=c,this.buildLine(t,e),t.points=E}},r.prototype.quadraticBezierCurve=function(t,e,n,r,i,o,a){function s(t,e,n){var r=e-t;return t+r*n}for(var u,c,l,h,f,d,p=20,v=a||[],g=0,y=0;y<=p;y++)g=y/p,u=s(t,n,g),c=s(e,r,g),l=s(n,i,g),h=s(r,o,g),f=s(u,l,g),d=s(c,h,g),v.push(f,d);return v},r.prototype.buildCircle=function(t,e){var n,r,o=t.shape,s=o.x,u=o.y;t.type===a.SHAPES.CIRC?(n=o.radius,r=o.radius):(n=o.width,r=o.height);var c=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),l=2*Math.PI/c,h=0;if(t.fill){var f=i.hex2rgb(t.fillColor),d=t.fillAlpha,p=f[0]*d,v=f[1]*d,g=f[2]*d,y=e.points,m=e.indices,_=y.length/6;for(m.push(_),h=0;h<c+1;h++)y.push(s,u,p,v,g,d),y.push(s+Math.sin(l*h)*n,u+Math.cos(l*h)*r,p,v,g,d),m.push(_++,_++);m.push(_-1)}if(t.lineWidth){var b=t.points;for(t.points=[],h=0;h<c+1;h++)t.points.push(s+Math.sin(l*h)*n,u+Math.cos(l*h)*r);this.buildLine(t,e),t.points=b}},r.prototype.buildLine=function(t,e){var n=0,r=t.points;if(0!==r.length){var a=new o.Point(r[0],r[1]),s=new o.Point(r[r.length-2],r[r.length-1]);if(a.x===s.x&&a.y===s.y){r=r.slice(),r.pop(),r.pop(),s=new o.Point(r[r.length-2],r[r.length-1]);var u=s.x+.5*(a.x-s.x),c=s.y+.5*(a.y-s.y);r.unshift(u,c),r.push(u,c)}var l,h,f,d,p,v,g,y,m,_,b,E,T,x,S,w,R,A,O,C,P,M,L,k=e.points,I=e.indices,D=r.length/2,F=r.length,N=k.length/6,U=t.lineWidth/2,j=i.hex2rgb(t.lineColor),B=t.lineAlpha,G=j[0]*B,H=j[1]*B,W=j[2]*B;for(f=r[0],d=r[1],p=r[2],v=r[3],m=-(d-v),_=f-p,L=Math.sqrt(m*m+_*_),m/=L,_/=L,m*=U,_*=U,k.push(f-m,d-_,G,H,W,B),k.push(f+m,d+_,G,H,W,B),n=1;n<D-1;n++)f=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],v=r[2*n+1],g=r[2*(n+1)],y=r[2*(n+1)+1],m=-(d-v),_=f-p,L=Math.sqrt(m*m+_*_),m/=L,_/=L,m*=U,_*=U,b=-(v-y),E=p-g,L=Math.sqrt(b*b+E*E),b/=L,E/=L,b*=U,E*=U,S=-_+d-(-_+v),w=-m+p-(-m+f),R=(-m+f)*(-_+v)-(-m+p)*(-_+d),A=-E+y-(-E+v),O=-b+p-(-b+g),C=(-b+g)*(-E+v)-(-b+p)*(-E+y),P=S*O-A*w,Math.abs(P)<.1?(P+=10.1,k.push(p-m,v-_,G,H,W,B),k.push(p+m,v+_,G,H,W,B)):(l=(w*C-O*R)/P,h=(A*R-S*C)/P,M=(l-p)*(l-p)+(h-v)*(h-v),M>19600?(T=m-b,x=_-E,L=Math.sqrt(T*T+x*x),T/=L,x/=L,T*=U,x*=U,k.push(p-T,v-x),k.push(G,H,W,B),k.push(p+T,v+x),k.push(G,H,W,B),k.push(p-T,v-x),k.push(G,H,W,B),F++):(k.push(l,h),k.push(G,H,W,B),k.push(p-(l-p),v-(h-v)),k.push(G,H,W,B)));for(f=r[2*(D-2)],d=r[2*(D-2)+1],p=r[2*(D-1)],v=r[2*(D-1)+1],m=-(d-v),_=f-p,L=Math.sqrt(m*m+_*_),m/=L,_/=L,m*=U,_*=U,k.push(p-m,v-_),k.push(G,H,W,B),k.push(p+m,v+_),k.push(G,H,W,B),I.push(N),n=0;n<F;n++)I.push(N++);I.push(N-1)}},r.prototype.buildComplexPoly=function(t,e){var n=t.points.slice();if(!(n.length<6)){var r=e.indices;e.points=n,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var o,a,s=1/0,u=-(1/0),c=1/0,l=-(1/0),h=0;h<n.length;h+=2)o=n[h],a=n[h+1],s=o<s?o:s,u=o>u?o:u,c=a<c?a:c,l=a>l?a:l;n.push(s,c,u,c,u,l,s,l);var f=n.length/2;for(h=0;h<f;h++)r.push(h)}},r.prototype.buildPoly=function(t,e){var n=t.points;if(!(n.length<6)){var r=e.points,o=e.indices,a=n.length/2,s=i.hex2rgb(t.fillColor),u=t.fillAlpha,c=s[0]*u,h=s[1]*u,f=s[2]*u,d=l(n,null,2);if(!d)return!1;var p=r.length/6,v=0;for(v=0;v<d.length;v+=3)o.push(d[v]+p),o.push(d[v]+p),o.push(d[v+1]+p),o.push(d[v+2]+p),o.push(d[v+2]+p);for(v=0;v<a;v++)r.push(n[2*v],n[2*v+1],c,h,f,u);return!0}}},function(t,e){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,t.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},function(t,e){"use strict";function n(t,e,n){n=n||2;var i=e&&e.length,a=i?e[0]*n:t.length,s=r(t,0,a,n,!0),u=[];if(!s)return u;var c,h,f,d,p,v,g;if(i&&(s=l(t,e,s,n)),t.length>80*n){c=f=t[0],h=d=t[1];for(var y=n;y<a;y+=n)p=t[y],v=t[y+1],p<c&&(c=p),v<h&&(h=v),p>f&&(f=p),v>d&&(d=v);g=Math.max(f-c,d-h),g=0!==g?1/g:0}return o(s,u,n,c,h,g),u}function r(t,e,n,r,i){var o,a;if(i===P(t,e,n,r)>0)for(o=e;o<n;o+=r)a=A(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=A(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(O(a),a=a.next),a}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!E(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{if(O(r),r=e=r.prev,r===r.next)break;n=!0}while(n||r!==e);return e}function o(t,e,n,r,l,h,f){if(t){!f&&h&&p(t,r,l,h);for(var d,v,g=t;t.prev!==t.next;)if(d=t.prev,v=t.next,h?s(t,r,l,h):a(t))e.push(d.i/n),e.push(t.i/n),e.push(v.i/n),O(t),t=v.next,g=v.next;else if(t=v,t===g){f?1===f?(t=u(t,e,n),o(t,e,n,r,l,h,2)):2===f&&c(t,e,n,r,l,h):o(i(t),e,n,r,l,h,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(b(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&b(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,a=t.next;if(b(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=g(s,u,e,n,r),f=g(c,l,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function u(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!E(i,o)&&T(i,r,r.next,o)&&S(i,o)&&S(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),O(r),O(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,a,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&_(u,c)){var l=R(u,c);return u=i(u,u.next),l=i(l,l.next),o(u,e,n,r,a,s),void o(l,e,n,r,a,s)}c=c.next}u=u.next}while(u!==t)}function l(t,e,n,o){var a,s,u,c,l,d=[];for(a=0,s=e.length;a<s;a++)u=e[a]*o,c=a<s-1?e[a+1]*o:t.length,l=r(t,u,c,o,!1),l===l.next&&(l.steiner=!0),d.push(y(l));for(d.sort(h),a=0;a<d.length;a++)f(d[a],n),n=i(n,n.next);return n}function h(t,e){return t.x-e.x}function f(t,e){if(e=d(t,e)){var n=R(e,t);i(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&m(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<f||u===f&&r.x>n.x)&&S(r,t)&&(n=r,f=u)),r=r.next;return n}function p(t,e,n,r){var i=t;do null===i.z&&(i.z=g(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,r);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function g(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function m(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!x(t,e)&&S(t,e)&&S(e,t)&&w(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,n,r){return!!(E(t,e)&&E(n,r)||E(t,r)&&E(n,e))||b(t,e,n)>0!=b(t,e,r)>0&&b(n,r,t)>0!=b(n,r,e)>0}function x(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&T(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function S(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function w(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function R(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function A(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=n,t.exports["default"]=n,n.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(P(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(P(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){function r(t,e,n){n=n||{},i.call(this,"Canvas",t,e,n),this.type=u.RENDERER_TYPE.CANVAS,
this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new o,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1},this.resize(t,e)}var i=n(216),o=n(240),a=n(190),s=n(181),u=n(180);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,a.pluginTarget.mixin(r),r.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[u.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},r.prototype.destroy=function(t){this.destroyPlugins(),i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},r.prototype.renderDisplayObject=function(t,e){var n=this.context;this.context=e,t.renderCanvas(this),this.context=n},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=u.SCALE_MODES.DEFAULT===u.SCALE_MODES.LINEAR)},r.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},a.canUseNewCanvasBlendModes()?(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[u.BLEND_MODES.SCREEN]="screen",this.blendModes[u.BLEND_MODES.OVERLAY]="overlay",this.blendModes[u.BLEND_MODES.DARKEN]="darken",this.blendModes[u.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[u.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[u.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[u.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[u.BLEND_MODES.HUE]="hue",this.blendModes[u.BLEND_MODES.SATURATION]="saturate",this.blendModes[u.BLEND_MODES.COLOR]="color",this.blendModes[u.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[u.BLEND_MODES.NORMAL]="source-over",this.blendModes[u.BLEND_MODES.ADD]="lighter",this.blendModes[u.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[u.BLEND_MODES.SCREEN]="source-over",this.blendModes[u.BLEND_MODES.OVERLAY]="source-over",this.blendModes[u.BLEND_MODES.DARKEN]="source-over",this.blendModes[u.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[u.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[u.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[u.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[u.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[u.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[u.BLEND_MODES.HUE]="source-over",this.blendModes[u.BLEND_MODES.SATURATION]="source-over",this.blendModes[u.BLEND_MODES.COLOR]="source-over",this.blendModes[u.BLEND_MODES.LUMINOSITY]="source-over"))}},function(t,e,n){function r(){}var i=n(234);r.prototype.constructor=r,t.exports=r,r.prototype.pushMask=function(t,e){e.context.save();var n=t.alpha,r=t.worldTransform,o=e.resolution;e.context.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.texture||(i.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=n},r.prototype.popMask=function(t){t.context.restore()},r.prototype.destroy=function(){}},function(t,e,n){/**
	 * @file        Main export of the PIXI extras library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
n(242),n(243),n(244),t.exports={MovieClip:n(245),TilingSprite:n(246),BitmapText:n(247)}},function(t,e,n){var r=n(179),i=r.DisplayObject,o=new r.Matrix;i.prototype._cacheAsBitmap=!1,i.prototype._originalRenderWebGL=null,i.prototype._originalRenderCanvas=null,i.prototype._originalUpdateTransform=null,i.prototype._originalHitTest=null,i.prototype._originalDestroy=null,i.prototype._cachedSprite=null,Object.defineProperties(i.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),i.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},i.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n}var i=t.currentRenderTarget,a=t.filterManager.filterStack,s=new r.RenderTexture(t,0|e.width,0|e.height),u=o;u.tx=-e.x,u.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,s.render(this,u,!0,!0),t.setRenderTarget(i),t.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(s),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},i.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),n=t.context,i=new r.RenderTexture(t,0|e.width,0|e.height),a=o;a.tx=-e.x,a.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,i.render(this,a,!0),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new r.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},i.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},i.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},i.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},function(t,e,n){var r=n(179);r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,n){var r=n(179);r.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new r.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,n){function r(t){i.Sprite.call(this,t[0]instanceof i.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var i=n(179);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof i.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}}),r.prototype.stop=function(){this.playing&&(this.playing=!1,i.ticker.shared.remove(this.update,this))},r.prototype.play=function(){this.playing||(this.playing=!0,i.ticker.shared.add(this.update,this))},r.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},r.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},r.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},r.prototype.destroy=function(){this.stop(),i.Sprite.prototype.destroy.call(this)},r.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(new i.Texture.fromFrame(t[n]));return new r(e)},r.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(new i.Texture.fromImage(t[n]));return new r(e)}},function(t,e,n){function r(t,e,n){i.Sprite.call(this,t),this.tileScale=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this._width=e||100,this._height=n||100,this._uvs=new i.TextureUvs,this._canvasPattern=null,this.shader=new i.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var i=n(179),o=new i.Point,a=n(211);r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),r.prototype._onTextureUpdate=function(){},r.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var n=e._uvs,r=e._frame.width,i=e._frame.height,o=e.baseTexture.width,a=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/a,this.shader.uniforms.uFrame.value[0]=n.x0,this.shader.uniforms.uFrame.value[1]=n.y0,this.shader.uniforms.uFrame.value[2]=n.x1-n.x0,this.shader.uniforms.uFrame.value[3]=n.y2-n.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(r*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(i*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=a/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=n,e._frame.width=r,e._frame.height=i}},r.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,r=this.worldTransform,o=t.resolution,s=e.baseTexture,u=this.tilePosition.x/this.tileScale.x%e._frame.width,c=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var l=new i.CanvasBuffer(e._frame.width*o,e._frame.height*o);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(s.source,-e._frame.x*o,-e._frame.y*o),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),n.scale(this.tileScale.x/o,this.tileScale.y/o),n.translate(u+this.anchor.x*-this._width,c+this.anchor.y*-this._height);var h=t.blendModes[this.blendMode];h!==t.context.globalCompositeOperation&&(n.globalCompositeOperation=h),n.fillStyle=this._canvasPattern,n.fillRect(-u,-c,this._width*o/this.tileScale.x,this._height*o/this.tileScale.y)}},r.prototype.getBounds=function(){var t,e,n,r,i=this._width,o=this._height,a=i*(1-this.anchor.x),s=i*-this.anchor.x,u=o*(1-this.anchor.y),c=o*-this.anchor.y,l=this.worldTransform,h=l.a,f=l.b,d=l.c,p=l.d,v=l.tx,g=l.ty,y=h*s+d*c+v,m=p*c+f*s+g,_=h*a+d*c+v,b=p*c+f*a+g,E=h*a+d*u+v,T=p*u+f*a+g,x=h*s+d*u+v,S=p*u+f*s+g;t=y,t=_<t?_:t,t=E<t?E:t,t=x<t?x:t,n=m,n=b<n?b:n,n=T<n?T:n,n=S<n?S:n,e=y,e=_>e?_:e,e=E>e?E:e,e=x>e?x:e,r=m,r=b>r?b:r,r=T>r?T:r,r=S>r?S:r;var w=this._bounds;return w.x=t,w.width=e-t,w.y=n,w.height=r-n,this._currentBounds=w,w},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e,n=this._width,r=this._height,i=-n*this.anchor.x;return o.x>i&&o.x<i+n&&(e=-r*this.anchor.y,o.y>e&&o.y<e+r)},r.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},r.fromFrame=function(t,e,n){var o=i.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new r(o,e,n)},r.fromImage=function(t,e,n,o,a){return new r(i.Texture.fromImage(t,o,a),e,n)}},function(t,e,n){function r(t,e){i.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var i=n(179);r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):r.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),r.prototype.updateText=function(){for(var t=r.fonts[this._font.name],e=new i.Point,n=null,o=[],a=0,s=0,u=[],c=0,l=this._font.size/t.size,h=-1,f=0,d=0;d<this.text.length;d++){var p=this.text.charCodeAt(d);if(h=/(\s)/.test(this.text.charAt(d))?d:h,/(?:\r\n|\r|\n)/.test(this.text.charAt(d)))u.push(a),s=Math.max(s,a),c++,e.x=0,e.y+=t.lineHeight,n=null;else if(h!==-1&&this.maxWidth>0&&e.x*l>this.maxWidth)i.utils.removeItems(o,h,d-h),d=h,h=-1,u.push(a),s=Math.max(s,a),c++,e.x=0,e.y+=t.lineHeight,n=null;else{var v=t.chars[p];v&&(n&&v.kerning[n]&&(e.x+=v.kerning[n]),o.push({texture:v.texture,line:c,charCode:p,position:new i.Point(e.x+v.xOffset,e.y+v.yOffset)}),a=e.x+(v.texture.width+v.xOffset),e.x+=v.xAdvance,f=Math.max(f,v.yOffset+v.texture.height),n=p)}}u.push(a),s=Math.max(s,a);var g=[];for(d=0;d<=c;d++){var y=0;"right"===this._font.align?y=s-u[d]:"center"===this._font.align&&(y=(s-u[d])/2),g.push(y)}var m=o.length,_=this.tint;for(d=0;d<m;d++){var b=this._glyphs[d];b?b.texture=o[d].texture:(b=new i.Sprite(o[d].texture),this._glyphs.push(b)),b.position.x=(o[d].position.x+g[o[d].line])*l,b.position.y=o[d].position.y*l,b.scale.x=b.scale.y=l,b.tint=_,b.parent||this.addChild(b)}for(d=m;d<this._glyphs.length;++d)this.removeChild(this._glyphs[d]);this.textWidth=s*l,this.textHeight=(e.y+t.lineHeight)*l,this.maxLineHeight=f*l},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),i.Container.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},r.fonts={}},function(t,e,n){/**
	 * @file        Main export of the PIXI filters library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
t.exports={AsciiFilter:n(249),BloomFilter:n(250),BlurFilter:n(253),BlurXFilter:n(251),BlurYFilter:n(252),BlurDirFilter:n(254),ColorMatrixFilter:n(255),ColorStepFilter:n(256),ConvolutionFilter:n(257),CrossHatchFilter:n(258),DisplacementFilter:n(259),DotScreenFilter:n(260),GrayFilter:n(261),DropShadowFilter:n(262),InvertFilter:n(264),NoiseFilter:n(265),PixelateFilter:n(266),RGBSplitFilter:n(267),ShockwaveFilter:n(268),SepiaFilter:n(269),SmartBlurFilter:n(270),TiltShiftFilter:n(271),TiltShiftXFilter:n(272),TiltShiftYFilter:n(274),TwistFilter:n(275)}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/ascii.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a,this.defaultFilter=new i.AbstractFilter}var i=n(179),o=n(251),a=n(252);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,n),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(i.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,r,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurX.vert","utf8"),o.readFileSync(e+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,!0);var c=s;s=a,a=c}t.filterManager.applyFilter(i,a,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurY.vert","utf8"),o.readFileSync(e+"/blur.frag","utf8"),{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,!0);var c=s;s=a,a=c}t.filterManager.applyFilter(i,a,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYFilter=new a}var i=n(179),o=n(251),a=n(252);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,r),this.blurYFilter.applyFilter(t,r,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},function(t,e,n){(function(e){function r(t,n){i.AbstractFilter.call(this,o.readFileSync(e+"/blurDir.vert","utf8"),o.readFileSync(e+"/blurDir.frag","utf8"),{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:n||0}}),this.defaultFilter=new i.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=n||0,this.strength=4}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{var o=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(i,e,o,r);for(var a=0;a<this.passes-2;a++)t.filterManager.applyFilter(i,o,o,r);t.filterManager.applyFilter(i,o,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/colorMatrix.frag","utf8"),{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype._loadMatrix=function(t,e){e=!!e;var n=t;e&&(this._multiply(n,this.uniforms.m.value,t),n=this._colorMatrix(n)),this.uniforms.m.value=n},r.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19],t},r.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},r.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.grayscale=r.prototype.greyscale,r.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=.213,o=.715,a=.072,s=[i+n*(1-i)+r*-i,o+n*-o+r*-o,a+n*-a+r*(1-a),0,0,i+n*-i+.143*r,o+n*(1-o)+.14*r,a+n*-a+r*-.283,0,0,i+n*-i+r*-(1-i),o+n*-o+r*o,a+n*(1-a)+r*a,0,0,0,0,0,1,0];this._loadMatrix(s,e)},r.prototype.contrast=function(t,e){var n=(t||0)+1,r=-128*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.saturate=function(t,e){var n=2*(t||0)/3+1,r=(n-1)*-.5,i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},r.prototype.desaturate=function(t){this.saturate(-1)},r.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.colorTone=function(t,e,n,r,i){t=t||.2,e=e||.15,n=n||16770432,r=r||3375104;var o=(n>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=(r>>16&255)/255,c=(r>>8&255)/255,l=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t,0,u,c,l,e,0,o-u,a-c,s-l,0,0];this._loadMatrix(h,i)},r.prototype.night=function(t,e){t=t||.1;var n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},r.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/colorStep.frag","utf8"),{step:{type:"1f",value:5}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(t,n,r){i.AbstractFilter.call(this,null,o.readFileSync(e+"/convolution.frag","utf8"),{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/n,y:1/r}}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/crosshatch.frag","utf8"))}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r}).call(e,"/")},function(t,e,n){(function(e){function r(t,n){var r=new i.Matrix;t.renderable=!1,i.AbstractFilter.call(this,o.readFileSync(e+"/displacement.vert","utf8"),o.readFileSync(e+"/displacement.frag","utf8"),{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:r.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=r,null!==n&&void 0!==n||(n=20),this.scale=new i.Point(n,n)}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager;r.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var i=this.getShader(t);r.applyFilter(i,e,n)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/dotScreen.frag","utf8"),{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/gray.frag","utf8"),{gray:{type:"1f",value:1}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.blurXFilter=new o,this.blurYTintFilter=new a,this.defaultFilter=new i.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=i.BLEND_MODES.MULTIPLY}var i=n(179),o=n(251),a=n(263);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,r),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,r,n),t.blendModeManager.setBlendMode(i.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return i.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=i.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,o.readFileSync(e+"/blurYTint.vert","utf8"),o.readFileSync(e+"/blurYTint.frag","utf8"),{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n,r){var i=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(i,e,n,r);else{for(var o=t.filterManager.getRenderTarget(!0),a=e,s=o,u=0;u<this.passes-1;u++){t.filterManager.applyFilter(i,a,s,r);var c=s;s=a,a=c}t.filterManager.applyFilter(i,a,n,r),t.filterManager.returnRenderTarget(o)}},Object.defineProperties(r.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/invert.frag","utf8"),{invert:{type:"1f",value:1}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/noise.frag","utf8"),{noise:{type:"1f",value:.5}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/pixelate.frag","utf8"),{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/rgbSplit.frag","utf8"),{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/shockwave.frag","utf8"),{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/sepia.frag","utf8"),{sepia:{type:"1f",value:1}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})}).call(e,"/")},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/smartBlur.frag","utf8"),{delta:{type:"v2",value:{x:.1,y:0}}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r}).call(e,"/")},function(t,e,n){function r(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new o,this.tiltShiftYFilter=new a}var i=n(179),o=n(272),a=n(274);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.applyFilter=function(t,e,n){var r=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,r),this.tiltShiftYFilter.applyFilter(t,r,n),t.filterManager.returnRenderTarget(r)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},function(t,e,n){function r(){i.call(this)}var i=n(273);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/n,this.uniforms.delta.value.y=e/n}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/tiltShift.frag","utf8"),{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})}).call(e,"/")},function(t,e,n){function r(){i.call(this)}var i=n(273);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,n=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/n,this.uniforms.delta.value.y=t/n}},function(t,e,n){(function(e){function r(){i.AbstractFilter.call(this,null,o.readFileSync(e+"/twist.frag","utf8"),{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=n(179),o=n(225);r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})}).call(e,"/")},function(t,e,n){/**
	 * @file        Main export of the PIXI interactions library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
t.exports={InteractionData:n(277),InteractionManager:n(278),interactiveTarget:n(279)}},function(t,e,n){function r(){this.global=new i.Point,this.target=null,this.originalEvent=null}var i=n(179);r.prototype.constructor=r,t.exports=r,r.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)}},function(t,e,n){function r(t,e){e=e||{},this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new o,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new i.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var i=n(179),o=n(277);Object.assign(i.DisplayObject.prototype,n(279)),r.prototype.constructor=r,t.exports=r,r.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},r.prototype.addEvents=function(){this.interactionDOMElement&&(i.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},r.prototype.removeEvents=function(){this.interactionDOMElement&&(i.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},r.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},r.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.target=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},r.prototype.mapPositionToPoint=function(t,e,n){var r=this.interactionDOMElement.getBoundingClientRect();t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},r.prototype.processInteractive=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=!1,a=i=e.interactive||i;if(e.hitArea&&(a=!1),e.interactiveChildren)for(var s=e.children,u=s.length-1;u>=0;u--){var c=s[u];if(this.processInteractive(t,c,n,r,a)){if(!c.parent)continue;o=!0,a=!1,r=!1}}return i&&(r&&!o&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),o=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(o=e.containsPoint(t))),e.interactive&&n(e,o)),o},r.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},r.prototype.processMouseDown=function(t,e){var n=this.mouse.originalEvent,r=2===n.button||3===n.which;e&&(t[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,r?"rightdown":"mousedown",this.eventData))},r.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},r.prototype.processMouseUp=function(t,e){var n=this.mouse.originalEvent,r=2===n.button||3===n.which,i=r?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,r?"rightup":"mouseup",this.eventData),t[i]&&(t[i]=!1,this.dispatchEvent(t,r?"rightclick":"click",this.eventData))):t[i]&&(t[i]=!1,this.dispatchEvent(t,r?"rightupoutside":"mouseupoutside",this.eventData))},r.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},r.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,"mousemove",this.eventData)},r.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},r.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},r.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;r<n;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},r.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,"touchstart",this.eventData))},r.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;r<n;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},r.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},r.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,n=e.length,r=0;r<n;r++){var i=e[r],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(o)}},r.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,"touchmove",this.eventData)},r.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new o),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},r.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},r.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},i.WebGLRenderer.registerPlugin("interaction",r),i.CanvasRenderer.registerPlugin("interaction",r)},function(t,e){var n={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};t.exports=n},function(t,e,n){/**
	 * @file        Main export of the PIXI loaders library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
t.exports={Loader:n(281),bitmapFontParser:n(294),spritesheetParser:n(292),textureParser:n(291),Resource:n(282).Resource}},function(t,e,n){function r(t,e){i.call(this,t,e);for(var n=0;n<r._pixiMiddleware.length;++n)this.use(r._pixiMiddleware[n]())}var i=n(282),o=n(291),a=n(292),s=n(294);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r._pixiMiddleware=[i.middleware.parsing.blob,o,a,s],r.addPixiMiddleware=function(t){r._pixiMiddleware.push(t)};var u=i.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,n){"use strict";t.exports=n(283),t.exports.Resource=n(286),t.exports.middleware={caching:{memory:n(288)},parsing:{blob:n(289)}},t.exports.async=n(285)},function(t,e,n){"use strict";function r(t,e){s.call(this),e=e||u,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,e),this.resources={}}var i=n(284),o=n(285),a=n(286),s=n(287),u=10,c=100;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.add=r.prototype.enqueue=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._prepareUrl(e),this.resources[t]=new a(t,e,n),"function"==typeof r&&this.resources[t].once("afterMiddleware",r),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(c-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=c/this._buffer.length),this},r.prototype.before=r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.after=r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var t in this.resources){var e=this.resources[t];e.off("complete",this._onLoad,this),e.isLoading&&e.abort()}return this.resources={},this},r.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},r.prototype._prepareUrl=function(t){var e=i(t,{strictMode:!0});return e.protocol||!e.path||0===e.path.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},r.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,o.eachSeries(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t.once("complete",n._onLoad,n),t.load())})},r.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},r.prototype._onLoad=function(t){var e=this;o.eachSeries(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.emit("afterMiddleware",t),e._numToLoad--,e.progress+=e._progressChunk,e.emit("progress",e,t),t.error?e.emit("error",t.error,e,t):e.emit("load",e,t),0===e._numToLoad&&(e.progress=100,e._onComplete())}),t._dequeue()},r.LOAD_TYPE=a.LOAD_TYPE,r.XHR_RESPONSE_TYPE=a.XHR_RESPONSE_TYPE},function(t,e){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},function(t,e){"use strict";function n(){}function r(t,e,n){var r=0,i=t.length;!function o(a){return a||r===i?void(n&&n(a)):void e(t[r++],o)}()}function i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){s.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){s.process()},1)}function o(t){return function(){a-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){s.drain=n,s._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),t(e.data,i(o(e)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){s.paused!==!0&&(s.paused=!0)},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}t.exports={eachSeries:r,queue:o}},function(t,e,n){"use strict";function r(t,e,n){if(a.call(this),n=n||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=n.crossOrigin===!0?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace("object ","")}function o(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}var a=n(287),s=n(284),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null,l=0,h=200,f=204;r.prototype=Object.create(a.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},r.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},r.prototype.load=function(t){if(!this.isLoading)if(this.isComplete){if(t){var e=this;setTimeout(function(){t(e)},1)}}else switch(t&&this.once("complete",t),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},r.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var e="is"+t[0].toUpperCase()+t.substring(1);this[e]===!1&&(this[e]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){t.send()},0)},r.prototype._createSource=function(t,e,n){n||(n=t+"/"+e.substr(e.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=e,r.type=n,r},r.prototype._onError=function(t){this.abort("Failed to load element using "+t.target.nodeName)},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},r.prototype._xhrOnError=function(){var t=this.xhr;this.abort(i(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},r.prototype._xhrOnAbort=function(){this.abort(i(this.xhr)+" Request was aborted by the user.")},r.prototype._xdrOnTimeout=function(){this.abort(i(this.xhr)+" Request timed out.")},r.prototype._xhrOnLoad=function(){var t=this.xhr,e="undefined"==typeof t.status?t.status:h;if(!(e===h||e===f||e===l&&t.responseText.length>0))return void this.abort("["+t.status+"]"+t.statusText+":"+t.responseURL);if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(n){return void this.abort("Error trying to parse loaded json:",n)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t.responseText,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t.responseText,this.data=o}this.isXml=!0}catch(n){return void this.abort("Error trying to parse loaded xml:",n)}else this.data=t.response||t.responseText;this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,c||(c=document.createElement("a")),c.href=t,t=s(c.href,{strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this._getExtension()]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this._getExtension()]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?");r!==-1&&(t=t.substring(0,r)),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT},r.setExtensionLoadType=function(t,e){o(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){o(r._xhrTypeMap,t,e)}},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},o.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var r=new i(e,n||this),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(t,e,n){var r=new i(e,n||this,(!0)),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,i){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new r:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,t.exports=o},function(t,e){"use strict";var n={};t.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",function(){n[this.url]=this.data}),e()}}},function(t,e,n){"use strict";var r=n(286),i=n(290),o=window.URL||window.webkitURL;t.exports=function(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===r.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.isImage=!0,void(t.data.onload=function(){o.revokeObjectURL(n),t.data.onload=null,e()})}}else{var a=t.xhr.getResponseHeader("content-type");if(a&&0===a.indexOf("image"))return t.data=new Image,t.data.src="data:"+a+";base64,"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}},function(t,e){"use strict";t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,n="",r=new Array(4),i=0,o=0,a=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)i<t.length?e[o]=255&t.charCodeAt(i++):e[o]=0;switch(r[0]=e[0]>>2,r[1]=(3&e[0])<<4|e[1]>>4,r[2]=(15&e[1])<<2|e[2]>>6,r[3]=63&e[2],a=i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(o=0;o<r.length;o++)n+=this._keyStr.charAt(r[o])}return n}}},function(t,e,n){var r=n(179);t.exports=function(){return function(t,e){if(t.data&&t.isImage){var n=new r.BaseTexture(t.data,null,r.utils.getResolutionOfUrl(t.url));n.imageUrl=t.url,t.texture=new r.Texture(n),r.utils.BaseTextureCache[t.url]=n,r.utils.TextureCache[t.url]=t.texture}e()}}},function(t,e,n){var r=n(282).Resource,i=n(293),o=n(179),a=n(193),s=1e3;t.exports=function(){return function(t,e){var n=t.name+"_image";if(!t.data||!t.isJson||!t.data.frames||this.resources[n])return e();var u={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},c=i.dirname(t.url.replace(this.baseUrl,""));this.add(n,c+"/"+t.data.meta.image,u,function(n){function r(e,r){for(var i=e;i-e<r&&i<l.length;){var a=c[l[i]],s=a.frame;if(s){var u=null,f=null;if(u=a.rotated?new o.Rectangle(s.x,s.y,s.h,s.w):new o.Rectangle(s.x,s.y,s.w,s.h),a.trimmed&&(f=new o.Rectangle(a.spriteSourceSize.x/h,a.spriteSourceSize.y/h,a.sourceSize.w/h,a.sourceSize.h/h)),a.rotated){var d=u.width;u.width=u.height,u.height=d}u.x/=h,u.y/=h,u.width/=h,u.height/=h,t.textures[l[i]]=new o.Texture(n.texture.baseTexture,u,u.clone(),f,a.rotated),o.utils.TextureCache[l[i]]=t.textures[l[i]]}i++}}function i(){return f*s<l.length}function u(t){r(f*s,s),f++,setTimeout(t,0)}t.textures={};var c=t.data.frames,l=Object.keys(c),h=o.utils.getResolutionOfUrl(t.url),f=0;l.length<=s?(r(0,s),e()):a.whilst(i,u,e)})}}},function(t,e,n){(function(t){// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===a(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n(115))},function(t,e,n){function r(t,e){var n={},r=t.data.getElementsByTagName("info")[0],i=t.data.getElementsByTagName("common")[0];n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(i.getAttribute("lineHeight"),10),n.chars={};for(var s=t.data.getElementsByTagName("char"),u=0;u<s.length;u++){var c=parseInt(s[u].getAttribute("id"),10),l=new o.Rectangle(parseInt(s[u].getAttribute("x"),10)+e.frame.x,parseInt(s[u].getAttribute("y"),10)+e.frame.y,parseInt(s[u].getAttribute("width"),10),parseInt(s[u].getAttribute("height"),10));n.chars[c]={xOffset:parseInt(s[u].getAttribute("xoffset"),10),yOffset:parseInt(s[u].getAttribute("yoffset"),10),xAdvance:parseInt(s[u].getAttribute("xadvance"),10),kerning:{},texture:new o.Texture(e.baseTexture,l)}}var h=t.data.getElementsByTagName("kerning");for(u=0;u<h.length;u++){var f=parseInt(h[u].getAttribute("first"),10),d=parseInt(h[u].getAttribute("second"),10),p=parseInt(h[u].getAttribute("amount"),10);n.chars[d]&&(n.chars[d].kerning[f]=p)}t.bitmapFont=n,a.BitmapText.fonts[n.font]=n}var i=n(282).Resource,o=n(179),a=n(241),s=n(293);t.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var n=s.dirname(t.url);"."===n&&(n=""),this.baseUrl&&n&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/"),n=n.replace(this.baseUrl,"")),n&&"/"!==n.charAt(n.length-1)&&(n+="/");var a=n+t.data.getElementsByTagName("page")[0].getAttribute("file");if(o.utils.TextureCache[a])r(t,o.utils.TextureCache[a]),e();else{var u={crossOrigin:t.crossOrigin,loadType:i.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",a,u,function(n){r(t,n.texture),e()})}}}},function(t,e,n){/**
	 * @file        Main export of the PIXI extras library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
t.exports={Mesh:n(296),Plane:n(297),Rope:n(298),MeshRenderer:n(299),MeshShader:n(300)}},function(t,e,n){function r(t,e,n,o,a){i.Container.call(this),this._texture=null,this.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=i.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=a||r.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var i=n(179),o=new i.Point,a=new i.Polygon;r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,t.exports=r,Object.defineProperties(r.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},r.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,i=t.resolution;t.roundPixels?e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):e.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),this.drawMode===r.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},r.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,n=this.uvs,r=e.length/2,i=0;i<r-2;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,n,o,o+2,o+4)}},r.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,n=this.uvs,r=this.indices,i=r.length,o=0;o<i;o+=3){var a=2*r[o],s=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(t,e,n,a,s,u)}},r.prototype._renderCanvasDrawTriangle=function(t,e,n,r,i,o){var a=this._texture.baseTexture,s=a.source,u=a.width,c=a.height,l=e[r],h=e[i],f=e[o],d=e[r+1],p=e[i+1],v=e[o+1],g=n[r]*a.width,y=n[i]*a.width,m=n[o]*a.width,_=n[r+1]*a.height,b=n[i+1]*a.height,E=n[o+1]*a.height;if(this.canvasPadding>0){var T=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,S=(l+h+f)/3,w=(d+p+v)/3,R=l-S,A=d-w,O=Math.sqrt(R*R+A*A);l=S+R/O*(O+T),d=w+A/O*(O+x),R=h-S,A=p-w,O=Math.sqrt(R*R+A*A),h=S+R/O*(O+T),p=w+A/O*(O+x),R=f-S,A=v-w,O=Math.sqrt(R*R+A*A),f=S+R/O*(O+T),v=w+A/O*(O+x)}t.save(),t.beginPath(),t.moveTo(l,d),t.lineTo(h,p),t.lineTo(f,v),t.closePath(),t.clip();var C=g*b+_*m+y*E-b*m-_*y-g*E,P=l*b+_*f+h*E-b*f-_*h-l*E,M=g*h+l*m+y*f-h*m-l*y-g*f,L=g*b*f+_*h*m+l*y*E-l*b*m-_*y*f-g*h*E,k=d*b+_*v+p*E-b*v-_*p-d*E,I=g*p+d*m+y*v-p*m-d*y-g*v,D=g*b*v+_*p*m+d*y*E-d*b*m-_*y*v-g*p*E;t.transform(P/C,k/C,M/C,I/C,L/C,D/C),t.drawImage(s,0,0,u*a.resolution,c*a.resolution,0,0,u,c),t.restore()},r.prototype.renderMeshFlat=function(t){var e=this.context,n=t.vertices,r=n.length/2;e.beginPath();for(var i=1;i<r-2;i++){var o=2*i,a=n[o],s=n[o+2],u=n[o+4],c=n[o+1],l=n[o+3],h=n[o+5];e.moveTo(a,c),e.lineTo(s,l),e.lineTo(u,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},r.prototype._onTextureUpdate=function(){this.updateFrame=!0},r.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,n=e.a,r=e.b,o=e.c,a=e.d,s=e.tx,u=e.ty,c=-(1/0),l=-(1/0),h=1/0,f=1/0,d=this.vertices,p=0,v=d.length;p<v;p+=2){var g=d[p],y=d[p+1],m=n*g+o*y+s,_=a*y+r*g+u;h=m<h?m:h,f=_<f?_:f,c=m>c?m:c,l=_>l?_:l}if(h===-(1/0)||l===1/0)return i.Rectangle.EMPTY;var b=this._bounds;b.x=h,b.width=c-h,b.y=f,b.height=l-f,this._currentBounds=b}return this._currentBounds},r.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);var e,n,i=this.vertices,s=a.points;if(this.drawMode===r.DRAW_MODES.TRIANGLES){var u=this.indices;for(n=this.indices.length,e=0;e<n;e+=3){var c=2*u[e],l=2*u[e+1],h=2*u[e+2];if(s[0]=i[c],s[1]=i[c+1],s[2]=i[l],s[3]=i[l+1],s[4]=i[h],s[5]=i[h+1],a.contains(o.x,o.y))return!0}}else for(n=i.length,e=0;e<n;e+=6)if(s[0]=i[e],s[1]=i[e+1],s[2]=i[e+2],s[3]=i[e+3],s[4]=i[e+4],s[5]=i[e+5],a.contains(o.x,o.y))return!0;return!1},r.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,n){function r(t,e,n){i.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=n||10,this.drawMode=i.DRAW_MODES.TRIANGLES,this.refresh()}var i=n(296);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],n=[],r=[],i=[],o=this.texture,a=this.segmentsX-1,s=this.segmentsY-1,u=0,c=o.width/a,l=o.height/s;for(u=0;u<t;u++){var h=u%this.segmentsX,f=u/this.segmentsX|0;e.push(h*c,f*l),r.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(h/(this.segmentsX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(f/(this.segmentsY-1)))}var d=a*s;for(u=0;u<d;u++){var p=u%a,v=u/a|0,g=v*this.segmentsX+p,y=v*this.segmentsX+p+1,m=(v+1)*this.segmentsX+p,_=(v+1)*this.segmentsX+p+1;i.push(g,y,m),i.push(y,_,m)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(r),this.colors=new Float32Array(n),this.indices=new Uint16Array(i)},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},function(t,e,n){function r(t,e){i.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var i=n(296),o=n(179);r.prototype=Object.create(i.prototype),r.prototype.constructor=r,t.exports=r,r.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,n=this.indices,r=this.colors,i=this._texture._uvs,a=new o.Point(i.x0,i.y0),s=new o.Point(i.x2-i.x0,i.y2-i.y0);e[0]=0+a.x,e[1]=0+a.y,e[2]=0+a.x,e[3]=1*s.y+a.y,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var u,c,l,h=t.length,f=1;f<h;f++)u=t[f],c=4*f,l=f/(h-1),e[c]=l*s.x+a.x,e[c+1]=0+a.y,e[c+2]=l*s.x+a.x,e[c+3]=1*s.y+a.y,c=2*f,r[c]=1,r[c+1]=1,c=2*f,n[c]=c,n[c+1]=c+1;this.dirty=!0}},r.prototype._onTextureUpdate=function(){i.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},r.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,n,r,i,o,a,s=t[0],u=0,c=0,l=this.vertices,h=t.length,f=0;f<h;f++)n=t[f],r=4*f,e=f<t.length-1?t[f+1]:n,c=-(e.x-s.x),u=e.y-s.y,i=10*(1-f/(h-1)),i>1&&(i=1),o=Math.sqrt(u*u+c*c),a=this._texture.height/2,u/=o,c/=o,u*=a,c*=a,l[r]=n.x+u,l[r+1]=n.y+c,l[r+2]=n.x-u,l[r+3]=n.y-c,s=n;this.containerUpdateTransform()}}},function(t,e,n){function r(t){i.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,n=0;e<15e3;e+=6,n+=4)this.indices[e+0]=n+0,this.indices[e+1]=n+1,this.indices[e+2]=n+2,this.indices[e+3]=n+0,this.indices[e+4]=n+2,this.indices[e+5]=n+3;this.currentShader=null}var i=n(179),o=n(296);r.prototype=Object.create(i.ObjectRenderer.prototype),r.prototype.constructor=r,t.exports=r,i.WebGLRenderer.registerPlugin("mesh",r),r.prototype.onContextChange=function(){},r.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,n=e.gl,r=t._texture.baseTexture,i=t.shader,a=t.drawMode===o.DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),i=i?i.shaders[n.id]||i.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(i),i.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),i.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),i.uniforms.alpha.value=t.worldAlpha,i.syncUniforms(),t.dirty?(t.dirty=!1,n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferData(n.ARRAY_BUFFER,t.vertices,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.bufferData(n.ARRAY_BUFFER,t.uvs,n.STATIC_DRAW),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.indices,n.STATIC_DRAW)):(n.bindBuffer(n.ARRAY_BUFFER,t._vertexBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,t.vertices),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t._uvBuffer),n.vertexAttribPointer(i.attributes.aTextureCoord,2,n.FLOAT,!1,0,0),n.activeTexture(n.TEXTURE0),r._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,r._glTextures[n.id]):this.renderer.updateTexture(r),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t._indexBuffer),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.indices)),n.drawElements(a,t.indices.length,n.UNSIGNED_SHORT,0)},r.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},r.prototype.flush=function(){},r.prototype.start=function(){this.currentShader=null},r.prototype.destroy=function(){i.ObjectRenderer.prototype.destroy.call(this)}},function(t,e,n){function r(t){i.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var i=n(179);r.prototype=Object.create(i.Shader.prototype),r.prototype.constructor=r,t.exports=r,i.ShaderManager.registerPlugin("meshShader",r)},function(t,e,n){/**
	 * @file        Main export of the PIXI accessibility library
	 * @author      Mat Groves <mat@goodboydigital.com>
	 * @copyright   2013-2015 GoodBoyDigital
	 * @license     {@link https://github.com/pixijs/pixi.js/blob/master/LICENSE|MIT License}
	 */
t.exports={accessibleTarget:n(302),AccessibilityManager:n(303)}},function(t,e){var n={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};t.exports=n},function(t,e,n){function r(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var i=n(179);Object.assign(i.DisplayObject.prototype,n(302)),r.prototype.constructor=r,t.exports=r,r.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},r.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(t.visible&&(t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId),t.interactiveChildren))for(var e=t.children,n=e.length-1;n>=0;n--)this.updateAccessibleObjects(e[n])},r.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var a=this.children[o];if(a.renderId!==this.renderId)a._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{r=a._accessibleDiv;var s=a.hitArea,u=a.worldTransform;a.hitArea?(r.style.left=(u.tx+s.x*u.a)*e+"px",r.style.top=(u.ty+s.y*u.d)*n+"px",r.style.width=s.width*u.a*e+"px",r.style.height=s.height*u.d*n+"px"):(s=a.getBounds(),this.capHitArea(s),r.style.left=s.x*e+"px",r.style.top=s.y*n+"px",r.style.width=s.width*e+"px",r.style.height=s.height*n+"px")}}this.renderId++},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},r.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},r.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},r.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},r.prototype._onMouseMove=function(){this.deactivate()},r.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i.WebGLRenderer.registerPlugin("accessibility",r),i.CanvasRenderer.registerPlugin("accessibility",r)},function(t,e,n){var r=n(179),i=n(295),o=n(241),a=n(248);r.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},r.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(r,{Stage:{get:function(){return r.Container}},DisplayObjectContainer:{get:function(){return r.Container}},Strip:{get:function(){return i.Mesh}},Rope:{get:function(){return i.Rope}},MovieClip:{get:function(){return o.MovieClip}},TilingSprite:{get:function(){return o.TilingSprite}},BitmapText:{get:function(){return o.BitmapText}},blendModes:{get:function(){return r.BLEND_MODES}},scaleModes:{get:function(){return r.SCALE_MODES}},BaseTextureCache:{get:function(){return r.utils.BaseTextureCache}},TextureCache:{get:function(){return r.utils.TextureCache}},math:{get:function(){return r}}}),r.Sprite.prototype.setTexture=function(t){this.texture=t},o.BitmapText.prototype.setText=function(t){this.text=t},r.Text.prototype.setText=function(t){this.text=t},r.Text.prototype.setStyle=function(t){this.style=t},r.Texture.prototype.setFrame=function(t){this.frame=t},Object.defineProperties(a,{AbstractFilter:{get:function(){return r.AbstractFilter}},FXAAFilter:{get:function(){return r.FXAAFilter}},SpriteMaskFilter:{get:function(){return r.SpriteMaskFilter}}}),r.utils.uuid=function(){return r.utils.uid()}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(t){return null===t}function n(t){return"undefined"==typeof t}function r(t){return!n(t)}function i(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function o(t){return Array.isArray(t)&&0===t.length}function a(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)}function s(t){return a(t)&&0===t.length}function u(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}t.isNull=e,t.isUndefined=n,t.isDefined=r,t.isNumber=i,t.isEmptyArray=o,t.isString=a,t.isEmptyString=s,t.isFunction=u}(n||(n={})),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t.AUTO_FRAME_RATE=-1,t.AUTO_STAGING_COMMENTS_INTERVAL=-1,t.BASE_FRAME_RATE=60,t.BASE_CANVAS_HEIGHT=384,t.ACTUAL_FRAME_RATE_AT_AUTO=t.BASE_FRAME_RATE,t.NO_CONTENT_LENGTH=-1,t.DEFAULT_SLOT_COUNT=40,t.DEFAULT_RESOLUTION=1,t.DEFAULT_USING_WEBGL_STATUS=!1,t.SUPPORTED_MINIMUM_CHARACTER_SIZE=10}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(305),i=n(308),o=n(309),a=n(318),s=n(319),u=n(321),c=n(322),l=n(325),h=n(332),f=n(333),d=n(339),p=n(340),v=n(343),g=n(347),y=n(348),m=function(){function t(){t.initIfNeed(),this.families=Object.assign({},y["default"],t.envFamilies)}return t.initIfNeed=function(){if(!r["default"].isDefined(t.envFamilies)){var e=window.navigator.userAgent.toLowerCase();e.indexOf("windows nt")>=0?/windows nt 6\.1/.test(e)?t.envFamilies=o["default"]:/windows nt 6\.2/.test(e)?t.envFamilies=a["default"]:/windows nt 6\.3/.test(e)?t.envFamilies=s["default"]:/windows nt 10\.[0-9]/.test(e)?t.envFamilies=u["default"]:t.envFamilies=c["default"]:e.indexOf("mac os x")>=0?/mac os x 10(\.|_)9/.test(e)?t.envFamilies=l["default"]:/mac os x 10(\.|_)10/.test(e)?t.envFamilies=h["default"]:/mac os x 10(\.|_)11/.test(e)?t.envFamilies=f["default"]:/mac os x 10(\.|_)1[2-9]/.test(e)?t.envFamilies=d["default"]:t.envFamilies=p["default"]:e.indexOf("android ")>=0?t.envFamilies=v["default"]:e.indexOf("iphone;")>=0||e.indexOf("ipad;")>=0||e.indexOf("ipod touch;")>=0?t.envFamilies=g["default"]:t.envFamilies=y["default"]}},t.prototype.setFont=function(t,e){i["default"].isFontCommand(t)&&(this.families[t]=e)},t.prototype.resetFont=function(e){i["default"].isFontCommand(e)&&(this.families[e]=t.envFamilies[e]||y["default"][e])},t.prototype.getFamilies=function(){return this.families},t}();e["default"]=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.parsedOriginalChat=t,this._borderLineColor="",this._params={},this._content=t.content,this._vposMs=10*this.vpos}return t.prototype.reset=function(){this._content=this.parsedOriginalChat.content,this._params={}},t.prototype.addParam=function(t,e){this._params[t]=e},t.prototype.getParam=function(t){return this._params[t]},t.prototype.existCommand=function(t){return!!t&&this.commands.indexOf(t.toLowerCase())>=0},t.prototype.isMatchedUser=function(t){return this.userId&&this.userId===t},Object.defineProperty(t.prototype,"originalContent",{get:function(){return this.parsedOriginalChat.content||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content||""},set:function(t){this._content=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thread",{get:function(){return this.parsedOriginalChat.thread},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vpos",{get:function(){return this.parsedOriginalChat.vpos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vposMs",{get:function(){return this._vposMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mail",{get:function(){return this.parsedOriginalChat.mail||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.parsedOriginalChat.position||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.parsedOriginalChat.size||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorName",{get:function(){return this.parsedOriginalChat.colorName||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorCode",{get:function(){return this.parsedOriginalChat.colorCode||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.parsedOriginalChat.color||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.parsedOriginalChat.font||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"atNumber",{get:function(){return this.parsedOriginalChat.atNumber},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commands",{get:function(){return this.parsedOriginalChat.commands||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deleted",{get:function(){return!!this.parsedOriginalChat.deletedStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deletedStatus",{get:function(){return this.parsedOriginalChat.deletedStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this.parsedOriginalChat.userId||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"no",{get:function(){return this.parsedOriginalChat.no},set:function(t){this.parsedOriginalChat.no=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"date",{get:function(){return this.parsedOriginalChat.date},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPremium",{get:function(){return 0!==(1&this.parsedOriginalChat.premium)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"premium",{get:function(){return this.parsedOriginalChat.premium},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anonymous",{get:function(){return this.parsedOriginalChat.anonymous},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"device",{get:function(){return this.parsedOriginalChat.device||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this.parsedOriginalChat.score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderLineColor",{get:function(){return this._borderLineColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fork",{get:function(){return void 0===this.parsedOriginalChat.fork?0:this.parsedOriginalChat.fork},enumerable:!0,configurable:!0}),t.prototype.setBorderLine=function(e){t.isColorCodeCommand(e)?this._borderLineColor=e:this._borderLineColor=""},t}();!function(t){function e(e){return t.POSITIONS_ARRAY.indexOf(e)>=0}function n(e){return t.SIZES_ARRAY.indexOf(e)>=0}function r(e){return t.COLORS_ARRAY.indexOf(e)>=0}function i(e){return t.PREMIUM_COLORS_ARRAY.indexOf(e)>=0}function o(t){return/^#([\da-fA-F]{6})$/.test(t)}function a(e){return t.COLORS[e]||t.PREMIUM_COLORS[e]||o(e)&&e||t.DEFAULT_COLOR}function s(e){return t.FONTS_ARRAY.indexOf(e)>=0}function u(e){var n=(e||"").match(new RegExp("(?:^|\\s)("+t.AT_NUMBER_REG_EXP+")(?:\\s|$)"));return n&&n[1]?1e3*Number(n[1].replace("@","")):null}t.POSITIONS={get ue(){return"ue"},get naka(){return"naka"},get shita(){return"shita"}},t.DEFAULT_POSITION=t.POSITIONS.naka,t.SIZES={get big(){return"big"},get medium(){return"medium"},get small(){return"small"}},t.DEFAULT_SIZE=t.SIZES.medium,t.COLORS={get white(){return"#ffffff"},get red(){return"#ff0000"},get pink(){return"#ff8080"},get orange(){return"#ffc000"},get yellow(){return"#ffff00"},get green(){return"#00ff00"},get cyan(){return"#00ffff"},get blue(){return"#0000ff"},get purple(){return"#c000ff"},get black(){return"#000000"}},t.PREMIUM_COLORS={get white2(){return"#cccc99"},get niconicowhite(){return"#cccc99"},get red2(){return"#cc0033"},get truered(){return"#cc0033"},get orange2(){return"#ff6600"},get passionorange(){return"#ff6600"},get yellow2(){return"#999900"},get madyellow(){return"#999900"},get green2(){return"#00cc66"},get elementalgreen(){return"#00cc66"},get blue2(){return"#3399ff"},get marineblue(){return"#3399ff"},get purple2(){return"#6633cc"},get nobleviolet(){return"#6633cc"},get pink2(){return"#ff33cc"},get cyan2(){return"#00cccc"},get black2(){return"#666666"}},t.DEFAULT_COLOR=t.COLORS.white,t.FONTS={get defont(){return"defont"},get gothic(){return"gothic"},get mincho(){return"mincho"}},t.DEFAULT_FONT=t.FONTS.defont,t.isPositionCommand=e,t.isSizeCommand=n,t.isColorNameCommand=r,t.isPremiumColorNameCommand=i,t.isColorCodeCommand=o,t.resolveToColorCode=a,t.isFontCommand=s,t.AT_NUMBER_REG_EXP="@\\d+(?:\\.\\d+)?",t.extractAtNumber=u,t.POSITIONS_ARRAY=Object.keys(t.POSITIONS).map(function(e){return t.POSITIONS[e]}),t.SIZES_ARRAY=Object.keys(t.SIZES).map(function(e){return t.SIZES[e]}),t.COLORS_ARRAY=Object.keys(t.COLORS),t.PREMIUM_COLORS_ARRAY=Object.keys(t.PREMIUM_COLORS),t.FONTS_ARRAY=Object.keys(t.FONTS).map(function(e){return t.FONTS[e]})}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),i=n(312),o=n(315),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(311),i=r["default"];e["default"]=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'Arial, " ", "MS PGothic", MSPGothic, MS-PGothic',adjustBaselinePosition:.01,weight:600};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(313),i=n(314),o=n(311),a={family:[r["default"].family,i["default"].family,o["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'"", "", "Yu Gothic", YuGothic, yugothic, YuGo-Medium',adjustBaselinePosition:-.04,weight:400};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'Gulim, "", SimHei',adjustBaselinePosition:.03,weight:400};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(316),i=n(317),o=n(311),a={family:[r["default"].family,i["default"].family,o["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'"", "", "Yu Mincho", YuMincho, yumincho, YuMin-Medium',adjustBaselinePosition:-.01,weight:400};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'"", SimSun',adjustBaselinePosition:.135,weight:400};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),i=n(312),o=n(315),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),i=n(320),o=n(315),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(313),i=n(317),o=n(311),a={family:[r["default"].family,i["default"].family,o["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),i=n(320),o=n(315),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(310),i=n(323),o=n(324),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(314),i=n(311),o={family:[r["default"].family,i["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(317),i=n(311),o={family:[r["default"].family,i["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(326),i=n(328),o=n(330),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(327),i=r["default"];e["default"]=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'" ProN W6", HiraKakuProN-W6, " ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',adjustBaselinePosition:-.05,weight:600};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(313),i=n(329),o={family:[r["default"].family,i["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'" ProN W3", HiraKakuProN-W3, " ProN", HiraKakuProN, "Hiragino Kaku Gothic ProN"',adjustBaselinePosition:-.04,weight:300};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(316),i=n(331),o=n(329),a={family:[r["default"].family,i["default"].family,o["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'" ProN W3", HiraMinProN-W3, " ProN", HiraMinProN, "Hiragino Mincho ProN"',adjustBaselinePosition:-.02,weight:300};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(326),i=n(328),o=n(330),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(334),i=n(336),o=n(338),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(335),i=r["default"];e["default"]=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'"", "Hiragino Sans", HiraginoSans',adjustBaselinePosition:-.05,weight:600};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(313),i=n(337),o={family:[r["default"].family,i["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'"", "Hiragino Sans", HiraginoSans',adjustBaselinePosition:-.04,weight:300};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(316),i=n(331),o=n(337),a={family:[r["default"].family,i["default"].family,o["default"].family].join(", "),adjustBaselinePosition:r["default"].adjustBaselinePosition,weight:r["default"].weight};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(334),i=n(336),o=n(338),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(326),i=n(341),o=n(342),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(329),i=r["default"];e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(331),i=r["default"];e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(344),i=n(345),o=n(346),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:'""',adjustBaselinePosition:0,weight:600};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:"sans-serif",adjustBaselinePosition:0,weight:400};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={family:"serif",adjustBaselinePosition:0,weight:400};e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(344),i=n(345),o=n(346),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(344),i=n(345),o=n(346),a={defont:r["default"],gothic:i["default"],mincho:o["default"]};e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(350),i=function(){function t(t,e){this.process=t,this.intervalMs=e,this.oneTimeSchedulerHandler=new r["default"],this.id=null}return t.prototype.start=function(){var t=this;this.stop();var e,n,r=function(){e=Date.now(),t.process(t.oneTimeSchedulerHandler),n=t.intervalMs-(Date.now()-e),n<0&&(n=0),t.id=window.setTimeout(r,n)};this.id=window.setTimeout(r,0)},t.prototype.stop=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null),this.oneTimeSchedulerHandler.cancelAll()},t}();e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(351),i=function(){function t(){this.schedulers=[]}return t.prototype.create=function(t,e){var n=this,i=new r["default"](t,e,function(){n.removeScheduler(i)});this.schedulers.push(i)},t.prototype.removeScheduler=function(t){var e=this.schedulers.indexOf(t);e<0||this.schedulers.splice(e,1)},t.prototype.cancelAll=function(){for(var t=0,e=this.schedulers.length;t<e;t++)this.schedulers[t].cancel();this.schedulers.length=0},t}();e["default"]=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){void 0===n&&(n=function(){});var r=this;this.id=window.setTimeout(function(){t(),r.id=null,n()},e)}return t.prototype.cancel=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null)},t}();e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(306),i=n(350),o=function(){function t(t){var e=this;this.oneTimeSchedulerHandler=new i["default"],this.runningProcess=function(n){t(e.oneTimeSchedulerHandler)}}return Object.defineProperty(t,"frameRate",{get:function(){return t._frameRate},set:function(e){t._frameRate=e,"undefined"!=typeof createjs&&(e===r["default"].AUTO_FRAME_RATE?(createjs.Ticker.framerate=r["default"].ACTUAL_FRAME_RATE_AT_AUTO,createjs.Ticker.timingMode=createjs.Ticker.RAF):(createjs.Ticker.framerate=e,r["default"].BASE_FRAME_RATE/e%1===0?createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED:createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"actualFrameRate",{get:function(){return createjs.Ticker.getMeasuredFPS()},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.stop(),createjs.Ticker.addEventListener("tick",this.runningProcess)},t.prototype.stop=function(){createjs.Ticker.removeEventListener("tick",this.runningProcess),this.oneTimeSchedulerHandler.cancelAll()},t}();e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.threadManagementSet=t,this.stagingFilterControl={add:function(t,n){e.threadManagementSet.addStagingFilter(t,n)},remove:function(t){e.threadManagementSet.removeStagingFilter(t)},clear:function(){e.threadManagementSet.clearStagingFilter()},getFilterNameList:function(){return e.threadManagementSet.getStagingFilterNameList()}}}return Object.defineProperty(t.prototype,"visible",{get:function(){return this.threadManagementSet.visible},set:function(t){this.threadManagementSet.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.threadManagementSet.alpha},set:function(t){this.threadManagementSet.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScale",{get:function(){return this.threadManagementSet.fontScale},set:function(t){this.threadManagementSet.fontScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseMoving",{get:function(){return this.threadManagementSet.reverseMoving},set:function(t){this.threadManagementSet.reverseMoving=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderArea",{get:function(){return this.threadManagementSet.renderArea},set:function(t){this.threadManagementSet.renderArea=t},enumerable:!0,configurable:!0}),t}();e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=this;this.threadManagementSetList=t,this.stagingFilterControl={add:function(t,n){e.threadManagementSetList.forEach(function(e){e.addStagingFilter(t,n)})},remove:function(t){e.threadManagementSetList.forEach(function(e){e.removeStagingFilter(t)})},clear:function(){e.threadManagementSetList.forEach(function(t){t.clearStagingFilter()})}}}return Object.defineProperty(t.prototype,"visible",{set:function(t){this.threadManagementSetList.forEach(function(e){e.visible=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{set:function(t){this.threadManagementSetList.forEach(function(e){e.alpha=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScale",{set:function(t){this.threadManagementSetList.forEach(function(e){e.fontScale=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseMoving",{set:function(t){this.threadManagementSetList.forEach(function(e){e.reverseMoving=t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderArea",{set:function(t){this.threadManagementSetList.forEach(function(e){e.renderArea=t})},enumerable:!0,configurable:!0}),t}();e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(356),i=n(305),o=n(306),a=n(357),s=n(360),u=n(364),c=n(367),l=n(368),h=function(){function t(t){this.eventEmitter=new r.EventEmitter,this._width=t.width,this._height=t.height,this._contentLengthMs=i["default"].isDefined(t.contentLengthMs)?t.contentLengthMs:o["default"].NO_CONTENT_LENGTH,this.thread=new a.ThreadProcessorImpl(Object.assign(t.threadParams,{contentLengthMs:this._contentLengthMs}),t.chatConverter),this.processor=new l["default"]({width:this._width,height:this._height,contentLengthMs:this._contentLengthMs,resolution:t.resolution,fontFamiliesProvider:t.fontFamiliesProvider}),this.stagingChatManager=new s["default"]({contentLengthMs:this.contentLengthMs,useStreamingFromMessageServer:t.threadParams.useStreamingFromMessageServer}),this.slotRepository=new u["default"](t.slotCount),this.layer=new c["default"](this._width,this._height),this.registerThreadEvents(),this.connectLayerAndSlotRepository()}return t.prototype.registerThreadEvents=function(){var t=this;this.thread.event("startFiltering").on(function(){t.stagingChatManager.clearChatList(),t._event("needClear").emit(void 0)}),this.thread.event("filter").on(function(e){t.stagingChatManager.add(e),t._event("needUpdate").emit(void 0)}),this.thread.event("filtered").on(function(e){t.stagingChatManager.completedPreparationForSort()}),this.thread.event("added").on(function(e){t.stagingChatManager.add([e]),t._event("needRefresh").emit(void 0)}),this.thread.event("deleted").on(function(e){t.stagingChatManager.remove(e),t._event("needRefresh").emit(void 0)}),this.thread.event("updated").on(function(e){t.stagingChatManager.change(e.before,e.after),t._event("needRefresh").emit(void 0)}),this.thread.event("receivedByStreaming").on(function(e){t.stagingChatManager.add(e),t._event("needUpdate").emit(void 0)}),this.thread.event("merged").on(function(e){t.stagingChatManager.clearChatList(),t.stagingChatManager.add(e.all),t.stagingChatManager.completedPreparationForSort(),t._event("needRefresh").emit(void 0)}),this.stagingChatManager.event("checkRefresh").on(function(e){t._event("checkRefresh").emit(e)})},t.prototype.connectLayerAndSlotRepository=function(){var t=this;this.slotRepository.event("staged").on(function(e){t.layer.appendSlot(e)}),this.slotRepository.event("reserved").on(function(e){t.layer.removeSlot(e)}),this.slotRepository.event("reset").on(function(){t.layer.clear()})},Object.defineProperty(t.prototype,"slotCount",{get:function(){return this.slotRepository.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayObject",{get:function(){return this.layer.displayObject},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(t){this.stagingChatManager.contentLengthMs=t,this.processor.contentLengthMs=t,this._contentLengthMs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this.processor.resolution},set:function(t){this.processor.resolution=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.layer.visible},set:function(t){this.layer.visible!==t&&(this.layer.visible=t,this._event("needRedraw").emit(void 0));
},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.layer.alpha},set:function(t){t>1&&(t=1),t<0&&(t=0),this.layer.alpha!==t&&(this.layer.alpha=t,this._event("needRedraw").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScale",{get:function(){return this.processor.fontScale},set:function(t){this.processor.fontScale!==t&&(this.processor.fontScale=t,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseMoving",{get:function(){return this.processor.reverseMoving},set:function(t){this.processor.reverseMoving!==t&&(this.processor.reverseMoving=t,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderArea",{get:function(){return this.processor.renderArea},set:function(t){this.processor.renderArea.heightRatio===t.heightRatio&&this.processor.renderArea.offsetTopRatio===t.offsetTopRatio||(this.processor.renderArea=t,this._event("needRefresh").emit(void 0))},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.slotRepository.reset()},t.prototype.resize=function(t,e){this._width=t,this._height=e,this.layer.resize(t,e),this.processor.resize(t,e)},t.prototype.getThreadProcessor=function(){return this.thread},t.prototype.hasSameThreadProcessor=function(t){return t===this.thread},t.prototype.stageComment=function(t,e){var n=this.processor.applyStagingFilters(t);if(n.visible){var r=this.slotRepository.getReserved();if(!i["default"].isNull(r)){var o=this.processor.makeStagingSlot(r,t,n,this.slotRepository.stagingList,e);i["default"].isNull(o)?r.reset():this.slotRepository.setToStaging(o)}}},t.prototype.stageComments=function(t){var e=this;this.stagingChatManager.getStagingChatList(t).forEach(function(n){e.stageComment(n,t)})},t.prototype.removeFinishedStagingComments=function(t){var e=this;this.processor.getFinishedStagingSlotList(this.slotRepository.stagingList,t).forEach(function(t){e.slotRepository.backToReserved(t)})},t.prototype.updateCommentsPosition=function(t){this.processor.updateCommentsPosition(this.slotRepository.stagingList,t)},t.prototype.refreshComments=function(t){this.clear(),this.stagingChatManager.resetStagingStatus(),this.stageComments(t),this.updateCommentsPosition(t)},t.prototype.addStagingFilter=function(t,e){this.processor.addStagingFilter(t,e),this._event("needRefresh").emit(void 0)},t.prototype.removeStagingFilter=function(t){this.processor.removeStagingFilter(t),this._event("needRefresh").emit(void 0)},t.prototype.clearStagingFilter=function(){this.processor.clearStagingFilter(),this._event("needRefresh").emit(void 0)},t.prototype.getStagingFilterNameList=function(){return this.processor.getStagingFilterNameList()},t.prototype.getChatAtOffset=function(t,e){return this.slotRepository.stagingList.filter(function(n){return n.hitTest(t,e)}).map(function(t){return t.chat})},t.prototype.dispose=function(){this.thread.dispose(),this.stagingChatManager.dispose(),this.slotRepository.dispose(),this.processor.dispose(),this._event().offAll()},t.prototype.event=function(t){return this._event(t)},t.prototype._event=function(t){var e=this;return t?{on:function(n){return e.eventEmitter.on(t,n)&&e},once:function(n){return e.eventEmitter.once(t,n)&&e},off:function(n){return e.eventEmitter.removeListener(t,n)&&e},offAll:function(){return e.eventEmitter.removeAllListeners(t)&&e},emit:function(n){return e.eventEmitter.emit(t,n)}}:{offAll:function(){return e.eventEmitter.removeAllListeners()&&e}}},t}();e["default"]=h},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(305),i=n(358),o=n(359),a=function(){function t(t,e){void 0===e&&(e=i["default"]),this.threadParams=t,this.chatConverter=e,this._filteredChatList=[],this.filterTimerId=null,this.sortOriginalChatByVpos(),this.eventDispatcher=new o["default"],this.event=this.eventDispatcher.event.bind(this.eventDispatcher)}return t.prototype.isUsingStreamingFromMessageServer=function(){return!!this.threadParams.useStreamingFromMessageServer},t.prototype.isFilterCompleted=function(){return!!this.chatFilter&&null===this.filterTimerId},t.prototype.getFilteredChatList=function(){return this._filteredChatList.concat()},t.prototype.sortOriginalChatByVpos=function(){var t,e,n;this.threadParams.chatList.sort(function(i,o){return n=i.vpos-o.vpos,0===n&&(n=(r["default"].isDefined(i.no)?i.no:1/0)-(r["default"].isDefined(o.no)?o.no:1/0)||0,0===n&&(t=Number(i.thread),e=Number(o.thread),n=Number.isNaN(t)||Number.isNaN(e)?-1:t-e)),n})},t.prototype.applyFilter=function(t,e,n){var r=this;void 0===e&&(e=this.threadParams.chatList.length),void 0===n&&(n=0),this.eventDispatcher.event("startFiltering").emit(void 0),this.resetFiltering(t),this.filterTimerId=window.setTimeout(function(){r._applyFilter(0,e,r.threadParams.chatList.length,n)},0)},t.prototype._applyFilter=function(t,e,n,r){var i=this,o=t+e,a=this.chatFilter.apply(this.threadParams.chatList.slice(t,o)).map(this.chatConverter.convert);this._filteredChatList.push.apply(this._filteredChatList,a),this.eventDispatcher.event("filter").emit(a),o>=n?(this.filterTimerId=null,this.eventDispatcher.event("filtered").emit(this._filteredChatList.concat())):this.filterTimerId=window.setTimeout(function(){return i._applyFilter(o,e,n,r)},r)},t.prototype.addChat=function(t,e,n){var i=this;if(this.isFilterCompleted())this._addChat(t,e,n);else{var o=function(){return i._addChat(t,e,n)};this.eventDispatcher.event("filtered").once(o),e.then(function(e){r["default"].isDefined(e)&&(t.no=e)})["catch"](function(){return i.eventDispatcher.event("filtered").off(o)})}},t.prototype._addChat=function(t,e,n){var i=this;this.insertIntoVposOrderedList(this.threadParams.chatList,t);var o,a=this.chatFilter.apply([t])[0];a&&(o=this.chatConverter.convert(a),this.insertIntoVposOrderedList(this._filteredChatList,o),r["default"].isDefined(n)&&!r["default"].isEmptyString(n)&&o.setBorderLine(n),this.eventDispatcher.event("added").emit(o)),e.then(function(e){r["default"].isDefined(e)&&(t.no=e,o&&(o.no=e))})["catch"](function(){i.removeElement(i.threadParams.chatList,t),o&&i.removeElement(i._filteredChatList,o)&&i.eventDispatcher.event("deleted").emit([o])})},t.prototype.updateChat=function(t,e){var n=this;this.isFilterCompleted()?this._updateChat(t,e):this.eventDispatcher.event("filtered").once(function(){return n._updateChat(t,e)})},t.prototype._updateChat=function(t,e){if(!r["default"].isUndefined(t.thread)&&!r["default"].isUndefined(t.no)){var n=this.getIndexByThreadAndNo(this.threadParams.chatList,t.thread,t.no);if(!(n<0)){var i=this.threadParams.chatList[n];"undefined"!=typeof e.content&&i.content!==e.content&&(i.content=e.content),"undefined"!=typeof e.mail&&i.mail!==e.mail&&(i.mail=e.mail),"undefined"!=typeof e.vpos&&i.vpos!==e.vpos&&(i.vpos=e.vpos,this.threadParams.chatList.splice(n,1),this.insertIntoVposOrderedList(this.threadParams.chatList,i));var o=this.chatFilter.apply([i])[0],a=o&&this.chatConverter.convert(o);if("undefined"!=typeof e.borderLineColor&&a.borderLineColor!==e.borderLineColor&&a.setBorderLine(e.borderLineColor),n=this.getIndexByThreadAndNo(this._filteredChatList,t.thread,t.no),n<0)a&&(this.insertIntoVposOrderedList(this._filteredChatList,a),this.eventDispatcher.event("added").emit(a));else if(a){var s;"undefined"!=typeof e.vpos?(s=this._filteredChatList.splice(n,1)[0],this.insertIntoVposOrderedList(this._filteredChatList,a)):s=this._filteredChatList.splice(n,1,a)[0],this.eventDispatcher.event("updated").emit({before:s,after:a})}else{var u=this._filteredChatList.splice(n,1)[0];this.eventDispatcher.event("deleted").emit([u])}}}},t.prototype.deleteChats=function(t){var e=this;this.isFilterCompleted()?this._deleteChats(t):this.eventDispatcher.event("filtered").once(function(){return e._deleteChats(t)})},t.prototype._deleteChats=function(t){var e=this,n=[];t.forEach(function(t){var r=e.getIndexByThreadAndNo(e.threadParams.chatList,t.thread,t.no);if(r>=0){var i=e.threadParams.chatList[r];e.removeElement(e.threadParams.chatList,i)}e.removeElement(e._filteredChatList,t)&&n.push(t)}),n.length&&this.eventDispatcher.event("deleted").emit(t)},t.prototype.addReceivedChatListByStreaming=function(t){var e=this;this.isUsingStreamingFromMessageServer()&&(this.isFilterCompleted()?this._addReceivedChatListByStreaming(t):this.eventDispatcher.event("filtered").once(function(){return e._addReceivedChatListByStreaming(t)}))},t.prototype._addReceivedChatListByStreaming=function(t){var e=this;t.forEach(function(t){e.threadParams.chatList.push(t)});var n=this.chatFilter.apply(t);if(n.length>0){var r=[];n.forEach(function(t){var n=e.chatConverter.convert(t);e._filteredChatList.push(n),r.push(n)}),this.eventDispatcher.event("receivedByStreaming").emit(r)}},t.prototype.mergeChatList=function(t){var e=this;this.isFilterCompleted()?this._mergeChatList(t):this.eventDispatcher.event("filtered").once(function(){return e._mergeChatList(t)})},t.prototype._mergeChatList=function(t){var e,n,i=this,o=[];t.forEach(function(t){e=!1,r["default"].isDefined(t.thread)&&r["default"].isDefined(t.no)&&(n=i.getIndexByThreadAndNo(i.threadParams.chatList,t.thread,t.no),n>=0&&(i.threadParams.chatList.splice(n,1,t),e=!0),n=i.getIndexByThreadAndNo(i._filteredChatList,t.thread,t.no),n>=0&&o.push(i._filteredChatList.splice(n,1)[0])),e||i.threadParams.chatList.push(t)}),this.sortOriginalChatByVpos();var a={};o.forEach(function(t){r["default"].isDefined(t.thread)&&r["default"].isDefined(t.no)&&!r["default"].isEmptyString(t.borderLineColor)&&(a[t.thread+"_"+t.no]=t.borderLineColor)});var s=this.chatFilter.apply(t),u=[];s.forEach(function(t){var e=i.chatConverter.convert(t);if(i.insertIntoVposOrderedList(i._filteredChatList,e),r["default"].isDefined(e.thread)&&r["default"].isDefined(e.no)){var n=e.thread+"_"+e.no;a[n]&&e.setBorderLine(a[n])}u.push(e)}),this.eventDispatcher.event("merged").emit({merged:u,all:this._filteredChatList.concat()})},t.prototype.resetFiltering=function(t){null!==this.filterTimerId&&window.clearTimeout(this.filterTimerId),this._filteredChatList.length=0,this.chatFilter=t},t.prototype.insertIntoVposOrderedList=function(t,e){var n=0;t.some(function(t,r){return e.vpos<t.vpos&&(n=r,!0)})?t.splice(n,0,e):t.push(e)},t.prototype.getIndexByThreadAndNo=function(t,e,n){if(r["default"].isUndefined(e)||r["default"].isUndefined(n))return-1;var i=-1;return t.some(function(t,o){return!(!r["default"].isDefined(t.thread)||t.thread!==e||!r["default"].isDefined(t.no)||t.no!==n)&&(i=o,!0)}),i},t.prototype.removeElement=function(t,e){var n=t.indexOf(e);return n>=0&&(t.splice(n,1),!0)},t.prototype.dispose=function(){this._filteredChatList.length=0,this.eventDispatcher.event().offAll()},t}();e.ThreadProcessorImpl=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(308);!function(t){function e(e){return e?e.map(function(e){return t.convert(e)}):[]}function n(t){return t?new i["default"](r({thread:t.thread,no:t.no,content:t.content,vpos:t.vpos,mail:t.mail?t.mail.split(/\s+/):[],date:t.date,userId:t.user_id,premium:t.premium,deletedStatus:t.deleted||0,anonymous:1===t.anonymity,commands:[],score:t.score,fork:t.fork})):null}function r(t){var e=!1,n=!1,r=!1,o=!1;return t.mail.reduce(function(t,a){var s=a.toLowerCase();if(i["default"].isPositionCommand(s))return e||(t.position=s,e=!0),t;if(i["default"].isSizeCommand(s))return n||(t.size=s,n=!0),t;if(i["default"].isColorNameCommand(s))return r||(t.colorName=s,t.color=i["default"].COLORS[s],r=!0),t;if(i["default"].isPremiumColorNameCommand(s))return r||(t.colorName=s,t.color=i["default"].PREMIUM_COLORS[s],r=!0),t;if(i["default"].isColorCodeCommand(s))return r||(t.colorCode=t.color=s,r=!0),t;if(i["default"].isFontCommand(s))return o||(t.font=s,o=!0),t;var u=i["default"].extractAtNumber(a);if(null!==u)return t.atNumber=u/1e3,t;var c=a.match(/^device:(.+)$/);return c?(t.device=c[1],t):(t.commands.push(s),t)},t)}t.convertList=e,t.convert=n}(r||(r={})),e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(356),i=function(){function t(){var t=this;this.eventEmitter=new r.EventEmitter,this.event=function(e){return e?{on:function(n){return t.eventEmitter.on(e,n)&&t},once:function(n){return t.eventEmitter.once(e,n)&&t},off:function(n){return t.eventEmitter.removeListener(e,n)&&t},offAll:function(){return t.eventEmitter.removeAllListeners(e)&&t},emit:function(n){return t.eventEmitter.emit(e,n)}}:{on:function(e){return t},once:function(e){return t},off:function(e){return t},offAll:function(){return t.eventEmitter.removeAllListeners()&&t},emit:function(t){return!0}}}}return t}();e["default"]=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(356),i=n(305),o=n(306),a=n(361),s=n(362),u=n(363),c=function(){function t(t){void 0===t&&(t={}),this.eventEmitter=new r.EventEmitter,this._contentLengthMs=i["default"].isDefined(t.contentLengthMs)?t.contentLengthMs:o["default"].NO_CONTENT_LENGTH,this._useStreamingFromMessageServer=!!t.useStreamingFromMessageServer,this.clearChatList()}return t.prototype.clearChatList=function(){this.chatList=[],this._completedPreparationForSort=!1,this._resetStagingStatus()},t.prototype.resetStagingStatus=function(){this._resetStagingStatus(),this._useStreamingFromMessageServer&&this.sort()},t.prototype._resetStagingStatus=function(){this.lastChatIndexForMoving=-1,this.lastChatIndexForFixed=-1,this.lastChatForMoving=null,this.lastChatForFixed=null},Object.defineProperty(t.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(t){this._contentLengthMs!==t&&(this._contentLengthMs=t,this.sort(),this.updateIndex())},enumerable:!0,configurable:!0}),t.prototype.isUsingStreamingFromMessageServer=function(){return this._useStreamingFromMessageServer},t.prototype.isCompletedPreparationForSort=function(){return this._completedPreparationForSort},t.prototype.completedPreparationForSort=function(){this._completedPreparationForSort=!0,this.sort(),this.updateIndex()},t.prototype.add=function(t){Array.prototype.push.apply(this.chatList,t),this._completedPreparationForSort&&(this.sort(),this.updateIndex())},t.prototype.remove=function(t){var e=this,n=!1;t.forEach(function(t){var r=e.chatList.indexOf(t);if(!(r<0))if(e.chatList.splice(r,1),e.lastChatForMoving!==t)if(e.lastChatForFixed!==t)n=!0;else{e.lastChatForFixed=null,e.lastChatIndexForFixed=-1;for(var i=r-1;i>=0;i--){var o=e.chatList[i];if(a["default"].definedAsFixed(o.position)){e.lastChatForFixed=o,e.lastChatIndexForFixed=i;break}}}else{e.lastChatForMoving=null,e.lastChatIndexForMoving=-1;for(var i=r-1;i>=0;i--){var o=e.chatList[i];if(!a["default"].definedAsFixed(o.position)){e.lastChatForMoving=o,e.lastChatIndexForMoving=i;break}}}}),n&&this.updateIndex()},t.prototype.change=function(t,e){var n=this.chatList.indexOf(t);this.chatList.splice(n,1,e),this.lastChatForMoving===t&&(this.lastChatForMoving=e),this.lastChatForFixed===t&&(this.lastChatForFixed=e),this._completedPreparationForSort&&(this.sort(),this.updateIndex())},t.prototype.sort=function(){var t=this._contentLengthMs!==o["default"].NO_CONTENT_LENGTH?this._contentLengthMs:void 0,e=this.isUsingStreamingFromMessageServer();!e||this.lastChatIndexForMoving===-1&&this.lastChatIndexForFixed===-1?this._sortAll(t):this._sortOnlyNotStaged(t),e||this._event("checkRefresh").emit(u["default"].getMinimumModifiedStagingTimeMs(this.chatList,t))},t.prototype._sortOnlyNotStaged=function(t){if(!this.isReachedFinalIndex()){var e=Math.max(this.lastChatIndexForFixed,this.lastChatIndexForMoving)+1,n=this.chatList.splice(e);u["default"].sort(n,t),Array.prototype.push.apply(this.chatList,n)}},t.prototype._sortAll=function(t){u["default"].sort(this.chatList,t)},t.prototype.updateIndex=function(){i["default"].isDefined(this.lastChatForMoving)&&!i["default"].isNull(this.lastChatForMoving)?this.lastChatIndexForMoving=this.chatList.indexOf(this.lastChatForMoving):this.lastChatIndexForMoving=-1,i["default"].isDefined(this.lastChatForFixed)&&!i["default"].isNull(this.lastChatForFixed)?this.lastChatIndexForFixed=this.chatList.indexOf(this.lastChatForFixed):this.lastChatIndexForFixed=-1},t.prototype.getStagingChatList=function(t){if(this.isReachedFinalIndex())return[];for(var e,n,r=this.chatList.length,u=this.contentLengthMs!==o["default"].NO_CONTENT_LENGTH?this.contentLengthMs:void 0,c=[],l=(this.lastChatIndexForMoving<this.lastChatIndexForFixed?this.lastChatIndexForMoving:this.lastChatIndexForFixed)+1,h=-1,f=-1,d=l;d<r;d++)if(e=this.chatList[d],a["default"].definedAsFixed(e.position)){if(d>=this.lastChatIndexForFixed+1){if(n=s["default"].getVposInfoForFixed(e,u),!(n.vStagingMs<=t&&t<n.vRemoveMs)){if(s["default"].getVposInfoForMoving(e,u).vStagingMs<=t)continue;break}c.push(e),f=d}}else if(d>=this.lastChatIndexForMoving+1)if(n=s["default"].getVposInfoForMoving(e,u),n.vStagingMs<=t&&t<n.vRemoveMs)c.push(e),h=d;else if(e.vposMs>t)break;return i["default"].isEmptyArray(c)||(h!==-1&&(this.lastChatIndexForMoving=h,this.lastChatForMoving=this.chatList[h]),f!==-1&&(this.lastChatIndexForFixed=f,this.lastChatForFixed=this.chatList[f])),c},t.prototype.isReachedFinalIndex=function(){var t=this.chatList.length;return 0===t||this._completedPreparationForSort&&(this.lastChatIndexForMoving>=t-1||this.lastChatIndexForFixed>=t-1)},t.prototype.dispose=function(){this.chatList.length=0,this._event().offAll()},t.prototype.event=function(t){return this._event(t)},t.prototype._event=function(t){var e=this;return t?{on:function(n){return e.eventEmitter.on(t,n)&&e},once:function(n){return e.eventEmitter.once(t,n)&&e},off:function(n){return e.eventEmitter.removeListener(t,n)&&e},offAll:function(){return e.eventEmitter.removeAllListeners(t)&&e},emit:function(n){return e.eventEmitter.emit(t,n)}}:{offAll:function(){return e.eventEmitter.removeAllListeners()&&e}}},t}();e["default"]=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(308),o=[i["default"].POSITIONS.ue,i["default"].POSITIONS.shita];!function(t){function e(t){return o.indexOf(t)>=0}t.definedAsFixed=e}(r||(r={})),e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(305),o=3e3,a={frontAdjustStagingTimeMs:1e3,frontAdjustViewTimeMs:1e3,behindAdjustViewTimeMs:1e3};!function(t){function e(t){return i["default"].isDefined(t.atNumber)?1e3*t.atNumber:o}function n(t,e){var n=s(t),r=u(t);return f(t,e)&&(n=d(t,e),r=e),{vStagingMs:n-a.frontAdjustStagingTimeMs,vStartMs:n,vEndMs:r,vRemoveMs:r+a.behindAdjustViewTimeMs}}function r(t,e){var n=c(t),r=l(t);return v(t,e)&&(n=g(t,e),r=e),{vStagingMs:n,vStartMs:n,vEndMs:r,vRemoveMs:r}}function s(t){return t.vposMs-a.frontAdjustViewTimeMs}function u(t){return s(t)+a.frontAdjustViewTimeMs+e(t)}function c(t){return t.vposMs}function l(t){return c(t)+e(t)}function h(t){return e(t)+a.frontAdjustStagingTimeMs+a.frontAdjustViewTimeMs}function f(t,e){return i["default"].isDefined(e)&&e-(s(t)+a.frontAdjustStagingTimeMs)<h(t)}function d(t,n){return n-(e(t)+a.frontAdjustViewTimeMs)}function p(t){return e(t)}function v(t,e){return i["default"].isDefined(e)&&e-c(t)<p(t)}function g(t,n){return n-e(t)}t.getViewTimeMs=e,t.getVposInfoForMoving=n,t.getVposInfoForFixed=r,t.shouldModifyStagingTimeForMoving=f,t.shouldModifyStagingTimeForFixed=v}(r||(r={})),e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(305),o=n(361),a=n(362);!function(t){function e(t,e){var n,r,s,u,c;t.sort(function(t,l){return n=o["default"].definedAsFixed(t.position)?a["default"].getVposInfoForFixed(t,e):a["default"].getVposInfoForMoving(t,e),r=o["default"].definedAsFixed(l.position)?a["default"].getVposInfoForFixed(l,e):a["default"].getVposInfoForMoving(l,e),c=n.vStagingMs-r.vStagingMs,0===c&&(c=(i["default"].isDefined(t.no)?t.no:1/0)-(i["default"].isDefined(l.no)?l.no:1/0)||0,0===c&&(s=Number(t.thread),u=Number(l.thread),c=Number.isNaN(s)||Number.isNaN(u)?-1:s-u)),c})}function n(t,e){if(i["default"].isUndefined(e))return-1;for(var n=-1,r=void 0,s=function(t){(t<n||n===-1)&&(n=t,n<0&&(n=0))},u=0,c=t.length;u<c;u++)r=t[u],o["default"].definedAsFixed(r.position)?a["default"].shouldModifyStagingTimeForFixed(r,e)&&s(a["default"].getVposInfoForFixed(r,e).vStagingMs):a["default"].shouldModifyStagingTimeForMoving(r,e)&&s(a["default"].getVposInfoForMoving(r,e).vStagingMs);return n}t.sort=e,t.getMinimumModifiedStagingTimeMs=n}(r||(r={})),e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(356),i=n(305),o=n(306),a=n(365),s=function(){function t(t){void 0===t&&(t=o["default"].DEFAULT_SLOT_COUNT),this._size=t,this.eventEmitter=new r.EventEmitter,this.reservedList=[];for(var e=0,n=this._size;e<n;e++)this.reservedList.push(new a["default"]);this._stagingList=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stagingCount",{get:function(){return this._stagingList.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stagingList",{get:function(){return this._stagingList},enumerable:!0,configurable:!0}),t.prototype.reset=function(){var t=this;this._stagingList.forEach(function(e){e.reset(),t.addToReserved(e)}),this._stagingList.length=0,this._event("reset").emit(void 0)},t.prototype.getReserved=function(){if(i["default"].isEmptyArray(this.reservedList)){var t=this.getOldestStaging();return this.backToReserved(t),t}return this._getReserved()},t.prototype._getReserved=function(){return this.reservedList[this.reservedList.length-1]},t.prototype.getOldestStaging=function(){return this._stagingList.length>0?this._stagingList[0]:null},t.prototype.setToStaging=function(t){this.removeFromReserved(t),this.addToStaging(t),this._event("staged").emit(t)},t.prototype.backToReserved=function(t){t.reset(),this.removeFromStaging(t),this.addToReserved(t),this._event("reserved").emit(t)},t.prototype.addToStaging=function(t){var e=this._stagingList.indexOf(t);e>=0&&this.removeFromStaging(t),this._stagingList.push(t)},t.prototype.removeFromStaging=function(t){var e=this._stagingList.indexOf(t);e<0||this._stagingList.splice(e,1)},t.prototype.addToReserved=function(t){var e=this.reservedList.indexOf(t);e>=0&&this.removeFromReserved(t),this.reservedList.push(t)},t.prototype.removeFromReserved=function(t){var e=this.reservedList.indexOf(t);e<0||this.reservedList.splice(e,1)},t.prototype.dispose=function(){this.reservedList.length=0,this._stagingList.length=0,this._event().offAll()},t.prototype.event=function(t){return this._event(t)},t.prototype._event=function(t){var e=this;return t?{on:function(n){return e.eventEmitter.on(t,n)&&e},once:function(n){return e.eventEmitter.once(t,n)&&e},off:function(n){return e.eventEmitter.removeListener(t,n)&&e},offAll:function(){return e.eventEmitter.removeAllListeners(t)&&e},emit:function(n){return e.eventEmitter.emit(t,n)}}:{offAll:function(){return e.eventEmitter.removeAllListeners()&&e}}},t}();e["default"]=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(305),i=n(366),o=function(){function t(){this._displayObject=new i["default"],this._chat=null,this._appliedPosition="",this._appliedSize="",this._appliedColor="",this._appliedFont="",this._vStartMs=0,this._vEndMs=0,this._vStagingMs=0,this._vRemoveMs=0,this._initialX=0,this._targetX=0,this._isFixed=!1,this._isBordered=!1,this._displayObjectGenerated=!1}return t.prototype.reset=function(){this._displayObject.reset(),this._chat=null,this._appliedPosition="",this._appliedSize="",this._appliedColor="",this._appliedFont="",this._vStartMs=0,this._vEndMs=0,this._vStagingMs=0,this._vRemoveMs=0,this._initialX=0,this._targetX=0,this._isFixed=!1,this._isBordered=!1,this._displayObjectGenerated=!1},t.prototype.generate=function(t){this._chat=t.chat,this._appliedPosition=t.position,this._appliedSize=t.size,this._appliedColor=t.color,this._appliedFont=t.font,this._isFixed=t.isFixed,this.generateDisplayObject(t.text,t.fontInfo,t.borderLineInfo)},t.prototype.generateDisplayObject=function(t,e,n){void 0===n&&(n={visible:!1}),this._displayObject.generateText(t,e,n),this._isBordered=n.visible,this._displayObjectGenerated=!0},t.prototype.updateText=function(t){this._displayObject.updateText(t)},t.prototype.measure=function(t,e){return this._displayObject.measure(t,e)},t.prototype.resize=function(t,e){this._displayObject.resize(t,e)},t.prototype.canStaging=function(){return!r["default"].isNull(this._chat)&&this._displayObjectGenerated},t.prototype.setStagingParams=function(t){this._initialX=t.initialX,this._targetX=t.targetX,this._vStartMs=t.vStartMs,this._vEndMs=t.vEndMs,this._vStagingMs=t.vStagingMs,this._vRemoveMs=t.vRemoveMs},t.prototype.isFixed=function(){return this._isFixed},t.prototype.isBordered=function(){return this._isBordered},t.prototype.setCoordinate=function(t,e){this._displayObject.body.x=t,r["default"].isNumber(e)&&(this._displayObject.body.y=e)},t.prototype.isMatchedUser=function(t){return this._chat&&this._chat.userId&&this._chat.userId===t},Object.defineProperty(t.prototype,"chat",{get:function(){return this._chat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayObject",{get:function(){return this._displayObject.body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._displayObject.text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterSize",{get:function(){return this._displayObject.characterSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._displayObject.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCount",{get:function(){return this._displayObject.lineCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._displayObject.body.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._displayObject.body.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._displayObject.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._displayObject.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appliedPosition",{get:function(){return this._appliedPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appliedSize",{get:function(){return this._appliedSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appliedColor",{get:function(){return this._appliedColor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appliedFont",{get:function(){return this._appliedFont},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vposMs",{get:function(){return this._chat&&this._chat.vposMs||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vStartMs",{get:function(){return this._vStartMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vEndMs",{get:function(){return this._vEndMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vStagingMs",{get:function(){return this._vStagingMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vRemoveMs",{get:function(){return this._vRemoveMs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialX",{get:function(){return this._initialX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetX",{get:function(){return this._targetX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._displayObject.body.visible},set:function(t){this._displayObject.body.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._displayObject.body.alpha},set:function(t){t>1&&(t=1),t<0&&(t=0),this._displayObject.body.alpha=t},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t}();e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(173),i=n(306),o=n(305),a={color:"#000000",lineWidth:1},s={color:"#FFFFFF",family:'""',weight:600,textBaseline:"alphabetic",resolution:2,lineJoin:"round"},u={normalColorArray:[0,0,0],inverseColorArray:[255,255,255],alpha:.4,defaultThickness:3},c=.5,l=.8,h=/\r\n|\r|\n/,f=-1,d=function(){function t(){this._body=new(r["default"]().Container),this.borderLineObject=new(r["default"]().Graphics),this.textObject=null,this._text="",this.fontInfo=null,this.borderLineInfo=null,this.measuredSizeInfo=null,this.adjusterCharacterSizeInfo=null,this._lineCount=0,this.maximumWidthLine=f,this.generated=!1}return Object.defineProperty(t,"context",{get:function(){return t._context||(t._context=new(r["default"]().CanvasRenderer)(0,0).context),t._context},enumerable:!0,configurable:!0}),t.prototype.reset=function(){var t=this._body.parent;o["default"].isNull(t)||t.removeChild(this._body),this._body.removeChildren(),this.fontInfo=null,this.borderLineInfo=null,this.borderLineObject.clear(),this.measuredSizeInfo=null,this.adjusterCharacterSizeInfo=null,this.textObject&&(this.textObject.destroy(),this.textObject=null),this._text="",this._lineCount=0,this.maximumWidthLine=f,this._body.x=0,this._body.y=0,this._body.width=0,this._body.height=0,this._body.visible=!0,this._body.alpha=1,this.generated=!1},t.prototype.generateText=function(e,n,i){void 0===i&&(i={visible:!1}),this.generated&&this.reset(),this._text=e,this.fontInfo=t.convertUseFontInfo(n),this.borderLineInfo=i,this._lineCount=t.getLineCount(e),this.adjusterCharacterSizeInfo=t.getAdjusterCharacterSizeInfo(this.fontInfo.characterSize);var o=this.adjusterCharacterSizeInfo.adjusterScale,a=this.adjusterCharacterSizeInfo.actualCharacterSize,u={font:this.fontInfo.weight+" "+a+"px "+this.fontInfo.family,fill:this.fontInfo.color,textBaseline:this.fontInfo.textBaseline,stroke:t.getShadowColor(this.fontInfo.color,this.fontInfo.shadowAlpha),strokeThickness:this.fontInfo.shadowThickness/o,padding:c*a,lineHeight:this.fontInfo.lineHeight/o,lineJoin:s.lineJoin};this.textObject=new(r["default"]().Text)(t.getDisplayText(e),u),this.textObject.resolution=this.fontInfo.resolution,1!==o&&(this.textObject.scale.x=o,this.textObject.scale.y=o),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject(),this._body.addChild(this.borderLineObject),this._body.addChild(this.textObject),this.generated=!0},t.prototype.updateText=function(e){this.generated&&(this._text=e,this.textObject.text=t.getDisplayText(e),this._lineCount=t.getLineCount(e),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject())},t.prototype.resize=function(e,n){if(this.generated){this.fontInfo.characterSize=e,this.fontInfo.lineHeight=n,this.adjusterCharacterSizeInfo=t.getAdjusterCharacterSizeInfo(e);var r=this.adjusterCharacterSizeInfo.adjusterScale,i=this.adjusterCharacterSizeInfo.actualCharacterSize,o=this.textObject.style,a=o.font.split(" ");a[1]=i+"px",o.font=a.join(" "),o.padding=c*i,o.lineHeight=this.fontInfo.lineHeight/r,o.strokeThickness=this.fontInfo.shadowThickness/r,this.textObject.style=o,1!==r&&(this.textObject.scale.x=r,this.textObject.scale.y=r),this.measuredSizeInfo=this.measureByCurrent(),this.adjustTextInnerPosition(),this.borderLineSyncToTextObject()}},t.prototype._measure=function(e,n,r){return void 0===r&&(r=!1),r||this.generated?t.makeMeasuredSizeInfo(this.measureWidth(e),this.measureHeight(e,n),e,n):null},t.prototype.measure=function(t,e){return this._measure(t,e)},t.prototype.measureByCurrent=function(){return this._measure(this.characterSize,this.lineHeight,!0)},t.prototype.measureWidth=function(e){void 0===e&&(e=this.fontInfo.characterSize);var n=t.getAdjusterCharacterSizeInfo(e);t.context.font=this.fontInfo.weight+" "+n.actualCharacterSize+"px "+this.fontInfo.family;var r=o["default"].isNull(this.textObject)?"":this.textObject.text;
return Math.max.apply(null,r.split(h).map(function(e){return Math.ceil(t.context.measureText(e).width*n.adjusterScale)}))},t.prototype.measureHeight=function(t,e){return void 0===t&&(t=this.characterSize),void 0===e&&(e=this.lineHeight),this.lineCount>1?e*(this.lineCount-1)+t:t},Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return o["default"].isNull(this.measuredSizeInfo)?0:this.measuredSizeInfo.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return o["default"].isNull(this.measuredSizeInfo)?0:this.measuredSizeInfo.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"characterSize",{get:function(){return o["default"].isNull(this.fontInfo)?0:this.fontInfo.characterSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return o["default"].isNull(this.fontInfo)?0:this.fontInfo.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCount",{get:function(){return this._lineCount},enumerable:!0,configurable:!0}),t.getAdjusterCharacterSizeInfo=function(t){var e=i["default"].SUPPORTED_MINIMUM_CHARACTER_SIZE,n=1,r=t*l;return r<e?(r>=1&&(r=Math.floor(r)),n=r/e,r=e):r=Math.floor(r),{actualCharacterSize:r,adjusterScale:n}},t.prototype.adjustTextInnerPosition=function(){var t=this.adjusterCharacterSizeInfo.adjusterScale;this.textObject.x=(this.width-this.textObject.width)/2;var e=Math.max(r["default"]().Text.fontPropertiesCache[this.textObject.style.font].fontSize+this.textObject.style.strokeThickness,this.lineHeight)+(this.lineCount-1)*this.lineHeight;this.textObject.y=(this.height-e*t)/2+this.fontInfo.adjustBaselinePosition*this.lineHeight*t},t.prototype.borderLineSyncToTextObject=function(){if(this.borderLineObject.clear(),this.borderLineObject.visible=!!this.borderLineInfo.visible){var t=this.borderLineInfo.lineWidth||a.lineWidth;this.borderLineObject.lineStyle(t,Number((this.borderLineInfo.color||a.color).replace("#","0x"))),this.borderLineObject.drawRect(-t,0,this.width+2*t,this.height)}},t.convertUseFontInfo=function(t){return{characterSize:t.characterSize,lineHeight:t.lineHeight,color:t.color||s.color,family:t.family||s.family,adjustBaselinePosition:t.adjustBaselinePosition||0,weight:t.weight||s.weight,shadowThickness:t.shadowThickness||u.defaultThickness,shadowAlpha:t.shadowAlpha||u.alpha,textBaseline:t.textBaseline||s.textBaseline,resolution:t.resolution||s.resolution}},t.makeMeasuredSizeInfo=function(t,e,n,r){return{width:t,height:e,characterSize:n,lineHeight:r}},t.getDisplayText=function(t){return t.indexOf("\t")>=0?t.replace(/\t/g,""):t},t.getLineCount=function(t){return o["default"].isDefined(t)?t.split(h).length:0},t.getShadowColor=function(t,e){var n="#000000"===t?u.inverseColorArray:u.normalColorArray;return"rgba("+n.join(",")+","+e+")"},t}();e["default"]=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(173),i=n(305),o=Symbol("chat"),a=function(){function t(t,e){this.body=new(r["default"]().Container),this._width=t,this._height=e}return Object.defineProperty(t.prototype,"displayObject",{get:function(){return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.body.visible},set:function(t){this.body.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.body.alpha},set:function(t){t>1&&(t=1),t<0&&(t=0),this.body.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.body.children.forEach(function(t){i["default"].isDefined(t[o])&&delete t[o]}),this.body.removeChildren()},t.prototype.resize=function(t,e){this._width=t,this._height=e},t.prototype.appendSlot=function(t){t.displayObject[o]=t.chat;var e=this.body.children.findIndex(function(e){return t.chat.vpos===e[o].vpos?t.chat.no<e[o].no:t.chat.vpos<e[o].vpos});e<0?this.body.addChild(t.displayObject):this.body.addChildAt(t.displayObject,e)},t.prototype.removeSlot=function(t){i["default"].isDefined(t.displayObject[o])&&delete t.displayObject[o],this.body.removeChild(t.displayObject)},t}();e["default"]=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(305),i=n(306),o=n(308),a=n(369),s=n(370),u=n(371),c=n(361),l=n(362),h=n(372),f=n(373),d=n(374),p=n(375),v="invisible",g=2.8,y=.4,m=1,_={offsetTopRatio:0,heightRatio:1},b=function(){function t(t){this._contentLengthMs=r["default"].isDefined(t.contentLengthMs)?t.contentLengthMs:i["default"].NO_CONTENT_LENGTH,this._resolution=r["default"].isDefined(t.resolution)?t.resolution:i["default"].DEFAULT_RESOLUTION,this._fontScale=1,this._reverseMoving=!1,this.stagingFilterList=[],this.updateRenderScreenInfo(t.width,t.height,_),this.fontInfoResolver=new a["default"](t.fontFamiliesProvider)}return t.prototype.updateRenderScreenInfo=function(t,e,n){var r=u["default"].getBaseSize(t,e);this.renderScreenInfo={width:t,height:e,baseWidth:r.width,baseHeight:r.height,renderArea:n,renderAreaRectangle:{x:0,y:e*n.offsetTopRatio,width:t,height:e*n.heightRatio}}},t.prototype.resize=function(t,e){this.updateRenderScreenInfo(t,e,this.renderScreenInfo.renderArea)},Object.defineProperty(t.prototype,"contentLengthMs",{get:function(){return this._contentLengthMs},set:function(t){this._contentLengthMs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontScale",{get:function(){return this._fontScale},set:function(t){this._fontScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseMoving",{get:function(){return this._reverseMoving},set:function(t){this._reverseMoving=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderArea",{get:function(){return this.renderScreenInfo.renderArea},set:function(t){this.updateRenderScreenInfo(this.renderScreenInfo.width,this.renderScreenInfo.height,t)},enumerable:!0,configurable:!0}),t.prototype.addStagingFilter=function(t,e){this.removeStagingFilter(t),this.stagingFilterList.push({name:t,filter:e})},t.prototype.removeStagingFilter=function(t){var e=this.stagingFilterList.findIndex(function(e){return e.name===t});e>=0&&this.stagingFilterList.splice(e,1)},t.prototype.clearStagingFilter=function(){this.stagingFilterList.length=0},t.prototype.getStagingFilterNameList=function(){return this.stagingFilterList.map(function(t){return t.name})},t.prototype.applyStagingFilters=function(t){return this._applyStagingFilters(t,{visible:!t.existCommand(v),content:t.content,position:t.position,size:t.size,font:t.font,color:t.color,fontScale:this._fontScale,borderLineColor:t.borderLineColor,alpha:NaN})},t.prototype._applyStagingFilters=function(t,e){if(r["default"].isEmptyString(t.position)&&(e.position=o["default"].DEFAULT_POSITION),r["default"].isEmptyString(t.size)&&(e.size=o["default"].DEFAULT_SIZE),r["default"].isEmptyString(t.colorCode)&&r["default"].isEmptyString(t.colorName)&&(e.color=o["default"].DEFAULT_COLOR),r["default"].isEmptyString(t.font)&&(e.font=o["default"].DEFAULT_FONT),r["default"].isEmptyArray(this.stagingFilterList))return e;var n;n=Object.assign({},t);var i=this.stagingFilterList.reduce(function(t,e,r,i){return e.filter(n,t)},e);return e.color!==i.color&&(i.color=o["default"].resolveToColorCode(i.color)),i},t.prototype.makeStagingSlot=function(t,e,n,r,i){try{t.generate({chat:e,text:n.content,isFixed:c["default"].definedAsFixed(n.position),position:n.position,size:n.size,color:n.color,font:n.font,fontInfo:this.buildFontInfo({color:n.color,size:n.size,font:n.font,fontScale:n.fontScale}),borderLineInfo:this.buildBorderLineInfo(n.borderLineColor)})}catch(o){return null}if(!t.canStaging())return null;try{p["default"].resizeSlotIfNeed(t,this.renderScreenInfo)}catch(o){return null}return t.alpha=s["default"].resolve({alpha:n.alpha,commands:e.commands}),t.setStagingParams(this.buildStagingParams(t)),f["default"].locateSlotAtFirst(t,i,this.reverseMoving,r,this.renderScreenInfo),t},t.prototype.buildStagingParams=function(t){return t.isFixed()?this.buildStagingParamsForFixed(t):this.buildStagingParamsForMoving(t)},t.prototype.buildStagingParamsForMoving=function(t){var e=l["default"].getVposInfoForMoving(t.chat,this.contentLengthMs!==i["default"].NO_CONTENT_LENGTH?this.contentLengthMs:void 0),n=h["default"].getStagingXInfoForMoving(t,this.renderScreenInfo);return{initialX:n.initialX,targetX:n.targetX,vStartMs:e.vStartMs,vEndMs:e.vEndMs,vStagingMs:e.vStagingMs,vRemoveMs:e.vRemoveMs}},t.prototype.buildStagingParamsForFixed=function(t){var e=l["default"].getVposInfoForFixed(t.chat,this.contentLengthMs!==i["default"].NO_CONTENT_LENGTH?this.contentLengthMs:void 0),n=h["default"].getStagingXInfoForFixed(t,this.renderScreenInfo);return{initialX:n.initialX,targetX:n.targetX,vStartMs:e.vStartMs,vEndMs:e.vEndMs,vStagingMs:e.vStagingMs,vRemoveMs:e.vRemoveMs}},t.prototype.buildFontInfo=function(t){var e=this.fontInfoResolver.resolve(t.font);return{characterSize:d["default"].getCharacterSize(t.size,this.renderScreenInfo)*t.fontScale,lineHeight:d["default"].getLineHeight(t.size,this.renderScreenInfo)*t.fontScale,color:t.color,family:e.family,adjustBaselinePosition:e.adjustBaselinePosition,weight:e.weight,shadowThickness:g,shadowAlpha:y,resolution:this._resolution}},t.prototype.buildBorderLineInfo=function(t){return t?{visible:!0,color:t,lineWidth:m}:{visible:!1}},t.prototype.updateCommentsPosition=function(t,e){var n=this;t.forEach(function(t){f["default"].locateSlot(t,e,n._reverseMoving)})},t.prototype.getFinishedStagingSlotList=function(t,e){return t.filter(function(t){return t.vRemoveMs<=e})},t.prototype.dispose=function(){this.stagingFilterList.length=0},t}();e["default"]=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(305),i=n(308),o=function(){function t(t){this.fontFamiliesProvider=t}return t.prototype.resolve=function(t){var e=this.fontFamiliesProvider.getFamilies();return!r["default"].isUndefined(t)&&i["default"].isFontCommand(t)&&e.hasOwnProperty(t)?e[t]:e.defont},t}();e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(305);!function(t){function e(t){if(i["default"].isDefined(t.alpha)&&!isNaN(t.alpha))return t.alpha;var e=i["default"].isDefined(t.commands)?n(t.commands):NaN;return isNaN(e)?1:e}function n(e){for(var n=NaN,r=0,i=t.ALPHA_BY_COMMANDS.length;r<i;r++)if(e.indexOf(t.ALPHA_BY_COMMANDS[r].commands)>=0){n=t.ALPHA_BY_COMMANDS[r].alpha;break}return n}t.ALPHA_BY_COMMANDS=[{commands:"_live",alpha:.5}],t.resolve=e}(r||(r={})),e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r={width:4,height:3};!function(t){function e(t,e){return t/e>=r.width/r.height?{width:Math.ceil(e*(r.width/r.height)),height:Math.ceil(e)}:{width:Math.ceil(t),height:Math.ceil(e)}}t.getBaseSize=e}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(308),o=n(361),a=200;!function(t){function e(t,e,n){return void 0===n&&(n=!1),n?t.targetX+(t.initialX-t.targetX)*((e-t.vStartMs)/(t.vEndMs-t.vStartMs)):t.initialX+(t.targetX-t.initialX)*((e-t.vStartMs)/(t.vEndMs-t.vStartMs))}function n(t,n,s){var u=t.appliedPosition;if(t.height>=s.renderAreaRectangle.height)return u===i["default"].POSITIONS.shita?s.renderAreaRectangle.y+s.renderAreaRectangle.height-t.height:u===i["default"].POSITIONS.ue?s.renderAreaRectangle.y:s.renderAreaRectangle.y-(t.height-s.renderAreaRectangle.height)/2;var c,l,h,f=!1;u===i["default"].POSITIONS.shita?(c=s.renderAreaRectangle.y+s.renderAreaRectangle.height-t.height,l=!1,h=s.renderAreaRectangle.y):(c=s.renderAreaRectangle.y,l=!0,h=s.renderAreaRectangle.y+s.renderAreaRectangle.height);var d,p,v,g=function(t,e,n){return!(n.y+n.height<t||t+e<n.y)},y=function(t,n){return t.initialX<=e(n,t.vStartMs)+n.width||e(t,n.vEndMs)<=n.targetX+n.width};do{d=!1;for(var m=0,_=n.length;m<_;m++)if(p=n[m],v=p.appliedPosition,u===v&&g(c,t.height,p)&&y(t,p)){if(o["default"].definedAsFixed(u)&&p.vEndMs-t.vStartMs<=a)continue;l?(c=p.y+p.height+.1,c+t.height>=h?f=!0:d=!0):(c=p.y-t.height-.1,c<=h?f=!0:d=!0);break}}while(!f&&d);return f?r(t,s):c}function r(t,e){return e.renderAreaRectangle.y+Math.random()*(e.renderAreaRectangle.height-t.height)}function s(t,e){return{initialX:e.width/2+e.baseWidth/2,targetX:e.width/2-e.baseWidth/2-t.width}}function u(t,e){var n=e.width/2-t.width/2;return{initialX:n,targetX:n}}t.getXForMoving=e,t.getStagingY=n,t.getStagingXInfoForMoving=s,t.getStagingXInfoForFixed=u}(r||(r={})),e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(305),o=n(372);!function(t){function e(t,e,n,r){t.isFixed()&&!i["default"].isNumber(r)||t.setCoordinate(o["default"].getXForMoving(t,e,n),r)}function n(t,n,r){e(t,n,r)}function r(t,n,r,i,a){e(t,n,r,o["default"].getStagingY(t,i,a))}t.locateSlot=n,t.locateSlotAtFirst=r}(r||(r={})),e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r={big:7.8,medium:11.3,small:16.6},i={big:8.4,medium:13.1,small:21},o={big:16,medium:25.4,small:38};!function(t){function e(t,e){return e.baseHeight/r[t]}function n(t,n,r){void 0===r&&(r=!1);var a=e(t,n),s=i[t];if(r){var u=o[t];return(n.baseHeight-a*(s/u))/(u-1)}return(n.baseHeight-a)/(s-1)}t.getCharacterSize=e,t.getLineHeight=n}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(374),o={ender:"ender",full:"full"},a={big:3,medium:5,small:7},s=1;!function(t){function e(t,e){var a=t.characterSize,u=t.lineHeight,c=r(t,e),l=t.width>c,h=n(t),f=t.isFixed(),d=t.chat.existCommand(o.ender);if(l&&f||h&&!d){var p;if(h&&!d){var v=i["default"].getLineHeight(t.appliedSize,e,!0);p=t.measure(t.characterSize*(v/t.lineHeight),v)}else p=t.measure(t.characterSize,t.lineHeight);l=p.width>c;var g=l&&h&&f&&!d;if(l&&f){var y=p.characterSize,m=void 0,_=void 0;if(m=c/p.width,p=t.measure(p.characterSize*m,p.lineHeight*m),p.width>c){do _=p.characterSize-s,p=t.measure(_,p.lineHeight*(_/p.characterSize));while(p.width>=c)}else{var b=void 0;do b=p,_=p.characterSize+s,p=t.measure(_,p.lineHeight*(_/p.characterSize));while(p.width<c);p=b}g&&(m=p.characterSize/y,p.characterSize=a*m,p.lineHeight=u*m)}t.resize(p.characterSize,p.lineHeight)}}function n(t){return t.lineCount>=a[t.appliedSize]}function r(t,e){return t.chat.existCommand(o.full)?e.width:e.baseWidth}t.resizeSlotIfNeed=e}(r||(r={})),e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(t){var e={main:[],nicoscript:[],niwango:[]};return t.forEach(function(t){if("undefined"!=typeof t.content){if("/"===t.content.charAt(0))return e.niwango.push(t);var n=t.content.trim().charAt(0);if("@"===n||""===n)return e.nicoscript.push(t)}e.main.push(t)}),e}t.assort=e}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(378),o=n(308),a=n(379);!function(t){function e(t,e){return void 0===e&&(e=[]),new i["default"](t.filter(function(t){return"undefined"!=typeof t[x]}).sort(function(t,e){return t[x]-e[x]}).concat(e))}function n(t){var e=function(e){return(e.score||0)>t};return e[x]=T.NG_SCORING,e}function r(t){var e=function(e){return t.every(function(t){switch(t.type){case"word":return!t.source||!e.content||!e.content.toLowerCase().includes(t.source.toLowerCase());case"id":return t.source!==e.user_id;case"command":return!t.source||!e.mail||b(e,t.source.split(/\s+/)),!0}return!0})};return e[x]=T.USER_NG,e}function s(t){var e=function(e){return t.forEach(function(t){var n=t.source,r=t.destination;n&&0!==n.indexOf("/")&&(e.content=0===n.indexOf("*")?_(e.content,n.substring(1),r):m(e.content,n,r))}),!0};return e[x]=T.CHANNEL_NG,e}function u(t){var e=function(e){return t.forEach(function(t){var n=t.source,r=t.destination;n&&(e.content=0===n.indexOf("*")?_(e.content,n.substring(1),r):m(e.content,n,r))}),!0};return e[x]=T.OWNER_NG,e}function c(){var t=function(t){return!t.deleted};return t[x]=T.DELETED,t}function l(){var t=function(t){return!/(\s|^)184(\s|$)/.test(t.mail)};return t[x]=T.IYAYO,t}function h(){var t=function(t){return!/(\s|^)_live(\s|$)/.test(t.mail)};return t[x]=T.SEKACHAKU,t}function f(){var t=new RegExp("(\\s|^)("+o["default"].SIZES_ARRAY.join("|")+")(\\s|$)","i"),e=function(e){return t.test(e.mail)||(e.mail=e.mail+" "+o["default"].SIZES.small),!0};return e[x]=T.DEFAULT_SMALL,e}function d(){var t=new RegExp("(?:\\s|^)("+o["default"].AT_NUMBER_REG_EXP+")(?:\\s|$)","i"),e=function(e){if("string"!=typeof e.mail)return!0;var n=e.mail.match(t);return n&&n[1]&&b(e,[n[1]]),!0};return e[x]=T.AT_NUMBER,e}function p(t,e){var n=a.LeafExpression.getUnion(t),r=new RegExp("(\\s|^)(patissier)(\\s|$)","i"),i=function(t){return!r.test(t.mail)||!e.some(function(e){return"undefined"!=typeof t.thread&&t.thread===e.threadId&&"undefined"!=typeof t.no&&t.no<=e.lastRes-n})};return i[x]=T.OLD_PATISSIER,i}function v(){var t=function(t){return t.mail&&0===(1&t.premium)&&(t.mail=t.mail.replace(new RegExp("(\\s+|^)("+S.join("|")+")(\\s+|$)","gi")," ").trim()),!0};return t[x]=T.PREMIUM_COLOR,t}function g(t){var e=new RegExp("(\\s|^)("+o["default"].POSITIONS_ARRAY.join("|")+")(\\s|$)","i"),n=new RegExp("(\\s|^)("+o["default"].SIZES_ARRAY.join("|")+")(\\s|$)","i"),r=new RegExp("(\\s|^)("+w.join("|")+")(\\s|$)","i"),i=new RegExp("(\\s|^)("+o["default"].FONTS_ARRAY.join("|")+")(\\s|$)","i");t.sort(function(t,e){var n=e.timeRange.startMs-t.timeRange.startMs;return 0===n&&(n=e.createdUnixTimestamp-t.createdUnixTimestamp),n}),t.forEach(function(t){var e=t.commands;t.settingPositionEnabled=o["default"].isPositionCommand(e.position),t.settingSizeEnabled=o["default"].isSizeCommand(e.size),t.settingColorEnabled=o["default"].isColorNameCommand(e.color)||o["default"].isPremiumColorNameCommand(e.color)||o["default"].isColorCodeCommand(e.color),t.settingFontEnabled=o["default"].isFontCommand(e.font)});var a=function(o){return t.forEach(function(t){if(E(10*o.vpos,t.timeRange)){var a=t.commands;t.settingPositionEnabled&&!e.test(o.mail)&&(o.mail=o.mail+" "+a.position),t.settingSizeEnabled&&!n.test(o.mail)&&(o.mail=o.mail+" "+a.size),t.settingColorEnabled&&!r.test(o.mail)&&(o.mail=o.mail+" "+a.color),t.settingFontEnabled&&!i.test(o.mail)&&(o.mail=o.mail+" "+a.font)}}),!0};return a[x]=T.DEFAULT_SETTING,a}function y(t){t.sort(function(t,e){var n=t.timeRange.startMs-e.timeRange.startMs;return 0===n&&(n=t.createdUnixTimestamp-e.createdUnixTimestamp),n});var e=t.map(function(t){var e=t.commands||{},n=e.position,r=void 0===n?"":n,i=e.size,a=void 0===i?"":i,s=e.color,u=void 0===s?"":s,c=e.font,l=void 0===c?"":c,h=[],f=[];return o["default"].isPositionCommand(r)&&(f=f.concat(o["default"].POSITIONS_ARRAY),h.push(r)),o["default"].isSizeCommand(a)&&(f=f.concat(o["default"].SIZES_ARRAY),h.push(a)),(o["default"].isColorNameCommand(u)||o["default"].isPremiumColorNameCommand(u)||o["default"].isColorCodeCommand(u))&&(f=f.concat(w),h.push(u)),o["default"].isFontCommand(l)&&(f=f.concat(o["default"].FONTS_ARRAY),h.push(l)),{replaceSettingParams:t,mailReplacer:f.length?{regExp:new RegExp("(\\s+|^)"+f.join("|")+"(\\s+|$)","i"),toAdd:h.join(" ")}:null}}),n=function(t){return e.forEach(function(e){var n=e.replaceSettingParams,r=e.mailReplacer;if(E(10*t.vpos,n.timeRange)){var i=n.replaceInfo,o=i.perfectMatching?t.content===i.source:t.content&&t.content.includes(i.source);if(o&&(t.content=i.replaceAll?i.destination:m(t.content,i.source,i.destination||""),r)){var a=r.regExp,s=r.toAdd,u=t.mail?t.mail.split(a).join(" ").trim():"";t.mail=u?u+" "+s:s}}}),!0};return n[x]=T.REPLACE_SETTING,n}function m(t,e,n){if(!t)return t;for(var r=[],i=t.toLowerCase(),o=e.toLowerCase(),a=e.length,s=0;;){var u=i.indexOf(o,s);if(u<0){r.push(t.substring(s));break}r.push(t.substring(s,u)),s=u+a}return r.join(n)}function _(t,e,n){return t&&t.includes(e)?n:t}function b(t,e){if(0!==e.length){if(e.indexOf("all")>=0)return void(t.mail="");var n=e.map(function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)","gi")});n.every(function(e){return e.test(t.mail)})&&(n.forEach(function(e){return t.mail=t.mail.replace(e," ")}),t.mail=t.mail.trim())}}function E(t,e){return e.startMs<=t&&t<e.endMs}var T,x=Symbol("filterOrderSymbol");!function(t){t[t.DELETED=0]="DELETED",t[t.IYAYO=1]="IYAYO",t[t.OLD_PATISSIER=2]="OLD_PATISSIER",t[t.NG_SCORING=3]="NG_SCORING",t[t.SEKACHAKU=4]="SEKACHAKU",t[t.DEFAULT_SMALL=5]="DEFAULT_SMALL",t[t.AT_NUMBER=6]="AT_NUMBER",t[t.CHANNEL_NG=7]="CHANNEL_NG",t[t.OWNER_NG=8]="OWNER_NG",t[t.USER_NG=9]="USER_NG",t[t.PREMIUM_COLOR=10]="PREMIUM_COLOR",t[t.DEFAULT_SETTING=11]="DEFAULT_SETTING",t[t.REPLACE_SETTING=12]="REPLACE_SETTING"}(T||(T={})),t.create=e,t.ngScoring=n,function(t){t.THRESHOLD_HIGH=-1e3,t.THRESHOLD_MIDDLE=-4800,t.THRESHOLD_LOW=-1e4}(n=t.ngScoring||(t.ngScoring={})),t.userNg=r,t.channelNg=s,t.ownerNg=u,t.deleted=c,t.iyayo=l,t.sekachaku=h,t.defaultSmall=f,t.atNumber=d,t.oldPatissier=p;var S=o["default"].PREMIUM_COLORS_ARRAY.concat("#[\\da-fA-F]{6}"),w=o["default"].COLORS_ARRAY.concat(S);t.premiumColor=v,t.defaultSetting=g,t.replaceSetting=y}(r||(r={})),e["default"]=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];n(this,t),this.filters=e}return r(t,[{key:"addFilter",value:function(t){this.filters.push(t)}},{key:"apply",value:function(t){var e=this;return t.map(function(t){return Object.assign({},t)}).filter(function(t){return e.filters.every(function(e){return e(t)&&!!t.content})})}}]),t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.Thread=e.ResFrom=e.LeafExpression=e.KeyRepository=e.Context=e.Client=void 0;var i=n(380),o=r(i),a=n(486),s=r(a),u=n(491),c=r(u),l=n(531),h=r(l),f=n(503),d=r(f),p=n(505),v=r(p);e.Client=o["default"],e.Context=s["default"],e.KeyRepository=c["default"],e.LeafExpression=h["default"],e.ResFrom=d["default"],e.Thread=v["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(381),o=r(i),a=n(418),s=r(a),u=n(452),c=r(u),l=n(456),h=r(l),f=n(459),d=r(f),p=n(460),v=r(p),g=n(478),y=r(g),m=n(356),_=r(m),b=n(486),E=r(b),T=n(491),x=(r(T),n(503)),S=r(x),w=n(504),R=r(w),A=n(506),O=r(A),C=n(507),P=r(C),M=n(508),L=r(M),k=n(509),I=r(k),D=n(510),F=r(D),N=n(512),U=r(N),j=n(513),B=r(j),G=n(514),H=r(G),W=n(515),z=function(t){function e(n){var r=n.context,i=n.keyRepository;(0,d["default"])(this,e);var o=(0,v["default"])(this,t.call(this));switch(o._context=r,o._keyRepository=i,o._threadRepository=new R["default"],r.protocol){case E["default"].PROTOCOL.HTTP:o._connection=new W.HTTPConnection(r.server);break;case E["default"].PROTOCOL.WEB_SOCKET_PROXY:o._connection=new W.WebSocketConnection(r.server);break;case E["default"].PROTOCOL.WEB_SOCKET:o._connection=new W.WebSocketConnection(r.server,W.WebSocketConnection.SUB_PROTOCOL.JSON);break;default:throw new Error(r.protocol+" protocol can not use. see Context.PROTOCOL.")}return o._boundDispatchPushedPackets=o._dispatchPushedPackets.bind(o),o._boundDispatchConnectionError=o._dispatchConnectionError.bind(o),o._boundDispatchConnectionClose=o._dispatchConnectionClose.bind(o),o._connection.on("packets",o._boundDispatchPushedPackets),o._connection.on("error",o._boundDispatchConnectionError),o._connection.on("close",o._boundDispatchConnectionClose),o}return(0,y["default"])(e,t),e.prototype.dispose=function(){this._connection.removeListener("packets",this._boundDispatchPushedPackets),this._connection.removeListener("error",this._boundDispatchConnectionError),this._connection.removeListener("close",this._boundDispatchConnectionClose),this._connection.disconnect(),this._connection=null,this._context=null,this._keyRepository=null;for(var t=this._threadRepository._threads.keys(),e=Array.isArray(t),n=0,t=e?t:(0,h["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;this._threadRepository._threads.get(i).dispose()}this._threadRepository=null},e.prototype._dispatchPushedPackets=function(t){for(var e=t,n=Array.isArray(e),r=0,e=n?e:(0,h["default"])(e);;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if(r=e.next(),r.done)break;i=r.value}var o=i;switch((0,c["default"])(o)[0]){case"chat":var a=this._threadRepository.get({id:o.chat.thread,fork:o.chat.fork});a.pushChat(o.chat);break;case"control":var s=this._threadRepository.get({id:o.control.thread,fork:o.control.fork});s.pushControl(o.control)}}},e.prototype._dispatchConnectionError=function(t){this.emit("connection:error",t)},e.prototype._dispatchConnectionClose=function(t){this.emit("connection:close",t)},e.prototype.createThread=function(t){var e=t.id,n=t.service,r=t.fork,i=t.language,o=t.leafExpression,a=t.whenSec,s=t.isPrivate,u=t.noLeaf,c=t.withGlobal,l=t.revision;return"undefined"==typeof c&&(c=i?0:1),this._threadRepository.create(this,{id:e,service:n,fork:r,language:i,leafExpression:o,whenSec:a,isPrivate:s,noLeaf:u,withGlobal:c,revision:l})},e.prototype.fetchThread=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i in n){var o=n[i];if(!o.thread)throw new Error("too few arguments. expect 'thread' property.");"number"!=typeof o.resFrom||isNaN(o.resFrom)||(o.resFrom=new S["default"](o.resFrom));for(var a=0;a<i;a++)if(n[a].thread.fork===o.thread.fork&&n[a].thread.whenSec===o.thread.whenSec&&n[a].thread.id===o.thread.id)throw new Error("invalid argument. can not specify same threadId at the same time.");"undefined"==typeof o.leafExpression&&(o.leafExpression=o.thread.leafExpression),o.thread.noLeaf&&(o.leafExpression=null)}var u=n.reduce(function(e,n){return e.concat(t._createThreadPackets(n))},[]);return this._fetchThread.apply(this,u).then(function(){for(var e=[],n=u,r=Array.isArray(n),i=0,n=r?n:(0,h["default"])(n);;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;switch(a.extractResultCode()){case P["default"].THREAD_TOO_OLD_THREADKEY:t._keyRepository.clearThreadkey({thread:a.$meta.thread}),e.push(a);break;case P["default"].THREAD_TOO_OLD_USERKEY:t._keyRepository.clearUserkey(),e.push(a);break;case P["default"].THREAD_TOO_OLD_WAYBACKKEY:t._keyRepository.clearWaybackkey({thread:a.$meta.thread}),e.push(a)}}for(var s=e,c=Array.isArray(s),l=0,s=c?s:(0,h["default"])(s);;){var f;if(c){if(l>=s.length)break;f=s[l++]}else{if(l=s.next(),l.done)break;f=l.value}var d=f;d.clearResponse()}return t._fetchThread.apply(t,e)}).then(function(){for(var e=u,n=Array.isArray(e),r=0,e=n?e:(0,h["default"])(e);;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if(r=e.next(),r.done)break;i=r.value}var o=i;if(o.extractResultCode()!==P["default"].THREAD_FOUND)return s["default"].reject(o.response)}return t._parseThreadPackets(u)}).then(function(){return n.map(function(t){return t.thread})})},e.prototype._fetchThread=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(0===n.length)return s["default"].resolve();var i=n.map(function(e){return t._keyRepository?t._keyRepository.fetchKeysForThread({thread:e.$meta.thread,userId:e.userId}).then(function(t){return e.threadkey=t.threadkey,e.force184=t.force_184,e.userkey=t.userkey,e.waybackkey=t.waybackkey,e}):s["default"].resolve(e)});return s["default"].all(i).then(function(e){var n;return(n=t._connection).send.apply(n,e)})},e.prototype.fetchThreadLatest=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e,i=Array.isArray(r),o=0,r=i?r:(0,h["default"])(r);;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if(o=r.next(),o.done)break;a=o.value}var s=a;s.thread&&(s.leafExpression=null,s.resFrom=(0|s.thread.lastRes)+1)}return this.fetchThread.apply(this,e).then(function(t){return e.map(function(t){return t.thread?t.thread.chats.filter(function(e){return e.no>=t.resFrom}):[]})})},e.prototype.postChat=function(t){var e=this;return this._postChat(t).then(function(n){return n.extractStatus()===O["default"].POST_INVALID_POSTKEY?(e._keyRepository.clearPostkey({thread:t.thread}),t.thread.lastRes=n.extractNo(),e._postChat(t)):n}).then(function(t){return t.extractStatus()!==O["default"].POST_SUCCESS?s["default"].reject(t.response):[t.response]})},e.prototype._deleteComments=function(t){var e=this,n=t.thread,r=t.chatNos,i=t.isUndelete,o=void 0!==i&&i;if(r.length<1)return s["default"].reject();var a=void 0;return this._keyRepository.fetchDeletekey({thread:n,chatNos:r,isUndelete:o}).then(function(t){return a=e._createDeleteCommentsPacket({thread:n,deletekey:t.deletekey,userId:e._context.userId,revision:n.revision,isUndelete:o,chatNos:r}),e._connection.send(a)}).then(function(){return a.extractStatus()!==L["default"].DELETE_SUCCESS?s["default"].reject(a.extractResponse()):a.extractResponse()})},e.prototype.deleteComments=function(t){var e=t.thread,n=t.chatNos;return this._deleteComments({thread:e,chatNos:n})},e.prototype.undeleteComments=function(t){var e=t.thread,n=t.chatNos;return this._deleteComments({thread:e,chatNos:n,isUndelete:!0})},e.prototype.updateThread=function(t){var e=this,n=t.thread,r=t.chats,i=n.id,o=n.ticket,a=r.map(function(t){return e._createAddThreadItemPacket({vpos:t.vpos,mail:t.mail,content:t.content})}),u=void 0;return this._keyRepository.fetchUpdatekey({thread:n}).then(function(t){var n;return u=e._createUpdateThreadPacket({threadId:i,ticket:o,count:r.length,updatekey:t.updatekey}),a.push(u),(n=e._connection).send.apply(n,a)}).then(function(){return u.extractStatus()!==I["default"].UPDATE_SUCCESS?s["default"].reject(u.extractResponse()):u.extractResponse()})},e.prototype._postChat=function(t){var e=this;return this._keyRepository.fetchPostkey({thread:t.thread,yugi:t.yugi}).then(function(n){return e._createChatPacket((0,o["default"])({postkeyResponse:n},t))}).then(function(t){return e._connection.send(t)}).then(function(t){return t[0]})},e.prototype._parseThreadPackets=function(t){for(var e=t,n=Array.isArray(e),r=0,e=n?e:(0,h["default"])(e);;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if(r=e.next(),r.done)break;i=r.value}var o=i;if(o instanceof F["default"])for(var a=o.$meta.thread,s=o.response,u=Array.isArray(s),l=0,s=u?s:(0,h["default"])(s);;){var f;if(u){if(l>=s.length)break;f=s[l++]}else{if(l=s.next(),l.done)break;f=l.value}var d=f,p=(0,c["default"])(d).shift(),v=d[p];switch(p){case"thread":a.lastRes=v.last_res,a.ticket=v.ticket,a.locked=v.locked,a.revision=v.revision,a.resOffset=v.res_offset,a.buttonIgnored=v.button_ignored,a.clickRevision=v.click_revision,a.numClicks=v.num_clicks,a.ngResult=v.ng_result,a.ticket=v.ticket,a.revision=v.revision;break;case"chat":a.addChat(v);break;case"leaf":a.leaves.push(v);break;case"view_counter":a.viewCounter=v;break;case"global_num_res":a.globalNumRes=v.num_res}}}},e.prototype._createThreadPackets=function(t){var e=t.thread,n=t.numRes,r=t.scores,i=t.resFrom,o=void 0===i?new S["default"]((-1e3)):i,a=t.leafExpression,s=void 0===a?null:a,u=[],c=s?"20090904":"20061206";
return u.push(new W.ThreadPacket({version:c,thread:e.id,service:e.service,numRes:n,scores:r,resFrom:s?void 0:o.valueOf(),fork:e.fork,language:e.language,when:e.whenSec,userId:this._context.userId,withGlobal:e.withGlobal,$meta:{thread:e}})),s&&u.push(new W.ThreadLeavesPacket({thread:e.id,language:e.language,when:e.whenSec,userId:this._context.userId,content:s.toString(),scores:r,$meta:{thread:e}})),u},e.prototype._createChatPacket=function(t){var e=t.thread,n=t.content,r=t.vpos,i=t.postkeyResponse,o=t.mail,a=t.sage,s=t.staff,u=t.sex,c=t.immunity,l=t.locale,h=t.count,f=t.origin;return new W.ChatPacket({thread:e.id,content:n,vpos:r,mail:this._filterMail(o),ticket:e.ticket,userId:this._context.userId,premium:this._context.isPremium?1:void 0,sage:a,staff:s,sex:u,immunity:c,locale:l,count:h,origin:f,postkeyResponse:i,$meta:{thread:e}})},e.prototype._filterMail=function(t){return t.toLowerCase().split(" ").filter(function(t){return 0!==t.indexOf("_")}).join(" ")},e.prototype._createUpdateThreadPacket=function(t){var e=t.threadId,n=t.count,r=t.ticket,i=t.updatekey;return new B["default"]({thread:e,userId:this._context.userId,count:n,ticket:r,updatekey:i,premium:this._context.isPremium?1:0})},e.prototype._createAddThreadItemPacket=function(t){var e=t.vpos,n=t.mail,r=t.content;return new U["default"]({vpos:e,mail:n,content:r})},e.prototype._createDeleteCommentsPacket=function(t){var e=t.thread,n=t.userId,r=t.deletekey,i=t.revision,o=t.chatNos,a=t.isUndelete,s=void 0!==a&&a;return new H["default"]({thread:e.id,userId:n,deletekey:r,revision:i,chatNos:o,isUndelete:s})},e}(_["default"]);e["default"]=z},function(t,e,n){t.exports={"default":n(382),__esModule:!0}},function(t,e,n){n(383),t.exports=n(386).Object.assign},function(t,e,n){var r=n(384);r(r.S+r.F,"Object",{assign:n(399)})},function(t,e,n){var r=n(385),i=n(386),o=n(387),a=n(389),s="prototype",u=function(t,e,n){var c,l,h,f=t&u.F,d=t&u.G,p=t&u.S,v=t&u.P,g=t&u.B,y=t&u.W,m=d?i:i[e]||(i[e]={}),_=m[s],b=d?r:p?r[e]:(r[e]||{})[s];d&&(n=e);for(c in n)l=!f&&b&&void 0!==b[c],l&&c in m||(h=l?b[c]:n[c],m[c]=d&&"function"!=typeof b[c]?n[c]:g&&l?o(h,r):y&&b[c]==h?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[s]=t[s],e}(h):v&&"function"==typeof h?o(Function.call,h):h,v&&((m.virtual||(m.virtual={}))[c]=h,t&u.R&&_&&!_[c]&&a(_,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(388);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(390),i=n(398);t.exports=n(394)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(391),i=n(393),o=n(397),a=Object.defineProperty;e.f=n(394)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(392);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(394)&&!n(395)(function(){return 7!=Object.defineProperty(n(396)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(395)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(392),i=n(385).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(392);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(400),i=n(415),o=n(416),a=n(417),s=n(404),u=Object.assign;t.exports=!u||n(395)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),v=p.length,g=0;v>g;)h.call(d,f=p[g++])&&(n[f]=d[f]);return n}:u},function(t,e,n){var r=n(401),i=n(414);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(402),i=n(403),o=n(407)(!1),a=n(411)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(404),i=n(406);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(405);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(403),i=n(408),o=n(410);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(409),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(409),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(412)("keys"),i=n(413);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(385),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(406);t.exports=function(t){return Object(r(t))}},function(t,e,n){t.exports={"default":n(419),__esModule:!0}},function(t,e,n){n(420),n(421),n(434),n(438),t.exports=n(386).Promise},function(t,e){},function(t,e,n){"use strict";var r=n(422)(!0);n(423)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(409),i=n(406);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(424),i=n(384),o=n(425),a=n(389),s=n(402),u=n(426),c=n(427),l=n(431),h=n(433),f=n(432)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",g="values",y=function(){return this};t.exports=function(t,e,n,m,_,b,E){c(n,e,m);var T,x,S,w=function(t){if(!d&&t in C)return C[t];switch(t){case v:return function(){return new n(this,t)};case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}},R=e+" Iterator",A=_==g,O=!1,C=t.prototype,P=C[f]||C[p]||_&&C[_],M=P||w(_),L=_?A?w("entries"):M:void 0,k="Array"==e?C.entries||P:P;if(k&&(S=h(k.call(new t)),S!==Object.prototype&&(l(S,R,!0),r||s(S,f)||a(S,f,y))),A&&P&&P.name!==g&&(O=!0,M=function(){return P.call(this)}),r&&!E||!d&&!O&&C[f]||a(C,f,M),u[e]=M,u[R]=y,_)if(T={values:A?M:w(g),keys:b?M:w(v),entries:L},E)for(x in T)x in C||o(C,x,T[x]);else i(i.P+i.F*(d||O),e,T);return T}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(389)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(428),i=n(398),o=n(431),a={};n(389)(a,n(432)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(391),i=n(429),o=n(414),a=n(411)("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,e=n(396)("iframe"),r=o.length,i="<",a=">";for(e.style.display="none",n(430).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),c=t.F;r--;)delete c[u][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=r(t),n=new s,s[u]=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(390),i=n(391),o=n(400);t.exports=n(394)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){t.exports=n(385).document&&document.documentElement},function(t,e,n){var r=n(390).f,i=n(402),o=n(432)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(412)("wks"),i=n(413),o=n(385).Symbol,a="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(402),i=n(417),o=n(411)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){n(435);for(var r=n(385),i=n(389),o=n(426),a=n(432)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],h=l&&l.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(436),i=n(437),o=n(426),a=n(403);t.exports=n(423)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r,i,o,a=n(424),s=n(385),u=n(387),c=n(439),l=n(384),h=n(392),f=n(388),d=n(440),p=n(441),v=n(445),g=n(446).set,y=n(448)(),m="Promise",_=s.TypeError,b=s.process,E=s[m],b=s.process,T="process"==c(b),x=function(){},S=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(432)("species")]=function(t){t(x,x)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e}catch(r){}}(),w=function(t,e){return t===e||t===E&&e===o},R=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},A=function(t){return w(E,t)?new O(t):new i(t)},O=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw _("Bad Promise constructor");e=t,n=r}),this.resolve=f(e),this.reject=f(n)},C=function(t){try{t()}catch(e){return{error:e}}},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&k(t),t._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(_("Promise-chain cycle")):(o=R(n))?o.call(n,s,u):s(n)):u(r)}catch(l){u(l)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){g.call(s,function(){var e,n,r,i=t._v;if(L(t)&&(e=C(function(){T?b.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=T||L(t)?2:1),t._a=void 0,e)throw e.error})},L=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!L(e.promise))return!1;return!0},k=function(t){g.call(s,function(){var e;T?b.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},I=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=R(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,u(D,r,1),u(I,r,1))}catch(i){I.call(r,i)}}):(n._v=t,n._s=1,P(n,!1))}catch(r){I.call({_w:n,_d:!1},r)}}};S||(E=function(t){d(this,E,m,"_h"),f(t),r.call(this);try{t(u(D,this,1),u(I,this,1))}catch(e){I.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(449)(E.prototype,{then:function(t,e){var n=A(v(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),O=function(){var t=new r;this.promise=t,this.resolve=u(D,t,1),this.reject=u(I,t,1)}),l(l.G+l.W+l.F*!S,{Promise:E}),n(431)(E,m),n(450)(m),o=n(386)[m],l(l.S+l.F*!S,m,{reject:function(t){var e=A(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(a||!S),m,{resolve:function(t){if(t instanceof E&&w(t.constructor,this))return t;var e=A(this),n=e.resolve;return n(t),e.promise}}),l(l.S+l.F*!(S&&n(451)(function(t){E.all(t)["catch"](x)})),m,{all:function(t){var e=this,n=A(e),r=n.resolve,i=n.reject,o=C(function(){var n=[],o=0,a=1;p(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=A(e),r=n.reject,i=C(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){var r=n(405),i=n(432)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(387),i=n(442),o=n(443),a=n(391),s=n(408),u=n(444),c={},l={},e=t.exports=function(t,e,n,h,f){var d,p,v,g,y=f?function(){return t}:u(t),m=r(n,h,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=s(t.length);d>_;_++)if(g=e?m(a(p=t[_])[0],p[1]):m(t[_]),g===c||g===l)return g}else for(v=y.call(t);!(p=v.next()).done;)if(g=i(v,m,p.value,e),g===c||g===l)return g};e.BREAK=c,e.RETURN=l},function(t,e,n){var r=n(391);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(426),i=n(432)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(439),i=n(432)("iterator"),o=n(426);t.exports=n(386).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(391),i=n(388),o=n(432)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(387),s=n(447),u=n(430),c=n(396),l=n(385),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=0,g={},y="onreadystatechange",m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){m.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete g[t]},"process"==n(405)(h)?r=function(t){h.nextTick(a(m,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r=y in c("script")?function(t){u.appendChild(c("script"))[y]=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:f,clear:d}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(385),i=n(446).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(405)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=l=!l}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(389);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(385),i=n(386),o=n(390),a=n(394),s=n(432)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(432)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){t.exports={"default":n(453),__esModule:!0}},function(t,e,n){n(454),t.exports=n(386).Object.keys},function(t,e,n){var r=n(417),i=n(400);n(455)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(384),i=n(386),o=n(395);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){t.exports={"default":n(457),__esModule:!0}},function(t,e,n){n(434),n(421),t.exports=n(458)},function(t,e,n){var r=n(391),i=n(444);t.exports=n(386).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(461),o=r(i);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(462),o=r(i),a=n(465),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e,n){t.exports={"default":n(463),__esModule:!0}},function(t,e,n){n(421),n(434),t.exports=n(464).f("iterator")},function(t,e,n){e.f=n(432)},function(t,e,n){t.exports={"default":n(466),__esModule:!0}},function(t,e,n){n(467),n(420),n(476),n(477),t.exports=n(386).Symbol},function(t,e,n){"use strict";var r=n(385),i=n(402),o=n(394),a=n(384),s=n(425),u=n(468).KEY,c=n(395),l=n(412),h=n(431),f=n(413),d=n(432),p=n(464),v=n(469),g=n(470),y=n(471),m=n(472),_=n(391),b=n(403),E=n(397),T=n(398),x=n(428),S=n(473),w=n(475),R=n(390),A=n(400),O=w.f,C=R.f,P=S.f,M=r.Symbol,L=r.JSON,k=L&&L.stringify,I="prototype",D=d("_hidden"),F=d("toPrimitive"),N={}.propertyIsEnumerable,U=l("symbol-registry"),j=l("symbols"),B=l("op-symbols"),G=Object[I],H="function"==typeof M,W=r.QObject,z=!W||!W[I]||!W[I].findChild,V=o&&c(function(){return 7!=x(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=O(G,e);r&&delete G[e],C(t,e,n),r&&t!==G&&C(G,e,r)}:C,Y=function(t){var e=j[t]=x(M[I]);return e._k=t,e},X=H&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},K=function(t,e,n){return t===G&&K(B,e,n),_(t),e=E(e,!0),_(n),i(j,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=x(n,{enumerable:T(0,!1)})):(i(t,D)||C(t,D,T(1,{})),t[D][e]=!0),V(t,e,n)):C(t,e,n)},q=function(t,e){_(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},$=function(t,e){return void 0===e?x(t):q(x(t),e)},J=function(t){var e=N.call(this,t=E(t,!0));return!(this===G&&i(j,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(j,t)||i(this,D)&&this[D][t])||e)},Z=function(t,e){if(t=b(t),e=E(e,!0),t!==G||!i(j,e)||i(B,e)){var n=O(t,e);return!n||!i(j,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=P(b(t)),r=[],o=0;n.length>o;)i(j,e=n[o++])||e==D||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===G,r=P(n?B:b(t)),o=[],a=0;r.length>a;)!i(j,e=r[a++])||n&&!i(G,e)||o.push(j[e]);return o};H||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(B,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),V(this,t,T(1,n))};return o&&z&&V(G,t,{configurable:!0,set:e}),Y(t)},s(M[I],"toString",function(){return this._k}),w.f=Z,R.f=K,n(474).f=S.f=Q,n(416).f=J,n(415).f=tt,o&&!n(424)&&s(G,"propertyIsEnumerable",J,!0),p.f=function(t){return Y(d(t))}),a(a.G+a.W+a.F*!H,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var et=A(d.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!H,"Symbol",{"for":function(t){return i(U,t+="")?U[t]:U[t]=M(t)},keyFor:function(t){if(X(t))return g(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!H,"Object",{create:$,defineProperty:K,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),L&&a(a.S+a.F*(!H||c(function(){var t=M();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&m(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,k.apply(L,r)}}}),M[I][F]||n(389)(M[I],F,M[I].valueOf),h(M,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(413)("meta"),i=n(392),o=n(402),a=n(390).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(395)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,r)&&l(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,n){var r=n(385),i=n(386),o=n(424),a=n(464),s=n(390).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(400),i=n(403);t.exports=function(t,e){for(var n,o=i(t),a=r(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},function(t,e,n){var r=n(400),i=n(415),o=n(416);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(405);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(403),i=n(474).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(401),i=n(414).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(416),i=n(398),o=n(403),a=n(397),s=n(402),u=n(393),c=Object.getOwnPropertyDescriptor;e.f=n(394)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){n(469)("asyncIterator")},function(t,e,n){n(469)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(479),o=r(i),a=n(483),s=r(a),u=n(461),c=r(u);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,s["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,n){t.exports={"default":n(480),__esModule:!0}},function(t,e,n){n(481),t.exports=n(386).Object.setPrototypeOf},function(t,e,n){var r=n(384);r(r.S,"Object",{setPrototypeOf:n(482).set})},function(t,e,n){var r=n(392),i=n(391),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(387)(Function.call,n(475).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={"default":n(484),__esModule:!0}},function(t,e,n){n(485);var r=n(386).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(384);r(r.S,"Object",{create:n(428)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(e){var n=e.server,r=e.userId,i=void 0===r?"":r,a=e.isPremium,s=void 0!==a&&a,u=e.protocol,c=void 0===u?t.PROTOCOL.HTTP:u;(0,o["default"])(this,t),this._server=n,this._protocol=c,this._userId=i,this._isPremium=s}return(0,s["default"])(t,null,[{key:"PROTOCOL",get:function(){return{get HTTP(){return"http"},get WEB_SOCKET_PROXY(){return"webSocket proxy"},get WEB_SOCKET(){return"webSocket"}}}}]),(0,s["default"])(t,[{key:"server",set:function(t){this._server=t},get:function(){return this._server}},{key:"protocol",set:function(t){this._protocol=t},get:function(){return this._protocol}},{key:"userId",set:function(t){this._userId=t},get:function(){return this._userId}},{key:"isPremium",set:function(t){this._isPremium=t},get:function(){return this._isPremium}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(488),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(489),__esModule:!0}},function(t,e,n){n(490);var r=n(386).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(384);r(r.S+r.F*!n(394),"Object",{defineProperty:n(390).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(381),o=r(i),a=n(418),s=r(a),u=n(492),c=r(u),l=n(459),h=r(l),f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,h["default"])(this,t),this._fetchers={},this._threadkeyMap=new c["default"],this._waybackkeyMap=new c["default"],this._postkeyMap=new c["default"],this._fetchers=e,this._userkey={userkey:n.defaultUserkey}}return t.prototype.fetchThreadkey=function(t){var e=this,n=t.thread,r=n.id;if(!r)throw new Error("thread id is empty");return this._threadkeyMap.has(r)?this._threadkeyMap.get(r):(this._threadkeyMap.set(r,this._getFetcher("fetchThreadkey")(n)),this._threadkeyMap.get(r)["catch"](function(){e.clearThreadkey({thread:n})}))},t.prototype.fetchUserkey=function(){var t=this;return this._userkey?this._userkey:(this._userkey=this._getFetcher("fetchUserkey")(),this._userkey["catch"](function(){t.clearUserkey()}))},t.prototype.fetchWaybackkey=function(t){var e=this,n=t.thread,r=n.id;if(!r)throw new Error("thread id is empty");return this._waybackkeyMap.has(r)?this._waybackkeyMap.get(r):(this._waybackkeyMap.set(r,this._getFetcher("fetchWaybackkey")(n)),this._waybackkeyMap.get(r)["catch"](function(){e.clearWaybackkey({thread:n})}))},t.prototype.fetchKeysForThread=function(t){var e=t.thread,n=t.userId,r=!n||e.isPrivate||e.whenSec?void 0:this.fetchUserkey(),i=e.isPrivate?this.fetchThreadkey({thread:e}):void 0,a=e.whenSec?this.fetchWaybackkey({thread:e}):void 0;return s["default"].all([r,i,a]).then(function(t){return o["default"].apply(Object,[{}].concat(t))})},t.prototype.fetchPostkey=function(t){var e=this,n=t.thread,r=t.yugi,i=n.id;if(!i)throw new Error("thread id is empty");return this._postkeyMap.has(i)?this._postkeyMap.get(i):(this._postkeyMap.set(i,this._getFetcher("fetchPostkey")(n,r)),this._postkeyMap.get(i)["catch"](function(t){return e.clearPostkey({thread:n}),s["default"].reject(t)}))},t.prototype.fetchUpdatekey=function(t){var e=t.thread,n=e.id;if(!n)throw new Error("thread id is empty");var r=e.ticket;if(!r)throw new Error("ticket is empty");return this._getFetcher("fetchUpdatekey")({thread:e,ticket:r})},t.prototype.fetchDeletekey=function(t){var e=t.thread,n=t.isUndelete,r=void 0!==n&&n,i=t.chatNos,o=void 0===i?[]:i;if(!e.id)throw new Error("thread id is empty");if("undefined"==typeof e.revision)throw new Error("thread revision is empty");var a=e.language;return this._getFetcher("fetchDeletekey")({thread:e,isUndelete:r,language:a,chatNos:o})},t.prototype.clearThreadkey=function(t){var e=t.thread;this._threadkeyMap["delete"](e.id)},t.prototype.clearUserkey=function(){this._userkey=void 0},t.prototype.clearWaybackkey=function(t){var e=t.thread;this._waybackkeyMap["delete"](e.id)},t.prototype.clearPostkey=function(t){var e=t.thread;this._postkeyMap["delete"](e.id)},t.prototype._getFetcher=function(t){if(!this._fetchers.hasOwnProperty(t))throw new Error(t+" is not defined");return this._fetchers[t]},t}();e["default"]=f},function(t,e,n){t.exports={"default":n(493),__esModule:!0}},function(t,e,n){n(420),n(421),n(434),n(494),n(500),t.exports=n(386).Map},function(t,e,n){"use strict";var r=n(495);t.exports=n(496)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(390).f,i=n(428),o=n(449),a=n(387),s=n(440),u=n(406),c=n(441),l=n(423),h=n(437),f=n(450),d=n(394),p=n(468).fastKey,v=d?"_s":"size",g=function(t,e){
var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var h=t(function(t,r){s(t,h,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&c(r,n,t[l],t)});return o(h.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},"delete":function(t){var e=this,n=g(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[v]--}return!!n},forEach:function(t){s(this,h,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!g(this,t)}}),d&&r(h.prototype,"size",{get:function(){return u(this[v])}}),h},def:function(t,e,n){var r,i,o=g(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,n){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?h(0,n.k):"values"==e?h(0,n.v):h(0,[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(385),i=n(384),o=n(468),a=n(395),s=n(389),u=n(449),c=n(441),l=n(440),h=n(392),f=n(431),d=n(390).f,p=n(497)(0),v=n(394);t.exports=function(t,e,n,g,y,m){var _=r[t],b=_,E=y?"set":"add",T=b&&b.prototype,x={};return v&&"function"==typeof b&&(m||T.forEach&&!a(function(){(new b).entries().next()}))?(b=e(function(e,n){l(e,b,t,"_c"),e._c=new _,void 0!=n&&c(n,y,e[E],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in T&&(!m||"clear"!=t)&&s(b.prototype,t,function(n,r){if(l(this,b,t),!e&&m&&!h(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),"size"in T&&d(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(e,t,y,E),u(b.prototype,n),o.NEED=!0),f(b,t),x[t]=b,i(i.G+i.W+i.F,x),m||g.setStrong(b,t,y),b}},function(t,e,n){var r=n(387),i=n(404),o=n(417),a=n(408),s=n(498);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,f=5==t||h,d=e||s;return function(e,s,p){for(var v,g,y=o(e),m=i(y),_=r(s,p,3),b=a(m.length),E=0,T=n?d(e,b):u?d(e,0):void 0;b>E;E++)if((f||E in m)&&(v=m[E],g=_(v,E,y),t))if(n)T[E]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return E;case 2:T.push(v)}else if(l)return!1;return h?-1:c||l?l:T}}},function(t,e,n){var r=n(499);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(392),i=n(472),o=n(432)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){var r=n(384);r(r.P+r.R,"Map",{toJSON:n(501)("Map")})},function(t,e,n){var r=n(439),i=n(502);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(441);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=function(){function t(e){(0,o["default"])(this,t),this._number=e}return t.generateForNicovideo=function(e){var n=e.videoLengthSec,r=e.isNicos,i=void 0!==r&&r,o=-1e3;return n<60?o=-100:n<300?o=-250:n<600&&(o=-500),i&&(o/=2),new t(o)},t.prototype.valueOf=function(){return this._number},t.prototype.toString=function(){return""+this._number},t}();e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(492),o=r(i),a=n(459),s=r(a),u=n(505),c=r(u),l=function(){function t(){(0,s["default"])(this,t),this._threads=new o["default"]}return t.prototype.create=function(t,e){var n=new c["default"](t,e);return this._threads.set(this._getMapKey(e.id,e.fork,e.language,e.whenSec),n),n},t.prototype.get=function(t){var e=t.id,n=t.fork,r=t.language,i=t.whenSec;return this._threads.get(this._getMapKey(e,n,r,i))},t.prototype._getMapKey=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t+":"+e+":"+n+":"+r},t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(381),o=r(i),a=n(492),s=r(a),u=n(459),c=r(u),l=n(487),h=r(l),f=n(460),d=r(f),p=n(478),v=r(p),g=n(356),y=r(g),m=function(t){function e(n,r){var i=r.id,o=r.service,a=r.fork,u=r.language,l=r.leafExpression,h=r.whenSec,f=r.isPrivate,p=r.noLeaf,v=r.withGlobal,g=r.ticket,y=r.revision;(0,c["default"])(this,e);var m=(0,d["default"])(this,t.call(this));return m._leaves=[],m._chatMap=new s["default"],m._chats=[],m._isChatsLatest=!1,m._controlMap=new s["default"],m._controls=[],m._isControlsLatest=!1,m._client=n,m._id=i,m._service=o,m._fork=a,m._language=u,m._leafExpression=l,m._whenSec=h,m._isPrivate=f,m._noLeaf=p,m._withGlobal=v,m._lastRes=0,m._ticket=g,m._revision=y,m}return(0,v["default"])(e,t),e.prototype.clone=function(){var t=new e(this._client,{id:this.id,fork:this.fork,language:this.language,leafExpression:this.leafExpression,whenSec:this.whenSec,isPrivate:this.isPrivate,noLeaf:this.noLeaf,withGlobal:this.withGlobal,ticket:this.ticket,revision:this.revision});return t._chats=this._chats.map(function(e){return(0,o["default"])({},e,{thread:t})}),t.lastRes=this.lastRes,t._leaves=[].concat(this._leaves),t},e.prototype.addChat=function(t){var e=this._mergeNecessaryDefaultValue(t),n=e.no?e.no:e.date+e.date_usec/1e6;this._chatMap.set(n,e),this._isChatsLatest=!1},e.prototype.addControl=function(t){var e=this._mergeNecessaryDefaultValue(t),n=e.no?e.no:e.date+e.date_usec/1e6;this._controlMap.set(n,e),this._isControlsLatest=!1},e.prototype.dispose=function(){this.removeAllListeners()},e.prototype.pushChat=function(t){var e=this._mergeNecessaryDefaultValue(t);this.addChat(e),this.emit("receive:chat",e)},e.prototype.pushControl=function(t){var e=this._mergeNecessaryDefaultValue(t);this.addControl(e),this.emit("receive:control",e)},e.prototype._mergeNecessaryDefaultValue=function(t){var e={thread:"",vpos:0,date:0,date_usec:0};return(0,o["default"])(e,t)},e.prototype.fetch=function(){var t=this;return this._client.fetchThread({thread:this}).then(function(){return t})},e.prototype.fetchLatest=function(){return this._client.fetchThreadLatest({thread:this}).then(function(t){return t[0]})},e.prototype.post=function(t){return this._client.postChat((0,o["default"])({},t,{thread:this}))},e.prototype.update=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._client.updateThread({thread:this,chats:n}).then(function(e){t._chatMap.clear();var r=1;return n.forEach(function(e){t.addChat((0,o["default"])({},e,{no:r++}))}),t._ticket=e.ticket,t._isChatsLatest=!1,e})},e.prototype.unjoin=function(){throw new Error("")},e.prototype.deleteComments=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._client.fetchThread({thread:this}).then(function(){return t._client.deleteComments({thread:t,chatNos:n})}).then(function(e){return n.forEach(function(e){var n=t._chatMap.get(e);n.deleted=1}),e})},e.prototype.undeleteComments=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._client.fetchThread({thread:this}).then(function(){return t._client.undeleteComments({thread:t,chatNos:n})}).then(function(e){return n.forEach(function(e){var n=t._chatMap.get(e);n.deleted=0}),e})},e.prototype.copy=function(){throw new Error("")},(0,h["default"])(e,[{key:"id",get:function(){return this._id}},{key:"fork",get:function(){return this._fork}},{key:"leafExpression",set:function(t){this._leafExpression=t},get:function(){return this._leafExpression}},{key:"whenSec",set:function(t){this._whenSec=t},get:function(){return this._whenSec}},{key:"isPrivate",set:function(t){this._isPrivate=t},get:function(){return this._isPrivate}},{key:"noLeaf",set:function(t){this._noLeaf=t},get:function(){return this._noLeaf}},{key:"withGlobal",get:function(){return this._withGlobal}},{key:"language",get:function(){return this._language}},{key:"viewCounter",set:function(t){this._viewCounter=t},get:function(){return this._viewCounter}},{key:"globalNumRes",set:function(t){this._globalNumRes=t},get:function(){return this._globalNumRes}},{key:"leaves",get:function(){return this._leaves}},{key:"chats",get:function(){if(!this._isChatsLatest){var t=[];this._chatMap.forEach(function(e,n){return t.push([n,e])}),this._chats=t.sort(function(t,e){return t[0]-e[0]}).map(function(t){return t[1]}),this._isChatsLatest=!0}return this._chats}},{key:"controls",get:function(){if(!this._isControlsLatest){var t=[];this._controlMap.forEach(function(e,n){return t.push([n,e])}),this._controls=t.sort(function(t,e){return t[0]-e[0]}).map(function(t){return t[1]}),this._isControlsLatest=!0}return this._controls}},{key:"lastRes",set:function(t){this._lastRes=t},get:function(){return this._lastRes}},{key:"locked",set:function(t){this._locked=t},get:function(){return this._locked}},{key:"revision",set:function(t){this._revision=t},get:function(){return this._revision}},{key:"resOffset",set:function(t){this._resOffset=t},get:function(){return this._resOffset}},{key:"buttonIgnored",set:function(t){this._buttonIgnored=t},get:function(){return this._buttonIgnored}},{key:"clickRevision",set:function(t){this._clickRevision=t},get:function(){return this._clickRevision}},{key:"numClicks",set:function(t){this._numClicks=t},get:function(){return this._numClicks}},{key:"ngResult",set:function(t){this._ngResult=t},get:function(){return this._ngResult}},{key:"ticket",get:function(){return this._ticket},set:function(t){this._ticket=t}},{key:"service",get:function(){return this._service},set:function(t){this._service=t}}]),e}(y["default"]);e["default"]=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(){(0,o["default"])(this,t)}return(0,s["default"])(t,null,[{key:"POST_SUCCESS",get:function(){return 0}},{key:"POST_FAILURE",get:function(){return 1}},{key:"POST_INVALID_THREAD",get:function(){return 2}},{key:"POST_INVALID_TICKET",get:function(){return 3}},{key:"POST_INVALID_POSTKEY",get:function(){return 4}},{key:"POST_LOCKED",get:function(){return 5}},{key:"POST_READONLY",get:function(){return 6}},{key:"POST_NOT_IMPLEMENTED",get:function(){return 7}},{key:"POST_INVALID_184",get:function(){return 8}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(){(0,o["default"])(this,t)}return(0,s["default"])(t,null,[{key:"THREAD_FOUND",get:function(){return 0}},{key:"THREAD_NOT_FOUND",get:function(){return 1}},{key:"THREAD_INVALID",get:function(){return 2}},{key:"THREAD_VERSION",get:function(){return 3}},{key:"THREAD_INVALID_WAYBACKKEY",get:function(){return 4}},{key:"THREAD_TOO_OLD_WAYBACKKEY",get:function(){return 5}},{key:"THREAD_INVALID_ADMINKEY",get:function(){return 6}},{key:"THREAD_TOO_OLD_ADMINKEY",get:function(){return 7}},{key:"THREAD_INVALID_THREADKEY",get:function(){return 8}},{key:"THREAD_TOO_OLD_THREADKEY",get:function(){return 9}},{key:"THREAD_ADMIN_CONFLICT",get:function(){return 10}},{key:"THREAD_LEAF_NOT_ACTIVATED",get:function(){return 11}},{key:"THREAD_LEAF_LOADING",get:function(){return 12}},{key:"THREAD_INVALID_LANGUAGE",get:function(){return 13}},{key:"THREAD_INVALID_USERKEY",get:function(){return 14}},{key:"THREAD_TOO_OLD_USERKEY",get:function(){return 15}},{key:"THREAD_CONFLICT_USERKEY_AND_OTHERKEY",get:function(){return 16}},{key:"THREAD_USER_CONFLICT",get:function(){return 17}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(){(0,o["default"])(this,t)}return(0,s["default"])(t,null,[{key:"DELETE_SUCCESS",get:function(){return 0}},{key:"DELETE_FAILURE",get:function(){return 1}},{key:"DELETE_INVALID_DELETEKEY",get:function(){return 2}},{key:"DELETE_LOCKED",get:function(){return 3}},{key:"DELETE_REVISED",get:function(){return 4}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(){(0,o["default"])(this,t)}return(0,s["default"])(t,null,[{key:"UPDATE_SUCCESS",get:function(){return 0}},{key:"UPDATE_FAILURE",get:function(){return 1}},{key:"UPDATE_LOCKED",get:function(){return 2}},{key:"UPDATE_INVALID_TICKET",get:function(){return 3}},{key:"UPDATE_INVALID_UPDATEKEY",get:function(){return 4}},{key:"UPDATE_INVALID_THREAD",get:function(){return 5}},{key:"UPDATE_COUNT_MISSMATCH",get:function(){return 6}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(456),o=r(i),a=n(459),s=r(a),u=n(487),c=r(u),l=n(460),h=r(l),f=n(478),d=r(f),p=n(511),v=r(p),g=function(t){function e(n){var r=n.thread,i=n.fork,o=n.language,a=n.when,u=n.userId,c=n.resFrom,l=n.numRes,f=n.withGlobal,d=void 0===f?1:f,p=n.scores,v=void 0===p?0:p,g=n.nicoru,y=void 0===g?0:g;(0,s["default"])(this,e);var m=(0,h["default"])(this,t.apply(this,arguments));return m.thread=r,m.fork=i,m.language=o,m.when=a,m.userId=u,m.resFrom=c,m.numRes=l,m.withGlobal=d,m.scores=v,m.nicoru=y,m}return(0,d["default"])(e,t),e.prototype.extractResultCode=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,o["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.thread)return i.thread.resultcode}},(0,c["default"])(e,[{key:"thread",set:function(t){this._thread=t},get:function(){return this._thread}},{key:"fork",set:function(t){this._fork=t},get:function(){return this._fork}},{key:"language",set:function(t){this._language=t},get:function(){return this._language}},{key:"userId",set:function(t){this._userId=t},get:function(){return this._userId}},{key:"when",set:function(t){this._when=t},get:function(){return this._when}},{key:"force184",set:function(t){this._force184=t},get:function(){return this._force184}},{key:"userkey",set:function(t){this._userkey=t},get:function(){return this._userkey}},{key:"threadkey",set:function(t){this._threadkey=t},get:function(){return this._threadkey}},{key:"waybackkey",set:function(t){this._waybackkey=t},get:function(){return this._waybackkey}},{key:"updatekey",get:function(){return this._updatekey},set:function(t){this._updatekey=t}},{key:"deletekey",get:function(){return this._deletekey},set:function(t){this._deletekey=t}},{key:"revision",get:function(){return this._revision},set:function(t){this._revision=t}}]),e}(v["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=function(){function t(e){var n=e.$meta;(0,o["default"])(this,t),this.needsResponse=!0,this._response=[],this._id=t.currentId++%t.ID_MAX_VALUE,this.$meta=n}return t.prototype.toRequestFormat=function(){throw new Error("not implemented.")},t.prototype.addResponse=function(t){this._response.push(t)},t.prototype.clearResponse=function(){this._response=[]},(0,s["default"])(t,[{key:"id",get:function(){return this._id}},{key:"response",get:function(){return this._response}},{key:"$meta",set:function(t){this._$meta=t},get:function(){return this._$meta}}]),t}();u.ID_MAX_VALUE=1e13,u.currentId=0,e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(456),o=r(i),a=n(459),s=r(a),u=n(487),c=r(u),l=n(460),h=r(l),f=n(478),d=r(f),p=n(511),v=r(p),g=function(t){function e(n){var r=n.vpos,i=n.mail,o=n.name,a=void 0===o?"":o,u=n.content;(0,s["default"])(this,e);var c=(0,h["default"])(this,t.apply(this,arguments));return c.needsResponse=!1,c.vpos=r,c.mail=i,c.name=a,c.content=u,c}return(0,d["default"])(e,t),e.prototype.extractStatus=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,o["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.status}},e.prototype.extractNo=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,o["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.no}},e.prototype.toRequestFormat=function(){return{add_thread_item:{vpos:this.vpos,mail:this.mail,name:this.name,content:this.content}}},(0,c["default"])(e,[{key:"thread",set:function(t){this._thread=t},get:function(){return this._thread}},{key:"vpos",set:function(t){this._vpos=t},get:function(){return this._vpos}},{key:"mail",set:function(t){this._mail=t},get:function(){return this._mail}},{key:"name",set:function(t){this._name=t},get:function(){return this._name}},{key:"content",set:function(t){this._content=t},get:function(){return this._content}}]),e}(v["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(456),o=r(i),a=n(459),s=r(a),u=n(487),c=r(u),l=n(460),h=r(l),f=n(478),d=r(f),p=n(510),v=(r(p),n(511)),g=r(v),y=function(t){function e(n){var r=n.thread,i=n.userId,o=n.count,a=n.updatekey,u=n.ticket,c=n.premium;(0,s["default"])(this,e);var l=(0,h["default"])(this,t.apply(this,arguments));return l.thread=r,l.userId=i,l.count=o,l.ticket=u,l.updatekey=a,l.premium=c,l}return(0,d["default"])(e,t),e.prototype.toRequestFormat=function(){return{update_thread:{thread:this.thread,user_id:this.userId,count:this.count,ticket:this.ticket,updatekey:this.updatekey,premium:this.premium}}},e.prototype.extractStatus=function(){var t=this.extractResponse();return t?t.status:void 0},e.prototype.extractResponse=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,o["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.update_thread)return i.update_thread}},(0,c["default"])(e,[{key:"thread",get:function(){return this._thread},set:function(t){this._thread=t}},{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"count",get:function(){return this._count},set:function(t){this._count=t}},{key:"ticket",get:function(){return this._ticket},set:function(t){this._ticket=t}},{key:"updatekey",get:function(){return this._updatekey},set:function(t){this._updatekey=t}},{key:"premium",get:function(){return this._premium},set:function(t){this._premium=t}}]),e}(g["default"]);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(456),o=r(i),a=n(459),s=r(a),u=n(487),c=r(u),l=n(460),h=r(l),f=n(478),d=r(f),p=n(511),v=r(p),g=function(t){function e(n){var r=n.thread,i=n.userId,o=n.deletekey,a=n.revision,u=n.chatNos,c=n.isUndelete,l=void 0!==c&&c;(0,s["default"])(this,e);var f=(0,h["default"])(this,t.apply(this,arguments));return f.thread=r,f.userId=i,f.deletekey=o,f.revision=a,f.chatNos=u,f.isUndelete=l,f}return(0,d["default"])(e,t),e.prototype.extractStatus=function(){var t=this.extractResponse();return t?t.status:void 0},e.prototype.extractResponse=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,o["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.delete_comments)return i.delete_comments}},e.prototype.toRequestFormat=function(){return{delete_comments:{thread:this.thread,user_id:this.userId,deletekey:this.deletekey,revision:this.revision,undelete:this.isUndelete?"1":void 0,content:this.chatNos.join(",")}}},(0,c["default"])(e,[{key:"thread",set:function(t){this._thread=t},get:function(){return this._thread}},{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"deletekey",get:function(){return this._deletekey},set:function(t){this._deletekey=t}},{key:"chatNos",get:function(){return this._chatNos||[]},set:function(t){this._chatNos=t}},{key:"revision",get:function(){return this._revision},set:function(t){this._revision=t}},{key:"isUndelete",get:function(){return this._isUndelete},set:function(t){this._isUndelete=t}}]),e}(v["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.ThreadLeavesPacket=e.ThreadPacket=e.ChatPacket=e.PingPacket=e.WebSocketConnection=e.HTTPConnection=void 0;var i=n(516),o=r(i),a=n(527),s=r(a),u=n(526),c=r(u),l=n(528),h=r(l),f=n(529),d=r(f),p=n(530),v=r(p);e.HTTPConnection=o["default"],e.WebSocketConnection=s["default"],e.PingPacket=c["default"],e.ChatPacket=h["default"],e.ThreadPacket=d["default"],e.ThreadLeavesPacket=v["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(456),o=r(i),a=n(459),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(517),d=r(f),p=n(518),v=r(p),g=n(525),y=r(g),m=function(t){function e(n){(0,s["default"])(this,e);var r=(0,c["default"])(this,t.call(this));return r._httpAPIURL=encodeURI(n).replace("/api/","/api.json/"),r}return(0,h["default"])(e,t),e.prototype.send=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=new v["default"](e);return fetch(this._httpAPIURL,{method:"post",body:r.toString()}).then(function(t){return t.json()}).then(function(t){for(var e=t,n=Array.isArray(e),i=0,e=n?e:(0,o["default"])(e);;){var a;if(n){if(i>=e.length)break;a=e[i++]}else{if(i=e.next(),i.done)break;a=i.value}var s=a;if(y["default"].isRequestIdentifier(s)){var u=y["default"].parse(s),c=u.type;u.id;switch(c){case y["default"].REQUEST.START:continue;case y["default"].REQUEST.FINISH:continue}}r.addResponse(s)}r.resolve()})["catch"](function(t){r.reject(t)}),r.promise},e}(d["default"]);e["default"]=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(418),o=r(i),a=n(459),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(356),d=r(f),p=function(t){function e(){return(0,s["default"])(this,e),(0,c["default"])(this,t.apply(this,arguments))}return(0,h["default"])(e,t),e.prototype.send=function(){return o["default"].reject(function(){return new Error("not implemented.")})},e.prototype.disconnect=function(){},e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(519),o=r(i),a=n(523),s=r(a),u=n(418),c=r(u),l=n(492),h=r(l),f=n(459),d=r(f),p=n(487),v=r(p),g=n(511),y=r(g),m=n(525),_=r(m),b=function(){function t(e){var n=this;(0,d["default"])(this,t),this._id=t.currentId++%y["default"].ID_MAX_VALUE,this._packetMap=new h["default"](e.map(function(t){return[t.id,t]})),this._promise=new c["default"](function(t,e){n._resolve=t,n._reject=e})}return t.prototype.addResponse=function(t){if(_["default"].isPacketIdentifier(t)){var e=_["default"].parse(t),n=e.type,r=e.id;switch(n){case _["default"].PACKET.START:return void(this._receivingPacket=this._packetMap.get(r));case _["default"].PACKET.FINISH:return void(this._receivingPacket=null)}}if(this._receivingPacket)return void this._receivingPacket.addResponse(t);throw new Error("can not resolve packet identifier: "+(0,s["default"])(t)+".")},t.prototype.toString=function(){var t=[new _["default"](_["default"].REQUEST.START,this.id)];return this._packetMap.forEach(function(e){e.needsResponse?(t.push(new _["default"](_["default"].PACKET.START,e.id)),t.push(e),t.push(new _["default"](_["default"].PACKET.FINISH,e.id))):t.push(e)}),t.push(new _["default"](_["default"].REQUEST.FINISH,this.id)),(0,s["default"])(t.map(function(t){return t.toRequestFormat()}))},t.prototype.resolve=function(){this._resolve((0,o["default"])(this._packetMap.values()))},t.prototype.reject=function(t){this._reject(t)},(0,v["default"])(t,[{key:"id",get:function(){return this._id}},{key:"promise",get:function(){return this._promise}}]),t}();b.currentId=0,e["default"]=b},function(t,e,n){t.exports={"default":n(520),__esModule:!0}},function(t,e,n){n(421),n(521),t.exports=n(386).Array.from},function(t,e,n){"use strict";var r=n(387),i=n(384),o=n(417),a=n(442),s=n(443),u=n(408),c=n(522),l=n(444);i(i.S+i.F*!n(451)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=0,m=l(f);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&s(m))for(e=u(f.length),n=new d(e);e>y;y++)c(n,y,g?v(f[y],y):f[y]);else for(h=m.call(f),n=new d;!(i=h.next()).done;y++)c(n,y,g?a(h,v,[i.value,y],!0):i.value);return n.length=y,n}})},function(t,e,n){"use strict";var r=n(390),i=n(398);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){t.exports={"default":n(524),__esModule:!0}},function(t,e,n){var r=n(386),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(526),d=r(f),p=function(t){function e(n,r){(0,o["default"])(this,e);var i=(0,c["default"])(this,t.call(this,{content:e._makeSeparateContent(n,r)}));return i._type=n,i._targetId=r,i}return(0,h["default"])(e,t),e.parse=function(t){var e=t.ping.content.split(":"),n=e[0],r=e[1];return{type:n,id:parseInt(r,10)}},e.isRequestIdentifier=function(t){if(!t.ping||!t.ping.content)return!1;var n=t.ping.content.split(":")[0];return[e.REQUEST.START,e.REQUEST.FINISH].includes(n)},e.isPacketIdentifier=function(t){if(!t.ping||!t.ping.content)return!1;var n=t.ping.content.split(":")[0];return[e.PACKET.START,e.PACKET.FINISH].includes(n)},e._makeSeparateContent=function(t,e){return t+":"+e},(0,s["default"])(e,[{key:"type",get:function(){return this._type}},{key:"targetId",get:function(){return this._targetId}}]),e}(d["default"]);p.REQUEST={START:"rs",FINISH:"rf"},p.PACKET={START:"ps",FINISH:"pf"},e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(511),d=r(f),p=function(t){function e(n){var r=n.content;(0,o["default"])(this,e);var i=(0,c["default"])(this,t.apply(this,arguments));return i.content=r,i}return(0,h["default"])(e,t),e.prototype.toRequestFormat=function(){return{ping:{content:this.content}}},(0,s["default"])(e,[{key:"content",set:function(t){this._content=t},get:function(){return this._content}}]),e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(452),o=r(i),a=n(456),s=r(a),u=n(418),c=r(u),l=n(459),h=r(l),f=n(460),d=r(f),p=n(478),v=r(p),g=n(517),y=r(g),m=n(518),_=r(m),b=n(525),E=r(b),T=function(t){function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,h["default"])(this,e);var o=(0,d["default"])(this,t.call(this));return o._ready=null,o._socket=null,o._onOpen=function(){return o.emit("open")},o._onMessage=function(t){return t&&t.data&&o._onData(t.data)},o._onError=function(t){return o.emit("error",t)},o._onClose=function(t){o.disconnect(),o.emit("close",t)},o._requests={},o._pingTimerId=NaN,o._url=n,o._subProtocols=r,o.isKeepAliveEnabled=void 0!==i.keepAlive?i.keepAlive:e.KEEP_ALIVE.ENABLED,o.keepAliveIntervalMS=void 0!==i.intervalMS?i.intervalMS:e.KEEP_ALIVE.INTERVAL_MS,o}return(0,v["default"])(e,t),e.prototype.send=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=new _["default"](n);return this._requests[i.id]=i,this._connect().then(function(){t._socket.send(i.toString())}).then(function(){return i.promise})},e.prototype.disconnect=function(){this._socket&&(this._socket.removeEventListener("open",this._onOpen),this._socket.removeEventListener("message",this._onMessage),this._socket.removeEventListener("error",this._onError),this._socket.removeEventListener("close",this._onClose),this._socket.close(),this._ready=null,this._socket=null),this._stopKeepAlive()},e.prototype._connect=function(){var t=this;return this._ready||(this._ready=new c["default"](function(e,n){t._socket=new WebSocket(t._url,t._subProtocols),t._socket.addEventListener("open",t._onOpen),t._socket.addEventListener("message",t._onMessage),t._socket.addEventListener("error",t._onError),t._socket.addEventListener("close",t._onClose),t.isKeepAliveEnabled&&t._startKeepAlive();var r=function i(r){t.removeListener("open",i),t.removeListener("error",i),t._socket.readyState===WebSocket.OPEN?e(r):n(r)};t.on("open",r),t.on("error",r)})),this._ready},e.prototype._startKeepAlive=function(){var t=this;this._pingTimerId=setInterval(function(){t._socket.send("")},this.keepAliveIntervalMS)},e.prototype._stopKeepAlive=function(){clearInterval(this._pingTimerId),this._pingTimerId=NaN},e.prototype._onData=function(t){for(var e=this._toArrayWrapedJson(t),n=[],r=e,i=Array.isArray(r),a=0,r=i?r:(0,s["default"])(r);;){var u;if(i){if(a>=r.length)break;u=r[a++]}else{if(a=r.next(),a.done)break;u=a.value}var c=u;switch((0,o["default"])(c)[0]){case"ping":if(E["default"].isRequestIdentifier(c)){var l=E["default"].parse(c),h=l.type,f=l.id;switch(h){case E["default"].REQUEST.START:this._receivingRequest=this._requests[f];continue;case E["default"].REQUEST.FINISH:this._receivingRequest.resolve(),this._receivingRequest=null;continue}}}this._receivingRequest?this._receivingRequest.addResponse(c):n.push(c)}n.length>0&&this.emit("packets",n)},e.prototype._toArrayWrapedJson=function(t){try{var e=JSON.parse(t);return Array.isArray(e)?e:[e]}catch(n){throw new Error(n)}},e}(y["default"]);T.SUB_PROTOCOL={JSON:"msg.nicovideo.jp#json"},T.KEEP_ALIVE={ENABLED:!0,INTERVAL_MS:6e4},e["default"]=T},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(381),o=r(i),a=n(456),s=r(a),u=n(459),c=r(u),l=n(487),h=r(l),f=n(460),d=r(f),p=n(478),v=r(p),g=n(511),y=r(g),m=function(t){function e(n){var r=n.thread,i=n.ticket,o=n.vpos,a=n.userId,s=n.premium,u=n.content,l=n.postkeyResponse,h=n.mail,f=n.sage,p=n.yugi,v=n.staff,g=n.sex,y=n.immunity,m=n.locale,_=n.count,b=n.origin;(0,c["default"])(this,e);var E=(0,d["default"])(this,t.apply(this,arguments));return E.thread=r,E.ticket=i,E.vpos=o,E.userId=a,E.premium=s,E.content=u,E._postkeyResponse=l,E.mail=h,E.sage=f,E._yugi=p,E.staff=v,E.sex=g,E.immunity=y,E.locale=m,E.count=_,E.origin=b,E}return(0,v["default"])(e,t),e.prototype.setPostkeyResponse=function(t){this._postkeyResponse=t},e.prototype.extractStatus=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,s["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.status}},e.prototype.extractNo=function(){for(var t=this.response,e=Array.isArray(t),n=0,t=e?t:(0,s["default"])(t);;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var i=r;if(i.chat_result)return i.chat_result.no}},e.prototype.toRequestFormat=function(){return{chat:(0,o["default"])({thread:this.thread,vpos:this.vpos,mail:this.mail,ticket:this.ticket,user_id:this.userId,premium:this.premium,content:this.content,sage:this.sage,staff:this.staff,sex:this.sex,immunity:this.immunity,locale:this.locale,count:this.count,origin:this.origin},this._postkeyResponse)}},(0,h["default"])(e,[{key:"thread",set:function(t){this._thread=t},get:function(){return this._thread}},{key:"vpos",set:function(t){this._vpos=t},get:function(){return this._vpos}},{key:"mail",set:function(t){
this._mail=t},get:function(){return this._mail}},{key:"ticket",set:function(t){this._ticket=t},get:function(){return this._ticket}},{key:"userId",set:function(t){this._userId=t},get:function(){return this._userId}},{key:"content",set:function(t){this._content=t},get:function(){return this._content}},{key:"premium",set:function(t){this._premium=t},get:function(){return this._premium}},{key:"sage",set:function(t){this._sage=t},get:function(){return this._sage}},{key:"yugi",get:function(){return this._yugi}},{key:"staff",set:function(t){this._staff=t},get:function(){return this._staff}},{key:"sex",set:function(t){this._sex=t},get:function(){return this._sex}},{key:"immunity",set:function(t){this._immunity=t},get:function(){return this._immunity}},{key:"locale",set:function(t){this._locale=t},get:function(){return this._locale}},{key:"count",set:function(t){this._count=t},get:function(){return this._count}},{key:"origin",set:function(t){this._origin=t},get:function(){return this._origin}}]),e}(y["default"]);e["default"]=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(510),d=r(f),p=function(t){function e(n){var r=n.version,i=(n.thread,n.fork,n.language,n.when,n.userId,n.resFrom,n.numRes,n.service);n.withGlobal,n.scores,n.nicoru;(0,o["default"])(this,e);var a=(0,c["default"])(this,t.apply(this,arguments));return a.version=r,a.service=i,a}return(0,h["default"])(e,t),e.prototype.toRequestFormat=function(){return{thread:{thread:this.thread,version:this.version,fork:this.fork,language:this.language,when:this.when,user_id:this.userId,res_from:this.resFrom,num_res:this.numRes,force_184:this.force184,with_global:this.withGlobal,scores:this.scores,nicoru:this.nicoru,userkey:this.userkey,threadkey:this.threadkey,waybackkey:this.waybackkey,service:this.service}}},(0,s["default"])(e,[{key:"version",set:function(t){this._version=t},get:function(){return this._version}},{key:"resFrom",set:function(t){this._resFrom=t},get:function(){return this._resFrom}},{key:"numRes",set:function(t){this._numRes=t},get:function(){return this._numRes}},{key:"withGlobal",set:function(t){this._withGlobal=t},get:function(){return this._withGlobal}},{key:"service",set:function(t){this._service=t},get:function(){return this._service}}]),e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=n(487),s=r(a),u=n(460),c=r(u),l=n(478),h=r(l),f=n(510),d=r(f),p=function(t){function e(n){var r=(n.thread,n.content);n.fork,n.language,n.when,n.userId,n.scores,n.nicoru;(0,o["default"])(this,e);var i=(0,c["default"])(this,t.apply(this,arguments));return i.content=r,i}return(0,h["default"])(e,t),e.prototype.toRequestFormat=function(){return{thread_leaves:{thread:this.thread,fork:this.fork,language:this.language,when:this.when,user_id:this.userId,content:this.content,scores:this.scores,nicoru:this.nicoru,force_184:this.force184,userkey:this.userkey,threadkey:this.threadkey,waybackkey:this.waybackkey}}},(0,s["default"])(e,[{key:"content",set:function(t){this._content=t},get:function(){return this._content}}]),e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(459),o=r(i),a=function(){function t(e){var n=e.videoLengthSec,r=e.isUnion;(0,o["default"])(this,t),this._leafNum=Math.ceil(n/60),this._commentNumPerLeaf=t.DEFAULT_COMMENT_NUM_PER_LEAF,n>t.BORDER_TIME_FOR_CALCULATION&&(this._commentNumPerLeaf=Math.ceil(t.BORDER_TIME_FOR_CALCULATION*t.DEFAULT_COMMENT_NUM_PER_LEAF/n)),this._leafUnionString=r?","+t.getUnion(n):""}return t.generateForNicovideo=function(e){var n=e.videoLengthSec,r=e.isUnion,i=void 0===r||r;return new t({videoLengthSec:n,isUnion:i})},t.getUnion=function(t){return t<60?100:t<300?250:t<600?500:1e3},t.prototype.toString=function(){return"0-"+this._leafNum+":"+this._commentNumPerLeaf+this._leafUnionString},t}();a.BORDER_TIME_FOR_CALCULATION=43200,a.DEFAULT_COMMENT_NUM_PER_LEAF=100,e["default"]=a},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i,o=r(n(533)),a=r(n(541)),s=r(n(542));!function(t){function e(t){o["default"].postTimeoutMs=t}function n(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var i=Date.now(),u=a["default"].buildDownloadSession(e);return new o["default"](t).sessionPost(u,r).then(function(e){var r=new s["default"](t,e,n,i);return r.startHeartbeat(),r})}function r(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={});var i=Date.now(),u=a["default"].buildStoryboardSession(e);return new o["default"](t).sessionPost(u,r).then(function(e){return new s["default"](t,e,n,i)})}t.setPostTimeoutMs=e,t.createSession=n,t.createStoryboardSession=r}(i||(i={})),e["default"]=i;var u=n(543);e.Session=u["default"];var c=n(544);e.SessionErrorStatus=c["default"];var l=n(534);e.ConnectionTimeoutError=l["default"]},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(534)),a=i(n(535)),s={Accept:"application/json","Content-Type":"application/json"},u=function(){function t(t){this.apiUrl=t}return t.prototype.onFulfilled=function(t){return t.json().then(function(e){if(t.ok&&e.meta){var n=e.meta.status;if(n>=200&&n<300)return e.data.session}return"undefined"==typeof e.meta?Promise.reject(o["default"]):Promise.reject(e.meta)},function(){return Promise.reject(o["default"])})},t.prototype.sessionPost=function(e,n){return void 0===n&&(n={}),Promise.race([window.fetch(this.appendQuery(this.apiUrl,Object.assign(n,{_format:"json"})),{method:"post",headers:s,credentials:"include",body:JSON.stringify({session:e})}).then(this.onFulfilled),new Promise(function(e,n){window.setTimeout(function(){n(o["default"])},t.postTimeoutMs)})])},t.prototype.sessionPut=function(t,e){return void 0===e&&(e={}),window.fetch(this.appendQuery(this.apiUrl+"/"+t.id,Object.assign(e,{_format:"json",_method:"PUT"})),{method:"post",headers:s,credentials:"include",body:JSON.stringify({session:t})}).then(this.onFulfilled)},t.prototype.sessionDelete=function(t,e){return void 0===e&&(e={}),window.fetch(this.appendQuery(this.apiUrl+"/"+t.id,Object.assign(e,{_format:"json",_method:"DELETE"})),{method:"post",headers:s,credentials:"include",body:JSON.stringify({session:t})}).then(function(t){return t.json().then(function(e){return t.ok&&e.meta&&e.meta.status>=200&&e.meta.status<300?e.meta:Promise.reject(e.meta||{})})})},t.prototype.appendQuery=function(t,e){void 0===e&&(e={});var n=a.parse(t,!0);return n.search=void 0,n.query=Object.assign({},n.query,e),a.format(n)},t.postTimeoutMs=5e3,t}();e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new Error("ConnectionTimeoutError");e["default"]=n},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function h(t){return null==t}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var f=n(536);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),m=["%","/","?",";","#"].concat(y),_=["/","?","#"],b=255,E=/^[a-z0-9A-Z_-]{0,63}$/,T=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},R=n(538);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=d.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(a||i&&!w[i])){for(var s=-1,c=0;c<_.length;c++){var l=r.indexOf(_[c]);l!==-1&&(s===-1||l<s)&&(s=l)}var h,p;p=s===-1?r.lastIndexOf("@"):r.lastIndexOf("@",s),p!==-1&&(h=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(h)),s=-1;for(var c=0;c<m.length;c++){var l=r.indexOf(m[c]);l!==-1&&(s===-1||l<s)&&(s=l)}s===-1&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),c=0,A=g.length;c<A;c++){var O=g[c];if(O&&!O.match(E)){for(var C="",P=0,M=O.length;P<M;P++)C+=O.charCodeAt(P)>127?"x":O[P];if(!C.match(E)){var L=g.slice(0,c),k=g.slice(c+1),I=O.match(T);I&&(L.push(I[1]),k.unshift(I[2])),k.length&&(r="/"+k.join(".")+r),this.hostname=L.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var D=this.hostname.split("."),F=[],c=0;c<D.length;++c){var N=D[c];F.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(N):N)}this.hostname=F.join(".")}var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!x[o])for(var c=0,A=y.length;c<A;c++){var B=y[c],G=encodeURIComponent(B);G===B&&(G=escape(B)),r=r.split(B).join(G)}var H=r.indexOf("#");H!==-1&&(this.hash=r.substr(H),r=r.slice(0,H));var W=r.indexOf("?");if(W!==-1?(this.search=r.substr(W),this.query=r.substr(W+1),e&&(this.query=R.parse(this.query)),r=r.slice(0,W)):e&&(this.search="",this.query={}),r&&(this.pathname=r),w[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",N=this.search||"";this.path=U+N}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=R.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||w[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!w[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||s||n.host&&t.pathname,d=f,p=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!w[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),f=f&&(""===i[0]||""===p[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(v){n.hostname=n.host=p.shift();var g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=p.slice(-1)[0],m=(n.host||t.host)&&("."===y||".."===y)||""===y,_=0,b=p.length;b>=0;b--)y=p[b],"."==y?p.splice(b,1):".."===y?(p.splice(b,1),_++):_&&(p.splice(b,1),_--);if(!f&&!d)for(;_--;_)p.unshift("..");!f||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),m&&"/"!==p.join("/").substr(-1)&&p.push("");var E=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=E?"":p.length?p.shift():"";var g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&p.length,f&&!E&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,i){!function(o){function a(t){throw RangeError(L[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var i=t.split("."),o=s(i,e).join(".");return r+o}function c(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:E}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?I(t/w):t>>1,t+=I(t/e);t>k*x>>1;r+=E)t=I(t/k);return I(r+(k+1)*t/(t+S))}function p(t){var e,n,r,i,o,s,u,c,f,p,v=[],g=t.length,y=0,m=A,_=R;for(n=t.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&a("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=y,s=1,u=E;i>=g&&a("invalid-input"),c=h(t.charCodeAt(i++)),(c>=E||c>I((b-y)/s))&&a("overflow"),y+=c*s,f=u<=_?T:u>=_+x?x:u-_,!(c<f);u+=E)p=E-f,s>I(b/p)&&a("overflow"),s*=p;e=v.length+1,_=d(y-o,e,0==o),I(y/e)>b-m&&a("overflow"),m+=I(y/e),y%=e,v.splice(y++,0,m)}return l(v)}function v(t){var e,n,r,i,o,s,u,l,h,p,v,g,y,m,_,S=[];for(t=c(t),g=t.length,e=A,n=0,o=R,s=0;s<g;++s)v=t[s],v<128&&S.push(D(v));for(r=i=S.length,i&&S.push(O);r<g;){for(u=b,s=0;s<g;++s)v=t[s],v>=e&&v<u&&(u=v);for(y=r+1,u-e>I((b-n)/y)&&a("overflow"),n+=(u-e)*y,e=u,s=0;s<g;++s)if(v=t[s],v<e&&++n>b&&a("overflow"),v==e){for(l=n,h=E;p=h<=o?T:h>=o+x?x:h-o,!(l<p);h+=E)_=l-p,m=E-p,S.push(D(f(p+_%m,0))),l=I(_/m);S.push(D(f(l,0))),o=d(n,y,r==i),n=0,++r}++n,++e}return S.join("")}function g(t){return u(t,function(t){return C.test(t)?p(t.slice(4).toLowerCase()):t})}function y(t){return u(t,function(t){return P.test(t)?"xn--"+v(t):t})}var m=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);m.global!==m&&m.window!==m&&m.self!==m||(o=m);var _,b=2147483647,E=36,T=1,x=26,S=38,w=700,R=72,A=128,O="-",C=/^xn--/,P=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=E-T,I=Math.floor,D=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:l},decode:p,encode:v,toASCII:y,toUnicode:g},r=function(){return _}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(537)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";e.decode=e.parse=n(539),e.encode=e.stringify=n(540)},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,h,f,d,p=t[c].replace(a,"%20"),v=p.indexOf(r);v>=0?(l=p.substr(0,v),h=p.substr(v+1)):(l=p,h=""),f=decodeURIComponent(l),d=decodeURIComponent(h),n(o,f)?Array.isArray(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o}},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[i]))}).join(e):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(t)):""}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){function e(t){return{recipe_id:t.recipe_id,content_id:t.content_id,content_type:"movie",content_src_id_sets:[{content_src_ids:n(t)}],timing_constraint:"unlimited",keep_method:{heartbeat:{lifetime:t.heartbeat_lifetime}},protocol:{name:t.protocol,parameters:r(t)},content_uri:"",session_operation_auth:{session_operation_auth_by_signature:{token:t.token,signature:t.signature}},content_auth:{auth_type:t.auth_type,max_content_count:t.max_content_count,content_key_timeout:t.content_key_timeout,service_id:"nicovideo",service_user_id:t.service_user_id},client_info:{player_id:t.player_id},priority:t.priority}}function n(t){function e(t,e){return{src_id_to_mux:{video_src_ids:t.concat(),audio_src_ids:e.concat()}}}return t.http_parameters&&t.http_parameters.use_hls_abr?t.videos.reduce(function(n,r,i,o){return n.concat(e(o.slice(-(o.length-i)),t.audios))},[]):[e(t.videos,t.audios)]}function r(t){var e=!!t.http_parameters&&t.http_parameters.use_hls,n=!!t.http_parameters&&!!t.http_parameters.encryption,r=Object.assign({},{use_well_known_port:t.use_well_known_port?"yes":"no",use_ssl:t.use_ssl?"yes":"no",transfer_preset:t.transfer_preset||""},e?t.http_parameters.hls_parameters:{},n?{encryption:t.http_parameters.encryption}:{});return{http_parameters:{parameters:e?{hls_parameters:r}:{http_output_download_parameters:r}}}}function i(t){return{recipe_id:t.recipe_id,content_id:t.content_id,content_type:"video",content_src_id_sets:[{content_src_ids:t.videos}],timing_constraint:"unlimited",keep_method:{heartbeat:{lifetime:t.heartbeat_lifetime}},protocol:{name:"http",parameters:{http_parameters:{parameters:{storyboard_download_parameters:{use_well_known_port:t.use_well_known_port?"yes":"no",use_ssl:t.use_ssl?"yes":"no"}}}}},content_uri:"",session_operation_auth:{session_operation_auth_by_signature:{token:t.token,signature:t.signature}},content_auth:{auth_type:t.auth_type,max_content_count:t.max_content_count,content_key_timeout:t.content_key_timeout,service_id:"nicovideo",service_user_id:t.service_user_id},client_info:{player_id:t.player_id},priority:t.priority}}t.buildDownloadSession=e,t.buildStoryboardSession=i}(n||(n={})),e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(533)),o=n(356),a=function(){function t(t,e,n,r){this.apiUrl=t,this.sessionObject=e,this.sessionPostedTime=r,this.heartbeatTimer=null,this.isRetryRequired=function(t,e){return e<2},this.heartbeatRequest=null,this.eventEmitter=new o.EventEmitter,this.api=new i["default"](t),this.heartbeatTimer=null,n.forceHeartbeatInterval?this.heartbeatInterval=n.forceHeartbeatInterval:this.heartbeatInterval=Math.round(e.keep_method.heartbeat.lifetime/3),n.isRetryRequired&&(this.isRetryRequired=n.isRetryRequired);var a=e.session_operation_auth.session_operation_auth_by_signature.expire_time;this.expireTimeForClientClock=this.sessionPostedTime-this.sessionObject.created_time+a}return t.prototype.event=function(t){var e=this;return t?{on:function(n){return e.eventEmitter.on(t,n),e},once:function(n){return e.eventEmitter.once(t,n),e},off:function(n){return e.eventEmitter.removeListener(t,n),e},offAll:function(){return e.eventEmitter.removeAllListeners(t),e},emit:function(n){return e.eventEmitter.emit(t,n),e}}:{offAll:function(){return e.eventEmitter.removeAllListeners(),e}}},t.prototype.heartbeatFailed=function(t,e){return this.isRetryRequired(t,e)===!0?(e++,void this.startHeartbeat(e)):(this.stopHeartbeatAndDeleteSession(),void this.event("heartbeatFailed").emit(t))},t.prototype.isolatedHeartbeat=function(t){return void 0===t&&(t={}),this.heartbeat(t)},t.prototype.heartbeat=function(t){var e=this;return void 0===t&&(t={}),this.heartbeatRequest||(this.heartbeatRequest=this.api.sessionPut(this.sessionObject,t).then(function(t){e.heartbeatRequest=null,e.sessionObject=t,null!==e.heartbeatTimer&&e.startHeartbeat()})["catch"](function(t){return e.heartbeatRequest=null,Promise.reject(t)})),this.heartbeatRequest},t.prototype.startHeartbeat=function(t,e){var n=this;void 0===t&&(t=0),void 0===e&&(e=this.heartbeatInterval),this.stopHeartbeat(),this.heartbeatTimer=setTimeout(function(){return n.heartbeat().then(function(){return n.event("heartbeatSucceeded").emit(void 0)})["catch"](function(e){return n.heartbeatFailed(e,t)})},e)},t.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},t.prototype.restartHeartbeat=function(){this.heartbeatTimer||this.startHeartbeat(0,0)},t.prototype.stopHeartbeatAndDeleteSession=function(){this.stopHeartbeat(),this.api.sessionDelete(this.sessionObject)["catch"](function(){})},t.prototype.ready=function(t){return void 0===t&&(t=3e4),this.sessionObject.content_uri?Promise.resolve():(this.stopHeartbeatAndDeleteSession(),Promise.reject(new Error("content_uri is empty.")))},t.prototype.deleteSession=function(t){return void 0===t&&(t={}),this.stopHeartbeat(),this.api.sessionDelete(this.sessionObject,t).then(function(t){return Promise.resolve()})["catch"](function(t){return Promise.reject(t)})},t.prototype.getSessionObject=function(){return this.sessionObject},t.prototype.extendTimeUntilExpiration=function(t,e){this.sessionObject.session_operation_auth.session_operation_auth_by_signature.signature=t,this.sessionObject.session_operation_auth.session_operation_auth_by_signature.token=e,this.startHeartbeat(0,0)},t.prototype.getTimeUntilExpiration=function(){return this.expireTimeForClientClock-Date.now()},t}();e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){}(n||(n={})),e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={INVALID_PARAM:400,INVALID_REQUEST:403,SESSION_NOT_FOUND:404,MAINTENANCE:503,INTERNAL_ERROR:500};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&(t.startsWith("@")||t.startsWith(""))?g[t.substring(1)]||d.Type.UNKNOWN:d.Type.NONE}function i(t){var e=v.byFirstSpace(t.content),n=e[0],i=e[1];switch(r(n)){case d.Type.REPLACE:return o(t,v.bySpace(i,!0),v.bySpace(t.mail));case d.Type.DEFAULT:return a(t,v.bySpace(t.mail));case d.Type.REVERSE:return s(t,v.bySpace(i,!0),v.bySpace(t.mail));case d.Type.JUMP:return u(t,v.bySpace(i,!0),v.bySpace(t.mail));case d.Type.FORBID_SEEK:return c(t,v.bySpace(t.mail));case d.Type.FORBID_COMMENT:return l(t,v.bySpace(t.mail));case d.Type.PIZZA:return{type:d.Type.PIZZA};case d.Type.UNKNOWN:return{type:d.Type.UNKNOWN};case d.Type.NONE:return{type:d.Type.NONE}}}function o(t,e,n){var r,i=e[0],o=e[1],a=e[2],s=e[3],u=e[4];return r=y[s]?y[s]:""===s?[d.TargetThread.NON_OWNER,d.TargetThread.OWNER]:[d.TargetThread.NON_OWNER],Object.assign({type:d.Type.REPLACE,src:i,dest:o,replaceAll:""===a,targetThreads:r,perfectMatching:""===u},f(t,n))}function a(t,e){return Object.assign({type:d.Type.DEFAULT,sage:e.indexOf("sage")>=0},f(t,e,1/0))}function s(t,e,n){return Object.assign({type:d.Type.REVERSE,targetThreads:y[e[0]]||[d.TargetThread.NON_OWNER,d.TargetThread.OWNER]},h(t,n))}function u(t,e,n){var r=e[0],i=e[1];return Object.assign({type:d.Type.JUMP,target:r,message:i},h(t,n,1/0))}function c(t,e){return Object.assign({type:d.Type.FORBID_SEEK},h(t,e))}function l(t,e){return Object.assign({type:d.Type.FORBID_COMMENT},h(t,e))}function h(t,e,n){void 0===n&&(n=m);for(var r=n,i=10*t.vpos,o=0,a=e;o<a.length;o++){var s=a[o],u=p["default"].extractAtNumber(s);if(null!==u){r=u;break}}return{startMs:i,endMs:i+r}}function f(t,e,n){void 0===n&&(n=m);var r,i,o,a,s,u=10*t.vpos;return e.forEach(function(e){if(!r&&p["default"].isPositionCommand(e)&&(r=e),!i&&p["default"].isSizeCommand(e)&&(i=e),o||(0===(1&t.premium)?p["default"].isColorNameCommand(e)&&(o=e):(p["default"].isColorNameCommand(e)||p["default"].isPremiumColorNameCommand(e)||p["default"].isColorCodeCommand(e))&&(o=e)),!a&&p["default"].isFontCommand(e)&&(a=e),"undefined"==typeof s){var n=p["default"].extractAtNumber(e);null!==n&&(s=n)}}),{unixTimestamp:t.date,startMs:u,endMs:u+("undefined"==typeof s?n:s),position:r,size:i,color:o,font:a}}Object.defineProperty(e,"__esModule",{value:!0});var d,p=n(546),v=n(547);!function(t){function e(t){return r(v.bySpace(t.content)[0])}function n(t){return Array.isArray(t)?t.map(i):i(t)}t.typeOf=e,t.parse=n;var o;!function(t){t.NONE="none",t.UNKNOWN="unknown",t.PIZZA="pizza",t.DEFAULT="default",t.REPLACE="replace",t.REVERSE="reverse",t.JUMP="jump",t.FORBID_SEEK="forbidSeek",t.FORBID_COMMENT="forbidComment"}(o=t.Type||(t.Type={}));var a;!function(t){t.NON_OWNER="nonOwner",t.OWNER="owner"}(a=t.TargetThread||(t.TargetThread={}))}(d||(d={})),e["default"]=d;var g={"":d.Type.PIZZA,"":d.Type.DEFAULT,"":d.Type.REPLACE,"":d.Type.REVERSE,"":d.Type.JUMP,"":d.Type.FORBID_SEEK,"":d.Type.FORBID_COMMENT},y={get (){return[d.TargetThread.NON_OWNER,d.TargetThread.OWNER]},get (){return[d.TargetThread.NON_OWNER]},get (){return[d.TargetThread.OWNER]}},m=3e4},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.parsedOriginalChat=e,this._borderLineColor="",this._params={},this._content=e.content,this._vposMs=10*this.vpos}return r(t,[{key:"reset",value:function(){this._content=this.parsedOriginalChat.content,this._params={}}},{key:"addParam",value:function(t,e){this._params[t]=e}},{key:"getParam",value:function(t){return this._params[t]}},{key:"existCommand",value:function(t){return!!t&&this.commands.indexOf(t.toLowerCase())>=0}},{key:"isMatchedUser",value:function(t){return this.userId&&this.userId===t}},{key:"setBorderLine",value:function(e){t.isColorCodeCommand(e)?this._borderLineColor=e:this._borderLineColor=""}},{key:"originalContent",get:function(){return this.parsedOriginalChat.content||""}},{key:"content",get:function(){return this._content||""},set:function(t){this._content=t}},{key:"thread",get:function(){return this.parsedOriginalChat.thread}},{key:"vpos",get:function(){return this.parsedOriginalChat.vpos}},{key:"vposMs",get:function(){return this._vposMs}},{key:"mail",get:function(){return this.parsedOriginalChat.mail||[]}},{key:"position",get:function(){return this.parsedOriginalChat.position||""}},{key:"size",get:function(){return this.parsedOriginalChat.size||""}},{key:"colorName",get:function(){return this.parsedOriginalChat.colorName||""}},{key:"colorCode",get:function(){return this.parsedOriginalChat.colorCode||""}},{key:"color",get:function(){return this.parsedOriginalChat.color||""}},{key:"font",get:function(){return this.parsedOriginalChat.font||""}},{key:"atNumber",get:function(){return this.parsedOriginalChat.atNumber}},{key:"commands",get:function(){return this.parsedOriginalChat.commands||[]}},{key:"deleted",get:function(){return!!this.parsedOriginalChat.deletedStatus}},{key:"deletedStatus",get:function(){return this.parsedOriginalChat.deletedStatus}},{key:"userId",get:function(){return this.parsedOriginalChat.userId||""}},{key:"no",get:function(){return this.parsedOriginalChat.no},set:function(t){this.parsedOriginalChat.no=t}},{key:"date",get:function(){return this.parsedOriginalChat.date}},{key:"isPremium",get:function(){return 0!==(1&this.parsedOriginalChat.premium)}},{key:"premium",get:function(){return this.parsedOriginalChat.premium}},{key:"anonymous",get:function(){return this.parsedOriginalChat.anonymous}},{key:"device",get:function(){return this.parsedOriginalChat.device||""}},{key:"score",get:function(){return this.parsedOriginalChat.score}},{key:"borderLineColor",get:function(){return this._borderLineColor}},{key:"fork",get:function(){return void 0===this.parsedOriginalChat.fork?0:this.parsedOriginalChat.fork}}]),t}();!function(t){function e(e){return t.POSITIONS_ARRAY.indexOf(e)>=0}function n(e){return t.SIZES_ARRAY.indexOf(e)>=0}function r(e){return t.COLORS_ARRAY.indexOf(e)>=0}function i(e){return t.PREMIUM_COLORS_ARRAY.indexOf(e)>=0}function o(t){return/^#([\da-fA-F]{6})$/.test(t)}function a(e){return t.COLORS[e]||t.PREMIUM_COLORS[e]||o(e)&&e||t.DEFAULT_COLOR}function s(e){return t.FONTS_ARRAY.indexOf(e)>=0}function u(e){var n=(e||"").match(new RegExp("(?:^|\\s)("+t.AT_NUMBER_REG_EXP+")(?:\\s|$)"));return n&&n[1]?1e3*Number(n[1].replace("@","")):null}t.POSITIONS=Object.defineProperties({},{ue:{get:function(){return"ue"},configurable:!0,enumerable:!0},naka:{get:function(){return"naka"},configurable:!0,enumerable:!0},shita:{get:function(){return"shita"},configurable:!0,enumerable:!0}}),t.DEFAULT_POSITION=t.POSITIONS.naka,t.SIZES=Object.defineProperties({},{big:{get:function(){return"big"},configurable:!0,enumerable:!0},medium:{get:function(){return"medium"},configurable:!0,enumerable:!0},small:{get:function(){return"small"},configurable:!0,enumerable:!0}}),t.DEFAULT_SIZE=t.SIZES.medium,t.COLORS=Object.defineProperties({},{white:{get:function(){return"#ffffff"},configurable:!0,enumerable:!0},red:{get:function(){return"#ff0000"},configurable:!0,enumerable:!0},pink:{get:function(){return"#ff8080"},configurable:!0,enumerable:!0},orange:{get:function(){return"#ffc000"},configurable:!0,enumerable:!0},yellow:{get:function(){return"#ffff00"},configurable:!0,enumerable:!0},green:{get:function(){return"#00ff00"},configurable:!0,enumerable:!0},cyan:{get:function(){return"#00ffff"},configurable:!0,enumerable:!0},blue:{get:function(){return"#0000ff"},configurable:!0,enumerable:!0},purple:{get:function(){return"#c000ff"},configurable:!0,enumerable:!0},black:{get:function(){return"#000000"},configurable:!0,enumerable:!0}}),t.PREMIUM_COLORS=Object.defineProperties({},{white2:{get:function(){return"#cccc99"},configurable:!0,enumerable:!0},niconicowhite:{get:function(){return"#cccc99"},configurable:!0,enumerable:!0},red2:{get:function(){return"#cc0033"},configurable:!0,enumerable:!0},truered:{get:function(){return"#cc0033"},configurable:!0,enumerable:!0},orange2:{get:function(){return"#ff6600"},configurable:!0,enumerable:!0},passionorange:{get:function(){return"#ff6600"},configurable:!0,enumerable:!0},yellow2:{get:function(){return"#999900"},configurable:!0,enumerable:!0},madyellow:{get:function(){return"#999900"},configurable:!0,enumerable:!0},green2:{get:function(){return"#00cc66"},configurable:!0,enumerable:!0},elementalgreen:{get:function(){return"#00cc66"},configurable:!0,enumerable:!0},blue2:{get:function(){return"#3399ff"},configurable:!0,enumerable:!0},marineblue:{get:function(){return"#3399ff"},configurable:!0,enumerable:!0},purple2:{get:function(){return"#6633cc"},configurable:!0,enumerable:!0},nobleviolet:{get:function(){return"#6633cc"},configurable:!0,enumerable:!0},pink2:{get:function(){return"#ff33cc"},configurable:!0,enumerable:!0},cyan2:{get:function(){return"#00cccc"},configurable:!0,enumerable:!0},black2:{get:function(){return"#666666"},configurable:!0,enumerable:!0}}),t.DEFAULT_COLOR=t.COLORS.white,t.FONTS=Object.defineProperties({},{defont:{get:function(){return"defont"},configurable:!0,enumerable:!0},gothic:{get:function(){return"gothic"},configurable:!0,enumerable:!0},mincho:{get:function(){return"mincho"},configurable:!0,enumerable:!0}}),t.DEFAULT_FONT=t.FONTS.defont,t.isPositionCommand=e,t.isSizeCommand=n,t.isColorNameCommand=r,t.isPremiumColorNameCommand=i,t.isColorCodeCommand=o,t.resolveToColorCode=a,t.isFontCommand=s,t.AT_NUMBER_REG_EXP="@\\d+(?:\\.\\d+)?",t.extractAtNumber=u,t.POSITIONS_ARRAY=Object.keys(t.POSITIONS).map(function(e){return t.POSITIONS[e]}),t.SIZES_ARRAY=Object.keys(t.SIZES).map(function(e){return t.SIZES[e]}),t.COLORS_ARRAY=Object.keys(t.COLORS),t.PREMIUM_COLORS_ARRAY=Object.keys(t.PREMIUM_COLORS),t.FONTS_ARRAY=Object.keys(t.FONTS).map(function(e){return t.FONTS[e]})}(i||(i={})),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i},function(t,e){"use strict";function n(t,e){if(void 0===e&&(e=!1),!t)return[];if(!e)return t.trim().split(/\s+/);for(var n=[];t;){var r=i(t,e),o=r[0],a=r[1];n.push(o),t=a}return n}function r(t,e){return void 0===e&&(e=!1),"string"==typeof t?i(t,e):[]}function i(t,e){if(t=t.trim(),e){var n=-1,r="";if(t.startsWith("'")||t.startsWith('"')){var i=t[0];n=t.indexOf(i,1),n>=0&&(r=t.replace(/\\(.)/g,function(e,r,o){return o>n?e:(r===i&&(n=t.indexOf(i,n+1)),a[r]||r)}))}else t.startsWith("")&&(n=t.indexOf("",1),r=t);if(n>=0){var s=t.substring(n+1).match(o);return[r.substring(1,r.length-(t.length-n)),s?s[2]:""]}}var u=t.match(o);return u?[u[1],u[2]]:[t]}Object.defineProperty(e,"__esModule",{value:!0}),e.bySpace=n;var o=/^([^\s]*)\s+((.|[\r\n])*)$/,a={n:"\n",r:"\r",t:"\t"};e.byFirstSpace=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.Flapi=void 0;var i=n(549),o=r(i);e.Flapi=o["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(551),s=r(a),u=function(){function t(e){(0,o["default"])(this,t),e=e||{};var n=e.baseURL||"http://flapi.nicovideo.jp/",r=!!e.noCredentials;this._accessor=new s["default"](n,r),this.configurengclient=this._requireAPI("configurengclient"),this.getpostkey=this._requireAPI("getpostkey"),this.getrelation=this._requireAPI("getrelation"),this.getthreadkey=this._requireAPI("getthreadkey"),this.getuserkey=this._requireAPI("getuserkey"),this.getwaybackkey=this._requireAPI("getwaybackkey"),this.getupdatekey=this._requireAPI("getupdatekey"),this.getdeletekey=this._requireAPI("getdeletekey")}return t.prototype._requireAPI=function(t){var e=n(565)("./"+t+"-api");return new e(this._accessor)},t}();t.exports=u},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(552),o=r(i),a=n(550),s=r(a),u=n(538),c=r(u),l=n(553),h=r(l),f=n(563),d=r(f),p=n(564),v=r(p),g=function(){function t(e,n){(0,s["default"])(this,t),this._JsonResponseParser=new h["default"],this._queryResponseParser=new d["default"],this._xmlResponseParser=new v["default"],this._baseURL="/"===e.substr(-1)?e:e+"/",this._noCredentials=n}return t.prototype.request=function(e,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=this._baseURL+"api/"+e,u={method:n,credentials:this._noCredentials?"omit":"include"};if((0,o["default"])(a).length>0)switch(n){case t.METHOD.GET:s+="?"+c["default"].stringify(a);break;case t.METHOD.POST:default:u.body=c["default"].stringify(a),u.headers={"Content-Type":"application/x-www-form-urlencoded"}}return fetch(s,u).then(function(e){switch(r){case t.FORMAT.QUERY:return e.text().then(function(t){return i._queryResponseParser.parse(t)});case t.FORMAT.XML:return e.text().then(function(t){return i._xmlResponseParser.parse(t)});case t.FORMAT.JSON:return e.text().then(function(t){return i._JsonResponseParser.parse(t)});default:throw new Error("unknown format")}})},t}();g.METHOD={GET:"get",POST:"post"},g.FORMAT={JSON:"json",QUERY:"query",XML:"xml"},e["default"]=g},function(t,e,n){t.exports={"default":n(453),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(561),h=r(l),f=n(562),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.parse=function(t){var e=JSON.parse(t);if(!e)throw new d["default"]("parse failed",t);if(e.hasOwnProperty("status")&&"ok"!==e.status)throw new d["default"]("failed to response status ("+e.status+")",e);return JSON.parse(t)},e}(h["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(555),o=r(i);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(556),o=r(i),a=n(557),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e,n){t.exports={"default":n(463),__esModule:!0}},function(t,e,n){t.exports={"default":n(466),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(559),o=r(i),a=n(560),s=r(a),u=n(555),c=r(u);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,c["default"])(e)));t.prototype=(0,s["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,n){t.exports={"default":n(480),__esModule:!0}},function(t,e,n){t.exports={"default":n(484),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(550),o=r(i),a=function(){function t(){(0,o["default"])(this,t)}return t.prototype.parse=function(t){throw new Error("not implemented.")},t}();e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=function(t){function e(n,r){(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n));return i.response=r,i}return(0,c["default"])(e,t),e}(Error);e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(538),h=r(l),f=n(561),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.parse=function(t){return h["default"].parse(t)},e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(561),h=r(l),f=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.parse=function(t){throw new Error("")},e}(h["default"]);e["default"]=f},function(t,e,n){function r(t){return n(i(t))}function i(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={"./abstract-api":566,"./configurengclient-api":569,"./getdeletekey-api":570,"./getpostkey-api":571,"./getrelation-api":572,"./getthreadkey-api":574,"./getupdatekey-api":575,"./getuserkey-api":576,"./getwaybackkey-api":577};r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=565},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(567),s=r(a),u=function(){function t(e){(0,o["default"])(this,t),this._accessor=e}return(0,s["default"])(t,[{key:"accessor",get:function(){return this._accessor}}]),t}();t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(568),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o["default"])(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(489),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.get=function(){var t={mode:"get",_format:"json",_t:Date.now()};return this.accessor.request("configurengclient",d["default"].METHOD.GET,d["default"].FORMAT.JSON,t).then(this._format)},e.prototype.add=function(t){var n=t.type,r=t.source,i=t.token,o=t.languageId,a=void 0===o?e.LANGUAGE_ID.JA_JP:o,s=t.threadId,u=void 0===s?null:s,c=t.comments,l=void 0===c?[]:c,h={mode:"add",type:n,source:r,token:i,_format:"json"};return u&&l&&(h.language_id=a,h.thread_id=u,h.comments=l.join(",")),this.accessor.request("configurengclient",d["default"].METHOD.POST,d["default"].FORMAT.JSON,h).then(this._format)},e.prototype["delete"]=function(t){var e=t.type,n=t.source,r=t.token,i={mode:"delete",type:e,source:n,token:r,_format:"json"};return this.accessor.request("configurengclient",d["default"].METHOD.POST,d["default"].FORMAT.JSON,i).then(this._format)},e.prototype._format=function(t){return t.revision&&"string"==typeof t.revision&&(t.revision=parseInt(t.revision,10)),t},e}(h["default"]);p.TYPE={ID:"id",WORD:"word",COMMAND:"command"},p.LANGUAGE_ID={JA_JP:0,EN_US:1,ZH_TW:2},t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){var e=t.thread_id,n=t.res_no,r=t.language_id,i=void 0===r?null:r,o={thread_id:e,res_no:n.join(",")};return!!i&&(o.language_id=i),this.accessor.request("getdeletekey",d["default"].METHOD.POST,d["default"].FORMAT.QUERY,o).then(function(t){if(!t.hasOwnProperty("deletekey"))throw new Error("deletekey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){var e=t.thread,n=t.block_no,r=t.yugi,i=void 0===r?0:r,o=t.playkey,a=void 0===o?"":o,s=t.device,u=void 0===s?0:s,c=t.device_sub,l=void 0===c?0:c,h=t.version,f=void 0===h?0:h,p=t.version_sub,v=void 0===p?0:p,g=t.lang,y=void 0===g?null:g,m=t.with_payment_type,_=void 0!==m&&m,b={thread:e,block_no:n};return!!i&&(b.yugi=i),!!a.length&&(b.playkey=a),!!u&&(b.device=u),!!l&&(b.device_sub=l),!!f&&(b.version=f),!!v&&(b.version_sub=v),!!y&&(b.lang=y),_&&(b.with_payment_type="1"),this.accessor.request("getpostkey",d["default"].METHOD.GET,d["default"].FORMAT.QUERY,b).then(function(t){if(!t.hasOwnProperty("postkey"))throw new Error("postkey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=n(573),v=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){var e=t.video,n=t.target,r=void 0===n?null:n,i=t.page,o=void 0===i?null:i,a=t.sort,s=void 0===a?null:a,u=t.order,c=void 0===u?null:u,l={video:e,res_type:"json"};return!!r&&(l.target=r),!!o&&(l.page=o),!!s&&(l.sort=s),!!c&&(l.order=c),this.accessor.request("getrelation",d["default"].METHOD.GET,d["default"].FORMAT.JSON,l).then(function(t){return t.video&&t.video.forEach(function(t){return t.title=(0,p.htmlspecialchars_decode)(t.title)}),t})},e}(h["default"]);t.exports=v},function(t,e){"use strict";function n(t){return null===t?"":String(t).replace(/&quot;/g,'"').replace(/&#0*39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}e.__esModule=!0,e.htmlspecialchars_decode=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){return this.accessor.request("getthreadkey",d["default"].METHOD.GET,d["default"].FORMAT.QUERY,t).then(function(t){if(!t.hasOwnProperty("threadkey"))throw new Error("threadkey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){return this.accessor.request("getupdatekey",d["default"].METHOD.GET,d["default"].FORMAT.QUERY,t).then(function(t){if(!t.hasOwnProperty("updatekey"))throw new Error("updatekey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(){return this.accessor.request("getuserkey",d["default"].METHOD.GET,d["default"].FORMAT.QUERY).then(function(t){if(!t.hasOwnProperty("userkey"))throw new Error("userkey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(550),o=r(i),a=n(554),s=r(a),u=n(558),c=r(u),l=n(566),h=r(l),f=n(551),d=r(f),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,c["default"])(e,t),e.prototype.invoke=function(t){return this.accessor.request("getwaybackkey",d["default"].METHOD.GET,d["default"].FORMAT.QUERY,t).then(function(t){if(!t.hasOwnProperty("waybackkey"))throw new Error("waybackkey is not found in response");return t})},e}(h["default"]);t.exports=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(579);e.PlayerContainer=r.PlayerContainer},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(580),o=n(584),a=r(n(581)),s=a["default"]("player-container"),u=function(){},c=function(){function t(t){var e=this;this.currentIndex=-1,this._children=[],this._volume=1,this._muted=!1,this._autoplay=!1,this._loop=!1,this._pausedReal=!0,this._pendingCurrentTime=-1,this._isChangingPlayer=!1,this._eventDispatcher=new i.PlayerContainerEventDispatcher(this._children),Array.isArray(t)&&(t.forEach(function(t){return e.appendChild(t);
}),this._initEventListeners())}return t.prototype.dispose=function(){this._children.forEach(function(t){t.dispose()}),this.currentIndex=-1},Object.defineProperty(t.prototype,"hasChildren",{get:function(){return this._children.length>0},enumerable:!0,configurable:!0}),t.prototype.appendChild=function(t){this._clearEventListeners(),t.element().style.display="none",this._children.push(t),1===this._children.length&&(this.currentIndex=0,this._children[0].element().style.display="block"),this._accustomChildren(),s("Player appended",this),this._initEventListeners()},t.prototype.removeChild=function(t){var e=this;this._clearEventListeners(),this._children.forEach(function(n,r){n===t&&(n.element().style.display="none",e._children.splice(r,1))}),this.hasChildren?this._children.length-1<this.currentIndex&&(this.currentIndex=this._children.length-1,this._children[this.currentIndex].element().style.display="block"):this.currentIndex=-1,s("Player removed",this),this._initEventListeners()},t.prototype.replaceChild=function(t,e){var n=this;this._clearEventListeners(),this._children.forEach(function(r,i){r===t&&(r.element().style.display="none",n._children[i]=e)}),this.hasChildren&&(this._children[this.currentIndex].element().style.display="block"),this._accustomChildren(),s("Player replaced",this),this._initEventListeners()},t.prototype.looseBuffered=function(){return this.buffered(!0)},t.prototype.event=function(t){return this._eventDispatcher.event(t)},t.prototype.element=function(){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this._children[this.currentIndex].element()},t.prototype.width=function(){return this.hasChildren?this._children[this.currentIndex].width():0},t.prototype.height=function(){return this.hasChildren?this._children[this.currentIndex].height():0},t.prototype.videoWidth=function(){return this.hasChildren?this._children[this.currentIndex].videoWidth():0},t.prototype.videoHeight=function(){return this.hasChildren?this._children[this.currentIndex].videoHeight():0},t.prototype.poster=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this._children[this.currentIndex].poster(t),this}return this.hasChildren?this._children[this.currentIndex].poster():""},t.prototype.error=function(){return this.hasChildren?this._children[this.currentIndex].error():null},t.prototype.src=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this._children[this.currentIndex].src(t),this}return this.hasChildren?this._children[this.currentIndex].src():""},t.prototype.currentSrc=function(){return this.hasChildren?this._children[this.currentIndex].currentSrc():""},t.prototype.canPlayType=function(t){return this.hasChildren?this._children[this.currentIndex].canPlayType(t):""},t.prototype.readyState=function(){return this.hasChildren?this._children[this.currentIndex].readyState():0},t.prototype.seeking=function(){return!!this.hasChildren&&this._children[this.currentIndex].seeking()},t.prototype.currentTime=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");if(!this._isSeekable())return this._pendingCurrentTime=t,this;s("Set the currentTime to "+t);for(var e=t,n=0;n<this._children.length-1;++n){if(e<this._children[n].duration())return this._switchPlayer(n,e),this;e-=this._children[n].duration()}return this._switchPlayer(this._children.length-1,e),this}if(!this.hasChildren)return 0;if(this._pendingCurrentTime!==-1)return this._pendingCurrentTime;for(var r=0,n=0;n<this.currentIndex;++n)r+=this._children[n].duration();return r+=this._children[this.currentIndex].currentTime()},t.prototype.duration=function(){if(!this.hasChildren)return NaN;for(var t=0,e=0;e<this._children.length;++e)t+=this._children[e].duration();return t},t.prototype.paused=function(){return this._pausedReal||this.ended()},t.prototype.defaultPlaybackRate=function(){return this.hasChildren?this._children[this.currentIndex].defaultPlaybackRate():1},t.prototype.playbackRate=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");this._children.forEach(function(e){e.playbackRate(t)})}return this.hasChildren?this._children[this.currentIndex].playbackRate():1},t.prototype.ended=function(){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this.currentIndex!==-1&&this.currentIndex===this._children.length-1&&this._children[this._children.length-1].ended()},t.prototype.autoplay=function(t){return"undefined"!=typeof t&&(this._autoplay=t),this._autoplay},t.prototype.loop=function(t){return"undefined"!=typeof t&&(this._loop=t),this._loop},t.prototype.volume=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");this._volume=t,this._applyVolumeToChildren()}return this._volume},t.prototype.muted=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this._muted=t,this._applyMutedToChildren(),this}return this._muted},t.prototype.preload=function(t){if("undefined"!=typeof t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");this._children.forEach(function(e){e.preload(t)})}return this.hasChildren?this._children[this.currentIndex].preload():"auto"},t.prototype.buffered=function(t){void 0===t&&(t=!1);for(var e=new o.AppendableTimeRanges,n=0,r=0;r<this._children.length;++r)e.append(this._children[r].buffered(),n,t),n+=this._children[r].duration();return e},t.prototype.play=function(){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return this.ended()&&this.currentTime(0),s("Called _children["+this.currentIndex+"].play()"),this._pausedReal=!1,this._children[this.currentIndex].play()},t.prototype.pause=function(){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return s("Called _children["+this.currentIndex+"].pause()"),this._pausedReal=!0,this._children[this.currentIndex].pause()},t.prototype.load=function(){this._children.forEach(function(t){t.load()})},t.prototype.mirror=function(t){if(!this.hasChildren)throw new Error("PlayerContainer has no player.");return"undefined"!=typeof t?void this._children.forEach(function(e){e.mirror(t)}):this._children[this.currentIndex].mirror()},t.prototype._onLoadstart=function(t,e){var n=this;return function(t){n.currentIndex=0,n._displayOnlyChildAt(0),0===e&&n._eventDispatcher.event("loadstart").emit(t)}},t.prototype._onSuspend=function(t,e){var n=this;return function(t){n._eventDispatcher.event("suspend").emit(t)}},t.prototype._onAbort=function(t,e){var n=this;return function(t){n._eventDispatcher.event("abort").emit(t)}},t.prototype._onError=function(t,e){var n=this;return function(t){n._eventDispatcher.event("error").emit(t)}},t.prototype._onEmptied=function(t,e){var n=this;return function(t){n._eventDispatcher.event("emptied").emit(t)}},t.prototype._onStalled=function(t,e){var n=this;return function(t){n._eventDispatcher.event("stalled").emit(t)}},t.prototype._onLoadedmetadata=function(t,e){var n=this;return function(e){var r=t.some(function(t){return t.readyState()<HTMLMediaElement.HAVE_METADATA});r||n._eventDispatcher.event("loadedmetadata").emit(e),n._pendingCurrentTime!==-1&&n._isSeekable()&&(n.currentTime(n._pendingCurrentTime),n._pendingCurrentTime=-1)}},t.prototype._onLoadeddata=function(t,e){var n=this;return function(e){var r=t.some(function(t){return t.readyState()<HTMLMediaElement.HAVE_CURRENT_DATA});r||n._eventDispatcher.event("loadeddata").emit(e)}},t.prototype._onCanplay=function(t,e){var n=this;return function(t){n.currentIndex===e&&n._eventDispatcher.event("canplay").emit(t)}},t.prototype._onCanplaythrough=function(t,e){var n=this;return function(t){n.currentIndex===e&&n._eventDispatcher.event("canplaythrough").emit(t)}},t.prototype._onPlaying=function(t,e){var n=this;return function(t){n._eventDispatcher.event("playing").emit(t)}},t.prototype._onWaiting=function(t,e){var n=this;return function(t){n._eventDispatcher.event("waiting").emit(t)}},t.prototype._onSeeking=function(t,e){var n=this;return function(t){n._eventDispatcher.event("seeking").emit(t)}},t.prototype._onSeeked=function(t,e){var n=this;return function(t){n.currentIndex===e&&n._eventDispatcher.event("seeked").emit(t)}},t.prototype._onEnded=function(t,e){var n=this;return e<t.length-1?function(r){var i=!1,o={prevented:!1,player:t[e],preventSwitchingPlayer:function(){i=!0}};return n._eventDispatcher.event("partialended").emit(o),i?void(n._pausedReal=!0):void n._switchPlayer(e+1,0)}:e===t.length-1?function(t){n._pausedReal=!0,n._eventDispatcher.event("ended").emit(t)}:u},t.prototype._onDurationchange=function(t,e){var n=this;return function(t){n._eventDispatcher.event("durationchange").emit(t)}},t.prototype._onTimeupdate=function(t,e){var n=this;return function(t){n._eventDispatcher.event("timeupdate").emit(t)}},t.prototype._onProgress=function(t,e){var n=this;return function(t){n._eventDispatcher.event("progress").emit(t)}},t.prototype._onPlay=function(t,e){var n=this;return function(r){return n._isChangingPlayer?(n._isChangingPlayer=!1,n.currentIndex=e,void n._eventDispatcher.event("playerchanged").emit(t[e])):void n._eventDispatcher.event("play").emit(r)}},t.prototype._onPause=function(t,e){var n=this;return e<t.length-1?function(t){!n._isChangingPlayer&&n.paused()&&n._eventDispatcher.event("pause").emit(t)}:function(t){!n._isChangingPlayer&&n.paused()&&n._eventDispatcher.event("pause").emit(t)}},t.prototype._onVolumechange=function(t,e){var n=this;return 0===e?function(t){n._eventDispatcher.event("volumechange").emit(t)}:u},t.prototype._clearEventListeners=function(){this._eventDispatcher.clearEvents()},t.prototype._initEventListeners=function(){this._eventDispatcher.initEvents({loadstart:this._onLoadstart.bind(this),error:this._onError.bind(this),emptied:this._onEmptied.bind(this),stalled:this._onStalled.bind(this),loadedmetadata:this._onLoadedmetadata.bind(this),loadeddata:this._onLoadeddata.bind(this),canplay:this._onCanplay.bind(this),canplaythrough:this._onCanplaythrough.bind(this),seeked:this._onSeeked.bind(this),ended:this._onEnded.bind(this),play:this._onPlay.bind(this),pause:this._onPause.bind(this),suspend:this._onSuspend.bind(this),abort:this._onAbort.bind(this),playing:this._onPlaying.bind(this),waiting:this._onWaiting.bind(this),seeking:this._onSeeking.bind(this),durationchange:this._onDurationchange.bind(this),timeupdate:this._onTimeupdate.bind(this),progress:this._onProgress.bind(this),volumechange:this._onVolumechange.bind(this)})},t.prototype._switchPlayer=function(t,e){return this.currentIndex===t?void this._children[this.currentIndex].currentTime(e):(s("Switch player from children["+this.currentIndex+"] to children["+t+"](currentTime="+e+")."),this._eventDispatcher.event("beforeplayerchange").emit(this._children[t]),this._isChangingPlayer=!0,this._children[this.currentIndex].pause(),this._displayOnlyChildAt(t),void(this.paused()?(this._children[t].currentTime(e),this._isChangingPlayer=!1,this.currentIndex=t,this._eventDispatcher.event("playerchanged").emit(this._children[t])):(this._children[t].currentTime(e),this._children[t].play())))},t.prototype._displayOnlyChildAt=function(t){this._children.forEach(function(e,n){n===t?e.element().style.display="block":e.element().style.display="none"})},t.prototype._isSeekable=function(){return this._children.every(function(t){return t.readyState()>=HTMLMediaElement.HAVE_METADATA})},t.prototype._accustomChildren=function(){this._applyVolumeToChildren(),this._applyMutedToChildren()},t.prototype._applyVolumeToChildren=function(){var t=this;this.hasChildren&&this._children.forEach(function(e){e.volume(t._volume)})},t.prototype._applyMutedToChildren=function(){var t=this;this.hasChildren&&this._children.forEach(function(e){e.muted(t._muted)})},t}();e.PlayerContainer=c},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(356),o=r(n(581)),a=o["default"]("player-container:event");e.VideoEventNames=["loadstart","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","seeked","ended","play","pause","suspend","abort","playing","waiting","seeking","durationchange","timeupdate","progress","volumechange"],e.PlayerContainerEventNames=e.VideoEventNames.concat(["partialended","beforeplayerchange","playerchanged"]);var s=function(){function t(t){this._eventListeners=[],this.children=t,this.eventEmitter=new i.EventEmitter,this._eventListeners=[]}return t.prototype.clearEvents=function(){var t=this;this.children.forEach(function(n,r){t._eventListeners[r]&&e.PlayerContainerEventNames.forEach(function(e){t._eventListeners[r][e]&&n.event(e).off(t._eventListeners[r][e])}),delete t._eventListeners[r]})},t.prototype.initEvents=function(t){var n=this;this.clearEvents(),this.children.forEach(function(r,i){n._eventListeners[i]=Object.assign.apply(Object,[{}].concat(e.VideoEventNames.map(function(e){var r;return r={},r[e]=t[e](n.children,i),r}))),e.VideoEventNames.forEach(function(t){r.event(t).on(n._eventListeners[i][t])})}),a("Reset event listeners")},t.prototype.event=function(e){var n=this;return{on:function(r){return n.eventEmitter.on(e,r)&&t},once:function(r){return n.eventEmitter.once(e,r)&&t},off:function(r){return n.eventEmitter.removeListener(e,r)&&t},offAll:function(){return n.eventEmitter.removeAllListeners(e)&&t},emit:function(t){a("Event ["+e+"] Emitted"),n.eventEmitter.emit(e,t)}}},t}();e.PlayerContainerEventDispatcher=s},function(t,e,n){(function(r){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)}}function s(){var t;return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&(t=console).log.apply(t,arguments)}function u(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}}function c(){var t;try{t=e.storage.getItem("debug")}catch(n){}return!t&&"undefined"!=typeof r&&"env"in r&&(t={NODE_ENV:"production"}.DEBUG),t}function l(){try{return localStorage}catch(t){}}e.log=s,e.formatArgs=a,e.save=u,e.load=c,e.useColors=o,e.storage=l(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(582)(e);var h=t.exports.formatters;h.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(e,n(115))},function(t,e,n){"use strict";function r(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){function n(){if(n.enabled){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var o=n,s=Number(new Date),u=s-(a||s);o.diff=u,o.prev=a,o.curr=s,a=s,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var i=r.formatters[n];if("function"==typeof i){var a=e[c];t=i.call(o,a),e.splice(c,1),c--}return t}),r.formatArgs.call(o,e);var l=o.log||r.log;l.apply(o,e)}}var a;return n.namespace=t,n.enabled=r.enabled(t),n.useColors=r.useColors(),n.color=e(t),n.destroy=i,n.extend=o,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function i(){var t=r.instances.indexOf(this);return t!==-1&&(r.instances.splice(t,1),!0)}function o(t,e){return r(this.namespace+("undefined"==typeof e?":":e)+t)}function a(t){r.save(t),r.names=[],r.skips=[];var e,n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(e=0;e<i;e++)n[e]&&(t=n[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){var o=r.instances[e];o.enabled=r.enabled(o.namespace)}}function s(){r.enable("")}function u(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}return r.debug=r,r["default"]=r,r.coerce=c,r.disable=s,r.enable=a,r.enabled=u,r.humanize=n(583),Object.keys(t).forEach(function(e){r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}t.exports=r},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"weeks":case"week":case"w":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){var e=Math.abs(t);return e>=c?Math.round(t/c)+"d":e>=u?Math.round(t/u)+"h":e>=s?Math.round(t/s)+"m":e>=a?Math.round(t/a)+"s":t+"ms"}function i(t){var e=Math.abs(t);return e>=c?o(t,e,c,"day"):e>=u?o(t,e,u,"hour"):e>=s?o(t,e,s,"minute"):e>=a?o(t,e,a,"second"):t+" ms"}function o(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}var a=1e3,s=60*a,u=60*s,c=24*u,l=7*c,h=365.25*c;t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return n(t);if("number"===o&&isNaN(t)===!1)return e["long"]?i(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e){"use strict";var n=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._timeRanges=[],this._timeRanges=this._timeRanges.concat(t||[])}return Object.defineProperty(t.prototype,"length",{get:function(){return this._timeRanges.length},enumerable:!0,configurable:!0}),t.prototype.start=function(t){if(this.length-1<t)throw new DOMException("Failed to execute 'start' on '_TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+this.length+").");return this._timeRanges[t].start},t.prototype.end=function(t){if(this.length-1<t)throw new DOMException("Failed to execute 'end' on '_TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+this.length+").");return this._timeRanges[t].end},t}();e._TimeRanges=r;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.append=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=!1);for(var i=r?e.JOINT_BUFFER_BORDER_EPS_SEC:0,o=0;o<t.length;++o)this._timeRanges.length>0&&Math.abs(this._timeRanges[this._timeRanges.length-1].end-(t.start(o)+n))<=i?this._timeRanges[this._timeRanges.length-1].end=t.end(o)+n:this._timeRanges.push({start:t.start(o)+n,end:t.end(o)+n})},e.JOINT_BUFFER_BORDER_EPS_SEC=.2,e}(r);e.AppendableTimeRanges=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(586);e.RecommendClient=r["default"];var i=n(587);e.Recommend=i["default"];var o=n(588);e.Item=o["default"]},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(587)),o=r(n(589)),a=r(n(590)),s=r(n(591)),u=function(){function t(t){this.site=t.site,this.nvapi=new s["default"](t.nvapiBaseURL?t.nvapiBaseURL.replace(/\/$/,""):"https://nvapi.nicovideo.jp",t.frontendId,t.frontendVersion),this.publicAPI=new o["default"](t.publicAPIBaseURL?t.publicAPIBaseURL.replace(/\/$/,""):"https://public.api.nicovideo.jp",t.frontendId,t.frontendVersion),this.fetcher=new a["default"](this.site,this.nvapi)}return t.prototype.fetch=function(t){var e=this;return this.fetcher.fetch(t).then(function(t){return e.fromJSON(t)})},t.prototype.fromJSON=function(t){return i["default"].fromJSON(t,this.publicAPI)},t}();e["default"]=u},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(588)),o=function(){function t(t,e,n,r,i,o){this.site=t,this.recipeId=e,this.meta=n,this.recommendId=r,this.items=i,this.publicAPI=o}return t.fromJSON=function(e,n){return new t(e.site,e.recipeId,e.meta,e.recommendId,e.items.map(function(t){return i["default"].fromJSON(t)}),n)},t.prototype.logDisplay=function(t,e){return this.publicAPI.logDisplay({site:this.site,recommend_frame:t,display_uri:location.href,recommend_id:this.recommendId,display_contents:e.map(function(t){var e=t.posId,n=t.item;return{pos_id:e,contents_id:n.content.id}})})},t.prototype.logResponse=function(t){return t.isLogResponseSent()?Promise.resolve():(t.setIsLogResponseSent(!0),this.publicAPI.logResponse({recommend_id:this.recommendId,recommend_contents_id:t.id}))},t.prototype.toJSON=function(){return{site:this.site,recipeId:this.recipeId,meta:this.meta,recommendId:this.recommendId,items:this.items.map(function(t){return t.toJSON()})}},t}();e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r,i){void 0===i&&(i=!1),this.id=t,this.recommendType=e,this.contentType=n,this.content=r,this.isLogResponseSent_=i}return t.fromJSON=function(e){return new t(e.id,e.recommendType,e.contentType,e.content,e.isLogResponseSent)},t.prototype.isLogResponseSent=function(){return this.isLogResponseSent_},t.prototype.setIsLogResponseSent=function(t){this.isLogResponseSent_=t},t.prototype.toJSON=function(){return{id:this.id,recommendType:this.recommendType,contentType:this.contentType,content:this.content,isLogResponseSent:this.isLogResponseSent_}},t}();e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.baseURL=t,this.frontendId=e,this.frontendVersion=n}return t.prototype.logDisplay=function(t){return this.post("/v1/recommend/log/display-log",t,!0).then(function(){})},t.prototype.logResponse=function(t){return this.post("/v1/recommend/log/response-log",t,!1).then(function(){})},t.prototype.post=function(t,e,n){return fetch(""+this.baseURL+t,{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-Frontend-Id":String(this.frontendId),"X-Frontend-Version":this.frontendVersion,"X-Request-With":location.href},mode:"cors",credentials:n?"include":"omit"})},t}();e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.site=t,this.nvapi=e}return t.prototype.fetch=function(t,e){var n=this;return void 0===e&&(e=null),this.nvapi.fetch(t,this.site,e).then(function(t){return{site:n.site,recipeId:t.recipe.id,meta:t.recipe.meta,recommendId:t.recommendId,items:t.items}})},t}();e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},r.apply(this,arguments)},i=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(538)),s=function(){function t(t,e,n){this.baseURL=t,this.frontendId=e,this.frontendVersion=n}return t.prototype.fetch=function(t,e,n){var r=this.buildParams(t,e,n);return fetch(this.baseURL+"/v1/recommend?"+a["default"].stringify(r),{mode:"cors",credentials:"include"}).then(function(t){return t.json()}).then(function(t){if(200!==t.meta.status)throw new Error("api response status is not 200");if(!t.data)throw new Error("api response data is empty");return t.data})},t.prototype.buildParams=function(t,e,n){return Object.assign(function(){if("string"==typeof t)return{recipe:t};var e=t.id,n=i(t,["id"]);return r({recipeId:e},n)}(),{site:e,_frontendId:this.frontendId,_frontendVersion:this.frontendVersion},n?{limit:n}:null)},t}();e["default"]=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.serverBaseUrl=t}return t.prototype.access=function(e,n,o){void 0===n&&(n={});var a,s,u=this.serverBaseUrl+"/thumb_watch/"+e,c={mode:"cors",credentials:"include",cache:"no-cache"};return("undefined"!=typeof o?Promise.resolve({key:o}):window.fetch(u+"?thumb_mode=json",c).then(function(e){return e.json().then(function(n){var r=t.isPlayKeyErrorResponse(n);return e.ok&&!r?a=n:(r&&(a=n),Promise.reject(null))})})).then(function(t){var e="k="+encodeURIComponent(t.key);return"undefined"!=typeof n.device&&(e+="&device="+encodeURIComponent(n.device)),"undefined"!=typeof n.eco&&(e+="&eco="+n.eco),n.notIncrementViewCounter&&(e+="&not_increment_view_counter=1"),n.isHttps&&(e+="&is_https=1"),window.fetch(u+"?"+e,c)}).then(function(t){return t.text().then(function(e){if(!e)return Promise.reject(null);s=e.split("&").reduce(function(t,e){var n=e.split("=").map(decodeURIComponent),o=n[0],a=n[1];return a?(r.indexOf(o)>=0?t[o]=parseInt(a,10):i.indexOf(o)>=0?t[o]="1"===a:"ng_up"===o||"ng_ch"===o?t[o]=decodeURIComponent(a).split("&").map(function(t){var e=t.split("="),n=e[0],r=e[1];return{source:n,destination:r}}):t[o]=a,t):t},{});var n="undefined"!=typeof s.error;return t.ok&&!n?(s.needs_key=s.needs_key||!1,s.ng_ch=s.ng_ch||[],s.ng_up=s.ng_up||[],{playKeyResponse:a,getflvResponse:s}):(n||(s=void 0),Promise.reject(null))})})["catch"](function(){return Promise.reject({playKeyResponse:a,getflvResponse:s})})},t}();!function(t){function e(t){return!!t.error}t.isPlayKeyErrorResponse=e}(n||(n={}));var r=["l","time","user_id","ng_rv","hmsp","errno"],i=["is_premium","needs_key"];e["default"]=n},function(t,e,n){var r,i;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r))t.push(n.apply(null,r));else if("object"===i)for(var a in r)o.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(r=[],i=function(){return n}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(595),o=n(597),a=n(598),s=100;!function(t){function e(t){return new u(t)}t.create=e}(r||(r={})),e["default"]=r;var u=function(){function t(t){void 0===t&&(t=function(){return 0}),this._processUpdatingTime=t,this._triggerList=[],this.repeatScheduler=null,this.setupMonitoringSchedule()}return Object.defineProperty(t.prototype,"processUpdatingTime",{set:function(t){this._processUpdatingTime=t},enumerable:!0,configurable:!0}),t.prototype.getVideoTimeMs=function(){return this._processUpdatingTime()},t.prototype.getTriggerList=function(){return this._triggerList.concat()},t.prototype.setupMonitoringSchedule=function(){var t=this;this.repeatScheduler=new a["default"](function(){var e=t.getVideoTimeMs();t._triggerList.forEach(function(t){t.onTimeUpdate(e)})},s)},t.prototype.start=function(){this.repeatScheduler.start()},t.prototype.stop=function(){this.repeatScheduler.stop()},t.prototype.makePassing=function(t){return new i["default"](t)},t.prototype.makeTimeRange=function(t){return new o["default"](t)},t.prototype.add=function(t){this._triggerList.push(t)},t.prototype.remove=function(t){var e=this;this._triggerList.some(function(n,r){return n===t&&(e._triggerList.splice(r,1),!0)})},t.prototype.removeAll=function(){this._triggerList.length=0},t.prototype.dispose=function(){this.repeatScheduler.stop()},t}();e.TimeProgressTriggerHandlerImpl=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(596),o=function(t){function e(e){var n=t.call(this)||this;return n._params=e,n.checked=!1,n}return r(e,t),Object.defineProperty(e.prototype,"positionMs",{get:function(){return this._params.positionMs},enumerable:!0,configurable:!0}),e.prototype.onTimeUpdate=function(t){this.enabled&&(this._params.oneTime&&this.checked||(this.checked?t<this._params.positionMs&&(this.checked=!1):this._params.positionMs<=t&&(this.checked=!0,this._params.callback())))},e}(i["default"]);e["default"]=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._enabled=!0}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),t}();e["default"]=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(596),o=function(){function t(t){this._range=t}return t.isValidRange=function(t){return t.enterPositionMs<t.exitPositionMs},t.prototype.isInner=function(t){return"undefined"!=typeof t&&this._range.enterPositionMs<=t&&t<this._range.exitPositionMs},t}(),a=function(t){function e(e){var n=t.call(this)||this;return n._params=e,n.timeRangeInfoList=[],n.createTimeRangeInfoList(),n}return r(e,t),e.prototype.createTimeRangeInfoList=function(){var t=this;this.timeRangeInfoList=[],this._params.rangeList.sort(function(t,e){return t.enterPositionMs-e.enterPositionMs});for(var e=function(e){for(var n,r=e.startIndex+1,i=t._params.rangeList.length;r<i&&(n=t._params.rangeList[r],n.enterPositionMs<=e.exitPositionMs);r++)e.exitPositionMs=Math.max(e.exitPositionMs,n.exitPositionMs),e.lastIndex=r;return e},n=0,r=this._params.rangeList.length;n<r;n++){var i=this._params.rangeList[n],a=e({startIndex:n,lastIndex:n,enterPositionMs:i.enterPositionMs,exitPositionMs:i.exitPositionMs});o.isValidRange(a)&&this.timeRangeInfoList.push(new o(a)),n=a.lastIndex}},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){var e=this;if(this._enabled&&!t){var n=!1;this.timeRangeInfoList.forEach(function(t){t.isInner(e.lastTimeMs)&&(n=!0)}),n&&this._params.exitCallback()}this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeList",{get:function(){return this._params.rangeList},enumerable:!0,configurable:!0}),e.prototype.onTimeUpdate=function(t){var e=this;if(this.enabled){var n=this.timeRangeInfoList.some(function(t){return t.isInner(e.lastTimeMs)}),r=this.timeRangeInfoList.some(function(e){return e.isInner(t)});n!==r&&(r?this._params.enterCallback():this._params.exitCallback()),this.lastTimeMs=t}},e}(i["default"]);e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.process=t,this.intervalMs=e,this.id=null}return t.prototype.start=function(){var t=this;this.stop();var e,n,r=function(){e=Date.now(),t.process(),n=t.intervalMs-(Date.now()-e),n<0&&(n=0),t.id=window.setTimeout(r,n)};this.id=window.setTimeout(r,0)},t.prototype.stop=function(){null!==this.id&&(window.clearTimeout(this.id),this.id=null)},t}();e["default"]=n},function(t,e,n){"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=n(600),a=n(602),s=n(610),u=i(n(604)),c=function(){function t(t,e){void 0===e&&(e={}),this.option=e,this._mirror=!1,this._isBackwardPlayback=!1,this._lastCurrentTime=0,this._lastDuration=0,this._lastPlaying=!1;var n=document.getElementById(t);if(!n)throw new Error("parentElement was not found.");window.__videoplayer=this,this._parentElement=n,this._element=new a.VideoElement(this._parentElement,e),this._assignOptions(),this._eventDispatcher=new o.VideoEventDispatcher(this._element),this._eventDispatcher.listenVideoEvents(),this._playbackStalledObserver=new s.PlaybackStalledObserver(this._element),this._playbackStalledObserver.on("playback-stalled-change",this._onPlaybackStalledChange.bind(this)),this._playbackStalledObserver.start(),this.event("timeupdate").on(this._onTimeupdate.bind(this)),this.event("ended").on(this._onEnded.bind(this)),this.event("durationchange").on(this._onDurationchange.bind(this)),this._setSizeSyncStyle(),this._parentElement.appendChild(this._element.element)}return t.supported=function(t){var e=document.createElement("video");switch(t){case"hls-js":return u.isSupported();case"hls-native":return""!==e.canPlayType("application/x-mpegURL");case"mp4":return""!==e.canPlayType("video/mp4");case"webm":return""!==e.canPlayType("video/webm");default:return!1}},t.prototype.event=function(t){return this._eventDispatcher.event(t)},t.prototype.element=function(){return this._element.element},t.prototype.width=function(){return this.videoWidth()},t.prototype.height=function(){return this.videoHeight()},t.prototype.videoWidth=function(){return this._element.videoWidth},t.prototype.videoHeight=function(){return this._element.videoHeight},t.prototype.poster=function(t){return"undefined"!=typeof t?(this._element.poster=t,this):this._element.poster},t.prototype.error=function(){return this._element.getError()},t.prototype.src=function(t){return"undefined"!=typeof t?(this._lastCurrentTime=0,this._lastDuration=0,this._lastPlaying=!1,this._element.src=t,this):this._element.src},t.prototype.crossOrigin=function(t){if("undefined"==typeof t)return this._element.crossOrigin;switch(t){case"use-credentials":case null:this._element.crossOrigin=t;break;case"anonymous":default:this._element.crossOrigin="anonymous"}return this},t.prototype.currentSrc=function(){return this._element.currentSrc},t.prototype.canPlayType=function(t){return this._element.canPlayType(t)},t.prototype.readyState=function(){return this._element.readyState},t.prototype.seeking=function(){return this._element.seeking},t.prototype.currentTime=function(t){var e=this;if("undefined"!=typeof t){try{this._lastCurrentTime=Math.min(t,this._element.duration||Number.MAX_SAFE_INTEGER),this._refresh(),this.ready().then(function(){e._element.currentTime=e._lastCurrentTime})}catch(n){}return this}return this._fixCurrentTime(this._element.currentTime)},t.prototype.duration=function(){return this._lastDuration?this._lastDuration:this._element.duration},t.prototype.paused=function(){return this._element.paused},t.prototype.defaultPlaybackRate=function(){return this._element.defaultPlaybackRate},t.prototype.playbackRate=function(t){return"undefined"!=typeof t?(this._lastCurrentTime=this.currentTime(),this._isBackwardPlayback=t<0,this._element.playbackRate=t,this):this._element.playbackRate},t.prototype.ended=function(){return this._element.ended},t.prototype.autoplay=function(t){return"undefined"!=typeof t?(this._element.autoplay=t,this):this._element.autoplay},t.prototype.loop=function(t){return"undefined"!=typeof t?(this.option.loop=t,this):this.option.loop},t.prototype.volume=function(t){return"undefined"!=typeof t?(this._element.volume=t,this):this._element.volume},t.prototype.muted=function(t){return"undefined"!=typeof t?(this._element.muted=t,this):this._element.muted},t.prototype.preload=function(t){return"undefined"!=typeof t?(this._element.preload=t,this):this._element.preload},t.prototype.buffered=function(){return this._element.buffered},t.prototype.play=function(){var t=this;return this._lastPlaying=!0,this._refresh(),this.ready().then(function(){return t.ended()&&t.currentTime(0),t._element.play()})},t.prototype.pause=function(){return this._lastPlaying=!1,this._element.pause(),this},t.prototype.load=function(){return this._element.load(),this},t.prototype.mirror=function(t){return"undefined"!=typeof t?(t?this._element.style.transform="matrix(-1, 0, 0, 1, 0, 0)":this._element.style.transform="matrix(1, 0, 0, 1, 0, 0)",this._mirror=t,this):this._mirror},t.prototype.playbackStalled=function(){return this._playbackStalledObserver.isStalled},t.prototype.ready=function(){var e=this;return new Promise(function(n,r){if(e._element.hasError)return void r();if(e._element.readyState>=t.READY_STATE.HAVE_METADATA)return void n();var i=e._element,o=function(t){e.event("error").off(o),e.event("loadedmetadata").off(o),i.hasError?r():n()};e.event("error").once(o),e.event("loadedmetadata").once(o)})},t.prototype.replace=function(t){var e=this;return this._element.src=t,this._element.load(),this.ready().then(function(){e._element.currentTime=e._lastCurrentTime,e._lastPlaying&&e.play()}),this},t.prototype.dispose=function(){this._playbackStalledObserver.stop(),this._eventDispatcher.removeAllListeners(),this.clear(),this._element.remove()},t.prototype.clear=function(){var t=this;!function(){try{t._element.removeAttribute("src"),"function"==typeof t._element.load&&t._element.load()}catch(e){}}()},t.prototype.getTypeName=function(){return this._element.name},t.prototype.getLevel=function(){return this._element.level},t.prototype.setABREwmaDefaultEstimate=function(t){this._element.abrEwmaDefaultEstimateBPS=t},t.prototype.getABREwmaDefaultEstimate=function(){return this._element.abrEwmaDefaultEstimateBPS},t.prototype.touch=function(){this._element.touch()},t.prototype._onTimeupdate=function(t){this._lastCurrentTime=this._fixCurrentTime(this._element.currentTime)},t.prototype._onEnded=function(t){this.option.loop?this.play():this.pause()},t.prototype._onPlaybackStalledChange=function(t){this._eventDispatcher.event("playback-stalled-change").emit(t)},t.prototype._onDurationchange=function(t){this._element.duration&&(this._lastDuration=this._element.duration,this._lastCurrentTime=Math.min(this.currentTime(),this._element.duration))},t.prototype._assignOptions=function(){this.option.poster&&(this._element.poster=this.option.poster),this.option.src&&(this._element.src=this.option.src),this.option.preload&&(this._element.preload=this.option.preload),this._element.autoplay=this.option.autoplay||!1,this._element.muted=this.option.muted||!1},t.prototype._fixCurrentTime=function(t){return this._isBackwardPlayback?Math.max(0,Math.min(this._lastCurrentTime,t)):Math.min(Math.max(this._lastCurrentTime,t),this._element.duration||Number.MAX_SAFE_INTEGER)},t.prototype._setSizeSyncStyle=function(){this._element.style.position="absolute",this._element.style.width="100%",this._element.style.height="100%",this._element.style.top="0",this._element.style.left="0",this._element.style.bottom="0",this._element.style.right="0"},t.prototype._refresh=function(){this._element.hasError&&this.replace(this._element.src)},t.READY_STATE={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},t}();r(n(607)),r(n(606)),e["default"]=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(356),i=n(601),o=function(){function t(t){this._element=t,this.eventEmitter=new r.EventEmitter}return t.prototype.listenVideoEvents=function(){var t=this;i.videoEvents.forEach(function(e){t._element.addEventListener(e,function(n){t.event(e).emit(n),t.event("event").emit(e)})})},t.prototype.removeAllListeners=function(){this.eventEmitter.removeAllListeners(),this.eventEmitter.on("error",function(){})},t.prototype.event=function(t){var e=this;return{on:function(n){return e.eventEmitter.on(t,n)&&e},once:function(n){return e.eventEmitter.once(t,n)&&e},off:function(n){return e.eventEmitter.removeListener(t,n)&&e},offAll:function(){return e.eventEmitter.removeAllListeners(t)&&e},emit:function(n){return e.eventEmitter.emit(t,n)}}},t}();e.VideoEventDispatcher=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.videoEvents=["error","abort","progress","loadstart","suspend","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","volumechange","waiting","event","playback-stalled-change","levelswitched","warn","completelybuffered","fragbuffered"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(603),i=n(609),o=function(){function t(t,e){this._parentElement=t,this._option=e,this._elements=[],this._elements.push(new r.HlsjsVideoSource(document.createElement("video"),e)),this._elements.push(this._current=new i.RawHTMLVideoSource(document.createElement("video"),e))}return Object.defineProperty(t.prototype,"src",{get:function(){return this._current.src},set:function(t){var e=this._getSuitableElement(t);e!==this._current&&this._switch(e),this._current.src=t},enumerable:!0,configurable:!0}),t.prototype.canPlayType=function(t){return this._current.canPlayType(t)},t.prototype.play=function(){return this._current.play()},t.prototype.pause=function(){this._current.pause()},t.prototype.load=function(){this._current.load()},Object.defineProperty(t.prototype,"width",{get:function(){return this._current.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._current.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._current.element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._current.currentTime},set:function(t){this._current.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._current.volume},set:function(t){this._current.volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crossOrigin",{get:function(){return this._current.crossOrigin},set:function(t){this._current.crossOrigin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._current.playbackRate},set:function(t){this._current.playbackRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){return this._current.videoWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){return this._current.videoHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"poster",{get:function(){return this._current.poster},set:function(t){this._current.poster=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSrc",{get:function(){return this._current.currentSrc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._current.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seeking",{get:function(){return this._current.seeking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._current.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._current.paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPlaybackRate",{get:function(){return this._current.defaultPlaybackRate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._current.ended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return this._current.autoplay},set:function(t){this._current.autoplay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this._current.controls},set:function(t){this._current.controls=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._current.loop},set:function(t){this._current.loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._current.muted},set:function(t){this._current.muted=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preload",{get:function(){return this._current.preload},set:function(t){this._current.preload=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){return this._current.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._current.style},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasError",{get:function(){return this._current.hasError},enumerable:!0,configurable:!0}),t.prototype.getError=function(){return this._current.getError()},t.prototype.remove=function(){this._elements.forEach(function(t){t.remove()})},t.prototype.removeAttribute=function(t){this._elements.forEach(function(e){return e.removeAttribute(t)})},t.prototype.addEventListener=function(t,e){var n=this;this._elements.forEach(function(r){r.addEventListener(t,function(i){r===n._current&&("error"!==t||n._current.hasError)&&e(i)})})},t.prototype.removeEventListener=function(t,e){this._elements.forEach(function(n){return n.removeEventListener(t,e)})},Object.defineProperty(t.prototype,"name",{get:function(){return this._current.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._current.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"abrEwmaDefaultEstimateBPS",{get:function(){return this._current.abrEwmaDefaultEstimateBPS},set:function(t){this._current.abrEwmaDefaultEstimateBPS=t},enumerable:!0,configurable:!0}),t.prototype.touch=function(){var t=[];return this._elements.forEach(function(e){try{t.push(e.touch())}catch(n){}}),Promise.all(t).then(function(){return Promise.resolve()},function(){return Promise.reject(void 0)})},t.prototype._getSuitableElement=function(t){var e=this._elements.find(function(e){return e.available(t)});if(!e)throw new Error("suitable element not found.");return e},t.prototype._switch=function(t){this._parentElement.appendChild(t.element);var e=this._current;e.pause(),e.removeAttribute("src"),e.remove(),t.pause(),t.removeAttribute("src"),t.crossOrigin=e.crossOrigin,t.volume=e.volume,t.playbackRate=e.playbackRate,t.poster=e.poster,t.autoplay=e.autoplay,t.controls=e.controls,t.loop=e.loop,t.muted=e.muted,t.preload=e.preload,t.abrEwmaDefaultEstimateBPS=e.abrEwmaDefaultEstimateBPS,t.style.cssText=e.style.cssText,this._current=t},t}();e.VideoElement=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{"default":t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(604)),a=n(605),s=n(606),u=n(607),c=n(356),l=n(601),h=i(n(608)),f=5,d=function(t){function e(e,n){var r=t.call(this,e,n)||this;r._src="",r._emitter=new c.EventEmitter,r._retryCount=0,r._error=null,r._maxRetryCount=f,r._lastLevel=-1,r._isUnrecoverable=!1,r._isLevelCappedByFPS=!1,r._hasPlayedOnceBySrc=!1,r._onHlsjsError=function(t,e){e.fatal?r._onHlsjsFatalError(t,e):r._onHlsjsMinorError(t,e)},r._isUnrecoverableCode=function(t){return[401,403,404].includes(t)||t>=500},r._onHlsjsMinorError=function(t,e){var n=e.response?e.response.code:0;if(r._isUnrecoverableCode(n)&&(r._isUnrecoverable=!0),o["default"].ErrorTypes.MEDIA_ERROR)return r._emitWarn(e);switch(e.details){case o["default"].ErrorDetails.BUFFER_STALLED_ERROR:case o["default"].ErrorDetails.BUFFER_SEEK_OVER_HOLE:if(!r._isUnrecoverable)break;return r._error=new s.VideoPlayerError({code:s.VideoPlayerError.CODE.HLS_NETWORK,details:e.details,message:"session disconnected and buffer stall",isFatal:!0}),r._hls.stopLoad(),r._boundStartLoad.cancel(),void r._emitError(e)}r._emitWarn(e)},r._onHlsjsFatalError=function(t,e){var n=e.response?e.response.code:0;switch(e.type){case o["default"].ErrorTypes.NETWORK_ERROR:if(r._retryCount++,!r._isUnrecoverableCode(n)&&!r._isUnrecoverable&&r._retryCount<r._maxRetryCount-1)return r._boundStartLoad();r._error=new s.VideoPlayerError({code:s.VideoPlayerError.CODE.HLS_NETWORK,details:e.details,message:"fatal network error encountered",isFatal:e.fatal});break;case o["default"].ErrorTypes.MEDIA_ERROR:default:r._retryCount++,r._error=new s.VideoPlayerError({code:e.type===o["default"].ErrorTypes.MEDIA_ERROR?s.VideoPlayerError.CODE.HLS_DECODE:s.VideoPlayerError.CODE.HLS_UNKNOWN,details:e.details,message:"fatal cannot recover",isFatal:e.fatal})}r._hls.stopLoad(),r._boundStartLoad.cancel(),r._emitError(e)},r._onFPSDropLevelCapping=function(t,e){r._isLevelCappedByFPS=!0},r._onLevelSwitched=function(t,e){var n=r._isLevelCappedByFPS?"fps-drop":"";r._isLevelCappedByFPS=!1,r.level!==-1&&(r._lastLevel=r.level),r._dispatchEvent("levelswitched",new CustomEvent("levelswitched",{detail:{level:r.level,reason:n}}))},r._onBufferEOS=function(){r._dispatchEvent("completelybuffered",new CustomEvent("completelybuffered",{detail:{src:r.src}}))},r._onFragBuffered=function(t,e){var n=e.stats,i=e.frag,o=n.trequest,a=n.tbuffered-o,s=n.tfirst-o,u=a-s,c=n.total,l=Math.round(8*e.stats.total/u),h={requestStartUnixtime:Math.floor(Date.now()-performance.now()+n.trequest),requestEndTimeMS:a,headersReceivedTimeMS:s,bufferReceivedTimeMS:u,transferRateKbps:l,totalBytes:c,durationMS:Math.round(1e3*i.duration),level:i.level,url:i.url},f=new CustomEvent("fragbuffered",{detail:{stats:h,originalStats:Object.assign({},e.stats)}});r._dispatchEvent("fragbuffered",f)},r._listenVideoEvents();var i=n.hls?n.hls:{};return"number"==typeof i.fragLoadingMaxRetry&&(r._maxRetryCount=i.fragLoadingMaxRetry),r._hlsJsOption=i,r._hls=r._resetHLSJS(),r._element.addEventListener("playing",r._onPlaying.bind(r)),r._boundStartLoad=h["default"](r._startLoad.bind(r),i.fragLoadingRetryDelay||3e3),r}return r(e,t),e.available=function(t,e){return!!o["default"].isSupported()&&((!e.useNativeHlsPlayer||""===document.createElement("video").canPlayType("application/x-mpegURL"))&&/\.m3u8(|\?.*)$/.test(t))},e.prototype.removeAttribute=function(t){"src"===t?this.src="":this.element.removeAttribute(name)},Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(t){return 0===t.length?(this._src=t,this._boundStartLoad.cancel(),this._hls.stopLoad(),void this._hls.detachMedia()):(this.hasError?this._resetVideoElement():t===this._src&&(this._hls.detachMedia(),this.element.removeAttribute("src")),this._error=null,this._retryCount=0,this._src=t,this._isUnrecoverable=!1,this._isLevelCappedByFPS=!1,this._hasPlayedOnceBySrc=!1,this._resetHLSJS(),this._hls.loadSource(t),void this._hls.attachMedia(this.element))},enumerable:!0,configurable:!0}),e.prototype.getError=function(){return this._error},Object.defineProperty(e.prototype,"hasError",{get:function(){return!!this._error},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(t,e){this._emitter.on(t,e)},e.prototype.removeEventListener=function(t,e){this._emitter.removeListener(t,e)},e.prototype._dispatchEvent=function(t,e){this._emitter.emit(t,e)},e.prototype.available=function(t){return e.available(t,this._option)},e.prototype.load=function(){},Object.defineProperty(e.prototype,"name",{get:function(){return"hls.js"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._hls.currentLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"abrEwmaDefaultEstimateBPS",{get:function(){return this._hls.config.abrEwmaDefaultEstimate},set:function(t){this._hls.config.abrEwmaDefaultEstimate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._element.playbackRate},set:function(t){var e=this._element.playbackRate;this._element.playbackRate=t,this._element.defaultPlaybackRate=t,this._hlsJsOption.capLevelOnFPSDrop&&t<e&&this._resetLevelCapping()},enumerable:!0,configurable:!0}),e.prototype._listenVideoEvents=function(){var t=this;l.videoEvents.forEach(function(e){switch(e){case"error":t.element.addEventListener("error",function(e){t.element.error&&(t._error=new s.VideoPlayerError(t.element.error),t._emitError())});break;default:t.element.addEventListener(e,function(n){return t._emitter.emit(e,n)})}})},e.prototype._resetHLSJS=function(){var t=this._hlsJsOption;"number"!=typeof t.startLevel&&(t.startLevel=-1),"number"!=typeof t.abrEwmaDefaultEstimate&&(t.abrEwmaDefaultEstimate=o["default"].DefaultConfig.abrEwmaDefaultEstimate);var e=t.abrEwmaDefaultEstimate,n=t.startLevel;this._hls&&(e=this._hls.config.abrEwmaDefaultEstimate,n=this._lastLevel,this._hls.stopLoad(),this._hls.detachMedia(),this._hls.destroy()),t.abrEwmaDefaultEstimate=e,t.startLevel=n,this._lastLevel=n;var r=this._hls=new o["default"](t);return r.on(o["default"].Events.ERROR,this._onHlsjsError),r.on(o["default"].Events.LEVEL_SWITCHED,this._onLevelSwitched),r.on(o["default"].Events.FPS_DROP_LEVEL_CAPPING,this._onFPSDropLevelCapping),r.on(o["default"].Events.BUFFER_EOS,this._onBufferEOS),r.on(o["default"].Events.FRAG_BUFFERED,this._onFragBuffered),this._resetLevelCapping(),this._boundStartLoad&&this._boundStartLoad.cancel(),r},e.prototype._resetVideoElement=function(t){var e=this._element.parentElement,n=this._element;"undefined"==typeof t&&(t=document.createElement("video")),null!==e&&e.appendChild(t),t.volume=this.volume,t.muted=this.muted,t.style.cssText=this.style.cssText,t.playbackRate=this.playbackRate,t.poster=this.poster,t.autoplay=this.autoplay,t.controls=this.controls,t.loop=this.loop,t.muted=this.muted,t.preload=this.preload,t.style.cssText=this.style.cssText,t.crossOrigin=this.crossOrigin,t.src=this.src,isNaN(n.currentTime)||(t.currentTime=n.currentTime),this._hls.detachMedia(),this._element.removeAttribute("src"),this._element=t,this._listenVideoEvents(),this._hls.attachMedia(t),this.src&&this._hls.loadSource(this.src),n.parentElement&&n.parentElement.removeChild(n)},e.prototype._emitError=function(t){if(this._error){var e=t&&t.type?t.type:"error",n=new u.VideoPlayerErrorEvent(e,this._error);this._emitter.emit("error",n)}},e.prototype._emitWarn=function(t){var e=new CustomEvent("warn",{detail:t});this._emitter.emit("warn",e)},e.prototype._startLoad=function(){this._hls.startLoad()},e.prototype._resetLevelCapping=function(){this._hls.autoLevelCapping=-1},e.prototype._onPlaying=function(t){var e=this;this._hasPlayedOnceBySrc||(this._hasPlayedOnceBySrc=!0,setTimeout(function(){e._hasPlayedOnceBySrc&&e._resetLevelCapping()},2e4))},e}(a.AbstractHTMLVideoSource);e.HlsjsVideoSource=d},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=8)}([function(t,e,n){"use strict";function r(){}function i(t,e){return e="["+t+"] > "+e}function o(t){var e=self.console[t];return e?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];r[0]&&(r[0]=i(t,r[0])),e.apply(self.console,r)}:r}function a(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){c[e]=t[e]?t[e].bind(t):o(e)})}n.d(e,"a",function(){return l}),n.d(e,"b",function(){return h});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u={trace:r,debug:r,log:r,warn:r,info:r,error:r},c=u,l=function(t){if(t===!0||"object"===("undefined"==typeof t?"undefined":s(t))){a(t,"debug","log","info","warn","error");try{c.log()}catch(e){c=u}}else c=u},h=c},function(t,e,n){"use strict";e.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",
FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"b",function(){return o});var i=function(){function t(){r(this,t)}/* utf.js - UTF-8 <=> UTF-16 convertion
	   *
	   * Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>
	   * Version: 1.0
	   * LastModified: Dec 25 1999
	   * This library is free.  You can redistribute it and/or modify it.
	   */
return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var r=n,i=0;t.isHeader(e,n);){i+=10;var o=t._readSize(e,n+6);i+=o,t.isFooter(e,n+10)&&(i+=10),n+=i}if(i>0)return e.subarray(r,r+i)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|=127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),r=0;r<n.length;r++){var i=n[r];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),r=t._readSize(e,4),i=10;return{type:n,size:r,data:e.subarray(i,i+r)}},t.getID3Frames=function(e){for(var n=0,r=[];t.isHeader(e,n);){var i=t._readSize(e,n+6);n+=10;for(var o=n+i;n+8<o;){var a=t._getFrameData(e.subarray(n)),s=t._decodeFrame(a);s&&r.push(s),n+=a.size+10}t.isFooter(e,n)&&(n+=10)}return r},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:r.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,r=t._utf8ArrayToStr(e.data.subarray(n));n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,r=t._utf8ArrayToStr(e.data.subarray(n));n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.length,r=void 0,i=void 0,o=void 0,a="",s=0;s<n;){if(r=t[s++],0===r&&e)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:i=t[s++],a+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=t[s++],o=t[s++],a+=String.fromCharCode((15&r)<<12|(63&i)<<6|(63&o)<<0)}}return a},t}(),o=i._utf8ArrayToStr;e.a=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,n){r(this,t),this.subtle=e,this.aesIV=n}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),u=s,c=function(){function t(e,n){i(this,t),this.subtle=e,this.key=n}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),l=c,h=function(){function t(){o(this,t),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,u=s[0],c=s[1],l=s[2],h=s[3],f=new Uint32Array(256),d=0,p=0,v=0;for(v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,t[d]=g,e[g]=d;var y=f[d],m=f[y],_=f[m],b=257*f[g]^16843008*g;r[d]=b<<24|b>>>8,i[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,a[d]=b,b=16843009*_^65537*m^257*y^16843008*d,u[g]=b<<24|b>>>8,c[g]=b<<16|b>>>16,l[g]=b<<8|b>>>24,h[g]=b,d?(d=y^f[f[f[_^y]]],p^=f[f[p]]):d=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),l=this.sBox,h=this.rcon,f=this.invSubMix,d=f[0],p=f[1],v=f[2],g=f[3],y=void 0,m=void 0;for(a=0;a<o;a++)a<i?y=u[a]=e[a]:(m=y,a%i===0?(m=m<<8|m>>>24,m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m],m^=h[a/i|0]<<24):i>6&&a%i===4&&(m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[255&m]),u[a]=y=(u[a-i]^m)>>>0);for(s=0;s<o;s++)a=o-s,m=3&s?u[a]:u[a-4],s<4||a<=4?c[s]=m:c[s]=d[l[m>>>24]]^p[l[m>>>16&255]]^v[l[m>>>8&255]]^g[l[255&m]],c[s]=c[s]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,n){for(var r,i,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,u=this.invSubMix,c=u[0],l=u[1],h=u[2],f=u[3],d=this.uint8ArrayToUint32Array_(n),p=d[0],v=d[1],g=d[2],y=d[3],m=new Int32Array(t),_=new Int32Array(m.length),b=void 0,E=void 0,T=void 0,x=void 0,S=void 0,w=void 0,R=void 0,A=void 0,O=void 0,C=void 0,P=void 0,M=void 0,L=this.networkToHostOrderSwap;e<m.length;){for(O=L(m[e]),C=L(m[e+1]),P=L(m[e+2]),M=L(m[e+3]),S=O^a[0],w=M^a[1],R=P^a[2],A=C^a[3],r=4,i=1;i<o;i++)b=c[S>>>24]^l[w>>16&255]^h[R>>8&255]^f[255&A]^a[r],E=c[w>>>24]^l[R>>16&255]^h[A>>8&255]^f[255&S]^a[r+1],T=c[R>>>24]^l[A>>16&255]^h[S>>8&255]^f[255&w]^a[r+2],x=c[A>>>24]^l[S>>16&255]^h[w>>8&255]^f[255&R]^a[r+3],S=b,w=E,R=T,A=x,r+=4;b=s[S>>>24]<<24^s[w>>16&255]<<16^s[R>>8&255]<<8^s[255&A]^a[r],E=s[w>>>24]<<24^s[R>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^a[r+1],T=s[R>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&w]^a[r+2],x=s[A>>>24]<<24^s[S>>16&255]<<16^s[w>>8&255]<<8^s[255&R]^a[r+3],r+=3,_[e]=L(b^p),_[e+1]=L(x^v),_[e+2]=L(T^g),_[e+3]=L(E^y),p=O,v=C,g=P,y=M,e+=4}return _.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),f=h,d=n(2),p=n(0),v=function(){function t(e,n){a(this,t),this.observer=e,this.config=n,this.logEnabled=!0;try{var r=crypto?crypto:self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(i){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,n,r){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(p.b.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new f),o.expandKey(e),r(o.decrypt(t,0,n))}else{this.logEnabled&&(p.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new l(a,e)),this.fastAesKey.expandKey().then(function(o){var s=new u(a,n);s.decrypt(t,o)["catch"](function(o){i.onWebCryptoError(o,t,e,n,r)}).then(function(t){r(t)})})["catch"](function(o){i.onWebCryptoError(o,t,e,n,r)})}},t.prototype.onWebCryptoError=function(t,e,n,r,i){this.config.enableSoftwareAES?(p.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,r,i)):(p.b.error("decrypting error : "+t.message),this.observer.trigger(Event.ERROR,{type:d.b.MEDIA_ERROR,details:d.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.a=v},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){!function(e){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),e=e.trim(),!e){if(!n.alwaysNormalize)return t;var i=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=this.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var l=s.path,h=l.substring(0,l.lastIndexOf("/")+1)+o.path;c.path=a.normalizePath(h)}else c.path=s.path,o.params||(c.params=s.params,o.query||(c.query=s.query));return null===c.path&&(c.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(c)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}(this)},function(t,e,n){"use strict";function r(t,e,n,r){var i,o,a,s,u,c=navigator.userAgent.toLowerCase(),l=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=((192&e[n+2])>>>6)+1,o=(60&e[n+2])>>>2,o>h.length-1?void t.trigger(Event.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[n+2])<<2,s|=(192&e[n+3])>>>6,A.b.log("manifest codec:"+r+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+h[o]+"Hz],channelConfig:"+s),/firefox/i.test(c)?o>=6?(i=5,u=new Array(4),a=o-3):(i=2,u=new Array(2),a=o):c.indexOf("android")!==-1?(i=2,u=new Array(2),a=o):(i=5,u=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&o>=6?a=o-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(o>=6&&1===s||/vivaldi/i.test(c))||!r&&1===s)&&(i=2,u=new Array(2)),a=o)),u[0]=i<<3,u[0]|=(14&o)>>1,u[1]|=(1&o)<<7,u[1]|=s<<3,5===i&&(u[1]|=(14&a)>>1,u[2]=(1&a)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:h[o],channelCount:s,codec:"mp4a.40."+i,manifestCodec:l})}function i(t,e){return 255===t[e]&&240===(246&t[e+1])}function o(t,e){return 1&t[e+1]?7:9}function a(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&i(t,e))}function u(t,e){if(e+1<t.length&&i(t,e)){var n=o(t,e),r=n;e+5<t.length&&(r=a(t,e));var s=e+r;if(s===t.length||s+1<t.length&&i(t,s))return!0}return!1}function c(t,e,n,i,o){if(!t.samplerate){var a=r(e,n,i,o);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,A.b.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function l(t){return 9216e4/t}function h(t,e,n,r,i){var s,u,c,l=t.length;if(s=o(t,e),u=a(t,e),u-=s,u>0&&e+s+u<=l)return c=n+r*i,{headerLength:s,frameLength:u,stamp:c}}function f(t,e,n,r,i){var o=l(t.samplerate),a=h(e,n,r,i,o);if(a){var s=a.stamp,u=a.headerLength,c=a.frameLength,f={unit:e.subarray(n+u,n+u+c),pts:s,dts:s};return t.samples.push(f),t.len+=c,{sample:f,length:c+u}}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=n(1),w=n(2),R=n(4),A=n(0),O=n(3),C=function(){function t(e,n,r){d(this,t),this.observer=e,this.config=r,this.remuxer=n}return t.prototype.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=O.a.getID3Data(t,0)||[],n=e.length,r=t.length;n<r;n++)if(u(t,n))return A.b.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,e,n,r){for(var i=this._audioTrack,o=O.a.getID3Data(t,0)||[],a=O.a.getTimeStamp(o),u=a?90*a:9e4*e,l=0,h=u,d=t.length,p=o.length,v=[{pts:h,dts:h,data:o}];p<d-1;)if(s(t,p)&&p+5<d){c(i,this.observer,t,p,i.manifestCodec);var g=f(i,t,p,u,l);if(!g){A.b.log("Unable to parse AAC frame");break}p+=g.length,h=g.sample.pts,l++}else O.a.isHeader(t,p)?(o=O.a.getID3Data(t,p),v.push({pts:h,dts:h,data:o}),p+=o.length):p++;this.remuxer.remux(i,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},e,n,r)},t.prototype.destroy=function(){},t}(),P=C,M=Math.pow(2,32)-1,L=function(){function t(e,n){p(this,t),this.observer=e,this.remuxer=n}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,n,r,i){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var a={};o.audio&&o.video?a.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:i?e:null}:(o.audio&&(a.audio={container:"audio/mp4",codec:n,initSegment:i?e:null}),o.video&&(a.video={container:"video/mp4",codec:r,initSegment:i?e:null})),this.observer.trigger(S.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var r,i,o,a,s,u,c,l=[];if(e.data?(u=e.start,a=e.end,e=e.data):(u=0,a=e.byteLength),!n.length)return null;for(r=u;r<a;)i=t.readUint32(e,r),o=t.bin2str(e.subarray(r+4,r+8)),c=i>1?r+i:a,o===n[0]&&(1===n.length?l.push({data:e,start:r+8,end:c}):(s=t.findBox({data:e,start:r+8,end:c},n.slice(1)),s.length&&(l=l.concat(s)))),r=c;return l},t.parseInitSegment=function(e){var n=[],r=t.findBox(e,["moov","trak"]);return r.forEach(function(e){var r=t.findBox(e,["tkhd"])[0];if(r){var i=r.data[r.start],o=0===i?12:20,a=t.readUint32(r,o),s=t.findBox(e,["mdia","mdhd"])[0];if(s){i=s.data[s.start],o=0===i?12:20;var u=t.readUint32(s,o),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var l=t.bin2str(c.data.subarray(c.start+8,c.start+12)),h={soun:"audio",vide:"video"}[l];if(h){var f=t.findBox(e,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var d=t.bin2str(f.data.subarray(f.start+12,f.start+16));A.b.log("MP4Demuxer:"+h+":"+d+" found")}n[a]={timescale:u,type:h},n[h]={timescale:u,id:a}}}}}}),n},t.getStartDTS=function(e,n){var r,i,o;return r=t.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return t.findBox(n,["tfhd"]).map(function(r){var i,o,a;return i=t.readUint32(r,4),o=e[i].timescale||9e4,a=t.findBox(n,["tfdt"]).map(function(e){var n,r;return n=e.data[e.start],r=t.readUint32(e,4),1===n&&(r*=Math.pow(2,32),r+=t.readUint32(e,8)),r})[0],a/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},t.offsetStartDTS=function(e,n,r){t.findBox(n,["moof","traf"]).map(function(n){return t.findBox(n,["tfhd"]).map(function(i){var o=t.readUint32(i,4),a=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map(function(e){var n=e.data[e.start],i=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,i-r*a);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=r*a,i=Math.max(i,0);var o=Math.floor(i/(M+1)),s=Math.floor(i%(M+1));t.writeUint32(e,4,o),t.writeUint32(e,8,s)}})})})},t.prototype.append=function(e,n,r,i){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec),o=this.initData);var a=void 0,s=this.initPTS;if(void 0===s){var u=t.getStartDTS(o,e);this.initPTS=s=u-n,this.observer.trigger(S.a.INIT_PTS_FOUND,{initPTS:s})}t.offsetStartDTS(o,e,s),a=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,a,r,i,e)},t.prototype.destroy=function(){},t}(),k=L,I={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,r,i){if(!(n+24>e.length)){var o=this.parseHeader(e,n);if(o&&n+o.frameLength<=e.length){var a=9e4*o.samplesPerFrame/o.sampleRate,s=r+i*a,u={unit:e.subarray(n,n+o.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(u),t.len+=o.frameLength,{sample:u,length:o.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,o=t[e+2]>>2&3,a=t[e+2]>>1&1;if(1!==n&&0!==i&&15!==i&&3!==o){var s=3===n?3-r:3===r?3:4,u=1e3*I.BitratesMap[14*s+i-1],c=3===n?0:2===n?1:2,l=I.SamplingRateMap[3*c+o],h=t[e+3]>>6===3?1:2,f=I.SamplesCoefficients[n][r],d=I.BytesInSlot[r],p=8*f*d,v=parseInt(f*u/l+a,10)*d;return{sampleRate:l,channelCount:h,frameLength:v,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224===(224&t[e+1])&&0!==(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=4,r=this.parseHeader(t,e),i=n;r&&r.frameLength&&(i=r.frameLength);var o=e+i;if(o===t.length||o+1<t.length&&this.isHeaderPattern(t,o))return!0}return!1}},D=I,F=function(){function t(e){v(this,t),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&A.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?n<<e|this.readBits(e):n},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,n,r=8,i=8;for(e=0;e<t;e++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i},t.prototype.readSPS=function(){var t,e,n,r,i,o,a,s,u,c=0,l=0,h=0,f=0,d=this.readUByte.bind(this),p=this.readBits.bind(this),v=this.readUEG.bind(this),g=this.readBoolean.bind(this),y=this.skipBits.bind(this),m=this.skipEG.bind(this),_=this.skipUEG.bind(this),b=this.skipScalingList.bind(this);if(d(),t=d(),e=p(5),y(3),n=d(),_(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var E=v();if(3===E&&y(1),_(),_(),y(1),g())for(s=3!==E?8:12,u=0;u<s;u++)g()&&b(u<6?16:64)}_();var T=v();if(0===T)v();else if(1===T)for(y(1),m(),m(),r=v(),u=0;u<r;u++)m();_(),y(1),i=v(),o=v(),a=p(1),0===a&&y(1),y(1),g()&&(c=v(),l=v(),h=v(),f=v());var x=[1,1];if(g()&&g()){var S=d();switch(S){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[d()<<8|d(),d()<<8|d()]}}return{width:Math.ceil(16*(i+1)-2*c-2*l),height:(2-a)*(o+1)*16-(a?2:4)*(h+f),pixelRatio:x}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),N=F,U=function(){function t(e,n,r,i){g(this,t),this.decryptdata=r,this.discardEPB=i,this.decrypter=new R.a(e,n)}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,n,r){var i=t[e].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(t,e+1,n)})},t.prototype.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,r=32;r<=t.length-16;r+=160,n+=16)t.set(e.subarray(n,n+16),r);return t},t.prototype.decryptAvcSample=function(t,e,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(t,e,n+1,r)})},t.prototype.decryptAvcSamples=function(t,e,n,r){for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,o,a),!a)return}}}},t}(),j=U,B={video:0,audio:1,id3:2,text:3},G=function(){function t(e,n,r,i){y(this,t),this.observer=e,this.config=r,this.typeSupported=i,this.remuxer=n,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new j(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0)&&(n&&A.b.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:B[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,n,r,i){var o,a,s,u,c,l,h=e.length,f=!1;this.contiguous=r;var d=this.pmtParsed,p=this._avcTrack,v=this._audioTrack,g=this._id3Track,y=p.pid,m=v.pid,_=g.pid,b=this._pmtId,E=p.pesData,T=v.pesData,x=g.pesData,R=this._parsePAT,O=this._parsePMT,C=this._parsePES,P=this._parseAVCPES.bind(this),M=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),k=this._parseID3PES.bind(this),I=t._syncOffset(e);for(h-=(h+I)%188,o=I;o<h;o+=188)if(71===e[o]){if(a=!!(64&e[o+1]),s=((31&e[o+1])<<8)+e[o+2],u=(48&e[o+3])>>4,u>1){if(c=o+5+e[o+4],c===o+188)continue}else c=o+4;switch(s){case y:a&&(E&&(l=C(E))&&P(l,!1),E={data:[],size:0}),E&&(E.data.push(e.subarray(c,o+188)),E.size+=o+188-c);break;case m:a&&(T&&(l=C(T))&&(v.isAAC?M(l):L(l)),T={data:[],size:0}),T&&(T.data.push(e.subarray(c,o+188)),T.size+=o+188-c);break;case _:a&&(x&&(l=C(x))&&k(l),x={data:[],size:0}),x&&(x.data.push(e.subarray(c,o+188)),x.size+=o+188-c);break;case 0:a&&(c+=e[c]+1),b=this._pmtId=R(e,c);break;case b:a&&(c+=e[c]+1);var D=O(e,c,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);y=D.avc,y>0&&(p.pid=y),m=D.audio,m>0&&(v.pid=m,v.isAAC=D.isAAC),_=D.id3,_>0&&(g.pid=_),f&&!d&&(A.b.log("reparse from beginning"),f=!1,o=I-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(S.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});E&&(l=C(E))?(P(l,!0),p.pesData=null):p.pesData=E,T&&(l=C(T))?(v.isAAC?M(l):L(l),v.pesData=null):(T&&T.size&&A.b.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),x&&(l=C(x))?(k(l),g.pesData=null):g.pesData=x,null==this.sampleAes?this.remuxer.remux(v,p,g,this._txtTrack,n,r,i):this.decryptAndRemux(v,p,g,this._txtTrack,n,r,i)},t.prototype.decryptAndRemux=function(t,e,n,r,i,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,n,r,i,o,a)})}else this.decryptAndRemuxAvc(t,e,n,r,i,o,a)},t.prototype.decryptAndRemuxAvc=function(t,e,n,r,i,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,n,r,i,o,a)})}else this.remuxer.remux(t,e,n,r,i,o,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,n,r){var i,o,a,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&t[e+1])<<8|t[e+2],o=e+3+i-4,a=(15&t[e+10])<<8|t[e+11],e+=12+a;e<o;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!r){A.b.log("unkown stream type:"+t[e]);break}case 15:u.audio===-1&&(u.audio=s);break;case 21:u.id3===-1&&(u.id3=s);break;case 219:if(!r){A.b.log("unkown stream type:"+t[e]);break}case 27:u.avc===-1&&(u.avc=s);break;case 3:case 4:n?u.audio===-1&&(u.audio=s,u.isAAC=!1):A.b.log("MPEG audio found, not supported in this browser for now");break;case 36:A.b.warn("HEVC stream type found, not supported for now");break;default:A.b.log("unkown stream type:"+t[e])}e+=((15&t[e+3])<<8|t[e+4])+5}return u},t.prototype._parsePES=function(t){var e,n,r,i,o,a,s,u,c,l=0,h=t.data;if(!t||0===t.size)return null;for(;h[0].length<19&&h.length>1;){var f=new Uint8Array(h[0].length+h[1].length);f.set(h[0]),f.set(h[1],h[0].length),h[0]=f,h.splice(1,1)}if(e=h[0],r=(e[0]<<16)+(e[1]<<8)+e[2],1===r){if(i=(e[4]<<8)+e[5],i&&i>t.size-6)return null;n=e[7],192&n&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&n?(u=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,u>4294967295&&(u-=8589934592),s-u>54e5&&(A.b.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),o=e[8],c=o+9,t.size-=c,a=new Uint8Array(t.size);for(var d=0,p=h.length;d<p;d++){e=h[d];var v=e.byteLength;if(c){if(c>v){c-=v;continue}e=e.subarray(c),v-=c,c=0}a.set(e,l),l+=v}return i&&(i-=o+3),{data:a,pts:s,dts:u,len:i}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||t.key===!0||e.sps&&(r||this.contiguous)?(t.id=r,n.push(t)):e.dropped++}t.debug.length&&A.b.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var n,r,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(t.data),u=!1,c=this.avcSample,l=!1,h=this.pushAccesUnit.bind(this),f=function(t,e,n,r){return{key:t,pts:e,dts:n,units:[],debug:r}};t.data=null,c&&s.length&&!a.audFound&&(h(c,a),c=this.avcSample=f(!1,t.pts,t.dts,"")),s.forEach(function(e){switch(e.type){case 1:r=!0,c||(c=o.avcSample=f(!0,t.pts,t.dts,"")),u&&(c.debug+="NDR "),c.frame=!0;var s=e.data;if(l&&s.length>4){var d=new N(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(c.key=!0)}break;case 5:r=!0,c||(c=o.avcSample=f(!0,t.pts,t.dts,"")),u&&(c.debug+="IDR "),c.key=!0,c.frame=!0;break;case 6:r=!0,u&&c&&(c.debug+="SEI "),n=new N(o.discardEPB(e.data)),n.readUByte();for(var p=0,v=0,g=!1,y=0;!g&&n.bytesAvailable>1;){p=0;do y=n.readUByte(),p+=y;while(255===y);v=0;do y=n.readUByte(),v+=y;while(255===y);if(4===p&&0!==n.bytesAvailable){g=!0;var m=n.readUByte();if(181===m){var _=n.readUShort();if(49===_){var b=n.readUInt();if(1195456820===b){var E=n.readUByte();if(3===E){var T=n.readUByte(),x=n.readUByte(),S=31&T,w=[T,x];for(i=0;i<S;i++)w.push(n.readUByte()),w.push(n.readUByte()),w.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:w})}}}}}else if(v<n.bytesAvailable)for(i=0;i<v;i++)n.readUByte()}break;case 7:if(r=!0,l=!0,u&&c&&(c.debug+="SPS "),!a.sps){n=new N(e.data);var R=n.readSPS();a.width=R.width,a.height=R.height,a.pixelRatio=R.pixelRatio,a.sps=[e.data],a.duration=o._duration;var A=e.data.subarray(1,4),O="avc1.";for(i=0;i<3;i++){var C=A[i].toString(16);C.length<2&&(C="0"+C),O+=C}a.codec=O}break;case 8:r=!0,u&&c&&(c.debug+="PPS "),a.pps||(a.pps=[e.data]);break;case 9:r=!1,a.audFound=!0,c&&h(c,a),c=o.avcSample=f(!1,t.pts,t.dts,u?"AUD ":"");break;case 12:r=!1;break;default:r=!1,c&&(c.debug+="unknown NAL "+e.type+" ")}if(c&&r){var P=c.units;P.push(e)}}),e&&c&&(h(c,a),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var n=t.length;if(n>0){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;r>=0;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t=this.avcSample,e=void 0;if(!t||0===t.units.length){var n=this._avcTrack,r=n.samples;t=r[r.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},t.prototype._parseAVCNALu=function(t){var e,n,r,i,o,a=0,s=t.byteLength,u=this._avcTrack,c=u.naluState||0,l=c,h=[],f=-1;for(c===-1&&(f=0,o=31&t[0],c=0,a=1);a<s;)if(e=t[a++],c)if(1!==c)if(e)if(1===e){if(f>=0)r={data:t.subarray(f,a-c-1),type:o},h.push(r);else{var d=this._getLastNalUnit();if(d&&(l&&a<=4-l&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-l)),n=a-c-1,n>0)){var p=new Uint8Array(d.data.byteLength+n);p.set(d.data,0),p.set(t.subarray(0,n),d.data.byteLength),d.data=p}}a<s?(i=31&t[a],f=a,o=i,c=0):c=-1}else c=0;else c=3;else c=e?0:2;else c=e?0:1;if(f>=0&&c>=0&&(r={data:t.subarray(f,s),type:o,state:c},h.push(r)),0===h.length){var v=this._getLastNalUnit();if(v){var g=new Uint8Array(v.data.byteLength+t.byteLength);g.set(v.data,0),g.set(t,v.data.byteLength),v.data=g}}return u.naluState=c,h},t.prototype.discardEPB=function(t){for(var e,n,r=t.byteLength,i=[],o=1;o<r-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=t[a];return n},t.prototype._parseAACPES=function(t){var e,n,r,i,o,a=this._audioTrack,u=t.data,h=t.pts,d=0,p=this.aacOverFlow,v=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+u.byteLength);g.set(p,0),g.set(u,p.byteLength),u=g}for(r=d,o=u.length;r<o-1&&!s(u,r);r++);if(r){var y,m;if(r<o-1?(y="AAC PES did not start with ADTS header,offset:"+r,m=!1):(y="no ADTS header found in AAC PES",m=!0),A.b.warn("parsing error:"+y),this.observer.trigger(S.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_PARSING_ERROR,fatal:m,reason:y}),m)return}if(c(a,this.observer,u,r,this.audioCodec),n=0,e=l(a.samplerate),p&&v){var _=v+e;Math.abs(_-h)>1&&(A.b.log("AAC: align PTS for overlapping frames by "+Math.round((_-h)/90)),h=_)}for(;r<o;)if(s(u,r)&&r+5<o){var b=f(a,u,r,h,n);if(!b)break;r+=b.length,i=b.sample.pts,n++}else r++;p=r<o?u.subarray(r,o):null,this.aacOverFlow=p,this.aacLastPTS=i},t.prototype._parseMPEGPES=function(t){for(var e=t.data,n=e.length,r=0,i=0,o=t.pts;i<n;)if(D.isHeader(e,i)){var a=D.appendFrame(this._audioTrack,e,i,o,r);if(!a)break;i+=a.length,r++}else i++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),H=G,W=function(){function t(e,n,r){m(this,t),this.observer=e,this.config=r,this.remuxer=n}return t.prototype.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,n,r=O.a.getID3Data(t,0);if(r&&void 0!==O.a.getTimeStamp(r))for(e=r.length,n=Math.min(t.length-1,e+100);e<n;e++)if(D.probe(t,e))return A.b.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,n,r){for(var i=O.a.getID3Data(t,0),o=O.a.getTimeStamp(i),a=o?90*o:9e4*e,s=i.length,u=t.length,c=0,l=0,h=this._audioTrack,f=[{pts:a,dts:a,data:i}];s<u;)if(D.isHeader(t,s)){var d=D.appendFrame(h,t,s,a,c);if(!d)break;s+=d.length,l=d.sample.pts,c++}else O.a.isHeader(t,s)?(i=O.a.getID3Data(t,s),f.push({pts:l,dts:l,data:i}),s+=i.length):s++;this.remuxer.remux(h,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},e,n,r)},t.prototype.destroy=function(){},t}(),z=W,V=function(){function t(){_(this,t)}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),Y=V,X=Math.pow(2,32)-1,K=function(){function t(){b(this,t)}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),
t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,u,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for(e=new Uint8Array(r),e[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),i=0,r=8;i<o;i++)e.set(n[i],r),r+=n[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var r=Math.floor(n/(X+1)),i=Math.floor(n%(X+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var r=Math.floor(n/(X+1)),i=Math.floor(n%(X+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,o)},t.sdtp=function(e){var n,r,i=e.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,o)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,o=[],a=[];for(n=0;n<e.sps.length;n++)r=e.sps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)r=e.pps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),u=e.width,c=e.height,l=e.pixelRatio[0],h=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,h>>24,h>>16&255,h>>8&255,255&h])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,o=e.height,a=Math.floor(r/(X+1)),s=Math.floor(r%(X+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))},t.traf=function(e,n){var r=t.sdtp(e),i=e.id,o=Math.floor(n/(X+1)),a=Math.floor(n%(X+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,r.length+16+20+8+16+8+8),r)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,o,a,s,u,c=e.samples||[],l=c.length,h=12+16*l,f=new Uint8Array(h);for(n+=8+h,f.set([0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<l;r++)i=c[r],o=i.duration,a=i.size,s=i.flags,u=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var n,r=t.moov(e);return n=new Uint8Array(t.FTYP.byteLength+r.byteLength),n.set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}(),q=K,$=1e4,J=function(){function t(e,n,r,i){E(this,t),this.observer=e,this.config=n,this.typeSupported=r;var o=navigator.userAgent;this.isSafari=i&&i.indexOf("Apple")>-1&&o&&!o.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,n,r,i,o,a){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var s=t.samples.length,u=e.samples.length,c=i,l=i;if(s&&u){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;c+=Math.max(0,h),l+=Math.max(0,-h)}if(s){t.timescale||(A.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var f=this.remuxAudio(t,c,o,a);if(u){var d=void 0;f&&(d=f.endPTS-f.startPTS),e.timescale||(A.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,l,o,d,a)}}else{var p=void 0;u&&(p=this.remuxVideo(e,l,o,a)),p&&t.codec&&this.remuxEmptyAudio(t,c,o,p)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(S.a.FRAG_PARSED)},t.prototype.generateIS=function(t,e,n){var r,i,o=this.observer,a=t.samples,s=e.samples,u=this.typeSupported,c="audio/mp4",l={},h={tracks:l},f=void 0===this._initPTS;if(f&&(r=i=1/0),t.config&&a.length&&(t.timescale=t.samplerate,A.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(c="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),l.audio={container:c,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:q.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(r=i=a[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&s.length){var d=e.inputTimeScale;e.timescale=d,l.video={container:"video/mp4",codec:e.codec,initSegment:q.initSegment([e]),metadata:{width:e.width,height:e.height}},f&&(r=Math.min(r,s[0].pts-d*n),i=Math.min(i,s[0].dts-d*n),this.observer.trigger(S.a.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(l).length?(o.trigger(S.a.FRAG_PARSING_INIT_SEGMENT,h),this.ISGenerated=!0,f&&(this._initPTS=r,this._initDTS=i)):o.trigger(S.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d=8,p=t.timescale,v=t.samples,g=[],y=v.length,m=this._PTSNormalize,_=this._initDTS,b=this.nextAvcDts,E=this.isSafari;E&&(n|=v.length&&b&&(i&&Math.abs(e-b/p)<.1||Math.abs(v[0].pts-b-_)<p/5)),n||(b=e*p),v.forEach(function(t){t.pts=m(t.pts-_,b),t.dts=m(t.dts-_,b)}),v.sort(function(t,e){var n=t.dts-e.dts,r=t.pts-e.pts;return n?n:r?r:t.id-e.id});var T=v.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(T<0){A.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var x=0;x<v.length;x++)v[x].dts+=T}var R=v[0];c=Math.max(R.dts,0),u=Math.max(R.pts,0);var O=Math.round((c-b)/90);n&&O&&(O>1?A.b.log("AVC:"+O+" ms hole between fragments detected,filling it"):O<-1&&A.b.log("AVC:"+-O+" ms overlapping between fragments detected"),c=b,v[0].dts=c,u=Math.max(u-O,b),v[0].pts=u,A.b.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(c/90)+",delta:"+O+" ms")),l=c,R=v[v.length-1],f=Math.max(R.dts,0),h=Math.max(R.pts,0,f),E&&(o=Math.round((f-c)/(v.length-1)));for(var C=0,P=0,M=0;M<y;M++){for(var L=v[M],k=L.units,I=k.length,D=0,F=0;F<I;F++)D+=k[F].data.length;P+=D,C+=I,L.length=D,E?L.dts=c+M*o:L.dts=Math.max(L.dts,c),L.pts=Math.max(L.pts,L.dts)}var N=P+4*C+8;try{a=new Uint8Array(N)}catch(U){return void this.observer.trigger(S.a.ERROR,{type:w.b.MUX_ERROR,details:w.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var j=new DataView(a.buffer);j.setUint32(0,N),a.set(q.types.mdat,4);for(var B=0;B<y;B++){for(var G=v[B],H=G.units,W=0,z=void 0,V=0,Y=H.length;V<Y;V++){var X=H[V],K=X.data,$=X.data.byteLength;j.setUint32(d,$),d+=4,a.set(K,d),d+=$,W+=4+$}if(E)z=Math.max(0,o*Math.round((G.pts-G.dts)/o));else{if(B<y-1)o=v[B+1].dts-G.dts;else{var J=this.config,Z=G.dts-v[B>0?B-1:B].dts;if(J.stretchShortVideoTrack){var Q=J.maxBufferHole,tt=J.maxSeekHole,et=Math.floor(Math.min(Q,tt)*p),nt=(r?u+r*p:this.nextAudioPts)-G.pts;nt>et?(o=nt-Z,o<0&&(o=Z),A.b.log("It is approximately "+nt/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=Z}else o=Z}z=Math.round(G.pts-G.dts)}g.push({size:W,duration:o,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=f+o;var rt=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,g.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var it=g[0].flags;it.dependsOn=2,it.isNonSync=0}t.samples=g,s=q.moof(t.sequenceNumber++,c,t),t.samples=[];var ot={data1:s,data2:a,startPTS:u/p,endPTS:(h+o)/p,startDTS:c/p,endDTS:this.nextAvcDts/p,type:"video",nb:g.length,dropped:rt};return this.observer.trigger(S.a.FRAG_PARSING_DATA,ot),ot},t.prototype.remuxAudio=function(t,e,n,r){var i,o,a,s,u,c,l,h=t.inputTimeScale,f=t.timescale,d=h/f,p=t.isAAC?1024:1152,v=p*d,g=this._PTSNormalize,y=this._initDTS,m=!t.isAAC&&this.typeSupported.mpeg,_=t.samples,b=[],E=this.nextAudioPts;if(n|=_.length&&E&&(r&&Math.abs(e-E/h)<.1||Math.abs(_[0].pts-E-y)<20*v),_.forEach(function(t){t.pts=t.dts=g(t.pts-y,e*h)}),_=_.filter(function(t){return t.pts>=0}),0!==_.length){if(n||(E=r?e*h:_[0].pts),t.isAAC)for(var T=this.config.maxAudioFramesDrift,x=0,R=E;x<_.length;){var O,C=_[x],P=C.pts;O=P-R;var M=Math.abs(1e3*O/h);if(O<=-T*v)A.b.warn("Dropping 1 audio frame @ "+(R/h).toFixed(3)+"s due to "+Math.round(M)+" ms overlap."),_.splice(x,1),t.len-=C.unit.length;else if(O>=T*v&&M<$&&R){var L=Math.round(O/v);A.b.warn("Injecting "+L+" audio frame @ "+(R/h).toFixed(3)+"s due to "+Math.round(1e3*O/h)+" ms gap.");for(var k=0;k<L;k++){var I=Math.max(R,0);a=Y.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=C.unit.subarray()),_.splice(x,0,{unit:a,pts:I,dts:I}),t.len+=a.length,R+=v,x++}C.pts=C.dts=R,R+=v,x++}else Math.abs(O)>.1*v,C.pts=C.dts=R,R+=v,x++}for(var D=0,F=_.length;D<F;D++){var N=_[D],U=N.unit,j=N.pts;if(void 0!==l)o.duration=Math.round((j-l)/d);else{var B=Math.round(1e3*(j-E)/h),G=0;if(n&&t.isAAC&&B){if(B>0&&B<$)G=Math.round((j-E)/v),A.b.log(B+" ms hole between AAC samples detected,filling it"),G>0&&(a=Y.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(a=U.subarray()),t.len+=G*a.length);else if(B<-12){A.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(E/h).toFixed(3)+"s/"+(j/h).toFixed(3)+"s/"+-B+"ms"),t.len-=U.byteLength;continue}j=E}if(c=j,!(t.len>0))return;var H=m?t.len:t.len+8;i=m?0:8;try{s=new Uint8Array(H)}catch(W){return void this.observer.trigger(S.a.ERROR,{type:w.b.MUX_ERROR,details:w.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}if(!m){var z=new DataView(s.buffer);z.setUint32(0,H),s.set(q.types.mdat,4)}for(var V=0;V<G;V++)a=Y.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),a||(A.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=U.subarray()),s.set(a,i),i+=a.byteLength,o={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(o)}s.set(U,i);var X=U.byteLength;i+=X,o={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},b.push(o),l=j}var K=0,J=b.length;if(J>=2&&(K=b[J-2].duration,o.duration=K),J){this.nextAudioPts=E=l+d*K,t.len=0,t.samples=b,u=m?new Uint8Array:q.moof(t.sequenceNumber++,c/d,t),t.samples=[];var Z=c/h,Q=E/h,tt={data1:u,data2:s,startPTS:Z,endPTS:Q,startDTS:Z,endDTS:Q,type:"audio",nb:J};return this.observer.trigger(S.a.FRAG_PARSING_DATA,tt),tt}return null}},t.prototype.remuxEmptyAudio=function(t,e,n,r){var i=t.inputTimeScale,o=t.samplerate?t.samplerate:i,a=i/o,s=this.nextAudioPts,u=(void 0!==s?s:r.startDTS*i)+this._initDTS,c=r.endDTS*i+this._initDTS,l=1024,h=a*l,f=Math.ceil((c-u)/h),d=Y.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(A.b.warn("remux empty Audio"),!d)return void A.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var p=[],v=0;v<f;v++){var g=u+v*h;p.push({unit:d,pts:g,dts:g}),t.len+=d.length}t.samples=p,this.remuxAudio(t,e,n)},t.prototype.remuxID3=function(t,e){var n,r=t.samples.length,i=t.inputTimeScale,o=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)n=t.samples[s],n.pts=(n.pts-o)/i,n.dts=(n.dts-a)/i;this.observer.trigger(S.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var n,r=t.samples.length,i=t.inputTimeScale,o=this._initPTS;if(r){for(var a=0;a<r;a++)n=t.samples[a],n.pts=(n.pts-o)/i;this.observer.trigger(S.a.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t},t}(),Z=J,Q=function(){function t(e){T(this,t),this.observer=e}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,n,r,i,o,a,s){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(S.a.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),u.trigger(S.a.FRAG_PARSED)},t}(),tt=Q,et=function(){function t(e,n,r,i){x(this,t),this.observer=e,this.typeSupported=n,this.config=r,this.vendor=i}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,n,r,i,o,a,s,u,c,l,h){if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var f=this.decrypter;null==f&&(f=this.decrypter=new R.a(this.observer,this.config));var d,p=this;try{d=performance.now()}catch(v){d=Date.now()}f.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var f;try{f=performance.now()}catch(v){f=Date.now()}p.observer.trigger(S.a.FRAG_DECRYPTED,{stats:{tstart:d,tdecrypt:f}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),r,i,o,a,s,u,c,l,h)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),r,i,o,a,s,u,c,l,h)},t.prototype.pushDecrypted=function(t,e,n,r,i,o,a,s,u,c,l,h){var f=this.demuxer;if(!f||a&&!this.probe(t)){for(var d=this.observer,p=this.typeSupported,v=this.config,g=[{demux:H,remux:Z},{demux:k,remux:tt},{demux:P,remux:Z},{demux:z,remux:Z}],y=0,m=g.length;y<m;y++){var _=g[y],b=_.demux.probe;if(b(t)){var E=this.remuxer=new _.remux(d,v,p,this.vendor);f=new _.demux(d,E,v,p),this.probe=b;break}}if(!f)return void d.trigger(S.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var T=this.remuxer;(a||s)&&(f.resetInitSegment(n,r,i,c),T.resetInitSegment()),a&&(f.resetTimeStamp(h),T.resetTimeStamp(h)),"function"==typeof f.setDecryptData&&f.setDecryptData(e),f.append(t,o,u,l)},t}();e.a=et},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=Gt[e];return!!n&&n[t.slice(0,4)]===!0}function a(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)return null;for(var n=null,r=0;r<t.length;r++){var i=t[r];i.id===e&&(n=i)}return n}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e,n){var r=t[e],i=t[n],o=i.startPTS;isNaN(o)?n>e?i.start=r.start+r.duration:i.start=Math.max(r.start-i.duration,0):n>e?(r.duration=o-r.start,r.duration<0&&kt.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&kt.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function b(t,e,n,r,i,o){var a=n;if(!isNaN(e.startPTS)){var s=Math.abs(e.startPTS-n);isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),a=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),r=Math.max(r,e.endPTS),i=Math.min(i,e.startDTS),o=Math.max(o,e.endDTS)}var u=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=a,e.endPTS=r,e.startDTS=i,e.endDTS=o,e.duration=r-n;var c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var l,h,f;for(l=c-t.startSN,h=t.fragments,h[l]=e,f=l;f>0;f--)_(h,f,f-1);for(f=l;f<h.length-1;f++)_(h,f,f+1);return t.PTSKnown=!0,u}function E(t,e){var n,r=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,o=e.startSN-t.startSN,a=t.fragments,s=e.fragments,u=0;if(i<r)return void(e.PTSKnown=!1);for(var c=r;c<=i;c++){var l=a[o+c],h=s[c];h&&l&&(u=l.cc-h.cc,isNaN(l.startPTS)||(h.start=h.startPTS=l.startPTS,h.endPTS=l.endPTS,h.duration=l.duration,h.backtracked=l.backtracked,h.dropped=l.dropped,n=h))}if(u)for(kt.b.log("discontinuity sliding from playlist, take drift into account"),c=0;c<s.length;c++)s[c].cc+=u;if(n)b(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(o>=0&&o<a.length){var f=a[o].start;for(c=0;c<s.length;c++)s[c].start+=f}e.PTSKnown=t.PTSKnown}function T(t,e){for(var n=null,r=0;r<t.length;r+=1){var i=t[r];if(i&&i.cc===e){n=i;break}}return n}function x(t,e){return ne.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function S(t,e,n){var r=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(r=!0),r}function w(t,e){var n=t.fragments,r=e.fragments;if(!r.length||!n.length)return void kt.b.log("No fragments to align");var i=T(n,r[0].cc);return!i||i&&!i.startPTS?void kt.b.log("No frag in previous level to align on"):i}function R(t,e){e.fragments.forEach(function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}),e.PTSKnown=!0}function A(t,e,n){if(S(t,e,n)){var r=w(e.details,n);r&&(kt.b.log("Adjusting PTS using last level due to CC increase within current level"),R(r.start,n))}if(n.PTSKnown===!1&&e&&e.details){var i=e.details.programDateTime,o=n.programDateTime,a=(o-i)/1e3+e.details.fragments[0].start;isNaN(a)||(kt.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),R(a,n))}}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function k(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function N(){var t=y(),e=window.SourceBuffer||window.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!r}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function H(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function W(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function V(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function K(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function J(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function it(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ot(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new $e,this.regionList=[]}function at(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+(0|r)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function st(){this.values=Object.create(null)}function ut(t,e,n,r){var i=r?t.split(r):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length){var s=a[0],u=a[1];e(s,u)}}}function ct(t,e,n){function r(){var e=at(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(t,e){var r=new st;ut(t,function(t,e){switch(t){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===e){r.set(t,n[i].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];r.integer(t,a),r.percent(t,a)&&r.set("snapToLines",!1),r.alt(t,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",Ze,"end"]);break;case"position":o=e.split(","),r.percent(t,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",Ze,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",Ze,"end","left","right"])}},/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&Je.line===-1&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",Ze);var o=r.get("position","auto");"auto"===o&&50===Je.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}function o(){t=t.replace(/^\s+/,"")}var a=t;if(o(),e.startTime=r(),o(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+a);t=t.substr(3),o(),e.endTime=r(),o(),i(t,e)}function lt(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function ht(t,e,n,r){for(var i,o,a,s,u,c=window.VTTCue||window.TextTrackCue,l=0;l<r.rows.length;l++)if(i=r.rows[l],a=!0,s=0,u="",!i.isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&a?s++:(u+=i.chars[h].uchar,a=!1);i.cueStartTime=e,e===n&&(n+=1e-4),o=new c(e,n,lt(u.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?o.line=l+1:o.line=l>7?l-2:l+1,o.align="left",o.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(o)}}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function yt(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}function mt(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function _t(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function xt(t){for(var e=[],n=0;n<t.length;n++)"subtitles"===t[n].kind&&e.push(t[n]);return e}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Rt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var Ot={};n.d(Ot,"newCue",function(){return ht});var Ct=n(6),Pt=n.n(Ct),Mt=n(1),Lt=n(2),kt=n(0),It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt=function(){function t(e){r(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.handledEvents=i,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.unregisterListeners()},t.prototype.isEventHandler=function(){return"object"===It(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(r){kt.b.error("internal error happened while processing "+t+":"+r.message),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.OTHER_ERROR,details:Lt.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:r})}},t}(),Ft=Dt,Nt=/^(\d+)x(\d+)$/,Ut=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,jt=function(){function t(e){i(this,t),"string"==typeof e&&(e=t.parseAttrList(e));for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return t.prototype.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},t.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},t.prototype.enumeratedString=function(t){return this[t]},t.prototype.decimalResolution=function(t){var e=Nt.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(Ut.lastIndex=0;null!==(e=Ut.exec(t));){var r=e[2],i='"';0===r.indexOf(i)&&r.lastIndexOf(i)===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}(),Bt=jt,Gt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Ht=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Wt=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,zt=/#EXT-X-MEDIA:(.*)/g,Vt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Yt=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,Xt=function(){function t(){c(this,t),this.method=null,this.key=null,this.iv=null,this._uri=null}return Ht(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Pt.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}(),Kt=function(){function t(){c(this,t),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return t.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},t.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&(n=new Xt,n.method=t.method,n.baseuri=t.baseuri,n.reluri=t.reluri,n.iv=this.createInitializationVector(e)),n},t.prototype.cloneObj=function(t){return JSON.parse(JSON.stringify(t))},Ht(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Pt.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var t=this._byteRange=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var n=this.lastByteRangeEndOffset;t[0]=n?n:0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),t}(),qt=function(t){function e(n){c(this,e);var r=s(this,t.call(this,n,Mt.a.MANIFEST_LOADING,Mt.a.LEVEL_LOADING,Mt.a.AUDIO_TRACK_LOADING,Mt.a.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return u(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Ft.prototype.destroy.call(this)},e.prototype.onManifestLoading=function(t){this.load(t.url,{type:"manifest"})},e.prototype.onLevelLoading=function(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},e.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:"audioTrack",id:t.id})},e.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},e.prototype.load=function(t,e){var n=this.loaders[e.type];if(void 0!==n){var r=n.context;if(r&&r.url===t)return void kt.b.trace("playlist request ongoing");kt.b.warn("abort previous loader for type:"+e.type),n.abort()}var i=this.hls.config,o=void 0,a=void 0,s=void 0,u=void 0;"manifest"===e.type?(o=i.manifestLoadingMaxRetry,a=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):"level"===e.type?(o=0,a=i.levelLoadingTimeOut):(o=i.levelLoadingMaxRetry,a=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,kt.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),n=this.loaders[e.type]=e.loader="undefined"!=typeof i.pLoader?new i.pLoader(i):new i.loader(i),e.url=t,e.responseType="";var c=void 0,l=void 0;c={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:u},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(e,c,l)},e.prototype.resolve=function(t,e){return Pt.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.prototype.parseMasterPlaylist=function(t,e){function n(t,e){["video","audio"].forEach(function(n){var r=t.filter(function(t){return o(t,n)});if(r.length){var i=r.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[n+"Codec"]=i.length>0?i[0]:r[0],t=t.filter(function(t){return r.indexOf(t)===-1})}}),e.unknownCodecs=t}var r=[],i=void 0;for(Wt.lastIndex=0;null!=(i=Wt.exec(t));){var a={},s=a.attrs=new Bt(i[1]);a.url=this.resolve(i[2],e);var u=s.decimalResolution("RESOLUTION");u&&(a.width=u.width,a.height=u.height),a.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),a.name=s.NAME,n([].concat((s.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&a.videoCodec.indexOf("avc1")!==-1&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),r.push(a)}return r},e.prototype.parseMasterPlaylistMedia=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=void 0,o=[],a=0;for(zt.lastIndex=0;null!==(i=zt.exec(t));){var s={},u=new Bt(i[1]);if(u.TYPE===n){if(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=n,s["default"]="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URI,e)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),r.length){var c=l(r,s.groupId);s.audioCodec=c?c.codec:r[0].codec}s.id=a++,o.push(s)}}return o},e.prototype.avc1toavcoti=function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},e.prototype.parseLevelPlaylist=function(t,e,n,r){var i,o,a=0,s=0,u={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},c=new Xt,l=0,h=null,f=new Kt;for(Vt.lastIndex=0;null!==(i=Vt.exec(t));){var d=i[1];if(d){f.duration=parseFloat(d);var p=(" "+i[2]).slice(1);f.title=p?p:null,f.tagList.push(p?["INF",d,p]:["INF",d])}else if(i[3]){if(!isNaN(f.duration)){var v=a++;f.type=r,f.start=s,f.levelkey=c,f.sn=v,f.level=n,f.cc=l,f.baseurl=e,f.relurl=(" "+i[3]).slice(1),u.fragments.push(f),h=f,s+=f.duration,f=new Kt}}else if(i[4]){if(f.rawByteRange=(" "+i[4]).slice(1),h){var g=h.byteRangeEndOffset;g&&(f.lastByteRangeEndOffset=g)}}else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(i[5]))-1e3*s));else{for(i=i[0].match(Yt),o=1;o<i.length&&void 0===i[o];o++);var y=(" "+i[o+1]).slice(1),m=(" "+i[o+2]).slice(1);switch(i[o]){case"#":f.tagList.push(m?[y,m]:[y]);break;case"PLAYLIST-TYPE":u.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":a=u.startSN=parseInt(y);break;case"TARGETDURATION":u.targetduration=parseFloat(y);break;case"VERSION":u.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":l++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":l=parseInt(y);break;case"KEY":var _=y,b=new Bt(_),E=b.enumeratedString("METHOD"),T=b.URI,x=b.hexadecimalInteger("IV");E&&(c=new Xt,T&&["AES-128","SAMPLE-AES"].indexOf(E)>=0&&(c.method=E,c.baseuri=e,c.reluri=T,c.key=null,c.iv=x));break;case"START":var S=y,w=new Bt(S),R=w.decimalFloatingPoint("TIME-OFFSET");isNaN(R)||(u.startTimeOffset=R);break;case"MAP":var A=new Bt(y);f.relurl=A.URI,f.rawByteRange=A.BYTERANGE,f.baseurl=e,f.level=n,f.type=r,f.sn="initSegment",u.initSegment=f,f=new Kt;break;default:kt.b.warn("line parsed but not handled: "+i)}}}return f=h,f&&!f.relurl&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=a-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=l,u},e.prototype.loadsuccess=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.data,o=t.url,a=n.type,s=n.id,u=n.level,c=this.hls;if(this.loaders[a]=void 0,void 0!==o&&0!==o.indexOf("data:")||(o=n.url),e.tload=performance.now(),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0){var l="audioTrack"!==a&&"subtitleTrack"!==a,h=isNaN(u)?isNaN(s)?0:s:u,f=this.parseLevelPlaylist(i,o,h,"audioTrack"===a?"audio":"subtitleTrack"===a?"subtitle":"main");f.tload=e.tload,"manifest"===a&&c.trigger(Mt.a.MANIFEST_LOADED,{levels:[{url:o,details:f}],audioTracks:[],url:o,stats:e,networkDetails:r}),e.tparsed=performance.now(),f.targetduration?l?c.trigger(Mt.a.LEVEL_LOADED,{details:f,level:u||0,id:s||0,stats:e,networkDetails:r}):"audioTrack"===a?c.trigger(Mt.a.AUDIO_TRACK_LOADED,{details:f,id:s,stats:e,networkDetails:r}):"subtitleTrack"===a&&c.trigger(Mt.a.SUBTITLE_TRACK_LOADED,{details:f,id:s,stats:e,networkDetails:r}):c.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:r})}else{var d=this.parseMasterPlaylist(i,o);if(d.length){var p=d.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),v=this.parseMasterPlaylistMedia(i,o,"AUDIO",p),g=this.parseMasterPlaylistMedia(i,o,"SUBTITLES");if(v.length){var y=!1;v.forEach(function(t){t.url||(y=!0)}),y===!1&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(kt.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main"}))}c.trigger(Mt.a.MANIFEST_LOADED,{levels:d,audioTracks:v,subtitles:g,url:o,stats:e,networkDetails:r})}else c.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:r})}else c.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:r})},e.prototype.loaderror=function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":n=Lt.a.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=Lt.a.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=Lt.a.AUDIO_TRACK_LOAD_ERROR,r=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:n,fatal:r,url:o.url,loader:o,response:t,context:e,networkDetails:i})},e.prototype.loadtimeout=function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=e.loader;switch(e.type){case"manifest":n=Lt.a.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=Lt.a.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=Lt.a.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}o&&(o.abort(),this.loaders[e.type]=void 0),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:n,fatal:r,url:o.url,loader:o,context:e,networkDetails:i})},e}(Ft),$t=qt,Jt=function(t){function e(n){h(this,e);var r=f(this,t.call(this,n,Mt.a.FRAG_LOADING));return r.loaders={},r}return d(e,t),e.prototype.destroy=function(){var t=this.loaders;for(var e in t){var n=t[e];n&&n.destroy()}this.loaders={},Ft.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag,n=e.type,r=this.loaders[n],i=this.hls.config;e.loaded=0,r&&(kt.b.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=e.loader="undefined"!=typeof i.fLoader?new i.fLoader(i):new i.loader(i);var o=void 0,a=void 0,s=void 0;o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var u=e.byteRangeStartOffset,c=e.byteRangeEndOffset;isNaN(u)||isNaN(c)||(o.rangeStart=u,o.rangeEnd=c),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},r.load(o,a,s)},e.prototype.loadsuccess=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(Mt.a.FRAG_LOADED,{payload:i,frag:o,stats:e,networkDetails:r})},e.prototype.loaderror=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},e.prototype.loadtimeout=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},e.prototype.loadprogress=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.frag;i.loaded=t.loaded,this.hls.trigger(Mt.a.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:r})},e}(Ft),Zt=Jt,Qt=function(t){function e(n){p(this,e);var r=v(this,t.call(this,n,Mt.a.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return g(e,t),e.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},Ft.prototype.destroy.call(this)},e.prototype.onKeyLoading=function(t){var e=t.frag,n=e.type,r=this.loaders[n],i=e.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;r&&(kt.b.warn("abort previous key loader for type:"+n),r.abort()),e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,u=void 0,c=void 0;s={url:o,frag:e,responseType:"arraybuffer"},u={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,u,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(Mt.a.KEY_LOADED,{frag:e}))},e.prototype.loadsuccess=function(t,e,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(Mt.a.KEY_LOADED,{frag:r})},e.prototype.loaderror=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},e.prototype.loadtimeout=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),this.loaders[e.type]=void 0,this.hls.trigger(Mt.a.ERROR,{type:Lt.b.NETWORK_ERROR,details:Lt.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(Ft),te=Qt,ee={search:function(t,e){for(var n=0,r=t.length-1,i=null,o=null;n<=r;){i=(n+r)/2|0,o=t[i];var a=e(o);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}},ne=ee,re={isBuffered:function(t,e){try{if(t)for(var n=t.buffered,r=0;r<n.length;r++)if(e>=n.start(r)&&e<=n.end(r))return!0}catch(i){}return!1},bufferInfo:function(t,e,n){try{if(t){var r,i=t.buffered,o=[];for(r=0;r<i.length;r++)o.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(o,e,n)}}catch(a){}return{len:0,start:e,end:e,nextStart:void 0}},bufferedInfo:function(t,e,n){var r,i,o,a,s,u=[];for(t.sort(function(t,e){var n=t.start-e.start;return n?n:e.end-t.end}),s=0;s<t.length;s++){var c=u.length;if(c){var l=u[c-1].end;t[s].start-l<n?t[s].end>l&&(u[c-1].end=t[s].end):u.push(t[s])}else u.push(t[s])}for(s=0,r=0,i=o=e;s<u.length;s++){var h=u[s].start,f=u[s].end;if(e+n>=h&&e<f)i=h,o=f,r=o-e;else if(e+n<h){a=h;break}}return{len:r,start:i,end:o,nextStart:a}}},ie=re,oe=n(7),ae=n(5),se=n.n(ae),ue=n(9),ce=n.n(ue),le=y(),he=function(){function t(e,n){m(this,t),this.hls=e,this.id=n;var r=this.observer=new se.a,i=e.config;r.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.emit.apply(r,[t,t].concat(n))},r.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];r.removeListener.apply(r,[t].concat(n))};var o=function(t,n){n=n||{},n.frag=this.frag,n.id=this.id,e.trigger(t,n)}.bind(this);r.on(Mt.a.FRAG_DECRYPTED,o),r.on(Mt.a.FRAG_PARSING_INIT_SEGMENT,o),r.on(Mt.a.FRAG_PARSING_DATA,o),r.on(Mt.a.FRAG_PARSED,o),r.on(Mt.a.ERROR,o),r.on(Mt.a.FRAG_PARSING_METADATA,o),r.on(Mt.a.FRAG_PARSING_USERDATA,o),r.on(Mt.a.INIT_PTS_FOUND,o);var a={mp4:le.isTypeSupported("video/mp4"),mpeg:le.isTypeSupported("audio/mpeg"),mp3:le.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){kt.b.log("demuxing in webworker");var u=void 0;try{u=this.w=ce()(10),this.onwmsg=this.onWorkerMessage.bind(this),u.addEventListener("message",this.onwmsg),u.onerror=function(t){e.trigger(Mt.a.ERROR,{type:Lt.b.OTHER_ERROR,details:Lt.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},u.postMessage({cmd:"init",typeSupported:a,vendor:s,id:n,config:JSON.stringify(i)})}catch(c){kt.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),u&&URL.revokeObjectURL(u.objectURL),this.demuxer=new oe.a(r,a,i,s),this.w=void 0}}else this.demuxer=new oe.a(r,a,i,s)}return t.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,e,n,r,i,o,a,s){var u=this.w,c=isNaN(i.startDTS)?i.start:i.startDTS,l=i.decryptdata,h=this.frag,f=!(h&&i.cc===h.cc),d=!(h&&i.level===h.level),p=h&&i.sn===h.sn+1,v=!d&&p;if(f&&kt.b.log(this.id+":discontinuity detected"),d&&kt.b.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:t,decryptdata:l,initSegment:e,audioCodec:n,videoCodec:r,timeOffset:c,discontinuity:f,trackSwitch:d,contiguous:v,duration:o,accurateTimeOffset:a,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var g=this.demuxer;g&&g.push(t,l,e,n,r,c,f,d,v,o,a,s)}},t.prototype.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case Mt.a.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}(),fe=he,de={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}},pe=de,ve=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ge={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},ye=function(t){function e(n){O(this,e);var r=C(this,t.call(this,n,Mt.a.MEDIA_ATTACHED,Mt.a.MEDIA_DETACHING,Mt.a.MANIFEST_LOADING,Mt.a.MANIFEST_PARSED,Mt.a.LEVEL_LOADED,Mt.a.KEY_LOADED,Mt.a.FRAG_LOADED,Mt.a.FRAG_LOAD_EMERGENCY_ABORTED,Mt.a.FRAG_PARSING_INIT_SEGMENT,Mt.a.FRAG_PARSING_DATA,Mt.a.FRAG_PARSED,Mt.a.ERROR,Mt.a.AUDIO_TRACK_SWITCHING,Mt.a.AUDIO_TRACK_SWITCHED,Mt.a.BUFFER_CREATED,Mt.a.BUFFER_APPENDED,Mt.a.BUFFER_FLUSHED));return r.config=n.config,r.audioCodecSwap=!1,r.ticks=0,r._state=ge.STOPPED,r.ontick=r.tick.bind(r),r}return P(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Ft.prototype.destroy.call(this),this.state=ge.STOPPED},e.prototype.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;r===-1&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}e>0&&t===-1&&(kt.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=ge.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=ge.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ge.STOPPED,this.forceStartLoad=!1},e.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){switch(this.state){case ge.ERROR:break;case ge.BUFFER_FLUSHING:this.fragLoadError=0;break;case ge.IDLE:this._doTickIdle();break;case ge.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=ge.IDLE);break;case ge.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),n=this.retryDate;(!n||e>=n||this.media&&this.media.seeking)&&(kt.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ge.IDLE);break;case ge.ERROR:case ge.STOPPED:case ge.FRAG_LOADING:case ge.PARSING:case ge.PARSED:case ge.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},e.prototype._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,o=this.levels[i];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*e.maxBufferSize/a,e.maxBufferLength):e.maxBufferLength,s=Math.min(s,e.maxMaxBufferLength);var u=ie.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,e.maxBufferHole),c=u.len;if(!(c>=s)){kt.b.trace("buffer length of "+c.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var l=o.details;if(void 0===l||l.live===!0&&this.levelLastLoaded!==i)return void(this.state=ge.WAITING_LEVEL);var h=this.fragPrevious;if(!l.live&&h&&!h.backtracked&&h.sn===l.endSN&&!u.nextStart){var f=Math.min(n.duration,h.start+h.duration);if(f-Math.max(u.end,h.start)<=Math.max(.2,h.duration)){var d={};return this.altAudio&&(d.type="video"),this.hls.trigger(Mt.a.BUFFER_EOS,d),void(this.state=ge.ENDED)}}this._fetchPayloadOrEos(r,u,l)}}}},e.prototype._fetchPayloadOrEos=function(t,e,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s=o[0].start,u=o[a-1].start+o[a-1].duration,c=e.end,l=void 0;if(n.initSegment&&!n.initSegment.data)l=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(a<h)return void kt.b.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+h);if(l=this._ensureFragmentAtLivePoint(n,c,s,u,r,o,a),null===l)return}else c<s&&(l=o[0]);l||(l=this._findFragment(s,r,a,o,c,u,n)),l&&this._loadFragmentOrKey(l,i,n,t,c)}},e.prototype._ensureFragmentAtLivePoint=function(t,e,n,r,i,o,a){var s=this.hls.config,u=this.media,c=void 0,l=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-s.maxFragLookUpTolerance,r-l)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);kt.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),e=h,u&&u.readyState&&u.duration>h&&(u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>r&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(i){var f=i.sn+1;if(f>=t.startSN&&f<=t.endSN){var d=o[f-t.startSN];i.cc===d.cc&&(c=d,kt.b.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=ne.search(o,function(t){return i.cc-t.cc}),c&&kt.b.log("live playlist, switching playlist, load frag with same CC: "+c.sn))}c||(c=o[Math.min(a-1,Math.round(a/2))],kt.b.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c},e.prototype._findFragment=function(t,e,n,r,i,o,a){var s=this.hls.config,u=void 0,c=void 0,l=s.maxFragLookUpTolerance,h=e?r[e.sn-r[0].sn+1]:void 0,f=function(t){var e=Math.min(l,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-e<=i?1:t.start-e>i&&t.start?-1:0};if(i<o?(i>o-l&&(l=0),c=h&&!f(h)?h:ne.search(r,f)):c=r[n-1],c){u=c;var d=u.sn-a.startSN,p=e&&u.level===e.level,v=r[d-1],g=r[d+1];if(e&&u.sn===e.sn)if(p&&!u.backtracked)if(u.sn<a.endSN){var y=e.deltaPTS;y&&y>s.maxBufferHole&&e.dropped&&d?(u=v,kt.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):(u=g,kt.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(g&&g.backtracked?(kt.b.warn("Already backtracked from fragment "+g.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+g.sn),u=g):(kt.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,v?(v.loadCounter&&v.loadCounter--,u=v,u.backtracked=!0):d&&(u=null)))}return u},e.prototype._loadFragmentOrKey=function(t,e,n,r,i){var o=this.hls,a=o.config;if(!t.decryptdata||null==t.decryptdata.uri||null!=t.decryptdata.key){if(kt.b.log("Loading "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;var s=a.fragLoadingLoopThreshold;if(t.loadCounter>s&&Math.abs(this.fragLoadIdx-t.loadIdx)<s)return void o.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;return t.loadIdx=this.fragLoadIdx,t.autoLevel=o.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),o.trigger(Mt.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new fe(o,"main")),void(this.state=ge.FRAG_LOADING)}kt.b.log("Loading key for "+t.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=ge.KEY_LOADING,o.trigger(Mt.a.KEY_LOADING,{frag:t})},e.prototype.getBufferedFrag=function(t){return ne.search(this._bufferedFrags,function(e){return t<e.startPTS?-1:t>e.endPTS?1:0})},e.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},e.prototype._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&n.seeking===!1&&(e=n.currentTime,e>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),ie.isBuffered(n,e)?t=this.getBufferedFrag(e):ie.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var r=t;if(r!==this.fragPlaying){this.hls.trigger(Mt.a.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(Mt.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},e.prototype.immediateLevelSwitch=function(){if(kt.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,e=void 0;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,ie.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},e.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,r=void 0;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),n=this.getBufferedFrag(t.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;e=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if(r=this.getBufferedFrag(t.currentTime+e),r&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},e.prototype.flushMainBuffer=function(t,e){this.state=ge.BUFFER_FLUSHING;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(Mt.a.BUFFER_FLUSHING,n)},e.prototype.onMediaAttached=function(t){
var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(kt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0,t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,n=this.config;isNaN(e)||kt.b.log("media seeking to "+e.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:t,i=ie.bufferInfo(r,e,this.config.maxBufferHole);if(this.state===ge.FRAG_LOADING){var o=this.fragCurrent;if(0===i.len&&o){var a=n.maxFragLookUpTolerance,s=o.start-a,u=o.start+o.duration+a;e<s||e>u?(o.loader&&(kt.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ge.IDLE):kt.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ge.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=ge.IDLE);t&&(this.lastCurrentTime=e),this.state!==ge.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=e),this.tick()},e.prototype.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;isNaN(e)||kt.b.log("media seeked to "+e.toFixed(3)),this.tick()},e.prototype.onMediaEnded=function(){kt.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestLoading=function(){kt.b.log("trigger BUFFER_RESET"),this.hls.trigger(Mt.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},e.prototype.onManifestParsed=function(t){var e,n=!1,r=!1;t.levels.forEach(function(t){e=t.audioCodec,e&&(e.indexOf("mp4a.40.2")!==-1&&(n=!0),e.indexOf("mp4a.40.5")!==-1&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&kt.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},e.prototype.onLevelLoaded=function(t){var e=t.details,n=t.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],o=e.totalduration,a=0;if(kt.b.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+o),e.live){var s=i.details;s&&e.fragments.length>0?(E(s,e),a=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,s),e.PTSKnown&&!isNaN(a)?kt.b.log("live playlist sliding:"+a.toFixed(3)):(kt.b.log("live playlist - outdated PTS, unknown sliding"),A(this.fragPrevious,r,e))):(kt.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,A(this.fragPrevious,r,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=n,this.hls.trigger(Mt.a.LEVEL_UPDATED,{details:e,level:n}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var u=e.startTimeOffset;isNaN(u)?e.live?(this.startPosition=this.computeLivePosition(a,e),kt.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(kt.b.log("negative start time offset "+u+", count from end of last fragment"),u=a+o+u),kt.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ge.WAITING_LEVEL&&(this.state=ge.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===ge.KEY_LOADING&&(this.state=ge.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===ge.FRAG_LOADING&&e&&"main"===n.type&&n.level===e.level&&n.sn===e.sn){var r=t.stats,i=this.levels[e.level],o=i.details;if(kt.b.log("Loaded  "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),this.bitrateTest=!1,this.stats=r,n.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=ge.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(Mt.a.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=ge.IDLE,r.tparsed=r.tbuffered=performance.now(),o.initSegment.data=t.payload,this.hls.trigger(Mt.a.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.tick();else{this.state=ge.PARSING;var a=o.totalduration,s=e.level,u=e.sn,c=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(kt.b.log("swapping playlist audio codec"),void 0===c&&(c=this.lastAudioCodec),c&&(c=c.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,kt.b.log("Parsing "+u+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+e.cc);var l=this.demuxer;l||(l=this.demuxer=new fe(this.hls,"main"));var h=this.media,f=h&&h.seeking,d=!f&&(o.PTSKnown||!o.live),p=o.initSegment?o.initSegment.data:[];l.push(t.payload,p,c,i.videoCodec,e,a,d,void 0)}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ge.PARSING){var r,i,o=t.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(kt.b.log("swapping playlist audio codec"),a=a.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&s.indexOf("firefox")===-1&&(a="mp4a.40.5"),s.indexOf("android")!==-1&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",kt.b.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=t.id}i=o.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(Mt.a.BUFFER_CODECS,o);for(r in o){i=o[r],kt.b.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Mt.a.BUFFER_APPENDING,{type:r,data:u,parent:"main",content:"initSegment"}))}this.tick()}},e.prototype.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"main"===t.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===ge.PARSING){var i=this.levels[this.level],o=n;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),kt.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(o.dropped=t.dropped,o.dropped)if(o.backtracked)kt.b.warn("Already backtracked on this fragment, appending with the gap");else{var a=i.details;if(!a||o.sn!==a.startSN)return kt.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=ge.IDLE,this.fragPrevious=o,void this.tick();kt.b.warn("missing video frame(s) on first frag, appending with gap")}else o.backtracked=!1;var s=b(i.details,o,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(Mt.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(n){n&&n.length&&e.state===ge.PARSING&&(e.appended=!0,e.pendingBuffering=!0,u.trigger(Mt.a.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))}),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===ge.PARSING&&(this.stats.tparsed=performance.now(),this.state=ge.PARSED,this._checkAppendedParsed())},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){kt.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(kt.b.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ge.IDLE}var i=this.hls;i.trigger(Mt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(Mt.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},e.prototype.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(kt.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},e.prototype.onBufferCreated=function(t){var e=t.tracks,n=void 0,r=void 0,i=!1;for(var o in e){var a=e[o];"main"===a.id?(r=o,n=a,"video"===o&&(this.videoBuffer=e[o].buffer)):i=!0}i&&n?(kt.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},e.prototype.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==ge.PARSING&&e!==ge.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==ge.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;kt.b.log("main buffered : "+pe.toString(e.buffered));var n=this._bufferedFrags.filter(function(t){return ie.isBuffered(e,(t.startPTS+t.endPTS)/2)});n.push(t),this._bufferedFrags=n.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t;var r=this.stats;r.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(Mt.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.state=ge.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&ie.isBuffered(this.media,this.media.currentTime)&&ie.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case Lt.a.FRAG_LOAD_ERROR:case Lt.a.FRAG_LOAD_TIMEOUT:case Lt.a.KEY_LOAD_ERROR:case Lt.a.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);e.loadCounter=0,kt.b.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ge.FRAG_LOADING_WAITING_RETRY}else kt.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=ge.ERROR;break;case Lt.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(n?(this._reduceMaxBufferLength(e.duration),this.state=ge.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=ge.ERROR));break;case Lt.a.LEVEL_LOAD_ERROR:case Lt.a.LEVEL_LOAD_TIMEOUT:this.state!==ge.ERROR&&(t.fatal?(this.state=ge.ERROR,kt.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==ge.WAITING_LEVEL||(this.state=ge.IDLE));break;case Lt.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==ge.PARSING&&this.state!==ge.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ge.IDLE):(kt.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},e.prototype._reduceMaxBufferLength=function(t){var e=this.config;e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,kt.b.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},e.prototype._checkBuffer=function(){var t=this.media,e=this.config;if(t&&t.readyState){var n=t.currentTime,r=this.mediaBuffer?this.mediaBuffer:t,i=r.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var o=t.seeking?n:this.startPosition,a=ie.isBuffered(r,o),s=i.start(0),u=!a&&Math.abs(o-s)<e.maxSeekHole;(n!==o||u)&&(kt.b.log("target start position:"+o),u&&(o=s,kt.b.log("target start position not buffered, seek to buffered.start(0) "+o)),kt.b.log("adjust currentTime from "+n+" to "+o),t.currentTime=o)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=ie.bufferInfo(t,n,0),l=!(t.paused||t.ended||0===t.buffered.length),h=.5,f=n!==this.lastCurrentTime;if(f)this.stallReported&&(kt.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(l){var d=performance.now(),p=this.hls;if(this.stalled){var v=d-this.stalled,g=c.len,y=this.nudgeRetry||0;if(g<=h&&v>1e3*e.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,kt.b.warn("playback stalling in low buffer @"+n),p.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var m=c.nextStart,_=m-n;if(m&&_<e.maxSeekHole&&_>0){this.nudgeRetry=++y;var b=y*e.nudgeOffset;kt.b.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+m+" + nudge "+b),t.currentTime=m+b,this.stalled=void 0,p.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+b-n})}}else if(g>h&&v>1e3*e.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,kt.b.warn("playback stalling in high buffer @"+n),p.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++y,y<e.nudgeMaxRetry){var E=t.currentTime,T=E+y*e.nudgeOffset;kt.b.log("adjust currentTime from "+E+" to "+T),t.currentTime=T,p.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else kt.b.error("still stuck in high buffer @"+n+" after "+e.nudgeMaxRetry+", raise fatal error"),p.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=d,this.stallReported=!1}}}},e.prototype.onFragLoadEmergencyAborted=function(){this.state=ge.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},e.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(e){return ie.isBuffered(t,(e.startPTS+e.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=ge.IDLE,this.fragPrevious=null},e.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.prototype.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},ve(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,kt.b.log("main stream:"+e+"->"+t),this.hls.trigger(Mt.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(Ft),me=ye,_e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),be=function(t){function e(n){M(this,e);var r=L(this,t.call(this,n,Mt.a.MANIFEST_LOADED,Mt.a.LEVEL_LOADED,Mt.a.FRAG_LOADED,Mt.a.ERROR));return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return k(e,t),e.prototype.destroy=function(){this.cleanTimer(),this.manualLevelIndex=-1},e.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e=[],n=void 0,r={},i=null,o=!1,s=!1,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),u===!0&&t.audioCodec&&t.audioCodec.indexOf("mp4a.40.34")!==-1&&(t.audioCodec=void 0),i=r[t.bitrate],void 0===i?(t.url=[t.url],t.urlId=0,r[t.bitrate]=t,e.push(t)):i.url.push(t.url)}),o===!0&&s===!0&&(e=e.filter(function(t){var e=t.videoCodec;return!!e})),e=e.filter(function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||a(e))&&(!n||a(n))}),t.audioTracks&&(c=t.audioTracks.filter(function(t){return!t.audioCodec||a(t.audioCodec,"audio")})),e.length>0){n=e[0].bitrate,e.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=e;for(var l=0;l<e.length;l++)if(e[l].bitrate===n){this._firstLevel=l,kt.b.log("manifest loaded,"+e.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(Mt.a.MANIFEST_PARSED,{levels:e,audioTracks:c,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:c.length>0})}else this.hls.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},e.prototype.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(t>=0&&t<e.length){if(this.cleanTimer(),this.currentLevelIndex!==t){kt.b.log("switching to level "+t),this.currentLevelIndex=t;var r=e[t];r.level=t,n.trigger(Mt.a.LEVEL_SWITCH,r),n.trigger(Mt.a.LEVEL_SWITCHING,r)}var i=e[t],o=i.details;if(!o||o.live===!0){var a=i.urlId;n.trigger(Mt.a.LEVEL_LOADING,{url:i.url[a],level:t,id:a})}}else n.trigger(Mt.a.ERROR,{type:Lt.b.OTHER_ERROR,details:Lt.a.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},e.prototype.onError=function(t){if(t.fatal===!0)return void(t.type===Lt.b.NETWORK_ERROR&&this.cleanTimer());var e=!1,n=!1,r=void 0;switch(t.details){case Lt.a.FRAG_LOAD_ERROR:case Lt.a.FRAG_LOAD_TIMEOUT:case Lt.a.FRAG_LOOP_LOADING_ERROR:case Lt.a.KEY_LOAD_ERROR:case Lt.a.KEY_LOAD_TIMEOUT:r=t.frag.level,n=!0;break;case Lt.a.LEVEL_LOAD_ERROR:case Lt.a.LEVEL_LOAD_TIMEOUT:r=t.context.level,e=!0;break;case Lt.a.REMUX_ALLOC_ERROR:r=t.level,e=!0}void 0!==r&&this.recoverLevel(t,r,e,n)},e.prototype.recoverLevel=function(t,e,n,r){var i=this,o=this.hls.config,a=t.details,s=this._levels[e],u=void 0,c=void 0,l=void 0;if(s.loadError++,s.fragmentError=r,n===!0){if(!(this.levelRetryCount+1<=o.levelLoadingMaxRetry))return kt.b.error("level controller, cannot recover from "+a+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*o.levelLoadingRetryDelay,o.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},c),t.levelRetry=!0,this.levelRetryCount++,kt.b.warn("level controller, "+a+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}n!==!0&&r!==!0||(u=s.url.length,u>1&&s.loadError<u?(kt.b.warn("level controller, "+a+" for level "+e+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%u,s.details=void 0):this.manualLevelIndex===-1?(l=0===e?this._levels.length-1:e-1,kt.b.warn("level controller, "+a+": switch to "+l),this.hls.nextAutoLevel=this.currentLevelIndex=l):r===!0&&(kt.b.warn("level controller, "+a+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,n=t.level;if(n===this.currentLevelIndex){var r=this._levels[n];r.fragmentError===!1&&(r.loadError=0,this.levelRetryCount=0);var i=t.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=r.details;a&&i.endSN===a.endSN&&(o/=2,kt.b.log("same live playlist, reload twice faster")),o-=performance.now()-t.stats.trequest,o=Math.max(1e3,Math.round(o)),kt.b.log("live playlist, reload in "+o+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},o)}else this.cleanTimer()}},e.prototype.loadLevel=function(){var t=void 0,e=void 0;null!==this.currentLevelIndex&&this.canload===!0&&(t=this._levels[this.currentLevelIndex],void 0!==t&&t.url.length>0&&(e=t.urlId,this.hls.trigger(Mt.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e})))},_e(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}]),e}(Ft),Ee=be,Te=n(3),xe=function(t){function e(n){I(this,e);var r=D(this,t.call(this,n,Mt.a.MEDIA_ATTACHED,Mt.a.MEDIA_DETACHING,Mt.a.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return F(e,t),e.prototype.destroy=function(){Ft.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,!this.media},e.prototype.onMediaDetaching=function(){this.media=void 0},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=Te.a.getID3Frames(n[i].data);if(o){var a=n[i].pts,s=i<n.length-1?n[i+1].pts:e.endPTS;a===s&&(s+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!Te.a.isTimeStampFrame(c)){var l=new r(a,s,"");l.value=c,this.id3Track.addCue(l)}}}}},e}(Ft),Se=xe,we=function(){function t(e){U(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Re=we,Ae=function(){function t(e,n,r,i){j(this,t),this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Re(n),this.fast_=new Re(r)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var n=8e3*e/t,r=t/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}(),Oe=Ae,Ce=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Pe=function(t){function e(n){B(this,e);var r=G(this,t.call(this,n,Mt.a.FRAG_LOADING,Mt.a.FRAG_LOADED,Mt.a.FRAG_BUFFERED,Mt.a.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=n,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return H(e,t),e.prototype.destroy=function(){this.clearTimer(),Ft.prototype.destroy.call(this)},e.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=t.frag.level,i=n.levels[r].details.live,o=n.config,a=void 0,s=void 0;i?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new Oe(n,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=e}},e.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent,r=n.loader,i=t.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return kt.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var o=r.stats;if(e&&o&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var a=performance.now()-o.trequest,s=Math.abs(e.playbackRate);if(a>500*n.duration/s){var u=t.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),l=u[n.level],h=l.realBitrate?Math.max(l.realBitrate,l.bitrate):l.bitrate,f=o.total?o.total:Math.max(o.loaded,Math.round(n.duration*h/8)),d=e.currentTime,p=(f-o.loaded)/c,v=(ie.bufferInfo(e,d,t.config.maxBufferHole).end-d)/s;if(v<2*n.duration/s&&p>v){var g=void 0,y=void 0;for(y=n.level-1;y>i;y--){var m=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if(g=n.duration*m/(6.4*c),g<v)break}g<p&&(kt.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+g.toFixed(1)+"<"+p.toFixed(1)+":"+v.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(a,o.loaded),r.abort(),this.clearTimer(),t.trigger(Mt.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:o}))}}}},e.prototype.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&!isNaN(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],r=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,i=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(t.frag.bitrateTest){var o=t.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(t)}}},e.prototype.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!(e.aborted===!0||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&e.tload!==e.tbuffered)){var r=e.tparsed-e.trequest;kt.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(r,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},e.prototype.onError=function(t){switch(t.details){case Lt.a.FRAG_LOAD_ERROR:case Lt.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},e.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},e.prototype._findBestLevel=function(t,e,n,r,i,o,a,s,u){for(var c=i;c>=r;c--){var l=u[c],h=l.details,f=h?h.totalduration/h.fragments.length:e,d=!!h&&h.live,p=void 0;p=c<=t?a*n:s*n;var v=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,g=v*f/p;if(kt.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(p)+"/"+v+"/"+f+"/"+o+"/"+g),p>v&&(!g||d&&!this.bitrateTestDelay||g<o))return c}return-1},Ce(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(t===-1||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return t!==-1&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,r=t.config,i=t.minAutoLevel,o=t.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,l=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=(ie.bufferInfo(o,u,r.maxBufferHole).end-u)/c,f=this._findBestLevel(a,s,l,i,e,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;kt.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var d=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===h){var g=this.bitrateTestDelay;if(g){var y=s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay;d=y-g,kt.b.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*d)+" ms"),p=v=1}}return f=this._findBestLevel(a,s,l,i,e,h+d,p,v,n),Math.max(f,0)}}]),e}(Ft),Me=Pe,Le=y(),ke=function(t){function e(n){W(this,e);var r=z(this,t.call(this,n,Mt.a.MEDIA_ATTACHING,Mt.a.MEDIA_DETACHING,Mt.a.MANIFEST_PARSED,Mt.a.BUFFER_RESET,Mt.a.BUFFER_APPENDING,Mt.a.BUFFER_CODECS,Mt.a.BUFFER_EOS,Mt.a.BUFFER_FLUSHING,Mt.a.LEVEL_PTS_UPDATED,Mt.a.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return V(e,t),e.prototype.destroy=function(){Ft.prototype.destroy.call(this)},e.prototype.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio,i=Math.abs(r.timestampOffset-t.start);if(i>.1){var o=r.updating;try{r.abort()}catch(a){o=!0,kt.b.warn("can not abort audio buffer: "+a)}o?this.audioTimestampOffset=t.start:(kt.b.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},e.prototype.onManifestParsed=function(t){var e=t.audio,n=t.video||t.levels.length&&t.audio,r=0;t.altAudio&&(e||n)&&(r=(e?1:0)+(n?1:0),kt.b.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r},e.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new Le;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n),this._objectUrl=e.src}},e.prototype.onMediaDetaching=function(){kt.b.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){kt.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):kt.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(Mt.a.MEDIA_DETACHED)},e.prototype.onMediaSourceOpen=function(){
kt.b.log("media source opened"),this.hls.trigger(Mt.a.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},e.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},e.prototype.onMediaSourceClose=function(){kt.b.log("media source closed")},e.prototype.onMediaSourceEnded=function(){kt.b.log("media source ended")},e.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;kt.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,n=this.segments.reduce(function(t,n){return n.parent===e?t+1:t},0);this.hls.trigger(Mt.a.BUFFER_APPENDED,{parent:e,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},e.prototype.onSBUpdateError=function(t){kt.b.error("sourceBuffer error:",t),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(r){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},e.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},e.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;for(var r in t)if(!e[r]){var i=t[r],o=i.levelCodec||i.codec,a=i.container+";codecs="+o;kt.b.log("creating sourceBuffer("+a+")");try{var s=e[r]=n.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:o,container:i.container},i.buffer=s}catch(u){kt.b.error("error while trying to add sourceBuffer:"+u.message),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:u,mimeType:a})}}this.hls.trigger(Mt.a.BUFFER_CREATED,{tracks:t})},e.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},e.prototype.onBufferAppendFail=function(t){kt.b.error("sourceBuffer error:",t.event),this.hls.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.BUFFER_APPENDING_ERROR,fatal:!1})},e.prototype.onBufferEos=function(t){var e=this.sourceBuffer,n=t.type;for(var r in e)n&&r!==n||e[r].ended||(e[r].ended=!0,kt.b.log(r+" sourceBuffer now EOS"));this.checkEos()},e.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var n in t){var r=t[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}kt.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(i){kt.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},e.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},e.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},e.prototype.updateMediaElementDuration=function(){var t=this.hls.config,e=void 0;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(this.sourceBuffer[n].updating===!0)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),this._live===!0&&t.liveDurationInfinity===!0?(kt.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(kt.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},e.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var r in n)e+=n[r].buffered.length}catch(i){kt.b.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(Mt.a.BUFFER_FLUSHED)}},e.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void kt.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=r.type,o=e[i];o?o.updating?n.unshift(r):(o.ended=!1,this.parent=r.parent,o.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(a){kt.b.error("error while trying to append buffer:"+a.message),n.unshift(r);var s={type:Lt.b.MEDIA_ERROR,parent:r.parent};if(22===a.code)return this.segments=[],s.details=Lt.a.BUFFER_FULL_ERROR,s.fatal=!1,void t.trigger(Mt.a.ERROR,s);if(this.appendError?this.appendError++:this.appendError=1,s.details=Lt.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry)return kt.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],s.fatal=!0,void t.trigger(Mt.a.ERROR,s);s.fatal=!1,t.trigger(Mt.a.ERROR,s)}}}},e.prototype.flushBuffer=function(t,e,n){var r,i,o,a,s,u,c=this.sourceBuffer;if(Object.keys(c).length){if(kt.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+t+"/"+e),this.flushBufferCounter<this.appended){for(var l in c)if(!n||l===n){if(r=c[l],r.ended=!1,r.updating)return kt.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(o=r.buffered.start(i),a=r.buffered.end(i),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&e===Number.POSITIVE_INFINITY?(s=t,u=e):(s=Math.max(o,t),u=Math.min(a,e)),Math.min(u,a)-s>.5)return this.flushBufferCounter++,kt.b.log("flush "+l+" ["+s+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),r.remove(s,u),!1}catch(h){kt.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else kt.b.warn("abort flushing too many retries");kt.b.log("buffer flushed")}return!0},e}(Ft),Ie=ke,De=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Fe=function(t){function e(n){return Y(this,e),X(this,t.call(this,n,Mt.a.FPS_DROP_LEVEL_CAPPING,Mt.a.MEDIA_ATTACHING,Mt.a.MANIFEST_PARSED))}return K(e,t),e.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},e.prototype.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.prototype.onMediaAttaching=function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null},e.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],e.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,e.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.prototype.getMaxLevel=function(t){var n=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return e.isLevelAllowed(i,n.restrictedLevels)&&i<=t});return e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},e.isLevelAllowed=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.indexOf(t)===-1},e.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var r=function(t,e){return!e||(t.width!==e.width||t.height!==e.height)},i=t.length-1,o=0;o<t.length;o+=1){var a=t[o];if((a.width>=e||a.height>=n)&&r(a,t[o+1])){i=o;break}}return i},De(e,[{key:"mediaWidth",get:function(){var t=void 0,n=this.media;return n&&(t=n.width||n.clientWidth||n.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0,n=this.media;return n&&(t=n.height||n.clientHeight||n.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(e){}return t}}]),e}(Ft),Ne=Fe,Ue=function(t){function e(n){return q(this,e),$(this,t.call(this,n,Mt.a.MEDIA_ATTACHING))}return J(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){var n=this.video=t.media instanceof HTMLVideoElement?t.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,n){var r=performance.now();if(e){if(this.lastTime){var i=r-this.lastTime,o=n-this.lastDroppedFrames,a=e-this.lastDecodedFrames,s=1e3*o/i,u=this.hls;if(u.trigger(Mt.a.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),s>0&&o>u.config.fpsDroppedMonitoringThreshold*a){var c=u.currentLevel;kt.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c-=1,u.trigger(Mt.a.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(Ft),je=Ue,Be=function(){function t(e){Z(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(i){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var a=e.status;if(a>=200&&a<300){r.tload=Math.max(r.tfirst,performance.now());var s=void 0,u=void 0;"arraybuffer"===i.responseType?(s=e.response,u=s.byteLength):(s=e.responseText,u=s.length),r.loaded=r.total=u;var c={url:e.responseURL,data:s};this.callbacks.onSuccess(c,r,i,e)}else r.retry>=o.maxRetry||a>=400&&a<499?(kt.b.error(a+" while loading "+i.url),this.callbacks.onError({code:a,text:e.statusText},i,e)):(kt.b.warn(a+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},t.prototype.loadtimeout=function(){kt.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,e)},t}(),Ge=Be,He=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),We=function(t){function e(n){Q(this,e);var r=tt(this,t.call(this,n,Mt.a.MANIFEST_LOADING,Mt.a.MANIFEST_PARSED,Mt.a.AUDIO_TRACK_LOADED,Mt.a.ERROR));return r.ticks=0,r.ontick=r.tick.bind(r),r}return et(e,t),e.prototype.destroy=function(){this.cleanTimer(),Ft.prototype.destroy.call(this)},e.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){this.updateTrack(this.trackId)},e.prototype.onError=function(t){t.fatal&&t.type===Lt.b.NETWORK_ERROR&&this.cleanTimer()},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestParsed=function(t){var e=this,n=t.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(Mt.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(t){return t["default"]&&!r?(e.audioTrack=i,void(r=!0)):void i++}),r===!1&&n.length&&(kt.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},e.prototype.onAudioTrackLoaded=function(t){t.id<this.tracks.length&&(kt.b.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*t.details.targetduration)),!t.details.live&&this.timer&&this.cleanTimer())},e.prototype.setAudioTrackInternal=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,kt.b.log("switching to audioTrack "+t);var e=this.tracks[t],n=this.hls,r=e.type,i=e.url,o={id:t,type:r,url:i};n.trigger(Mt.a.AUDIO_TRACK_SWITCH,o),n.trigger(Mt.a.AUDIO_TRACK_SWITCHING,o);var a=e.details;!i||void 0!==a&&a.live!==!0||(kt.b.log("(re)loading playlist for audioTrack "+t),n.trigger(Mt.a.AUDIO_TRACK_LOADING,{url:i,id:t}))}},e.prototype.updateTrack=function(t){if(t>=0&&t<this.tracks.length){this.cleanTimer(),this.trackId=t,kt.b.log("updating audioTrack "+t);var e=this.tracks[t],n=e.url,r=e.details;!n||void 0!==r&&r.live!==!0||(kt.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(Mt.a.AUDIO_TRACK_LOADING,{url:n,id:t}))}},He(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.trackId===t&&void 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),e}(Ft),ze=We,Ve=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ye={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},Xe=function(t){function e(n){nt(this,e);var r=rt(this,t.call(this,n,Mt.a.MEDIA_ATTACHED,Mt.a.MEDIA_DETACHING,Mt.a.AUDIO_TRACKS_UPDATED,Mt.a.AUDIO_TRACK_SWITCHING,Mt.a.AUDIO_TRACK_LOADED,Mt.a.KEY_LOADED,Mt.a.FRAG_LOADED,Mt.a.FRAG_PARSING_INIT_SEGMENT,Mt.a.FRAG_PARSING_DATA,Mt.a.FRAG_PARSED,Mt.a.ERROR,Mt.a.BUFFER_RESET,Mt.a.BUFFER_CREATED,Mt.a.BUFFER_APPENDED,Mt.a.BUFFER_FLUSHED,Mt.a.INIT_PTS_FOUND));return r.config=n.config,r.audioCodecSwap=!1,r.ticks=0,r._state=Ye.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return it(e,t),e.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Ft.prototype.destroy.call(this),this.state=Ye.STOPPED},e.prototype.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,r=t.initPTS;"main"===e&&(this.initPTS[n]=r,this.videoTrackCC=n,kt.b.log("InitPTS for cc:"+n+" found from video track:"+r),this.state===Ye.WAITING_INIT_PTS&&this.tick())},e.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,e>0&&t===-1?(kt.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Ye.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=Ye.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=Ye.STOPPED},e.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Ye.STOPPED},e.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},e.prototype.doTick=function(){var t,e,n,r=this.hls,i=r.config;switch(this.state){case Ye.ERROR:case Ye.PAUSED:case Ye.BUFFER_FLUSHING:break;case Ye.STARTING:this.state=Ye.WAITING_TRACK,this.loadedmetadata=!1;break;case Ye.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(t=this.nextLoadPosition,void 0===t)break;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,u=ie.bufferInfo(a,t,i.maxBufferHole),c=ie.bufferInfo(s,t,i.maxBufferHole),l=u.len,h=u.end,f=this.fragPrevious,d=Math.max(i.maxBufferLength,c.len),p=this.audioSwitch,v=this.trackId;if((l<d||p)&&v<o.length){if(n=o[v].details,"undefined"==typeof n){this.state=Ye.WAITING_TRACK;break}if(!p&&!n.live&&f&&f.sn===n.endSN&&!u.nextStart&&(!this.media.seeking||this.media.duration-h<f.duration/2)){this.hls.trigger(Mt.a.BUFFER_EOS,{type:"audio"}),this.state=Ye.ENDED;break}var g=n.fragments,y=g.length,m=g[0].start,_=g[y-1].start+g[y-1].duration,b=void 0;if(p)if(n.live&&!n.PTSKnown)kt.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,n.PTSKnown&&t<m){if(!(u.end>m||u.nextStart))return;kt.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=m+.05}if(n.initSegment&&!n.initSegment.data)b=n.initSegment;else if(h<=m){if(b=g[0],null!==this.videoTrackCC&&b.cc!==this.videoTrackCC&&(b=x(g,this.videoTrackCC)),n.live&&b.loadIdx&&b.loadIdx===this.fragLoadIdx){var E=u.nextStart?u.nextStart:m;return kt.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var T=void 0,S=i.maxFragLookUpTolerance,w=f?g[f.sn-g[0].sn+1]:void 0,R=function(t){var e=Math.min(S,t.duration);return t.start+t.duration-e<=h?1:t.start-e>h&&t.start?-1:0};h<_?(h>_-S&&(S=0),T=w&&!R(w)?w:ne.search(g,R)):T=g[y-1],T&&(b=T,m=T.start,f&&b.level===f.level&&b.sn===f.sn&&(b.sn<n.endSN?(b=g[b.sn+1-n.startSN],kt.b.log("SN just loaded, load next one: "+b.sn)):b=null))}if(b)if(b.decryptdata&&null!=b.decryptdata.uri&&null==b.decryptdata.key)kt.b.log("Loading key for "+b.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+v),this.state=Ye.KEY_LOADING,r.trigger(Mt.a.KEY_LOADING,{frag:b});else{if(kt.b.log("Loading "+b.sn+", cc: "+b.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+v+", currentTime:"+t+",bufferEnd:"+h.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,b.loadCounter){b.loadCounter++;var A=i.fragLoadingLoopThreshold;if(b.loadCounter>A&&Math.abs(this.fragLoadIdx-b.loadIdx)<A)return void r.trigger(Mt.a.ERROR,{type:Lt.b.MEDIA_ERROR,details:Lt.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:b})}else b.loadCounter=1;b.loadIdx=this.fragLoadIdx,this.fragCurrent=b,this.startFragRequested=!0,isNaN(b.sn)||(this.nextLoadPosition=b.start+b.duration),r.trigger(Mt.a.FRAG_LOADING,{frag:b}),this.state=Ye.FRAG_LOADING}}break;case Ye.WAITING_TRACK:e=this.tracks[this.trackId],e&&e.details&&(this.state=Ye.IDLE);break;case Ye.FRAG_LOADING_WAITING_RETRY:var O=performance.now(),C=this.retryDate;a=this.media;var P=a&&a.seeking;(!C||O>=C||P)&&(kt.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Ye.IDLE);break;case Ye.WAITING_INIT_PTS:var M=this.videoTrackCC;if(void 0===this.initPTS[M])break;var L=this.waitingFragment;if(L){var k=L.frag.cc;M!==k?(e=this.tracks[this.trackId],e.details&&e.details.live&&(kt.b.warn("Waiting fragment CC ("+k+") does not match video track CC ("+M+")"),this.waitingFragment=null,this.state=Ye.IDLE)):(this.state=Ye.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Ye.IDLE;break;case Ye.STOPPED:case Ye.FRAG_LOADING:case Ye.PARSING:case Ye.PARSED:case Ye.ENDED:}},e.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},e.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(kt.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.tracks;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.loadCounter=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},e.prototype.onMediaSeeking=function(){this.state===Ye.ENDED&&(this.state=Ye.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},e.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.prototype.onAudioTracksUpdated=function(t){kt.b.log("audio tracks updated"),this.tracks=t.audioTracks},e.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=Ye.PAUSED,this.waitingFragment=null,e?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=Ye.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},e.prototype.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,r=this.tracks[n],i=e.totalduration,o=0;if(kt.b.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var a=r.details;a&&e.fragments.length>0?(E(a,e),o=e.fragments[0].start,e.PTSKnown?kt.b.log("live audio playlist sliding:"+o.toFixed(3)):kt.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,kt.b.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(r.details=e,!this.startFragRequested){if(this.startPosition===-1){var s=e.startTimeOffset;isNaN(s)?this.startPosition=0:(kt.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===Ye.WAITING_TRACK&&(this.state=Ye.IDLE),this.tick()},e.prototype.onKeyLoaded=function(){this.state===Ye.KEY_LOADING&&(this.state=Ye.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===Ye.FRAG_LOADING&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=e.level,s=e.sn,u=e.cc,c=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",l=this.stats=t.stats;if("initSegment"===s)this.state=Ye.IDLE,l.tparsed=l.tbuffered=performance.now(),i.initSegment.data=t.payload,this.hls.trigger(Mt.a.FRAG_BUFFERED,{stats:l,frag:e,id:"audio"}),this.tick();else{this.state=Ye.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new fe(this.hls,"audio"));var h=this.initPTS[u],f=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,kt.b.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a);var d=!1;this.demuxer.push(t.payload,f,c,null,e,o,d,h)}else kt.b.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=t,this.state=Ye.WAITING_INIT_PTS}}this.fragLoadError=0},e.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ye.PARSING){var r=t.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(Mt.a.BUFFER_CODECS,r),kt.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Mt.a.BUFFER_APPENDING,a))}this.tick()}}},e.prototype.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&r.sn===n.sn&&r.level===n.level&&this.state===Ye.PARSING){var i=this.trackId,o=this.tracks[i],a=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),kt.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),b(o.details,n,t.startPTS,t.endPTS);var s=this.audioSwitch,u=this.media,c=!1;if(s&&u)if(u.readyState){var l=u.currentTime;kt.b.log("switching audio track : currentTime:"+l),l>=t.startPTS&&(kt.b.log("switching audio track : flushing all audio"),this.state=Ye.BUFFER_FLUSHING,a.trigger(Mt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),c=!0,this.audioSwitch=!1,a.trigger(Mt.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(Mt.a.AUDIO_TRACK_SWITCHED,{id:i});var h=this.pendingData;this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&h.push({type:t.type,data:e,parent:"audio",content:"data"})}),!c&&h.length&&(h.forEach(function(t){e.state===Ye.PARSING&&(e.pendingBuffering=!0,e.hls.trigger(Mt.a.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},e.prototype.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===Ye.PARSING&&(this.stats.tparsed=performance.now(),this.state=Ye.PARSED,this._checkAppendedParsed())},e.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},e.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==Ye.PARSING&&e!==Ye.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},e.prototype._checkAppendedParsed=function(){if(!(this.state!==Ye.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=performance.now(),n.trigger(Mt.a.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;kt.b.log("audio buffered : "+pe.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(Mt.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Ye.IDLE}this.tick()}},e.prototype.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case Lt.a.FRAG_LOAD_ERROR:case Lt.a.FRAG_LOAD_TIMEOUT:if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,e.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);kt.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=Ye.FRAG_LOADING_WAITING_RETRY}else kt.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Ye.ERROR}break;case Lt.a.FRAG_LOOP_LOADING_ERROR:case Lt.a.AUDIO_TRACK_LOAD_ERROR:case Lt.a.AUDIO_TRACK_LOAD_TIMEOUT:case Lt.a.KEY_LOAD_ERROR:case Lt.a.KEY_LOAD_TIMEOUT:this.state!==Ye.ERROR&&(this.state=t.fatal?Ye.ERROR:Ye.IDLE,kt.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case Lt.a.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===Ye.PARSING||this.state===Ye.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime,s=o&&ie.isBuffered(o,a)&&ie.isBuffered(o,a+.5);if(s){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,kt.b.warn("audio:reduce max buffer length to "+u.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*u.fragLoadingLoopThreshold),this.state=Ye.IDLE}else kt.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ye.BUFFER_FLUSHING,this.hls.trigger(Mt.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},e.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(kt.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(Mt.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Ye.PARSED):(this.state=Ye.IDLE,this.fragPrevious=null,this.tick())},Ve(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,kt.b.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(Ft),Ke=Xe,qe=function(){function t(t){if("string"!=typeof t)return!1;var e=o[t.toLowerCase()];return!!e&&t.toLowerCase()}function e(t){if("string"!=typeof t)return!1;var e=a[t.toLowerCase()];return!!e&&t.toLowerCase()}function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function r(r,o,a){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),c={};u?s=document.createElement("custom"):c.enumerable=!0,s.hasBeenReset=!1;var l="",h=!1,f=r,d=o,p=a,v=null,g="",y=!0,m="auto",_="start",b=50,E="middle",T=50,x="middle";if(Object.defineProperty(s,"id",n({},c,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(s,"pauseOnExit",n({},c,{
get:function(){return h},set:function(t){h=!!t}})),Object.defineProperty(s,"startTime",n({},c,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},c,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},c,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},c,{get:function(){return v},set:function(t){v=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},c,{get:function(){return g},set:function(e){var n=t(e);if(n===!1)throw new SyntaxError("An invalid or illegal string was specified.");g=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},c,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},c,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},c,{get:function(){return _},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");_=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},c,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},c,{get:function(){return E},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},c,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},c,{get:function(){return x},set:function(t){var n=e(t);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");x=n,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return r.prototype.getCueAsHTML=function(){var t=window.WebVTT;return t.convertCueToDOMTree(window,this.text)},r}(),$e=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};st.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){var n;return!!((n=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100))&&(this.set(t,e),!0)}};var Je=new qe(0,0,0),Ze="middle"===Je.align?"middle":"center";ot.prototype={parse:function(t){function e(){var t=r.buffer,e=0;for(t=lt(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,r.buffer=t.substr(e),n}function n(t){ut(t,function(t,e){switch(t){case"Region":}},/:/)}var r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var i;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;i=e();var o=i.match(/^()?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:i=e(),r.state){case"HEADER":/:/.test(i)?n(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new qe(0,0,""),r.state="CUE",i.indexOf("-->")===-1){r.cue.id=i;continue}case"CUE":try{ct(i,r.cue,r.regionList)}catch(s){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var u=i.indexOf("-->")!==-1;if(!i||u&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID");continue}}}catch(s){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return t.onflush&&t.onflush(),this}};var Qe=ot,tn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,// copyright sign
156:8480,// Service mark
157:8226,// (round) bullet
158:8220,// Left double quotation mark
159:8221,// Right double quotation mark
160:192,// uppercase A, grave accent
161:194,// uppercase A, circumflex
162:199,// uppercase C with cedilla
163:200,// uppercase E, grave accent
164:202,// uppercase E, circumflex
165:203,// capital letter E with diaresis
166:235,// lowercase letter e with diaresis
167:206,// uppercase I, circumflex
168:207,// uppercase I, with diaresis
169:239,// lowercase i, with diaresis
170:212,// uppercase O, circumflex
171:217,// uppercase U, grave accent
172:249,// lowercase u, grave accent
173:219,// uppercase U, circumflex
174:171,// left-pointing double angle quotation mark
175:187,// right-pointing double angle quotation mark
// THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS
// THAT COME FROM HI BYTE=0x13 AND LOW BETWEEN 0x20 AND 0x3F
176:195,// Uppercase A, tilde
177:227,// Lowercase a, tilde
178:205,// Uppercase I, acute accent
179:204,// Uppercase I, grave accent
180:236,// Lowercase i, grave accent
181:210,// Uppercase O, grave accent
182:242,// Lowercase o, grave accent
183:213,// Uppercase O, tilde
184:245,// Lowercase o, tilde
185:123,// Open curly brace
186:125,// Closing curly brace
187:92,// Backslash
188:94,// Caret
189:95,// Underscore
190:124,// Pipe (vertical line)
191:8764,// Tilde operator
192:196,// Uppercase A, umlaut
193:228,// Lowercase A, umlaut
194:214,// Uppercase O, umlaut
195:246,// Lowercase o, umlaut
196:223,// Esszett (sharp S)
197:165,// Yen symbol
198:164,// Generic currency sign
199:9475,// Box drawings heavy vertical
200:197,// Uppercase A, ring
201:229,// Lowercase A, ring
202:216,// Uppercase O, stroke
203:248,// Lowercase o, strok
204:9487,// Box drawings heavy down and right
205:9491,// Box drawings heavy down and left
206:9495,// Box drawings heavy up and right
207:9499},en=function(t){var e=t;return tn.hasOwnProperty(t)&&(e=tn[t]),String.fromCharCode(e)},nn=15,rn=100,on={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},an={17:2,18:4,21:6,22:8,23:10,19:13,20:15},sn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},un={25:2,26:4,29:6,30:8,31:10,27:13,28:15},cn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ln={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){var n=this.verboseFilter[t];this.verboseLevel>=n}},hn=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e},fn=function(){function t(e,n,r,i,o){ft(this,t),this.foreground=e||"white",this.underline=n||!1,this.italics=r||!1,this.background=i||"black",this.flash=o||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),dn=function(){function t(e,n,r,i,o,a){ft(this,t),this.uchar=e||" ",this.penState=new fn(n,r,i,o,a)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),pn=function(){function t(){ft(this,t),this.chars=[];for(var e=0;e<rn;e++)this.chars.push(new dn);this.pos=0,this.currPenState=new fn}return t.prototype.equals=function(t){for(var e=!0,n=0;n<rn;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<rn;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<rn;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(ln.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>rn&&(ln.log("ERROR","Too large cursor position "+this.pos),this.pos=rn)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=en(t);return this.pos>=rn?void ln.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),void this.moveCursor(1))},t.prototype.clearFromPos=function(t){var e;for(e=t;e<rn;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,n=0;n<rn;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t);var e=this.chars[this.pos];e.setPenState(this.currPenState)},t}(),vn=function(){function t(){ft(this,t),this.rows=[];for(var e=0;e<nn;e++)this.rows.push(new pn);this.currRow=nn-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<nn;t++)this.rows[t].clear();this.currRow=nn-1},t.prototype.equals=function(t){for(var e=!0,n=0;n<nn;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<nn;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<nn;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){var t=this.rows[this.currRow];t.backSpace()},t.prototype.clearToEndOfRow=function(){var t=this.rows[this.currRow];t.clearToEndOfRow()},t.prototype.insertChar=function(t){var e=this.rows[this.currRow];e.insertChar(t)},t.prototype.setPen=function(t){var e=this.rows[this.currRow];e.setPenStyles(t)},t.prototype.moveCursor=function(t){var e=this.rows[this.currRow];e.moveCursor(t)},t.prototype.setCursor=function(t){ln.log("INFO","setCursor: "+t);var e=this.rows[this.currRow];e.setCursor(t)},t.prototype.setPAC=function(t){ln.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<nn;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[r].cueStartTime;if(o&&o<ln.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(i.rows[r+a])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,c=Math.max(u-1,0);s.setCursor(t.indent),t.color=s.chars[c].penState.foreground}var l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)},t.prototype.setBkgData=function(t){ln.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void ln.log("DEBUG","roll_up but nrRollUpRows not set yet");ln.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),ln.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=-1,i=0;i<nn;i++){var o=this.rows[i].getTextString();o&&(r=i+1,t?e.push("Row "+r+": '"+o+"'"):e.push(o.trim()))}return e.length>0&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},t.prototype.getTextAndFormat=function(){return this.rows},t}(),gn=function(){function t(e,n){ft(this,t),this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new vn,this.nonDisplayedMemory=new vn,this.lastOutputScreen=new vn,this.currRollUpRow=this.displayedMemory.rows[nn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[nn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,ln.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";ln.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(ln.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){ln.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){ln.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){ln.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){ln.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){ln.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){ln.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){ln.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){ln.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){ln.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){ln.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){ln.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(ln.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,ln.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){ln.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2===1,e.italics=t>=46,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=r[n]}ln.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=ln.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t===!0&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),yn=function(){function t(e,n,r){ft(this,t),this.field=e||1,this.outputs=[n,r],this.channels=[new gn(1,n),new gn(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var n,r,i,o=!1;this.lastTime=t,ln.setTime(t);for(var a=0;a<e.length;a+=2)if(r=127&e[a],i=127&e[a+1],0!==r||0!==i){if(ln.log("DATA","["+hn([e[a],e[a+1]])+"] -> ("+hn([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(o=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else ln.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,ln.log("WARNING","Couldn't parse cleaned data "+hn([r,i])+" orig: "+hn([e[a],e[a+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var n=null,r=(20===t||28===t)&&32<=e&&e<=47,i=(23===t||31===t)&&33<=e&&e<=35;if(!r&&!i)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,ln.log("DEBUG","Repeated command ("+hn([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var o=this.channels[n-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},t.prototype.parseMidrow=function(t,e){var n=null;if((17===t||25===t)&&32<=e&&e<=47){if(n=17===t?1:2,n!==this.currChNr)return ln.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.ccMIDROW(e),ln.log("DEBUG","MIDROW ("+hn([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var n=null,r=null,i=(17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127,o=(16===t||24===t)&&64<=e&&e<=95;if(!i&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=t<=23?1:2,r=64<=e&&e<=95?1===n?on[t]:sn[t]:1===n?an[t]:un[t];var a=this.interpretPAC(r,e),s=this.channels[n-1];return s.setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},t.prototype.interpretPAC=function(t,e){var n=e,r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=e>95?e-96:e-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.prototype.parseChars=function(t,e){var n=null,r=null,i=null;if(t>=25?(n=2,i=t-8):(n=1,i=t),17<=i&&i<=19){var o=e;o=17===i?e+80:18===i?e+112:e+144,ln.log("INFO","Special char '"+en(o)+"' in channel "+n),r=[o]}else 32<=t&&t<=127&&(r=0===e?[t]:[t,e]);if(r){var a=hn(r);ln.log("DEBUG","Char codes =  "+a.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},t.prototype.parseBackgroundAttributes=function(t,e){var n,r,i,o,a=(16===t||24===t)&&32<=e&&e<=47,s=(23===t||31===t)&&45<=e&&e<=47;return!(!a&&!s)&&(n={},16===t||24===t?(r=Math.floor((e-32)/2),n.background=cn[r],e%2===1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),i=t<24?1:2,o=this.channels[i-1],o.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),mn=yn,_n=function(){function t(e,n){dt(this,t),this.timelineController=e,this.track=n,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.track)},t}(),bn=_n,En=function(t,e,n){return t.substr(n||0,e.length)===e},Tn=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)?-1:(e+=1e3*n,e+=6e4*r,e+=36e5*i)},xn=function jn(t){for(var jn=5381,e=t.length;e;)jn=33*jn^t.charCodeAt(--e);return(jn>>>0).toString()},Sn=function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i["new"]&&r["new"])return t.ccOffset=t.presentationOffset=r.start,void(r["new"]=!1);for(;i&&i["new"];)t.ccOffset+=r.start-i.start,r["new"]=!1,r=i,i=t[r.prevCC];t.presentationOffset=n},wn={parse:function(t,e,n,r,i,o){var a=/\r\n|\n\r|\n|\r/g,s=Object(Te.b)(new Uint8Array(t)).trim().replace(a,"\n").split("\n"),u="00:00.000",c=0,l=0,h=0,f=[],d=void 0,p=!0,v=new Qe;v.oncue=function(t){var e=n[r],i=n.ccOffset;e&&e["new"]&&(void 0!==l?i=n.ccOffset=e.start:Sn(n,r,h)),h&&(i=h+n.ccOffset-n.presentationOffset),t.startTime+=i-l,t.endTime+=i-l,t.id=xn(t.startTime.toString())+xn(t.endTime.toString())+xn(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&f.push(t)},v.onparsingerror=function(t){d=t},v.onflush=function(){return d&&o?void o(d):void i(f)},s.forEach(function(t){if(p){if(En(t,"X-TIMESTAMP-MAP=")){p=!1,t.substr(16).split(",").forEach(function(t){En(t,"LOCAL:")?u=t.substr(6):En(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,c-=e,l=Tn(u)/1e3,h=c/9e4,l===-1&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(n){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(p=!1)}v.parse(t+"\n")}),v.flush()}},Rn=wn,An=function(t){function e(n){pt(this,e);var r=vt(this,t.call(this,n,Mt.a.MEDIA_ATTACHING,Mt.a.MEDIA_DETACHING,Mt.a.FRAG_PARSING_USERDATA,Mt.a.FRAG_DECRYPTED,Mt.a.MANIFEST_LOADING,Mt.a.MANIFEST_LOADED,Mt.a.FRAG_LOADED,Mt.a.LEVEL_SWITCHING,Mt.a.INIT_PTS_FOUND));if(r.hls=n,r.config=n.config,r.enabled=!0,r.Cues=n.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.config.enableCEA708Captions){var i=new bn(r,1),o=new bn(r,2);r.cea608Parser=new mn(0,i,o)}return r}return gt(e,t),e.prototype.addCues=function(t,e,n,r){for(var i=this.cueRanges,o=!1,a=i.length;a--;){var s=i[a],u=_t(s[0],s[1],e,n);if(u>=0&&(s[0]=Math.min(s[0],e),s[1]=Math.max(s[1],n),o=!0,u/(n-e)>.5))return}o||i.push([e,n]),this.Cues.newCue(this[t],e,n,r)},e.prototype.onInitPtsFound=function(t){var e=this;"undefined"==typeof this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n],i="textTrack"+t;if(r[i]===!0)return r}return null},e.prototype.sendAddTrackEvent=function(t,e){var n=null;try{n=new window.Event("addtrack")}catch(r){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)},e.prototype.createCaptionsTrack=function(t){var e="textTrack"+t;if(!this[e]){var n=this.getExistingTrack(t);if(n)this[e]=n,yt(this[e]),this.sendAddTrackEvent(this[e],this.media);else{var r=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1LanguageCode);r&&(r[e]=!0,this[e]=r)}}},e.prototype.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},e.prototype.destroy=function(){Ft.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){yt(this.textTrack1),yt(this.textTrack2)},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)yt(e[n])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,r){var i=void 0;if(r<n.length){var o=n[r];mt(o,t)&&(i=o)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),i.mode=t["default"]?"showing":"hidden",e.textTracks.push(i)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,n=t.payload;if("main"===e.type){var r=e.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===e.type)if(n.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,n)}else this.hls.trigger(Mt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var n=this.vttCCs;n[t.cc]||(n[t.cc]={start:t.start,prevCC:this.prevCC,"new":!0},this.prevCC=t.cc);var r=this.textTracks,i=this.hls;Rn.parse(e,this.initPTS,n,t.cc,function(e){var n=r[t.trackId];e.forEach(function(t){if(!n.cues.getCueById(t.id))try{n.addCue(t)}catch(e){var r=new window.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,n.addCue(r)}}),i.trigger(Mt.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){kt.b.log("Failed to parse VTT cue: "+e),i.trigger(Mt.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,n=t.frag;if("subtitle"===n.type){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(n,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var n=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,n)}},e.prototype.extractCea608Data=function(t){for(var e,n,r,i,o,a=31&t[0],s=2,u=[],c=0;c<a;c++)e=t[s++],n=127&t[s++],r=127&t[s++],i=0!==(4&e),o=3&e,0===n&&0===r||i&&0===o&&(u.push(n),u.push(r));return u},e}(Ft),On=An,Cn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Pn=function(t){function e(n){bt(this,e);var r=Et(this,t.call(this,n,Mt.a.MEDIA_ATTACHED,Mt.a.MEDIA_DETACHING,Mt.a.MANIFEST_LOADING,Mt.a.MANIFEST_LOADED,Mt.a.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r.subtitleDisplay=!1,r}return Tt(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=xt(this.media.textTracks),n=0;n<e.length;n++)"showing"===e[n].mode&&(t=n);this.subtitleTrack=t}},e.prototype.destroy=function(){Ft.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(Mt.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(t){t["default"]&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var n=e.details;void 0!==n&&n.live!==!0||(kt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Mt.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(kt.b.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},e.prototype.setSubtitleTrackInternal=function(t){if(!(t<-1||t>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var e=xt(this.media.textTracks);if(this.trackId!==-1&&this.subtitleDisplay&&(e[this.trackId].mode="hidden"),this.trackId=t,kt.b.log("switching to subtitle track "+t),this.hls.trigger(Mt.a.SUBTITLE_TRACK_SWITCH,{id:t}),t!==-1){var n=this.tracks[t];this.subtitleDisplay&&(e[t].mode="showing");var r=n.details;void 0!==r&&r.live!==!0||(kt.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(Mt.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:t}))}}},Cn(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),e}(Ft),Mn=Pn,Ln=n(4),kn={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},In=function(t){function e(n){St(this,e);var r=wt(this,t.call(this,n,Mt.a.MEDIA_ATTACHED,Mt.a.ERROR,Mt.a.KEY_LOADED,Mt.a.FRAG_LOADED,Mt.a.SUBTITLE_TRACKS_UPDATED,Mt.a.SUBTITLE_TRACK_SWITCH,Mt.a.SUBTITLE_TRACK_LOADED,Mt.a.SUBTITLE_FRAG_PROCESSED));return r.config=n.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.state=kn.STOPPED,r.currentTrackId=-1,r.ticks=0,r.decrypter=new Ln.a(n.observer,n.config),r}return Rt(e,t),e.prototype.destroy=function(){Ft.prototype.destroy.call(this),this.state=kn.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(Mt.a.FRAG_LOADING,{frag:t}),this.state=kn.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=kn.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=kn.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.tick=function(){var t=this;this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(function(){t.tick()},1),this.ticks=0)},e.prototype.doTick=function(){var t=this;switch(this.state){case kn.IDLE:var e=this.tracks,n=this.currentTrackId,r=this.vttFragSNsProcessed[n],i=this.vttFragQueues[n],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1,a=function(t){return r.indexOf(t.sn)>-1},s=function(t){return i.some(function(e){return e.sn===t.sn})};if(!e)break;var u;if(n<e.length&&(u=e[n].details),"undefined"==typeof u)break;u.fragments.forEach(function(e){a(e)||e.sn===o||s(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(kt.b.log("Loading key for "+e.sn),t.state=kn.KEY_LOADING,t.hls.trigger(Mt.a.KEY_LOADING,{frag:e})):(e.trackId=n,i.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;kt.b.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){this.currentTrackId=t.id,this.clearVttFragQueues()},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===kn.KEY_LOADING&&(this.state=kn.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,r=t.frag,i=this.hls;if(this.state===kn.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=n&&null!=n.key&&"AES-128"===n.method){var o;try{o=performance.now()}catch(a){o=Date.now()}this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,function(t){var e;try{e=performance.now()}catch(n){e=Date.now()}i.trigger(Mt.a.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:o,tdecrypt:e}})})}},e}(Ft),Dn=In,Fn={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ge,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:Me,bufferController:Ie,capLevelController:Ne,fpsController:je,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Fn.subtitleStreamController=Dn,Fn.subtitleTrackController=Mn,Fn.timelineController=On,Fn.cueHandler=Ot,Fn.enableCEA708Captions=!0,Fn.enableWebVTT=!0,Fn.captionsTextTrack1Label="English",Fn.captionsTextTrack1LanguageCode="en",Fn.captionsTextTrack2Label="Spanish",Fn.captionsTextTrack2LanguageCode="es",Fn.audioStreamController=Ke,Fn.audioTrackController=ze;var Nn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Un=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At(this,t);var r=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in r)i in n||(n[i]=r[i]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(kt.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var o=this.observer=new se.a;o.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t,t].concat(n))},o.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.removeListener.apply(o,[t].concat(n))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var a=this.abrController=new n.abrController(this),s=new n.bufferController(this),u=new n.capLevelController(this),c=new n.fpsController(this),l=new $t(this),h=new Zt(this),f=new te(this),d=new Se(this),p=this.levelController=new Ee(this),v=this.streamController=new me(this),g=[p,v],y=n.audioStreamController;y&&g.push(new y(this)),this.networkControllers=g;var m=[l,h,f,a,s,u,c,d];if(y=n.audioTrackController){var _=new y(this);this.audioTrackController=_,m.push(_)}if(y=n.subtitleTrackController){var b=new y(this);this.subtitleTrackController=b,m.push(b)}[n.subtitleStreamController,n.timelineController].forEach(function(t){
t&&m.push(new t(e))}),this.coreComponents=m}return t.isSupported=function(){return N()},Nn(t,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return Mt.a}},{key:"ErrorTypes",get:function(){return Lt.b}},{key:"ErrorDetails",get:function(){return Lt.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Fn},set:function(e){t.defaultConfig=e}}]),t.prototype.destroy=function(){kt.b.log("destroy"),this.trigger(Mt.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(t){kt.b.log("attachMedia"),this.media=t,this.trigger(Mt.a.MEDIA_ATTACHING,{media:t})},t.prototype.detachMedia=function(){kt.b.log("detachMedia"),this.trigger(Mt.a.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(t){t=Pt.a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),kt.b.log("loadSource:"+t),this.url=t,this.trigger(Mt.a.MANIFEST_LOADING,{url:t})},t.prototype.startLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;kt.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},t.prototype.stopLoad=function(){kt.b.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},t.prototype.swapAudioCodec=function(){kt.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){kt.b.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Nn(t,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){kt.b.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){kt.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){kt.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){kt.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){kt.b.log("set startLevel:"+t);var e=this;t!==-1&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){kt.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this,e=t.levels,n=t.config.minAutoBitrate,r=e?e.length:0,i=0;i<r;i++){var o=e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate;if(o>n)return i}return 0}},{key:"maxAutoLevel",get:function(){var t=this,e=t.levels,n=t.autoLevelCapping,r=void 0;return r=n===-1&&e&&e.length?e.length-1:n}},{key:"nextAutoLevel",get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),t}();e["default"]=Un},function(t,e,n){function r(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw t};var r=e(e.s=ENTRY_MODULE);return r["default"]||r}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){var e=[],n=t.toString(),r=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!r)return e;for(var o,a=r[1],s=new RegExp("(\\\\n|\\W)"+i(a)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");o=s.exec(n);)e.push(o[3]);return e}function a(t,e){for(var n=[e],r=[],i={};n.length;){var a=n.pop();if(!i[a]&&t[a]){i[a]=!0,r.push(a);var s=o(t[a]);n=n.concat(s)}}return r}t.exports=function(t,e){e=e||{};var i=n.m,o=e.all?Object.keys(i):a(i,t),s="("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.map(function(t){return""+JSON.stringify(t)+": "+i[t].toString()}).join(",")+"})(self);",u=new window.Blob([s],{type:"text/javascript"});if(e.bare)return u;var c=window.URL||window.webkitURL||window.mozURL||window.msURL,l=c.createObjectURL(u),h=new window.Worker(l);return h.objectURL=l,h}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7),i=n(1),o=n(0),a=n(5),s=n.n(a),u=function(t){var e=new s.a;e.trigger=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(r))};var n=function(e,n){t.postMessage({event:e,data:n})};t.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new r.a(e,a.typeSupported,s,a.vendor);try{Object(o.a)(s.debug===!0)}catch(u){}n("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(i.a.FRAG_DECRYPTED,n),e.on(i.a.FRAG_PARSING_INIT_SEGMENT,n),e.on(i.a.FRAG_PARSED,n),e.on(i.a.ERROR,n),e.on(i.a.FRAG_PARSING_METADATA,n),e.on(i.a.FRAG_PARSING_USERDATA,n),e.on(i.a.INIT_PTS_FOUND,n),e.on(i.a.FRAG_PARSING_DATA,function(e,n){var r=[],i={event:e,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),t.postMessage(i,r)})};e["default"]=u}])["default"]})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this._element=t,this._option=e}return t.prototype.canPlayType=function(t){return this._element.canPlayType(t)},t.prototype.play=function(){var t=this;return Promise.resolve().then(function(){return t._element.play()})},t.prototype.pause=function(){this._element.pause()},t.prototype.load=function(){this._element.load()},t.prototype.removeAttribute=function(t){this._element.removeAttribute(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this._element.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._element.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this._element.src},set:function(t){this._element.src=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._element.currentTime},set:function(t){this._element.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crossOrigin",{get:function(){return this._element.crossOrigin},set:function(t){this._element.crossOrigin=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this._element.volume},set:function(t){this._element.volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._element.playbackRate},set:function(t){this._element.playbackRate=t,this._element.defaultPlaybackRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){return this._element.videoWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){return this._element.videoHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"poster",{get:function(){return this._element.poster},set:function(t){this._element.poster=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentSrc",{get:function(){return this._element.currentSrc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._element.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seeking",{get:function(){return this._element.seeking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._element.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this._element.paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPlaybackRate",{get:function(){return this._element.defaultPlaybackRate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._element.ended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return this._element.autoplay},set:function(t){this._element.autoplay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this._element.controls},set:function(t){this._element.controls=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._element.loop},set:function(t){this._element.loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._element.muted},set:function(t){this._element.muted=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preload",{get:function(){return this._element.preload},set:function(t){this._element.preload=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){return this._element.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._element.style},enumerable:!0,configurable:!0}),t.prototype.addEventListener=function(t,e){this._element.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this._element.removeEventListener(t,e)},t.prototype.remove=function(){this._element.parentElement&&this._element.parentElement.removeChild(this._element)},t.prototype.getError=function(){return this._element.error},Object.defineProperty(t.prototype,"hasError",{get:function(){return!!this._element.error},enumerable:!0,configurable:!0}),t.prototype.takeoverAttributes=function(t){this.currentTime=t.currentTime,this.crossOrigin=t.crossOrigin,this.volume=t.volume,this.playbackRate=t.playbackRate,this.poster=t.poster,this.autoplay=t.autoplay,this.controls=t.controls,this.loop=t.loop,this.muted=t.muted,this.preload=t.preload,this.abrEwmaDefaultEstimateBPS=t.abrEwmaDefaultEstimateBPS,this.style.cssText=t.style.cssText},t.prototype.touch=function(){var t=this,e=this._element.play();return void 0!==e&&"function"==typeof e.then?e.then(function(){return t._element.pause()},function(){return t._element.pause()}):(this._element.pause(),Promise.resolve())},t}();e.AbstractHTMLVideoSource=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.code=t.code,"string"==typeof t.details?this.details=t.details:t.details?this.details=t.details.type:this.details="",this.isFatal="boolean"==typeof t.isFatal&&t.isFatal,this.message=t.message||""}return t.CODE={ABORTED:1,NETWORK:2,DECODE:3,SRC_NOT_SUPPORTED:4,HLS_ABORTED:1001,HLS_NETWORK:1002,HLS_DECODE:1003,HLS_SRC_NOT_SUPPORTED:1004,HLS_UNKNOWN:1009},t}();e.VideoPlayerError=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(606),i=function(){function t(t,e){this._type=t,this._error=new r.VideoPlayerError(e)}return Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this._error.message},enumerable:!0,configurable:!0}),t}();e.VideoPlayerErrorEvent=i},function(t,e){(function(e){function n(t,e,n){function r(e){var n=v,r=g;return v=g=void 0,S=e,m=t.apply(r,n)}function o(t){return S=t,_=setTimeout(l,e),w?r(t):m}function a(t){var n=t-b,r=t-S,i=e-n;return R?T(i,y-r):i}function c(t){var n=t-b,r=t-S;return void 0===b||n>=e||n<0||R&&r>=y}function l(){var t=x();return c(t)?h(t):void(_=setTimeout(l,a(t)))}function h(t){return _=void 0,A&&v?r(t):(v=g=void 0,m)}function f(){void 0!==_&&clearTimeout(_),S=0,v=b=g=_=void 0}function d(){return void 0===_?m:h(x())}function p(){var t=x(),n=c(t);if(v=arguments,g=this,b=t,n){if(void 0===_)return o(b);if(R)return _=setTimeout(l,e),r(b)}return void 0===_&&(_=setTimeout(l,e)),m}var v,g,y,m,_,b,S=0,w=!1,R=!1,A=!0;if("function"!=typeof t)throw new TypeError(u);return e=s(e)||0,i(n)&&(w=!!n.leading,R="maxWait"in n,y=R?E(s(n.maxWait)||0,e):y,A="trailing"in n?!!n.trailing:A),p.cancel=f,p.flush=d,p}function r(t,e,r){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError(u);return i(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),n(t,e,{leading:o,maxWait:e,trailing:a})}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function o(t){return!!t&&"object"==typeof t}function a(t){return"symbol"==typeof t||o(t)&&b.call(t)==l}function s(t){if("number"==typeof t)return t;if(a(t))return c;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(h,"");var n=d.test(t);return n||p.test(t)?v(t.slice(2),n?2:8):f.test(t)?c:+t}/**
	 * lodash (Custom Build) <https://lodash.com/>
	 * Build: `lodash modularize exports="npm" -o ./`
	 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
	 * Released under MIT license <https://lodash.com/license>
	 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	 */
var u="Expected a function",c=NaN,l="[object Symbol]",h=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt,g="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,m=g||y||Function("return this")(),_=Object.prototype,b=_.toString,E=Math.max,T=Math.min,x=function(){return m.Date.now()};t.exports=r}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(605),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._abrEwmaDefaultEstimateBPS=0,e}return r(e,t),e.prototype.available=function(t){return!0},Object.defineProperty(e.prototype,"name",{get:function(){return"video"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"abrEwmaDefaultEstimateBPS",{get:function(){return this._abrEwmaDefaultEstimateBPS},set:function(t){this._abrEwmaDefaultEstimateBPS=t},enumerable:!0,configurable:!0}),e}(i.AbstractHTMLVideoSource);e.RawHTMLVideoSource=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(356),o=function(t){function e(e){var n=t.call(this)||this;return n._element=e,n._timer=null,n._lastCurrentTime=0,n._isStalled=!1,n._pausedByUser=!0,n._pausedByVideoElement=!0,n._element.addEventListener("play",n._onPlay.bind(n)),n._element.addEventListener("seeked",n._onSeeked.bind(n)),n._element.addEventListener("pause",n._onPause.bind(n)),n._element.addEventListener("seeking",n._onSeeking.bind(n)),n._element.addEventListener("ended",n._onEnded.bind(n)),n}return r(e,t),e.prototype.start=function(){this._pausedByUser=!1,this._startTimer()},e.prototype.stop=function(){this._pausedByUser=!0,this._stopTimer()},e.prototype._onPlay=function(){this._pausedByVideoElement=!1,this._startTimer()},e.prototype._onSeeked=function(){this._element.paused||(this._pausedByVideoElement=!1,this._startTimer())},e.prototype._onPause=function(){this._pausedByVideoElement=!0,this._stopTimer()},e.prototype._onSeeking=function(){this._pausedByVideoElement=!0,this._stopTimer()},e.prototype._onEnded=function(){this._pausedByVideoElement=!0,this._stopTimer()},e.prototype._startTimer=function(){this._pausedByUser||this._pausedByVideoElement||this._timer||(this._lastCurrentTime=this._element.currentTime,this._timer=setInterval(this._check.bind(this),e.CHECK_INTERVAL_MS))},e.prototype._stopTimer=function(){null!==this._timer&&(clearInterval(this._timer),this._timer=null),this._updateStalled(!1)},e.prototype._check=function(){var t=this._element.currentTime-this._lastCurrentTime,n=1/e.CHECK_INTERVAL_MS*this._element.playbackRate,r=!this._element.paused&&!this._element.seeking&&!this._element.ended&&0<=t&&t<n;this._updateStalled(r),this._lastCurrentTime=this._element.currentTime},Object.defineProperty(e.prototype,"isStalled",{get:function(){return this._isStalled},enumerable:!0,configurable:!0}),e.prototype._updateStalled=function(t){this._isStalled!==t&&(this._isStalled=t,this.emit("playback-stalled-change",new CustomEvent("playback-stalled-change",{detail:{isStalled:t}})))},e.CHECK_INTERVAL_MS=300,e}(i.EventEmitter);e.PlaybackStalledObserver=o},function(t,e){"use strict";function n(t,e){var n={};return Object.keys(t).forEach(function(e){var r;r=o.indexOf(e)>=0?t[e]?t[e].join(","):"":t[e],n[e]=r}),Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}function r(t){return t.json().then(function(e){if(t.ok&&e.meta){var n=e.meta.status;if(n>=200&&n<300){if(e.data){var r=e.data.thread;r&&(r.thread_id=String(r.thread_id),r.nicos_thread_id&&(r.nicos_thread_id=String(r.nicos_thread_id)),r.optional_thread_id&&(r.optional_thread_id=String(r.optional_thread_id)))}return e.data}}return Promise.reject(e.meta||{})})}Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){var e=function(){function t(t){this.serverBaseUrl=t}return t.prototype.access=function(t,e){return window.fetch(this.serverBaseUrl+"/watch/"+t+"?"+n(e,{ver:2,mode:"api"}),{mode:"cors",credentials:"include",cache:"no-cache"}).then(r)},t}();t.Login=e;var i=function(){function t(t,e){this.serverBaseUrl=t,this.serviceUserId=e}return t.prototype.access=function(t,e){return window.fetch(this.serverBaseUrl+"/api/guest_watch/"+t+"?"+n(e,{ver:1,service_user_id:this.serviceUserId}),{mode:"cors",cache:"no-cache"}).then(r)},t}();t.NoLogin=i}(i||(i={}));var o=["videos","audios","protocols","skips"];e["default"]=i},function(t,e){"use strict";function n(t){return t.replace(/([A-Z])/g,"-$1").replace(/^ms-/,"-ms-").toLowerCase()}function r(t){return"@"===t.charAt(0)}function i(t){return null!=t&&"object"==typeof t&&!Array.isArray(t)}function o(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString(36)}function a(t,e){return null==e?"":("number"!=typeof e||0===e||b[t]||(e+="px"),t+":"+String(e).replace(/([\{\}\[\]])/g,"\\$1"))}function s(t,e){return Array.isArray(e)?e.map(function(e){return a(t,e)}).join(";"):a(t,e)}function u(t){return t.sort(function(t,e){return t[0]>e[0]?1:-1})}function c(t,e){for(var r=[],o=[],a=0,s=Object.keys(t);a<s.length;a++){var c=s[a],l=t[c];i(l)?o.push([c.trim(),l]):r.push([n(c.trim()),l])}return{properties:u(r),nestedStyles:e?o:u(o)}}function l(t){return t.map(function(t){return s(t[0],t[1])}).join(";")}function h(t,e){return t.indexOf("&")>-1?t.replace(/&/g,e):e+" "+t}function f(t,e,n){function i(t,e,s){var u=c(e,n),f=u.properties,d=u.nestedStyles,p=l(f),v=t.add(new P(p,t.hash));a+=p,o.push([s,v]);for(var g=0,y=d;g<y.length;g++){var m=y[g],_=m[0],b=m[1];a+=_,r(_)?i(t.add(new M(_,(void 0),t.hash)),b,s):i(t,b,n?h(_,s):_)}}var o=[],a="";return i(t,e,"&"),{hashString:a,instances:o}}function d(t,e){for(var n=f(t,e,!0),r=n.hashString,i=n.instances,o="f"+t.hash(r),a="."+o,s=0,u=i;s<u.length;s++){var c=u[s],l=c[0],d=c[1];d.add(new C(h(l,a),d.hash,(void 0),r))}return o}function p(t,e,n){var r=c(n,!1),i=r.properties,o=r.nestedStyles;if(i.length&&o.length)throw new TypeError("Registering a CSS rule can not use properties with nested styles");for(var a=l(i),s=t.add(new M(e,a,t.hash)),u=0,h=o;u<h.length;u++){var f=h[u],d=f[0],v=f[1];p(s,d,v)}}function v(t,e,n){for(var r=new O(t.hash),i=f(r,n,!1),o=i.hashString,a=i.instances,s=0,u=a;s<u.length;s++){var c=u[s],l=c[0],h=c[1];h.add(new C(l,h.hash,(void 0),o))}var d="h"+t.hash(o),p=t.add(new M("@"+e+" "+d,(void 0),t.hash,(void 0),o));return p.merge(r),d}function g(t){return t.values().map(function(t){return t.getStyles()}).join("")}function y(t){return new L(t)}for(var m=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_=0,b={"box-flex":!0,"box-flex-group":!0,"column-count":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"font-weight":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"stroke-dashoffset":!0,"stroke-opacity":!0,"stroke-width":!0},E=["-webkit-","-ms-","-moz-","-o-"],T=0,x=Object.keys(b);T<x.length;T++)for(var S=x[T],w=0,R=E;w<R.length;w++){var A=R[w];b[A+S]=!0}e.stringHash=o;var O=function(){function t(t){var e=this;void 0===t&&(t=o),this.hash=t,this._children={},this._keys=[],this._counts={},this._listeners=[],this._mergeListener=function(t,n){for(var r=n.pop(),i=e,o=0,a=n;o<a.length;o++){var s=a[o];i=e.get(s)}return"add"===t?i.add(r):e.remove(r)},this._childListener=function(t,n,r){e.emitChange(t,[r].concat(n))}}return t.prototype.values=function(){var t=this;return this._keys.map(function(e){return t._children[e]})},t.prototype.empty=function(){for(var t=0,e=this._keys;t<e.length;t++)for(var n=e[t],r=this._children[n],i=this.count(r);i--;)this.remove(r)},t.prototype.add=function(e){var n=this._counts[e.id]||0,r=this._children[e.id];if(this._counts[e.id]=n+1,0===n)r=e.clone(),this._keys.push(r.id),this._children[r.id]=r,this.emitChange("add",[r]);else if(this._keys.splice(this._keys.indexOf(e.id),1),this._keys.push(e.id),r.getIdentifier()!==e.getIdentifier())throw new TypeError("Hash collision: "+e.getStyles()+" === "+r.getStyles());if(e instanceof t){0===n&&r.addChangeListener(this._childListener);for(var i=0,o=e.values();i<o.length;i++){var a=o[i];r.add(a)}}return r},t.prototype.get=function(t){return this._children[t.id]},t.prototype.count=function(t){return this._counts[t.id]||0},t.prototype.remove=function(e){var n=this._counts[e.id];if(n>0){this._counts[e.id]=n-1;var r=this._children[e.id];if(1===n&&(delete this._counts[e.id],delete this._children[e.id],this._keys.splice(this._keys.indexOf(e.id),1),this.emitChange("remove",[e])),e instanceof t){1===n&&r.removeChangeListener(this._childListener);for(var i=0,o=e.values();i<o.length;i++){var a=o[i];r.remove(a)}}}},t.prototype.addChangeListener=function(t){this._listeners.push(t)},t.prototype.removeChangeListener=function(t){var e=this._listeners,n=e.indexOf(t);n>-1&&e.splice(n,1)},t.prototype.emitChange=function(t,e){for(var n=0,r=this._listeners;n<r.length;n++){var i=r[n];i(t,e,this)}},t.prototype.merge=function(t){for(var e=0,n=t.values();e<n.length;e++){var r=n[e];this.add(r)}t.addChangeListener(this._mergeListener)},t.prototype.unmerge=function(t){for(var e=0,n=t.values();e<n.length;e++){var r=n[e];this.remove(r)}t.removeChangeListener(this._mergeListener)},t}();e.Cache=O;var C=function(){function t(t,e,n,r){void 0===e&&(e=o),void 0===n&&(n="s"+e(t)),void 0===r&&(r=""),this.selector=t,this.hash=e,this.id=n,this.identifier=r}return t.prototype.getStyles=function(){return this.selector},t.prototype.getIdentifier=function(){return this.identifier+"_"+this.selector},t.prototype.clone=function(){return new t(this.selector,this.hash,this.id,this.identifier)},t}();e.Selector=C;var P=function(t){function e(e,n,r){void 0===n&&(n=o),void 0===r&&(r="c"+n(e)),t.call(this),this.style=e,this.hash=n,this.id=r}return m(e,t),e.prototype.getStyles=function(){return this.style?this.values().map(function(t){return t.selector}).join(",")+"{"+this.style+"}":""},e.prototype.getIdentifier=function(){return this.style},e.prototype.clone=function(){return new e(this.style,this.hash,this.id)},e}(O);e.Style=P;var M=function(t){function e(e,n,r,i,a){void 0===n&&(n=""),void 0===r&&(r=o),void 0===i&&(i="a"+r(e+n)),void 0===a&&(a=""),t.call(this),this.rule=e,this.style=n,this.hash=r,this.id=i,this.identifier=a}return m(e,t),e.prototype.getStyles=function(){return this.rule+"{"+this.style+g(this)+"}"},e.prototype.getIdentifier=function(){return this.identifier+"_"+this.rule+"_"+this.style},e.prototype.clone=function(){return new e(this.rule,this.style,this.hash,this.id,this.identifier)},e}(O);e.Rule=M;var L=function(t){function e(e,n){void 0===e&&(e=o),void 0===n&&(n="f"+(++_).toString(36)),t.call(this,e),this.hash=e,this.id=n}return m(e,t),e.prototype.url=function(t){return'url("'+encodeURI(t)+'")'},e.prototype.join=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if("string"==typeof o)n.push(o);else if(Array.isArray(o))n.push(this.join.apply(this,o));else if(null!=o)for(var a=0,s=Object.keys(o);a<s.length;a++){var u=s[a];o[u]&&n.push(u)}}return n.join(" ")},e.prototype.registerStyle=function(t){return d(this,t)},e.prototype.registerRule=function(t,e){return p(this,t,e)},e.prototype.registerKeyframes=function(t){return v(this,"keyframes",t)},e.prototype.inject=function(t){t=t||document.head;var e=document.createElement("style");return e.innerHTML=this.getStyles(),t.appendChild(e),e},e.prototype.getStyles=function(){return g(this)},e.prototype.getIdentifier=function(){return this.id},e.prototype.clone=function(){return new e(this.hash,this.id)},e}(O);e.FreeStyle=L,e.create=y},function(t,e,n){n(614),t.exports=self.fetch.bind(self)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function u(t){var e=new FileReader;return e.readAsText(t),a(e)}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t){var e=t.toUpperCase();return g.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var n=e.body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=l(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function d(t){var e=new i,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function p(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof i?e.headers:new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},i.prototype["delete"]=function(t){delete this.map[e(t)]},i.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},i.prototype.getAll=function(t){return this.map[e(t)]||[]},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},c.call(h.prototype),c.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t};var y=[301,302,303,307,308];p.redirect=function(t,e){if(y.indexOf(e)===-1)throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=h,t.Response=p,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:d(a),url:i()},e="response"in a?a.response:a.responseText;n(new p(e,t))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&v.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e){/*!
	* screenfull
	* v4.0.0 - 2018-12-15
	* (c) Sindre Sorhus; MIT License
	*/
!function(){"use strict";var e="undefined"!=typeof window&&"undefined"!=typeof window.document?window.document:{},n="undefined"!=typeof t&&t.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};r<i;r++)if(t=n[r],t&&t[1]in e){for(r=0;r<t.length;r++)o[n[0][r]]=t[r];return o}return!1}(),o={change:i.fullscreenchange,error:i.fullscreenerror},a={request:function(t){return new Promise(function(n){var o=i.requestFullscreen,a=function(){this.off("change",a),n()}.bind(this);t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[o]():t[o](r?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",a)}.bind(this))},exit:function(){return new Promise(function(t){var n=function(){this.off("change",n),t()}.bind(this);e[i.exitFullscreen](),this.on("change",n)}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var r=o[t];r&&e.addEventListener(r,n,!1)},off:function(t,n){var r=o[t];r&&e.removeEventListener(r,n,!1)},raw:i};return i?(Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(e[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[i.fullscreenEnabled])}}}),void(n?t.exports=a:window.screenfull=a)):void(n?t.exports=!1:window.screenfull=!1)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(617),i=function(){function t(t){void 0===t&&(t={});var e=this;this.matchIndexArray=[],this.video=t.video||o,this.live=t.live||a,this.community=t.community||s,this.channel=t.channel||u,this.commons=t.commons||c,this.seiga=t.seiga||l,this.news=t.news||h,this.app=t.app||f,this.solid=t.solid||d,this.ichiba=t.ichiba||p,this.dwangoJpStore=t.dwangoJpStore||v,this.knowledge=t.knowledge||g,this.nicopedia=t.nicopedia||y,this.game=t.game||m,this.nicosummary=t.nicosummary||_,this.converters=T.concat(t.additionalConverters||[]);var n=1;this.matchIndexToConvertersMap=this.converters.reduce(function(t,r){var i=r.convert;return t[n]=i,e.matchIndexArray.push(n),n+=i.length,t},{})}return t.prototype.resolve=function(e,n){if(void 0===n&&(n=!1),!e)return{type:t.Type.UNKNOWN};var r=(n?this.wide2ascii(e):e).match(this.getMergedStrictMatchRegExp());return r?this.convertMatchedString(r):{type:t.Type.UNKNOWN}},t.prototype.isValid=function(t){return this.getMergedStrictMatchRegExp().test(t)},t.prototype.replace=function(t,e){var n=this;if(!t)return t;var i;if("function"==typeof e)i=e;else{var o=e&&Object.keys(e).reduce(function(t,n){return t+" "+n+'="'+r.escape(e[n])+'"'},"")||"";i=function(t){return t.url?'<a href="'+r.escape(t.url)+'"'+o+">"+t.src+"</a>":t.src}}return t.replace(this.getMergedGlobalMatchRegExp(),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(n.convertMatchedString(t,!0))})},t.prototype.replaceByNonString=function(t,e){var n=this,r=[];if(!t)return r;var i=0;t.replace(this.getMergedGlobalMatchRegExp(),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=o[o.length-2],u=t.slice(i,s),c=r.length-1,l=e(n.convertMatchedString(o,!0));return i=s+o[0].length,"string"==typeof l?"string"==typeof r[c]?r[c]=""+r[c]+u+l:r.push(""+u+l):("string"==typeof r[c]?r[c]=""+r[c]+u:u&&r.push(u),r.push(l)),""});var o=t.slice(i);if(o){var a=r.length-1;"string"==typeof r[a]?r[a]=""+r[a]+o:r.push(o)}return r},t.prototype.getMergedStrictMatchRegExp=function(){return this.mergedStrictMatchRegExp||(this.mergedStrictMatchRegExp=new RegExp("(^"+this.converters.map(function(t){var e=t.target;return e}).join("$)|(^")+"$)")),this.mergedStrictMatchRegExp},t.prototype.getMergedGlobalMatchRegExp=function(){if(!this.mergedGlobalMatchRegExp){var t="(?=(?:$|\\b|\\W))";this.mergedGlobalMatchRegExp=new RegExp("("+t+this.converters.map(function(t){var e=t.target;return e}).join(t+")|("+t)+t+")","g")}return this.mergedGlobalMatchRegExp},t.prototype.convertMatchedString=function(e,n){for(var r=0,i=this.matchIndexArray;r<i.length;r++){var o=i[r];if(e[o]){var a=this.matchIndexToConvertersMap[o],s=a.apply(this,e.slice(o,o+a.length));return n?Object.assign({src:e[o]},s):s}}return n?{src:"",type:t.Type.UNKNOWN}:{type:t.Type.UNKNOWN}},t.prototype.wide2ascii=function(t){return t.replace(/[-]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}).replace(//g,'"').replace(//g,"'").replace(//g,"`").replace(//g,"\\").replace(//g," ").replace(//g,"~")},t}();!function(t){var e;!function(t){t.VIDEO="video",t.THREAD="thread",t.USER="user",t.USER_VIDEO="userVideo",t.MYLIST="mylist",t.LIVE="live",t.CHANNEL="channel",t.CHANNEL_PAGE="channelPage",t.BLOMAGA="blomaga",t.COMMUNITY="community",t.BOOK="book",t.ILLUST="illust",t.USER_ILLUST="userIllust",t.CLIP="clip",t.COMIC="comic",t.NEWS="news",t.APP="app",t.ICHIBA="ichiba",t.COMMONS="commons",t.COMMONS_USER="commonsUser",t.SOLID="solid",t.KNOWLEDGE="knowledge",t.DWANGO_JP_STORE="dwangoJpStore",t.NICOPEDIA="nicopedia",t.RPG_ATSUMARU="rpgAtsumaru",t.RAW_URL="rawUrl",t.SEEK_POSITION="seekPosition",t.NICOSUMMARY="nicosummary",t.UNKNOWN="unknown"}(e=t.Type||(t.Type={}));var n;!function(e){e.RAW_URL={target:"https?://[-_.!~*'()a-zA-Z0-9;/?:@&=+$,%#]+",convert:function(e){return{type:t.Type.RAW_URL,url:e}}}}(n=t.AdditionalConverter||(t.AdditionalConverter={}))}(i||(i={})),e["default"]=i;var o="https://www.nicovideo.jp",a="http://live.nicovideo.jp",s="http://com.nicovideo.jp",u="http://ch.nicovideo.jp",c="http://commons.nicovideo.jp",l="http://seiga.nicovideo.jp",h="https://news.nicovideo.jp",f="http://app.nicovideo.jp",d="http://3d.nicovideo.jp",p="http://ichiba.nicovideo.jp",v="http://jpstore.dwango.jp",g="http://niconare.nicovideo.jp",y="http://dic.nicovideo.jp",m="http://game.nicovideo.jp",_="https://mtm.nicovideo.jp",b="(?:sm|sd|nm|ca|cd|ax|yo|nl|ig|na|cw|za|zb|zc|zd|ze|om|sk|yk|so|am|fz)\\d{1,14}",E="(?:dw\\d+|az[A-Z0-9]{10}|ys[a-zA-Z0-9-]+_[a-zA-Z0-9-]+|ga\\d+|ip[\\d_]+|gg[a-zA-Z0-9]+-[a-zA-Z0-9-]+|rt[-0-9a-zA-Z]+_[0-9]+|it\\d{10,11})",T=[{target:b,convert:function(t){return{type:i.Type.VIDEO,url:this.video+"/watch/"+t}}},{target:"watch/\\d{10}",convert:function(t){return{type:i.Type.THREAD,url:this.video+"/"+t}}},{target:"user/\\d{1,10}",convert:function(t){return{type:i.Type.USER,url:this.video+"/"+t}}},{target:"myvideo/(\\d{1,10})",convert:function(t,e){return{type:i.Type.USER_VIDEO,url:this.video+"/user/"+e+"/video"}}},{target:"mylist/\\d{1,10}",convert:function(t){return{type:i.Type.MYLIST,url:this.video+"/"+t}}},{target:"lv\\d{1,14}",convert:function(t){return{type:i.Type.LIVE,url:this.live+"/watch/"+t}}},{target:"ch\\d{1,14}",convert:function(t){return{type:i.Type.CHANNEL,url:this.channel+"/channel/"+t}}},{target:"ch.nicovideo.jp/([a-zA-Z0-9][-_a-zA-Z0-9]*)(?=[^-_a-zA-Z0-9/]|$)",convert:function(t,e){return{type:i.Type.CHANNEL_PAGE,url:this.channel+"/"+e}}},{target:"ar\\d{1,14}",convert:function(t){return{type:i.Type.BLOMAGA,url:this.channel+"/article/"+t}}},{target:"co\\d{1,14}",convert:function(t){return{type:i.Type.COMMUNITY,url:this.community+"/community/"+t}}},{target:"(?:sg|mg|bk)\\d{1,14}",convert:function(t){return{type:i.Type.BOOK,url:this.seiga+"/watch/"+t}}},{target:"im\\d{1,14}",convert:function(t){return{type:i.Type.ILLUST,url:this.seiga+"/seiga/"+t}}},{target:"user/illust/\\d+",convert:function(t){return{type:i.Type.USER_ILLUST,url:this.seiga+"/"+t}}},{target:"clip/\\d+",convert:function(t){return{type:i.Type.CLIP,url:this.seiga+"/"+t}}},{target:"comic/\\d+",convert:function(t){return{type:i.Type.COMIC,url:this.seiga+"/"+t}}},{target:"nw\\d{1,14}",convert:function(t){return{type:i.Type.NEWS,url:this.news+"/watch/"+t}}},{target:"ap\\d{1,14}",convert:function(t){return{type:i.Type.APP,url:this.app+"/app/"+t}}},{target:E,convert:function(t){return{type:i.Type.ICHIBA,url:this.ichiba+"/item/"+t}}},{target:"nc\\d{1,14}",convert:function(t){return{type:i.Type.COMMONS,url:this.commons+"/material/"+t}}},{target:"(?:commons.nicovideo.jp|niconicommons.jp)/user/(\\d+)",convert:function(t,e){return{type:i.Type.COMMONS_USER,url:this.commons+"/user/"+e}}},{target:"td\\d+",convert:function(t){return{type:i.Type.SOLID,url:this.solid+"/works/"+t}}},{target:"kn\\d+",convert:function(t){return{type:i.Type.KNOWLEDGE,url:this.knowledge+"/watch/"+t}}},{target:"jps(\\d+)",convert:function(t,e){return{type:i.Type.DWANGO_JP_STORE,url:this.dwangoJpStore+"/products/detail.php?product_id="+e}}},{target:"dic/("+b+")",convert:function(t,e){return{type:i.Type.NICOPEDIA,url:this.nicopedia+"/v/"+e}}},{target:"dic/("+E+")",convert:function(t,e){return{type:i.Type.NICOPEDIA,url:this.nicopedia+"/i/"+e}}},{target:"dic/([^/?#]+)",convert:function(t,e){try{e===decodeURIComponent(e)&&(e=encodeURIComponent(e))}catch(n){e=encodeURIComponent(e)}return{type:i.Type.NICOPEDIA,url:this.nicopedia+"/a/"+e}}},{target:"gm\\d+",convert:function(t){return{type:i.Type.RPG_ATSUMARU,url:this.game+"/atsumaru/games/"+t}}},{target:"#(\\d+):(\\d+(?:\\.\\d+)?)",convert:function(t,e,n){return{type:i.Type.SEEK_POSITION,positionMs:6e4*Number(e)+1e3*Number(n)}}},{target:"mt\\d+",convert:function(t){return{type:i.Type.NICOSUMMARY,url:this.nicosummary+"/watch/"+t}}}]},function(t,e,n){var r;(function(t,i){(function(){function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function u(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function h(t,e){var n=null==t?0:t.length;return!!n&&T(t,e,0)>-1}function f(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function d(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function v(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function g(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function y(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function m(t){return t.split("")}function _(t){return t.match(Be)||[]}function b(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function E(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function T(t,e,n){return e===e?q(t,e,n):E(t,S,n)}function x(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function S(t){return t!==t}function w(t,e){var n=null==t?0:t.length;return n?P(t,e)/n:Dt}function R(t){return function(e){return null==e?nt:e[t]}}function A(t){return function(e){return null==t?nt:t[e]}}function O(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function C(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function P(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==nt&&(n=n===nt?o:n+o)}return n}function M(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function L(t,e){return d(e,function(e){return[e,t[e]]})}function k(t){return function(e){return t(e)}}function I(t,e){return d(e,function(e){return t[e]})}function D(t,e){return t.has(e)}function F(t,e){for(var n=-1,r=t.length;++n<r&&T(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length;n--&&T(e,t[n],0)>-1;);return n}function U(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function j(t){return"\\"+Qn[t]}function B(t,e){return null==t?nt:t[e]}function G(t){return zn.test(t)}function H(t){return Vn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function z(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function V(t,e){return function(n){return t(e(n))}}function Y(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ct||(t[n]=ct,o[i++]=n)}return o}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function q(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function $(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function J(t){return G(t)?Q(t):gr(t)}function Z(t){return G(t)?tt(t):m(t)}function Q(t){for(var e=Hn.lastIndex=0;Hn.test(t);)++e;return e}function tt(t){return t.match(Hn)||[]}function et(t){return t.match(Wn)||[]}var nt,rt="4.17.11",it=200,ot="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",st="__lodash_hash_undefined__",ut=500,ct="__lodash_placeholder__",lt=1,ht=2,ft=4,dt=1,pt=2,vt=1,gt=2,yt=4,mt=8,_t=16,bt=32,Et=64,Tt=128,xt=256,St=512,wt=30,Rt="...",At=800,Ot=16,Ct=1,Pt=2,Mt=3,Lt=1/0,kt=9007199254740991,It=1.7976931348623157e308,Dt=NaN,Ft=4294967295,Nt=Ft-1,Ut=Ft>>>1,jt=[["ary",Tt],["bind",vt],["bindKey",gt],["curry",mt],["curryRight",_t],["flip",St],["partial",bt],["partialRight",Et],["rearg",xt]],Bt="[object Arguments]",Gt="[object Array]",Ht="[object AsyncFunction]",Wt="[object Boolean]",zt="[object Date]",Vt="[object DOMException]",Yt="[object Error]",Xt="[object Function]",Kt="[object GeneratorFunction]",qt="[object Map]",$t="[object Number]",Jt="[object Null]",Zt="[object Object]",Qt="[object Promise]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",ce="[object DataView]",le="[object Float32Array]",he="[object Float64Array]",fe="[object Int8Array]",de="[object Int16Array]",pe="[object Int32Array]",ve="[object Uint8Array]",ge="[object Uint8ClampedArray]",ye="[object Uint16Array]",me="[object Uint32Array]",_e=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,Se=RegExp(Te.source),we=RegExp(xe.source),Re=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Oe=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,ke=RegExp(Le.source),Ie=/^\s+|\s+$/g,De=/^\s+/,Fe=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ge=/\\(\\)?/g,He=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,ze=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$e=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,Ze="\\ud800-\\udfff",Qe="\\u0300-\\u036f",tn="\\ufe20-\\ufe2f",en="\\u20d0-\\u20ff",nn=Qe+tn+en,rn="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",an="\\xac\\xb1\\xd7\\xf7",sn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",un="\\u2000-\\u206f",cn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ln="A-Z\\xc0-\\xd6\\xd8-\\xde",hn="\\ufe0e\\ufe0f",fn=an+sn+un+cn,dn="[']",pn="["+Ze+"]",vn="["+fn+"]",gn="["+nn+"]",yn="\\d+",mn="["+rn+"]",_n="["+on+"]",bn="[^"+Ze+fn+yn+rn+on+ln+"]",En="\\ud83c[\\udffb-\\udfff]",Tn="(?:"+gn+"|"+En+")",xn="[^"+Ze+"]",Sn="(?:\\ud83c[\\udde6-\\uddff]){2}",wn="[\\ud800-\\udbff][\\udc00-\\udfff]",Rn="["+ln+"]",An="\\u200d",On="(?:"+_n+"|"+bn+")",Cn="(?:"+Rn+"|"+bn+")",Pn="(?:"+dn+"(?:d|ll|m|re|s|t|ve))?",Mn="(?:"+dn+"(?:D|LL|M|RE|S|T|VE))?",Ln=Tn+"?",kn="["+hn+"]?",In="(?:"+An+"(?:"+[xn,Sn,wn].join("|")+")"+kn+Ln+")*",Dn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nn=kn+Ln+In,Un="(?:"+[mn,Sn,wn].join("|")+")"+Nn,jn="(?:"+[xn+gn+"?",gn,Sn,wn,pn].join("|")+")",Bn=RegExp(dn,"g"),Gn=RegExp(gn,"g"),Hn=RegExp(En+"(?="+En+")|"+jn+Nn,"g"),Wn=RegExp([Rn+"?"+_n+"+"+Pn+"(?="+[vn,Rn,"$"].join("|")+")",Cn+"+"+Mn+"(?="+[vn,Rn+On,"$"].join("|")+")",Rn+"?"+On+"+"+Pn,Rn+"+"+Mn,Fn,Dn,yn,Un].join("|"),"g"),zn=RegExp("["+An+Ze+nn+hn+"]"),Vn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xn=-1,Kn={};Kn[le]=Kn[he]=Kn[fe]=Kn[de]=Kn[pe]=Kn[ve]=Kn[ge]=Kn[ye]=Kn[me]=!0,Kn[Bt]=Kn[Gt]=Kn[ue]=Kn[Wt]=Kn[ce]=Kn[zt]=Kn[Yt]=Kn[Xt]=Kn[qt]=Kn[$t]=Kn[Zt]=Kn[ee]=Kn[ne]=Kn[re]=Kn[ae]=!1;var qn={};qn[Bt]=qn[Gt]=qn[ue]=qn[ce]=qn[Wt]=qn[zt]=qn[le]=qn[he]=qn[fe]=qn[de]=qn[pe]=qn[qt]=qn[$t]=qn[Zt]=qn[ee]=qn[ne]=qn[re]=qn[ie]=qn[ve]=qn[ge]=qn[ye]=qn[me]=!0,qn[Yt]=qn[Xt]=qn[ae]=!1;var $n={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Jn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tr=parseFloat,er=parseInt,nr="object"==typeof t&&t&&t.Object===Object&&t,rr="object"==typeof self&&self&&self.Object===Object&&self,ir=nr||rr||Function("return this")(),or="object"==typeof e&&e&&!e.nodeType&&e,ar=or&&"object"==typeof i&&i&&!i.nodeType&&i,sr=ar&&ar.exports===or,ur=sr&&nr.process,cr=function(){try{var t=ar&&ar.require&&ar.require("util").types;return t?t:ur&&ur.binding&&ur.binding("util")}catch(e){}}(),lr=cr&&cr.isArrayBuffer,hr=cr&&cr.isDate,fr=cr&&cr.isMap,dr=cr&&cr.isRegExp,pr=cr&&cr.isSet,vr=cr&&cr.isTypedArray,gr=R("length"),yr=A($n),mr=A(Jn),_r=A(Zn),br=function Tr(t){function e(t){if(ou(t)&&!yf(t)&&!(t instanceof i)){if(t instanceof r)return t;if(gl.call(t,"__wrapped__"))return na(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ft,this.__views__=[]}function m(){var t=new i(this.__wrapped__);return t.__actions__=Di(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Di(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Di(this.__views__),t}function A(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function q(){var t=this.__wrapped__.value(),e=this.__dir__,n=yf(t),r=e<0,i=n?t.length:0,o=wo(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=Yl(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return mi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){c+=e;for(var v=-1,g=t[c];++v<h;){var y=l[v],m=y.iteratee,_=y.type,b=m(g);if(_==Pt)g=b;else if(!b){if(_==Ct)continue t;break t}}p[f++]=g}return p}function Q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function tt(){this.__data__=nh?nh(null):{},this.size=0}function Be(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(nh){var n=e[t];return n===st?nt:n}return gl.call(e,t)?e[t]:nt}function Qe(t){var e=this.__data__;return nh?e[t]!==nt:gl.call(e,t)}function tn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nh&&e===nt?st:e,this}function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nn(){this.__data__=[],this.size=0}function rn(t){var e=this.__data__,n=Cn(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Pl.call(e,n,1),--this.size,!0}function on(t){var e=this.__data__,n=Cn(e,t);return n<0?nt:e[n][1]}function an(t){return Cn(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,r=Cn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function cn(){this.size=0,this.__data__={hash:new Q,map:new(Zl||en),string:new Q}}function ln(t){var e=Eo(this,t)["delete"](t);return this.size-=e?1:0,e}function hn(t){return Eo(this,t).get(t)}function fn(t){return Eo(this,t).has(t)}function dn(t,e){var n=Eo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function pn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new un;++e<n;)this.add(t[e])}function vn(t){return this.__data__.set(t,st),this}function gn(t){return this.__data__.has(t)}function yn(t){var e=this.__data__=new en(t);this.size=e.size}function mn(){this.__data__=new en,this.size=0}function _n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function bn(t){return this.__data__.get(t)}function En(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Zl||r.length<it-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new un(r)}return n.set(t,e),this.size=n.size,this}function xn(t,e){var n=yf(t),r=!n&&gf(t),i=!n&&!r&&_f(t),o=!n&&!r&&!i&&Sf(t),a=n||r||i||o,s=a?M(t.length,cl):[],u=s.length;for(var c in t)!e&&!gl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ko(c,u))||s.push(c);return s}function Sn(t){var e=t.length;return e?t[Qr(0,e-1)]:nt}function wn(t,e){return Zo(Di(t),Dn(e,0,t.length))}function Rn(t){return Zo(Di(t))}function An(t,e,n){(n===nt||Vs(t[e],n))&&(n!==nt||e in t)||kn(t,e,n)}function On(t,e,n){var r=t[e];gl.call(t,e)&&Vs(r,n)&&(n!==nt||e in t)||kn(t,e,n)}function Cn(t,e){for(var n=t.length;n--;)if(Vs(t[n][0],e))return n;return-1}function Pn(t,e,n,r){return ph(t,function(t,i,o){e(r,t,n(t),o)}),r}function Mn(t,e){return t&&Fi(e,Bu(e),t)}function Ln(t,e){return t&&Fi(e,Gu(e),t)}function kn(t,e,n){"__proto__"==e&&Il?Il(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function In(t,e){for(var n=-1,r=e.length,i=nl(r),o=null==t;++n<r;)i[n]=o?nt:Nu(t,e[n]);return i}function Dn(t,e,n){return t===t&&(n!==nt&&(t=t<=n?t:n),e!==nt&&(t=t>=e?t:e)),t}function Fn(t,e,n,r,i,o){var a,u=e&lt,c=e&ht,l=e&ft;if(n&&(a=i?n(t,r,i,o):n(t)),a!==nt)return a;if(!iu(t))return t;var h=yf(t);if(h){if(a=Oo(t),!u)return Di(t,a)}else{var f=Rh(t),d=f==Xt||f==Kt;if(_f(t))return wi(t,u);if(f==Zt||f==Bt||d&&!i){if(a=c||d?{}:Co(t),!u)return c?Ui(t,Ln(a,t)):Ni(t,Mn(a,t))}else{if(!qn[f])return i?t:{};a=Po(t,f,u)}}o||(o=new yn);var p=o.get(t);if(p)return p;if(o.set(t,a),xf(t))return t.forEach(function(r){a.add(Fn(r,e,n,r,t,o))}),a;if(Ef(t))return t.forEach(function(r,i){a.set(i,Fn(r,e,n,i,t,o))}),a;var v=l?c?yo:go:c?Gu:Bu,g=h?nt:v(t);return s(g||t,function(r,i){g&&(i=r,r=t[i]),On(a,i,Fn(r,e,n,i,t,o))}),a}function Nn(t){var e=Bu(t);return function(n){return Un(n,t,e)}}function Un(t,e,n){var r=n.length;if(null==t)return!r;for(t=sl(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===nt&&!(i in t)||!o(a))return!1}return!0}function jn(t,e,n){if("function"!=typeof t)throw new ll(at);return Ch(function(){t.apply(nt,n)},e)}function Hn(t,e,n,r){var i=-1,o=h,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=d(e,k(n))),r?(o=f,a=!1):e.length>=it&&(o=D,a=!1,e=new pn(e));t:for(;++i<s;){var l=t[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,a&&p===p){for(var v=c;v--;)if(e[v]===p)continue t;u.push(l)}else o(e,p,r)||u.push(l)}return u}function Wn(t,e){var n=!0;return ph(t,function(t,r,i){return n=!!e(t,r,i)}),n}function zn(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===nt?a===a&&!gu(a):n(a,s)))var s=a,u=o}return u}function Vn(t,e,n,r){var i=t.length;for(n=Tu(n),n<0&&(n=-n>i?0:i+n),r=r===nt||r>i?i:Tu(r),r<0&&(r+=i),r=n>r?0:xu(r);n<r;)t[n++]=e;return t}function $n(t,e){var n=[];return ph(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Jn(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Lo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Jn(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function Zn(t,e){return t&&gh(t,e,Bu)}function Qn(t,e){return t&&yh(t,e,Bu)}function nr(t,e){return l(e,function(e){return eu(t[e])})}function rr(t,e){e=xi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Qo(e[n++])];return n&&n==r?t:nt}function or(t,e,n){var r=e(t);return yf(t)?r:p(r,n(t))}function ar(t){return null==t?t===nt?oe:Jt:kl&&kl in sl(t)?So(t):Vo(t)}function ur(t,e){return t>e}function cr(t,e){return null!=t&&gl.call(t,e)}function gr(t,e){return null!=t&&e in sl(t)}function br(t,e,n){return t>=Yl(e,n)&&t<Vl(e,n)}function xr(t,e,n){for(var r=n?f:h,i=t[0].length,o=t.length,a=o,s=nl(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=d(l,k(e))),u=Yl(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new pn(a&&l):nt}l=t[0];var p=-1,v=s[0];t:for(;++p<i&&c.length<u;){var g=l[p],y=e?e(g):g;if(g=n||0!==g?g:0,!(v?D(v,y):r(c,y,n))){for(a=o;--a;){var m=s[a];if(!(m?D(m,y):r(t[a],y,n)))continue t}v&&v.push(y),c.push(g)}}return c}function Sr(t,e,n,r){return Zn(t,function(t,i,o){e(r,n(t),i,o)}),r}function wr(t,e,n){e=xi(e,t),t=Xo(t,e);var r=null==t?t:t[Qo(Ea(e))];return null==r?nt:o(r,t,n)}function Rr(t){return ou(t)&&ar(t)==Bt}function Ar(t){return ou(t)&&ar(t)==ue}function Or(t){return ou(t)&&ar(t)==zt}function Cr(t,e,n,r,i){return t===e||(null==t||null==e||!ou(t)&&!ou(e)?t!==t&&e!==e:Pr(t,e,n,r,Cr,i))}function Pr(t,e,n,r,i,o){var a=yf(t),s=yf(e),u=a?Gt:Rh(t),c=s?Gt:Rh(e);u=u==Bt?Zt:u,c=c==Bt?Zt:c;var l=u==Zt,h=c==Zt,f=u==c;if(f&&_f(t)){if(!_f(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new yn),a||Sf(t)?ho(t,e,n,r,i,o):fo(t,e,u,n,r,i,o);if(!(n&dt)){var d=l&&gl.call(t,"__wrapped__"),p=h&&gl.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,g=p?e.value():e;return o||(o=new yn),i(v,g,n,r,o)}}return!!f&&(o||(o=new yn),po(t,e,n,r,i,o))}function Mr(t){return ou(t)&&Rh(t)==qt}function Lr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=sl(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===nt&&!(u in t))return!1}else{var h=new yn;if(r)var f=r(c,l,u,t,e,h);if(!(f===nt?Cr(l,c,dt|pt,r,h):f))return!1}}return!0}function kr(t){if(!iu(t)||Uo(t))return!1;var e=eu(t)?Tl:Ye;return e.test(ta(t))}function Ir(t){return ou(t)&&ar(t)==ee}function Dr(t){return ou(t)&&Rh(t)==ne}function Fr(t){return ou(t)&&ru(t.length)&&!!Kn[ar(t)]}function Nr(t){return"function"==typeof t?t:null==t?Pc:"object"==typeof t?yf(t)?Wr(t[0],t[1]):Hr(t):Uc(t)}function Ur(t){if(!jo(t))return zl(t);var e=[];for(var n in sl(t))gl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t){if(!iu(t))return zo(t);var e=jo(t),n=[];for(var r in t)("constructor"!=r||!e&&gl.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function Gr(t,e){var n=-1,r=Ys(t)?nl(t.length):[];return ph(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Hr(t){var e=To(t);return 1==e.length&&e[0][2]?Go(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Wr(t,e){return Do(t)&&Bo(e)?Go(Qo(t),e):function(n){var r=Nu(n,t);return r===nt&&r===e?ju(n,t):Cr(e,r,dt|pt)}}function zr(t,e,n,r,i){t!==e&&gh(e,function(o,a){if(iu(o))i||(i=new yn),Vr(t,e,a,n,zr,r,i);else{var s=r?r(qo(t,a),o,a+"",t,e,i):nt;s===nt&&(s=o),An(t,a,s)}},Gu)}function Vr(t,e,n,r,i,o,a){var s=qo(t,n),u=qo(e,n),c=a.get(u);if(c)return void An(t,n,c);var l=o?o(s,u,n+"",t,e,a):nt,h=l===nt;if(h){var f=yf(u),d=!f&&_f(u),p=!f&&!d&&Sf(u);l=u,f||d||p?yf(s)?l=s:Xs(s)?l=Di(s):d?(h=!1,l=wi(u,!0)):p?(h=!1,l=Pi(u,!0)):l=[]:du(u)||gf(u)?(l=s,gf(s)?l=wu(s):iu(s)&&!eu(s)||(l=Co(u))):h=!1}h&&(a.set(u,l),i(l,u,r,o,a),a["delete"](u)),An(t,n,l)}function Yr(t,e){var n=t.length;if(n)return e+=e<0?n:0,ko(e,n)?t[e]:nt}function Xr(t,e,n){var r=-1;e=d(e.length?e:[Pc],k(bo()));var i=Gr(t,function(t,n,i){var o=d(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return C(i,function(t,e){return Li(t,e,n)})}function Kr(t,e){return qr(t,e,function(e,n){return ju(t,n)})}function qr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=rr(t,a);n(s,a)&&oi(o,xi(a,t),s)}return o}function $r(t){return function(e){return rr(e,t)}}function Jr(t,e,n,r){var i=r?x:T,o=-1,a=e.length,s=t;for(t===e&&(e=Di(e)),n&&(s=d(t,k(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Pl.call(s,u,1),Pl.call(t,u,1);return t}function Zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;ko(i)?Pl.call(t,i,1):vi(t,i)}}return t}function Qr(t,e){return t+jl(ql()*(e-t+1))}function ti(t,e,n,r){for(var i=-1,o=Vl(Ul((e-t)/(n||1)),0),a=nl(o);o--;)a[r?o:++i]=t,t+=n;return a}function ei(t,e){var n="";if(!t||e<1||e>kt)return n;do e%2&&(n+=t),e=jl(e/2),e&&(t+=t);while(e);return n}function ni(t,e){return Ph(Yo(t,e,Pc),t+"")}function ri(t){return Sn(Qu(t))}function ii(t,e){var n=Qu(t);return Zo(n,Dn(e,0,n.length))}function oi(t,e,n,r){if(!iu(t))return t;e=xi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Qo(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):nt,c===nt&&(c=iu(l)?l:ko(e[i+1])?[]:{})}On(s,u,c),s=s[u]}return t}function ai(t){return Zo(Qu(t))}function si(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=nl(i);++r<i;)o[r]=t[r+e];return o}function ui(t,e){var n;return ph(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function ci(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Ut){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!gu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return li(t,e,Pc,n)}function li(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=gu(e),c=e===nt;i<o;){
var l=jl((i+o)/2),h=n(t[l]),f=h!==nt,d=null===h,p=h===h,v=gu(h);if(a)var g=r||p;else g=c?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!v):!d&&!v&&(r?h<=e:h<e);g?i=l+1:o=l}return Yl(o,Nt)}function hi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Vs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function fi(t){return"number"==typeof t?t:gu(t)?Dt:+t}function di(t){if("string"==typeof t)return t;if(yf(t))return d(t,di)+"";if(gu(t))return fh?fh.call(t):"";var e=t+"";return"0"==e&&1/t==-Lt?"-0":e}function pi(t,e,n){var r=-1,i=h,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=f;else if(o>=it){var c=e?null:Th(t);if(c)return X(c);a=!1,i=D,u=new pn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],d=e?e(l):l;if(l=n||0!==l?l:0,a&&d===d){for(var p=u.length;p--;)if(u[p]===d)continue t;e&&u.push(d),s.push(l)}else i(u,d,n)||(u!==s&&u.push(d),s.push(l))}return s}function vi(t,e){return e=xi(e,t),t=Xo(t,e),null==t||delete t[Qo(Ea(e))]}function gi(t,e,n,r){return oi(t,e,n(rr(t,e)),r)}function yi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?si(t,r?0:o,r?o+1:i):si(t,r?o+1:0,r?i:o)}function mi(t,e){var n=t;return n instanceof i&&(n=n.value()),v(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function _i(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=nl(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=Hn(o[i]||a,t[s],e,n));return pi(Jn(o,1),e,n)}function bi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:nt;n(a,t[r],s)}return a}function Ei(t){return Xs(t)?t:[]}function Ti(t){return"function"==typeof t?t:Pc}function xi(t,e){return yf(t)?t:Do(t,e)?[t]:Mh(Au(t))}function Si(t,e,n){var r=t.length;return n=n===nt?r:n,!e&&n>=r?t:si(t,e,n)}function wi(t,e){if(e)return t.slice();var n=t.length,r=Rl?Rl(n):new t.constructor(n);return t.copy(r),r}function Ri(t){var e=new t.constructor(t.byteLength);return new wl(e).set(new wl(t)),e}function Ai(t,e){var n=e?Ri(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Oi(t){var e=new t.constructor(t.source,We.exec(t));return e.lastIndex=t.lastIndex,e}function Ci(t){return hh?sl(hh.call(t)):{}}function Pi(t,e){var n=e?Ri(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==nt,r=null===t,i=t===t,o=gu(t),a=e!==nt,s=null===e,u=e===e,c=gu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Li(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Mi(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function ki(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Vl(o-a,0),l=nl(u+c),h=!r;++s<u;)l[s]=e[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Ii(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=Vl(o-s,0),h=nl(l+c),f=!r;++i<l;)h[i]=t[i];for(var d=i;++u<c;)h[d+u]=e[u];for(;++a<s;)(f||i<o)&&(h[d+n[a]]=t[i++]);return h}function Di(t,e){var n=-1,r=t.length;for(e||(e=nl(r));++n<r;)e[n]=t[n];return e}function Fi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):nt;u===nt&&(u=t[s]),i?kn(n,s,u):On(n,s,u)}return n}function Ni(t,e){return Fi(t,Sh(t),e)}function Ui(t,e){return Fi(t,wh(t),e)}function ji(t,e){return function(n,r){var i=yf(n)?a:Pn,o=e?e():{};return i(n,t,bo(r,2),o)}}function Bi(t){return ni(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:nt,a=i>2?n[2]:nt;for(o=t.length>3&&"function"==typeof o?(i--,o):nt,a&&Io(n[0],n[1],a)&&(o=i<3?nt:o,i=1),e=sl(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Gi(t,e){return function(n,r){if(null==n)return n;if(!Ys(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=sl(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Hi(t){return function(e,n,r){for(var i=-1,o=sl(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function Wi(t,e,n){function r(){var e=this&&this!==ir&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&vt,o=Yi(t);return r}function zi(t){return function(e){e=Au(e);var n=G(e)?Z(e):nt,r=n?n[0]:e.charAt(0),i=n?Si(n,1).join(""):e.slice(1);return r[t]()+i}}function Vi(t){return function(e){return v(wc(oc(e).replace(Bn,"")),t,"")}}function Yi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dh(t.prototype),r=t.apply(n,e);return iu(r)?r:n}}function Xi(t,e,n){function r(){for(var a=arguments.length,s=nl(a),u=a,c=_o(r);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:Y(s,c);if(a-=l.length,a<n)return io(t,e,$i,r.placeholder,nt,s,l,nt,nt,n-a);var h=this&&this!==ir&&this instanceof r?i:t;return o(h,this,s)}var i=Yi(t);return r}function Ki(t){return function(e,n,r){var i=sl(e);if(!Ys(e)){var o=bo(n,3);e=Bu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:nt}}function qi(t){return vo(function(e){var n=e.length,i=n,o=r.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new ll(at);if(o&&!s&&"wrapper"==mo(a))var s=new r([],(!0))}for(i=s?i:n;++i<n;){a=e[i];var u=mo(a),c="wrapper"==u?xh(a):nt;s=c&&No(c[0])&&c[1]==(Tt|mt|bt|xt)&&!c[4].length&&1==c[9]?s[mo(c[0])].apply(s,c[3]):1==a.length&&No(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&yf(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function $i(t,e,n,r,i,o,a,s,u,c){function l(){for(var y=arguments.length,m=nl(y),_=y;_--;)m[_]=arguments[_];if(p)var b=_o(l),E=U(m,b);if(r&&(m=ki(m,r,i,p)),o&&(m=Ii(m,o,a,p)),y-=E,p&&y<c){var T=Y(m,b);return io(t,e,$i,l.placeholder,n,m,T,s,u,c-y)}var x=f?n:this,S=d?x[t]:t;return y=m.length,s?m=Ko(m,s):v&&y>1&&m.reverse(),h&&u<y&&(m.length=u),this&&this!==ir&&this instanceof l&&(S=g||Yi(S)),S.apply(x,m)}var h=e&Tt,f=e&vt,d=e&gt,p=e&(mt|_t),v=e&St,g=d?nt:Yi(t);return l}function Ji(t,e){return function(n,r){return Sr(n,t,e(r),{})}}function Zi(t,e){return function(n,r){var i;if(n===nt&&r===nt)return e;if(n!==nt&&(i=n),r!==nt){if(i===nt)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=fi(n),r=fi(r)),i=t(n,r)}return i}}function Qi(t){return vo(function(e){return e=d(e,k(bo())),ni(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function to(t,e){e=e===nt?" ":di(e);var n=e.length;if(n<2)return n?ei(e,t):e;var r=ei(e,Ul(t/J(e)));return G(e)?Si(Z(r),0,t).join(""):r.slice(0,t)}function eo(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,l=r.length,h=nl(l+u),f=this&&this!==ir&&this instanceof i?s:t;++c<l;)h[c]=r[c];for(;u--;)h[c++]=arguments[++e];return o(f,a?n:this,h)}var a=e&vt,s=Yi(t);return i}function no(t){return function(e,n,r){return r&&"number"!=typeof r&&Io(e,n,r)&&(n=r=nt),e=Eu(e),n===nt?(n=e,e=0):n=Eu(n),r=r===nt?e<n?1:-1:Eu(r),ti(e,n,r,t)}}function ro(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Su(e),n=Su(n)),t(e,n)}}function io(t,e,n,r,i,o,a,s,u,c){var l=e&mt,h=l?a:nt,f=l?nt:a,d=l?o:nt,p=l?nt:o;e|=l?bt:Et,e&=~(l?Et:bt),e&yt||(e&=~(vt|gt));var v=[t,e,i,d,h,p,f,s,u,c],g=n.apply(nt,v);return No(t)&&Oh(g,v),g.placeholder=r,$o(g,t,e)}function oo(t){var e=al[t];return function(t,n){if(t=Su(t),n=null==n?0:Yl(Tu(n),292)){var r=(Au(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Au(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function ao(t){return function(e){var n=Rh(e);return n==qt?z(e):n==ne?K(e):L(e,t(e))}}function so(t,e,n,r,i,o,a,s){var u=e&gt;if(!u&&"function"!=typeof t)throw new ll(at);var c=r?r.length:0;if(c||(e&=~(bt|Et),r=i=nt),a=a===nt?a:Vl(Tu(a),0),s=s===nt?s:Tu(s),c-=i?i.length:0,e&Et){var l=r,h=i;r=i=nt}var f=u?nt:xh(t),d=[t,e,n,r,i,l,h,o,a,s];if(f&&Wo(d,f),t=d[0],e=d[1],n=d[2],r=d[3],i=d[4],s=d[9]=d[9]===nt?u?0:t.length:Vl(d[9]-c,0),!s&&e&(mt|_t)&&(e&=~(mt|_t)),e&&e!=vt)p=e==mt||e==_t?Xi(t,e,s):e!=bt&&e!=(vt|bt)||i.length?$i.apply(nt,d):eo(t,e,n,r);else var p=Wi(t,e,n);var v=f?mh:Oh;return $o(v(p,d),t,e)}function uo(t,e,n,r){return t===nt||Vs(t,dl[n])&&!gl.call(r,n)?e:t}function co(t,e,n,r,i,o){return iu(t)&&iu(e)&&(o.set(e,t),zr(t,e,nt,co,o),o["delete"](e)),t}function lo(t){return du(t)?nt:t}function ho(t,e,n,r,i,o){var a=n&dt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=n&pt?new pn:nt;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],p=e[l];if(r)var v=a?r(p,d,l,e,t,o):r(d,p,l,t,e,o);if(v!==nt){if(v)continue;h=!1;break}if(f){if(!y(e,function(t,e){if(!D(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o["delete"](t),o["delete"](e),h}function fo(t,e,n,r,i,o,a){switch(n){case ce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!o(new wl(t),new wl(e)));case Wt:case zt:case $t:return Vs(+t,+e);case Yt:return t.name==e.name&&t.message==e.message;case ee:case re:return t==e+"";case qt:var s=z;case ne:var u=r&dt;if(s||(s=X),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=pt,a.set(t,e);var l=ho(s(t),s(e),r,i,o,a);return a["delete"](t),l;case ie:if(hh)return hh.call(t)==hh.call(e)}return!1}function po(t,e,n,r,i,o){var a=n&dt,s=go(t),u=s.length,c=go(e),l=c.length;if(u!=l&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:gl.call(e,f)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);for(var v=a;++h<u;){f=s[h];var g=t[f],y=e[f];if(r)var m=a?r(y,g,f,e,t,o):r(g,y,f,t,e,o);if(!(m===nt?g===y||i(g,y,n,r,o):m)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o["delete"](t),o["delete"](e),p}function vo(t){return Ph(Yo(t,nt,da),t+"")}function go(t){return or(t,Bu,Sh)}function yo(t){return or(t,Gu,wh)}function mo(t){for(var e=t.name+"",n=ih[e],r=gl.call(ih,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function _o(t){var n=gl.call(e,"placeholder")?e:t;return n.placeholder}function bo(){var t=e.iteratee||Mc;return t=t===Mc?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function Eo(t,e){var n=t.__data__;return Fo(e)?n["string"==typeof e?"string":"hash"]:n.map}function To(t){for(var e=Bu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Bo(i)]}return e}function xo(t,e){var n=B(t,e);return kr(n)?n:nt}function So(t){var e=gl.call(t,kl),n=t[kl];try{t[kl]=nt;var r=!0}catch(i){}var o=_l.call(t);return r&&(e?t[kl]=n:delete t[kl]),o}function wo(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Yl(e,t+a);break;case"takeRight":t=Vl(t,e-a)}}return{start:t,end:e}}function Ro(t){var e=t.match(Ue);return e?e[1].split(je):[]}function Ao(t,e,n){e=xi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Qo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&ru(i)&&ko(a,i)&&(yf(t)||gf(t)))}function Oo(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&gl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Co(t){return"function"!=typeof t.constructor||jo(t)?{}:dh(Al(t))}function Po(t,e,n){var r=t.constructor;switch(e){case ue:return Ri(t);case Wt:case zt:return new r((+t));case ce:return Ai(t,n);case le:case he:case fe:case de:case pe:case ve:case ge:case ye:case me:return Pi(t,n);case qt:return new r;case $t:case re:return new r(t);case ee:return Oi(t);case ne:return new r;case ie:return Ci(t)}}function Mo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ne,"{\n/* [wrapped with "+e+"] */\n")}function Lo(t){return yf(t)||gf(t)||!!(Ml&&t&&t[Ml])}function ko(t,e){var n=typeof t;return e=null==e?kt:e,!!e&&("number"==n||"symbol"!=n&&Ke.test(t))&&t>-1&&t%1==0&&t<e}function Io(t,e,n){if(!iu(n))return!1;var r=typeof e;return!!("number"==r?Ys(n)&&ko(e,n.length):"string"==r&&e in n)&&Vs(n[e],t)}function Do(t,e){if(yf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!gu(t))||(Pe.test(t)||!Ce.test(t)||null!=e&&t in sl(e))}function Fo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function No(t){var n=mo(t),r=e[n];if("function"!=typeof r||!(n in i.prototype))return!1;if(t===r)return!0;var o=xh(r);return!!o&&t===o[0]}function Uo(t){return!!ml&&ml in t}function jo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||dl;return t===n}function Bo(t){return t===t&&!iu(t)}function Go(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==nt||t in sl(n)))}}function Ho(t){var e=Ms(t,function(t){return n.size===ut&&n.clear(),t}),n=e.cache;return e}function Wo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(vt|gt|Tt),a=r==Tt&&n==mt||r==Tt&&n==xt&&t[7].length<=e[8]||r==(Tt|xt)&&e[7].length<=e[8]&&n==mt;if(!o&&!a)return t;r&vt&&(t[2]=e[2],i|=n&vt?0:yt);var s=e[3];if(s){var u=t[3];t[3]=u?ki(u,s,e[4]):s,t[4]=u?Y(t[3],ct):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Ii(u,s,e[6]):s,t[6]=u?Y(t[5],ct):e[6]),s=e[7],s&&(t[7]=s),r&Tt&&(t[8]=null==t[8]?e[8]:Yl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function zo(t){var e=[];if(null!=t)for(var n in sl(t))e.push(n);return e}function Vo(t){return _l.call(t)}function Yo(t,e,n){return e=Vl(e===nt?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Vl(r.length-e,0),s=nl(a);++i<a;)s[i]=r[e+i];i=-1;for(var u=nl(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),o(t,this,u)}}function Xo(t,e){return e.length<2?t:rr(t,si(e,0,-1))}function Ko(t,e){for(var n=t.length,r=Yl(e.length,n),i=Di(t);r--;){var o=e[r];t[r]=ko(o,n)?i[o]:nt}return t}function qo(t,e){if("__proto__"!=e)return t[e]}function $o(t,e,n){var r=e+"";return Ph(t,Mo(r,ea(Ro(r),n)))}function Jo(t){var e=0,n=0;return function(){var r=Xl(),i=Ot-(r-n);if(n=r,i>0){if(++e>=At)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function Zo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===nt?r:e;++n<e;){var o=Qr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Qo(t){if("string"==typeof t||gu(t))return t;var e=t+"";return"0"==e&&1/t==-Lt?"-0":e}function ta(t){if(null!=t){try{return vl.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ea(t,e){return s(jt,function(n){var r="_."+n[0];e&n[1]&&!h(t,r)&&t.push(r)}),t.sort()}function na(t){if(t instanceof i)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Di(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ra(t,e,n){e=(n?Io(t,e,n):e===nt)?1:Vl(Tu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=nl(Ul(r/e));i<r;)a[o++]=si(t,i,i+=e);return a}function ia(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function oa(){var t=arguments.length;if(!t)return[];for(var e=nl(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(yf(n)?Di(n):[n],Jn(e,1))}function aa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:Tu(e),si(t,e<0?0:e,r)):[]}function sa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:Tu(e),e=r-e,si(t,0,e<0?0:e)):[]}function ua(t,e){return t&&t.length?yi(t,bo(e,3),!0,!0):[]}function ca(t,e){return t&&t.length?yi(t,bo(e,3),!0):[]}function la(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Io(t,e,n)&&(n=0,r=i),Vn(t,e,n,r)):[]}function ha(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Tu(n);return i<0&&(i=Vl(r+i,0)),E(t,bo(e,3),i)}function fa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==nt&&(i=Tu(n),i=n<0?Vl(r+i,0):Yl(i,r-1)),E(t,bo(e,3),i,!0)}function da(t){var e=null==t?0:t.length;return e?Jn(t,1):[]}function pa(t){var e=null==t?0:t.length;return e?Jn(t,Lt):[]}function va(t,e){var n=null==t?0:t.length;return n?(e=e===nt?1:Tu(e),Jn(t,e)):[]}function ga(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ya(t){return t&&t.length?t[0]:nt}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Tu(n);return i<0&&(i=Vl(r+i,0)),T(t,e,i)}function _a(t){var e=null==t?0:t.length;return e?si(t,0,-1):[]}function ba(t,e){return null==t?"":Wl.call(t,e)}function Ea(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function Ta(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==nt&&(i=Tu(n),i=i<0?Vl(r+i,0):Yl(i,r-1)),e===e?$(t,e,i):E(t,S,i,!0)}function xa(t,e){return t&&t.length?Yr(t,Tu(e)):nt}function Sa(t,e){return t&&t.length&&e&&e.length?Jr(t,e):t}function wa(t,e,n){return t&&t.length&&e&&e.length?Jr(t,e,bo(n,2)):t}function Ra(t,e,n){return t&&t.length&&e&&e.length?Jr(t,e,nt,n):t}function Aa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=bo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Zr(t,i),n}function Oa(t){return null==t?t:$l.call(t)}function Ca(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Io(t,e,n)?(e=0,n=r):(e=null==e?0:Tu(e),n=n===nt?r:Tu(n)),si(t,e,n)):[]}function Pa(t,e){return ci(t,e)}function Ma(t,e,n){return li(t,e,bo(n,2))}function La(t,e){var n=null==t?0:t.length;if(n){var r=ci(t,e);if(r<n&&Vs(t[r],e))return r}return-1}function ka(t,e){return ci(t,e,!0)}function Ia(t,e,n){return li(t,e,bo(n,2),!0)}function Da(t,e){var n=null==t?0:t.length;if(n){var r=ci(t,e,!0)-1;if(Vs(t[r],e))return r}return-1}function Fa(t){return t&&t.length?hi(t):[]}function Na(t,e){return t&&t.length?hi(t,bo(e,2)):[]}function Ua(t){var e=null==t?0:t.length;return e?si(t,1,e):[]}function ja(t,e,n){return t&&t.length?(e=n||e===nt?1:Tu(e),si(t,0,e<0?0:e)):[]}function Ba(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===nt?1:Tu(e),e=r-e,si(t,e<0?0:e,r)):[]}function Ga(t,e){return t&&t.length?yi(t,bo(e,3),!1,!0):[]}function Ha(t,e){return t&&t.length?yi(t,bo(e,3)):[]}function Wa(t){return t&&t.length?pi(t):[]}function za(t,e){return t&&t.length?pi(t,bo(e,2)):[]}function Va(t,e){return e="function"==typeof e?e:nt,t&&t.length?pi(t,nt,e):[]}function Ya(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Xs(t))return e=Vl(t.length,e),!0}),M(e,function(e){return d(t,R(e))})}function Xa(t,e){if(!t||!t.length)return[];var n=Ya(t);return null==e?n:d(n,function(t){return o(e,nt,t)})}function Ka(t,e){return bi(t||[],e||[],On)}function qa(t,e){return bi(t||[],e||[],oi)}function $a(t){var n=e(t);return n.__chain__=!0,n}function Ja(t,e){return e(t),t}function Za(t,e){return e(t)}function Qa(){return $a(this)}function ts(){return new r(this.value(),this.__chain__)}function es(){this.__values__===nt&&(this.__values__=bu(this.value()));var t=this.__index__>=this.__values__.length,e=t?nt:this.__values__[this.__index__++];return{done:t,value:e}}function ns(){return this}function rs(t){for(var e,r=this;r instanceof n;){var i=na(r);i.__index__=0,i.__values__=nt,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function is(){var t=this.__wrapped__;if(t instanceof i){var e=t;return this.__actions__.length&&(e=new i(this)),e=e.reverse(),e.__actions__.push({func:Za,args:[Oa],thisArg:nt}),new r(e,this.__chain__)}return this.thru(Oa)}function os(){return mi(this.__wrapped__,this.__actions__)}function as(t,e,n){var r=yf(t)?c:Wn;return n&&Io(t,e,n)&&(e=nt),r(t,bo(e,3))}function ss(t,e){var n=yf(t)?l:$n;return n(t,bo(e,3))}function us(t,e){return Jn(ps(t,e),1)}function cs(t,e){return Jn(ps(t,e),Lt)}function ls(t,e,n){return n=n===nt?1:Tu(n),Jn(ps(t,e),n)}function hs(t,e){var n=yf(t)?s:ph;return n(t,bo(e,3))}function fs(t,e){var n=yf(t)?u:vh;return n(t,bo(e,3))}function ds(t,e,n,r){t=Ys(t)?t:Qu(t),n=n&&!r?Tu(n):0;var i=t.length;return n<0&&(n=Vl(i+n,0)),vu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&T(t,e,n)>-1}function ps(t,e){var n=yf(t)?d:Gr;return n(t,bo(e,3))}function vs(t,e,n,r){return null==t?[]:(yf(e)||(e=null==e?[]:[e]),n=r?nt:n,yf(n)||(n=null==n?[]:[n]),Xr(t,e,n))}function gs(t,e,n){var r=yf(t)?v:O,i=arguments.length<3;return r(t,bo(e,4),n,i,ph)}function ys(t,e,n){var r=yf(t)?g:O,i=arguments.length<3;return r(t,bo(e,4),n,i,vh)}function ms(t,e){var n=yf(t)?l:$n;return n(t,Ls(bo(e,3)))}function _s(t){var e=yf(t)?Sn:ri;return e(t)}function bs(t,e,n){e=(n?Io(t,e,n):e===nt)?1:Tu(e);var r=yf(t)?wn:ii;return r(t,e)}function Es(t){var e=yf(t)?Rn:ai;return e(t)}function Ts(t){if(null==t)return 0;if(Ys(t))return vu(t)?J(t):t.length;var e=Rh(t);return e==qt||e==ne?t.size:Ur(t).length}function xs(t,e,n){var r=yf(t)?y:ui;return n&&Io(t,e,n)&&(e=nt),r(t,bo(e,3))}function Ss(t,e){if("function"!=typeof e)throw new ll(at);return t=Tu(t),function(){if(--t<1)return e.apply(this,arguments)}}function ws(t,e,n){return e=n?nt:e,e=t&&null==e?t.length:e,so(t,Tt,nt,nt,nt,nt,e)}function Rs(t,e){var n;if("function"!=typeof e)throw new ll(at);return t=Tu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=nt),n}}function As(t,e,n){e=n?nt:e;var r=so(t,mt,nt,nt,nt,nt,nt,e);return r.placeholder=As.placeholder,r}function Os(t,e,n){e=n?nt:e;var r=so(t,_t,nt,nt,nt,nt,nt,e);return r.placeholder=Os.placeholder,r}function Cs(t,e,n){function r(e){var n=f,r=d;return f=d=nt,m=e,v=t.apply(r,n)}function i(t){return m=t,g=Ch(s,e),_?r(t):v}function o(t){var n=t-y,r=t-m,i=e-n;return b?Yl(i,p-r):i}function a(t){var n=t-y,r=t-m;return y===nt||n>=e||n<0||b&&r>=p}function s(){var t=of();return a(t)?u(t):void(g=Ch(s,o(t)))}function u(t){return g=nt,E&&f?r(t):(f=d=nt,v)}function c(){g!==nt&&Eh(g),m=0,f=y=d=g=nt}function l(){return g===nt?v:u(of())}function h(){var t=of(),n=a(t);if(f=arguments,d=this,y=t,n){if(g===nt)return i(y);if(b)return g=Ch(s,e),r(y)}return g===nt&&(g=Ch(s,e)),v}var f,d,p,v,g,y,m=0,_=!1,b=!1,E=!0;if("function"!=typeof t)throw new ll(at);return e=Su(e)||0,iu(n)&&(_=!!n.leading,b="maxWait"in n,p=b?Vl(Su(n.maxWait)||0,e):p,E="trailing"in n?!!n.trailing:E),h.cancel=c,h.flush=l,h}function Ps(t){return so(t,St)}function Ms(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ll(at);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ms.Cache||un),n}function Ls(t){if("function"!=typeof t)throw new ll(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ks(t){return Rs(2,t)}function Is(t,e){if("function"!=typeof t)throw new ll(at);return e=e===nt?e:Tu(e),ni(t,e)}function Ds(t,e){if("function"!=typeof t)throw new ll(at);return e=null==e?0:Vl(Tu(e),0),ni(function(n){var r=n[e],i=Si(n,0,e);return r&&p(i,r),o(t,this,i)})}function Fs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ll(at);return iu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Cs(t,e,{leading:r,maxWait:e,trailing:i})}function Ns(t){return ws(t,1)}function Us(t,e){return hf(Ti(e),t)}function js(){if(!arguments.length)return[];var t=arguments[0];return yf(t)?t:[t]}function Bs(t){return Fn(t,ft)}function Gs(t,e){return e="function"==typeof e?e:nt,Fn(t,ft,e)}function Hs(t){return Fn(t,lt|ft)}function Ws(t,e){return e="function"==typeof e?e:nt,Fn(t,lt|ft,e)}function zs(t,e){return null==e||Un(t,e,Bu(e))}function Vs(t,e){return t===e||t!==t&&e!==e}function Ys(t){return null!=t&&ru(t.length)&&!eu(t)}function Xs(t){return ou(t)&&Ys(t)}function Ks(t){return t===!0||t===!1||ou(t)&&ar(t)==Wt}function qs(t){return ou(t)&&1===t.nodeType&&!du(t)}function $s(t){if(null==t)return!0;if(Ys(t)&&(yf(t)||"string"==typeof t||"function"==typeof t.splice||_f(t)||Sf(t)||gf(t)))return!t.length;var e=Rh(t);if(e==qt||e==ne)return!t.size;if(jo(t))return!Ur(t).length;for(var n in t)if(gl.call(t,n))return!1;return!0}function Js(t,e){return Cr(t,e)}function Zs(t,e,n){n="function"==typeof n?n:nt;var r=n?n(t,e):nt;return r===nt?Cr(t,e,nt,n):!!r}function Qs(t){if(!ou(t))return!1;var e=ar(t);return e==Yt||e==Vt||"string"==typeof t.message&&"string"==typeof t.name&&!du(t)}function tu(t){return"number"==typeof t&&Hl(t)}function eu(t){if(!iu(t))return!1;var e=ar(t);return e==Xt||e==Kt||e==Ht||e==te}function nu(t){return"number"==typeof t&&t==Tu(t)}function ru(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=kt}function iu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ou(t){return null!=t&&"object"==typeof t}function au(t,e){return t===e||Lr(t,e,To(e))}function su(t,e,n){return n="function"==typeof n?n:nt,Lr(t,e,To(e),n)}function uu(t){return fu(t)&&t!=+t}function cu(t){if(Ah(t))throw new il(ot);return kr(t)}function lu(t){return null===t}function hu(t){return null==t}function fu(t){return"number"==typeof t||ou(t)&&ar(t)==$t}function du(t){if(!ou(t)||ar(t)!=Zt)return!1;var e=Al(t);if(null===e)return!0;var n=gl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&vl.call(n)==bl}function pu(t){return nu(t)&&t>=-kt&&t<=kt}function vu(t){return"string"==typeof t||!yf(t)&&ou(t)&&ar(t)==re}function gu(t){return"symbol"==typeof t||ou(t)&&ar(t)==ie}function yu(t){return t===nt}function mu(t){return ou(t)&&Rh(t)==ae}function _u(t){return ou(t)&&ar(t)==se}function bu(t){if(!t)return[];if(Ys(t))return vu(t)?Z(t):Di(t);if(Ll&&t[Ll])return W(t[Ll]());var e=Rh(t),n=e==qt?z:e==ne?X:Qu;return n(t)}function Eu(t){if(!t)return 0===t?t:0;if(t=Su(t),t===Lt||t===-Lt){var e=t<0?-1:1;return e*It}return t===t?t:0}function Tu(t){var e=Eu(t),n=e%1;return e===e?n?e-n:e:0}function xu(t){return t?Dn(Tu(t),0,Ft):0}function Su(t){if("number"==typeof t)return t;if(gu(t))return Dt;if(iu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=iu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ie,"");var n=Ve.test(t);return n||Xe.test(t)?er(t.slice(2),n?2:8):ze.test(t)?Dt:+t}function wu(t){return Fi(t,Gu(t))}function Ru(t){return t?Dn(Tu(t),-kt,kt):0===t?t:0}function Au(t){return null==t?"":di(t)}function Ou(t,e){var n=dh(t);return null==e?n:Mn(n,e)}function Cu(t,e){return b(t,bo(e,3),Zn)}function Pu(t,e){return b(t,bo(e,3),Qn)}function Mu(t,e){return null==t?t:gh(t,bo(e,3),Gu)}function Lu(t,e){return null==t?t:yh(t,bo(e,3),Gu)}function ku(t,e){return t&&Zn(t,bo(e,3))}function Iu(t,e){return t&&Qn(t,bo(e,3))}function Du(t){return null==t?[]:nr(t,Bu(t))}function Fu(t){return null==t?[]:nr(t,Gu(t))}function Nu(t,e,n){var r=null==t?nt:rr(t,e);return r===nt?n:r}function Uu(t,e){return null!=t&&Ao(t,e,cr)}function ju(t,e){return null!=t&&Ao(t,e,gr)}function Bu(t){return Ys(t)?xn(t):Ur(t)}function Gu(t){return Ys(t)?xn(t,!0):jr(t)}function Hu(t,e){var n={};return e=bo(e,3),Zn(t,function(t,r,i){kn(n,e(t,r,i),t)}),n}function Wu(t,e){var n={};return e=bo(e,3),Zn(t,function(t,r,i){kn(n,r,e(t,r,i))}),n}function zu(t,e){return Vu(t,Ls(bo(e)))}function Vu(t,e){if(null==t)return{};var n=d(yo(t),function(t){return[t]});return e=bo(e),qr(t,n,function(t,n){return e(t,n[0])})}function Yu(t,e,n){e=xi(e,t);var r=-1,i=e.length;for(i||(i=1,t=nt);++r<i;){var o=null==t?nt:t[Qo(e[r])];o===nt&&(r=i,o=n),t=eu(o)?o.call(t):o}return t}function Xu(t,e,n){return null==t?t:oi(t,e,n)}function Ku(t,e,n,r){return r="function"==typeof r?r:nt,null==t?t:oi(t,e,n,r)}function qu(t,e,n){var r=yf(t),i=r||_f(t)||Sf(t);if(e=bo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:iu(t)&&eu(o)?dh(Al(t)):{}}return(i?s:Zn)(t,function(t,r,i){return e(n,t,r,i)}),n}function $u(t,e){return null==t||vi(t,e)}function Ju(t,e,n){return null==t?t:gi(t,e,Ti(n))}function Zu(t,e,n,r){return r="function"==typeof r?r:nt,null==t?t:gi(t,e,Ti(n),r)}function Qu(t){return null==t?[]:I(t,Bu(t))}function tc(t){return null==t?[]:I(t,Gu(t))}function ec(t,e,n){return n===nt&&(n=e,e=nt),n!==nt&&(n=Su(n),n=n===n?n:0),e!==nt&&(e=Su(e),e=e===e?e:0),Dn(Su(t),e,n)}function nc(t,e,n){return e=Eu(e),n===nt?(n=e,e=0):n=Eu(n),t=Su(t),br(t,e,n)}function rc(t,e,n){if(n&&"boolean"!=typeof n&&Io(t,e,n)&&(e=n=nt),n===nt&&("boolean"==typeof e?(n=e,e=nt):"boolean"==typeof t&&(n=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=Eu(t),e===nt?(e=t,t=0):e=Eu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=ql();return Yl(t+i*(e-t+tr("1e-"+((i+"").length-1))),e)}return Qr(t,e)}function ic(t){return $f(Au(t).toLowerCase())}function oc(t){return t=Au(t),t&&t.replace(qe,yr).replace(Gn,"")}function ac(t,e,n){t=Au(t),e=di(e);var r=t.length;n=n===nt?r:Dn(Tu(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function sc(t){return t=Au(t),t&&we.test(t)?t.replace(xe,mr):t}function uc(t){return t=Au(t),t&&ke.test(t)?t.replace(Le,"\\$&"):t}function cc(t,e,n){t=Au(t),e=Tu(e);var r=e?J(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return to(jl(i),n)+t+to(Ul(i),n)}function lc(t,e,n){t=Au(t),e=Tu(e);var r=e?J(t):0;return e&&r<e?t+to(e-r,n):t}function hc(t,e,n){t=Au(t),e=Tu(e);var r=e?J(t):0;return e&&r<e?to(e-r,n)+t:t}function fc(t,e,n){return n||null==e?e=0:e&&(e=+e),Kl(Au(t).replace(De,""),e||0)}function dc(t,e,n){return e=(n?Io(t,e,n):e===nt)?1:Tu(e),ei(Au(t),e)}function pc(){var t=arguments,e=Au(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function vc(t,e,n){return n&&"number"!=typeof n&&Io(t,e,n)&&(e=n=nt),(n=n===nt?Ft:n>>>0)?(t=Au(t),t&&("string"==typeof e||null!=e&&!Tf(e))&&(e=di(e),!e&&G(t))?Si(Z(t),0,n):t.split(e,n)):[]}function gc(t,e,n){return t=Au(t),n=null==n?0:Dn(Tu(n),0,t.length),e=di(e),t.slice(n,n+e.length)==e}function yc(t,n,r){var i=e.templateSettings;r&&Io(t,n,r)&&(n=nt),t=Au(t),n=Cf({},n,i,uo);var o,a,s=Cf({},n.imports,i.imports,uo),u=Bu(s),c=I(s,u),l=0,h=n.interpolate||$e,f="__p += '",d=ul((n.escape||$e).source+"|"+h.source+"|"+(h===Oe?He:$e).source+"|"+(n.evaluate||$e).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Xn+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(l,u).replace(Je,j),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var v=n.variable;v||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(_e,""):f).replace(be,"$1").replace(Ee,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Jf(function(){return ol(u,p+"return "+f).apply(nt,c)});if(g.source=f,Qs(g))throw g;return g}function mc(t){return Au(t).toLowerCase()}function _c(t){return Au(t).toUpperCase()}function bc(t,e,n){if(t=Au(t),t&&(n||e===nt))return t.replace(Ie,"");if(!t||!(e=di(e)))return t;var r=Z(t),i=Z(e),o=F(r,i),a=N(r,i)+1;return Si(r,o,a).join("")}function Ec(t,e,n){if(t=Au(t),t&&(n||e===nt))return t.replace(Fe,"");if(!t||!(e=di(e)))return t;var r=Z(t),i=N(r,Z(e))+1;return Si(r,0,i).join("")}function Tc(t,e,n){if(t=Au(t),t&&(n||e===nt))return t.replace(De,"");if(!t||!(e=di(e)))return t;var r=Z(t),i=F(r,Z(e));return Si(r,i).join("")}function xc(t,e){var n=wt,r=Rt;if(iu(e)){var i="separator"in e?e.separator:i;n="length"in e?Tu(e.length):n,r="omission"in e?di(e.omission):r}t=Au(t);var o=t.length;if(G(t)){var a=Z(t);o=a.length}if(n>=o)return t;var s=n-J(r);if(s<1)return r;var u=a?Si(a,0,s).join(""):t.slice(0,s);if(i===nt)return u+r;if(a&&(s+=u.length-s),Tf(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=ul(i.source,Au(We.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var h=c.index;u=u.slice(0,h===nt?s:h)}}else if(t.indexOf(di(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function Sc(t){return t=Au(t),t&&Se.test(t)?t.replace(Te,_r):t}function wc(t,e,n){return t=Au(t),e=n?nt:e,e===nt?H(t)?et(t):_(t):t.match(e)||[]}function Rc(t){var e=null==t?0:t.length,n=bo();return t=e?d(t,function(t){if("function"!=typeof t[1])throw new ll(at);
return[n(t[0]),t[1]]}):[],ni(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Ac(t){return Nn(Fn(t,lt))}function Oc(t){return function(){return t}}function Cc(t,e){return null==t||t!==t?e:t}function Pc(t){return t}function Mc(t){return Nr("function"==typeof t?t:Fn(t,lt))}function Lc(t){return Hr(Fn(t,lt))}function kc(t,e){return Wr(t,Fn(e,lt))}function Ic(t,e,n){var r=Bu(e),i=nr(e,r);null!=n||iu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=nr(e,Bu(e)));var o=!(iu(n)&&"chain"in n&&!n.chain),a=eu(t);return s(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Di(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function Dc(){return ir._===this&&(ir._=El),this}function Fc(){}function Nc(t){return t=Tu(t),ni(function(e){return Yr(e,t)})}function Uc(t){return Do(t)?R(Qo(t)):$r(t)}function jc(t){return function(e){return null==t?nt:rr(t,e)}}function Bc(){return[]}function Gc(){return!1}function Hc(){return{}}function Wc(){return""}function zc(){return!0}function Vc(t,e){if(t=Tu(t),t<1||t>kt)return[];var n=Ft,r=Yl(t,Ft);e=bo(e),t-=Ft;for(var i=M(r,e);++n<t;)e(n);return i}function Yc(t){return yf(t)?d(t,Qo):gu(t)?[t]:Di(Mh(Au(t)))}function Xc(t){var e=++yl;return Au(t)+e}function Kc(t){return t&&t.length?zn(t,Pc,ur):nt}function qc(t,e){return t&&t.length?zn(t,bo(e,2),ur):nt}function $c(t){return w(t,Pc)}function Jc(t,e){return w(t,bo(e,2))}function Zc(t){return t&&t.length?zn(t,Pc,Br):nt}function Qc(t,e){return t&&t.length?zn(t,bo(e,2),Br):nt}function tl(t){return t&&t.length?P(t,Pc):0}function el(t,e){return t&&t.length?P(t,bo(e,2)):0}t=null==t?ir:Er.defaults(ir.Object(),t,Er.pick(ir,Yn));var nl=t.Array,rl=t.Date,il=t.Error,ol=t.Function,al=t.Math,sl=t.Object,ul=t.RegExp,cl=t.String,ll=t.TypeError,hl=nl.prototype,fl=ol.prototype,dl=sl.prototype,pl=t["__core-js_shared__"],vl=fl.toString,gl=dl.hasOwnProperty,yl=0,ml=function(){var t=/[^.]+$/.exec(pl&&pl.keys&&pl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_l=dl.toString,bl=vl.call(sl),El=ir._,Tl=ul("^"+vl.call(gl).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xl=sr?t.Buffer:nt,Sl=t.Symbol,wl=t.Uint8Array,Rl=xl?xl.allocUnsafe:nt,Al=V(sl.getPrototypeOf,sl),Ol=sl.create,Cl=dl.propertyIsEnumerable,Pl=hl.splice,Ml=Sl?Sl.isConcatSpreadable:nt,Ll=Sl?Sl.iterator:nt,kl=Sl?Sl.toStringTag:nt,Il=function(){try{var t=xo(sl,"defineProperty");return t({},"",{}),t}catch(e){}}(),Dl=t.clearTimeout!==ir.clearTimeout&&t.clearTimeout,Fl=rl&&rl.now!==ir.Date.now&&rl.now,Nl=t.setTimeout!==ir.setTimeout&&t.setTimeout,Ul=al.ceil,jl=al.floor,Bl=sl.getOwnPropertySymbols,Gl=xl?xl.isBuffer:nt,Hl=t.isFinite,Wl=hl.join,zl=V(sl.keys,sl),Vl=al.max,Yl=al.min,Xl=rl.now,Kl=t.parseInt,ql=al.random,$l=hl.reverse,Jl=xo(t,"DataView"),Zl=xo(t,"Map"),Ql=xo(t,"Promise"),th=xo(t,"Set"),eh=xo(t,"WeakMap"),nh=xo(sl,"create"),rh=eh&&new eh,ih={},oh=ta(Jl),ah=ta(Zl),sh=ta(Ql),uh=ta(th),ch=ta(eh),lh=Sl?Sl.prototype:nt,hh=lh?lh.valueOf:nt,fh=lh?lh.toString:nt,dh=function(){function t(){}return function(e){if(!iu(e))return{};if(Ol)return Ol(e);t.prototype=e;var n=new t;return t.prototype=nt,n}}();e.templateSettings={escape:Re,evaluate:Ae,interpolate:Oe,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,r.prototype=dh(n.prototype),r.prototype.constructor=r,i.prototype=dh(n.prototype),i.prototype.constructor=i,Q.prototype.clear=tt,Q.prototype["delete"]=Be,Q.prototype.get=Ze,Q.prototype.has=Qe,Q.prototype.set=tn,en.prototype.clear=nn,en.prototype["delete"]=rn,en.prototype.get=on,en.prototype.has=an,en.prototype.set=sn,un.prototype.clear=cn,un.prototype["delete"]=ln,un.prototype.get=hn,un.prototype.has=fn,un.prototype.set=dn,pn.prototype.add=pn.prototype.push=vn,pn.prototype.has=gn,yn.prototype.clear=mn,yn.prototype["delete"]=_n,yn.prototype.get=bn,yn.prototype.has=En,yn.prototype.set=Tn;var ph=Gi(Zn),vh=Gi(Qn,!0),gh=Hi(),yh=Hi(!0),mh=rh?function(t,e){return rh.set(t,e),t}:Pc,_h=Il?function(t,e){return Il(t,"toString",{configurable:!0,enumerable:!1,value:Oc(e),writable:!0})}:Pc,bh=ni,Eh=Dl||function(t){return ir.clearTimeout(t)},Th=th&&1/X(new th([,-0]))[1]==Lt?function(t){return new th(t)}:Fc,xh=rh?function(t){return rh.get(t)}:Fc,Sh=Bl?function(t){return null==t?[]:(t=sl(t),l(Bl(t),function(e){return Cl.call(t,e)}))}:Bc,wh=Bl?function(t){for(var e=[];t;)p(e,Sh(t)),t=Al(t);return e}:Bc,Rh=ar;(Jl&&Rh(new Jl(new ArrayBuffer(1)))!=ce||Zl&&Rh(new Zl)!=qt||Ql&&Rh(Ql.resolve())!=Qt||th&&Rh(new th)!=ne||eh&&Rh(new eh)!=ae)&&(Rh=function(t){var e=ar(t),n=e==Zt?t.constructor:nt,r=n?ta(n):"";if(r)switch(r){case oh:return ce;case ah:return qt;case sh:return Qt;case uh:return ne;case ch:return ae}return e});var Ah=pl?eu:Gc,Oh=Jo(mh),Ch=Nl||function(t,e){return ir.setTimeout(t,e)},Ph=Jo(_h),Mh=Ho(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Me,function(t,n,r,i){e.push(r?i.replace(Ge,"$1"):n||t)}),e}),Lh=ni(function(t,e){return Xs(t)?Hn(t,Jn(e,1,Xs,!0)):[]}),kh=ni(function(t,e){var n=Ea(e);return Xs(n)&&(n=nt),Xs(t)?Hn(t,Jn(e,1,Xs,!0),bo(n,2)):[]}),Ih=ni(function(t,e){var n=Ea(e);return Xs(n)&&(n=nt),Xs(t)?Hn(t,Jn(e,1,Xs,!0),nt,n):[]}),Dh=ni(function(t){var e=d(t,Ei);return e.length&&e[0]===t[0]?xr(e):[]}),Fh=ni(function(t){var e=Ea(t),n=d(t,Ei);return e===Ea(n)?e=nt:n.pop(),n.length&&n[0]===t[0]?xr(n,bo(e,2)):[]}),Nh=ni(function(t){var e=Ea(t),n=d(t,Ei);return e="function"==typeof e?e:nt,e&&n.pop(),n.length&&n[0]===t[0]?xr(n,nt,e):[]}),Uh=ni(Sa),jh=vo(function(t,e){var n=null==t?0:t.length,r=In(t,e);return Zr(t,d(e,function(t){return ko(t,n)?+t:t}).sort(Mi)),r}),Bh=ni(function(t){return pi(Jn(t,1,Xs,!0))}),Gh=ni(function(t){var e=Ea(t);return Xs(e)&&(e=nt),pi(Jn(t,1,Xs,!0),bo(e,2))}),Hh=ni(function(t){var e=Ea(t);return e="function"==typeof e?e:nt,pi(Jn(t,1,Xs,!0),nt,e)}),Wh=ni(function(t,e){return Xs(t)?Hn(t,e):[]}),zh=ni(function(t){return _i(l(t,Xs))}),Vh=ni(function(t){var e=Ea(t);return Xs(e)&&(e=nt),_i(l(t,Xs),bo(e,2))}),Yh=ni(function(t){var e=Ea(t);return e="function"==typeof e?e:nt,_i(l(t,Xs),nt,e)}),Xh=ni(Ya),Kh=ni(function(t){var e=t.length,n=e>1?t[e-1]:nt;return n="function"==typeof n?(t.pop(),n):nt,Xa(t,n)}),qh=vo(function(t){var e=t.length,n=e?t[0]:0,o=this.__wrapped__,a=function(e){return In(e,t)};return!(e>1||this.__actions__.length)&&o instanceof i&&ko(n)?(o=o.slice(n,+n+(e?1:0)),o.__actions__.push({func:Za,args:[a],thisArg:nt}),new r(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(a)}),$h=ji(function(t,e,n){gl.call(t,n)?++t[n]:kn(t,n,1)}),Jh=Ki(ha),Zh=Ki(fa),Qh=ji(function(t,e,n){gl.call(t,n)?t[n].push(e):kn(t,n,[e])}),tf=ni(function(t,e,n){var r=-1,i="function"==typeof e,a=Ys(t)?nl(t.length):[];return ph(t,function(t){a[++r]=i?o(e,t,n):wr(t,e,n)}),a}),ef=ji(function(t,e,n){kn(t,n,e)}),nf=ji(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),rf=ni(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Io(t,e[0],e[1])?e=[]:n>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),Xr(t,Jn(e,1),[])}),of=Fl||function(){return ir.Date.now()},af=ni(function(t,e,n){var r=vt;if(n.length){var i=Y(n,_o(af));r|=bt}return so(t,r,e,n,i)}),sf=ni(function(t,e,n){var r=vt|gt;if(n.length){var i=Y(n,_o(sf));r|=bt}return so(e,r,t,n,i)}),uf=ni(function(t,e){return jn(t,1,e)}),cf=ni(function(t,e,n){return jn(t,Su(e)||0,n)});Ms.Cache=un;var lf=bh(function(t,e){e=1==e.length&&yf(e[0])?d(e[0],k(bo())):d(Jn(e,1),k(bo()));var n=e.length;return ni(function(r){for(var i=-1,a=Yl(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),hf=ni(function(t,e){var n=Y(e,_o(hf));return so(t,bt,nt,e,n)}),ff=ni(function(t,e){var n=Y(e,_o(ff));return so(t,Et,nt,e,n)}),df=vo(function(t,e){return so(t,xt,nt,nt,nt,e)}),pf=ro(ur),vf=ro(function(t,e){return t>=e}),gf=Rr(function(){return arguments}())?Rr:function(t){return ou(t)&&gl.call(t,"callee")&&!Cl.call(t,"callee")},yf=nl.isArray,mf=lr?k(lr):Ar,_f=Gl||Gc,bf=hr?k(hr):Or,Ef=fr?k(fr):Mr,Tf=dr?k(dr):Ir,xf=pr?k(pr):Dr,Sf=vr?k(vr):Fr,wf=ro(Br),Rf=ro(function(t,e){return t<=e}),Af=Bi(function(t,e){if(jo(e)||Ys(e))return void Fi(e,Bu(e),t);for(var n in e)gl.call(e,n)&&On(t,n,e[n])}),Of=Bi(function(t,e){Fi(e,Gu(e),t)}),Cf=Bi(function(t,e,n,r){Fi(e,Gu(e),t,r)}),Pf=Bi(function(t,e,n,r){Fi(e,Bu(e),t,r)}),Mf=vo(In),Lf=ni(function(t,e){t=sl(t);var n=-1,r=e.length,i=r>2?e[2]:nt;for(i&&Io(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Gu(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===nt||Vs(l,dl[c])&&!gl.call(t,c))&&(t[c]=o[c])}return t}),kf=ni(function(t){return t.push(nt,co),o(Uf,nt,t)}),If=Ji(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_l.call(e)),t[e]=n},Oc(Pc)),Df=Ji(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=_l.call(e)),gl.call(t,e)?t[e].push(n):t[e]=[n]},bo),Ff=ni(wr),Nf=Bi(function(t,e,n){zr(t,e,n)}),Uf=Bi(function(t,e,n,r){zr(t,e,n,r)}),jf=vo(function(t,e){var n={};if(null==t)return n;var r=!1;e=d(e,function(e){return e=xi(e,t),r||(r=e.length>1),e}),Fi(t,yo(t),n),r&&(n=Fn(n,lt|ht|ft,lo));for(var i=e.length;i--;)vi(n,e[i]);return n}),Bf=vo(function(t,e){return null==t?{}:Kr(t,e)}),Gf=ao(Bu),Hf=ao(Gu),Wf=Vi(function(t,e,n){return e=e.toLowerCase(),t+(n?ic(e):e)}),zf=Vi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Vf=Vi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Yf=zi("toLowerCase"),Xf=Vi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kf=Vi(function(t,e,n){return t+(n?" ":"")+$f(e)}),qf=Vi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),$f=zi("toUpperCase"),Jf=ni(function(t,e){try{return o(t,nt,e)}catch(n){return Qs(n)?n:new il(n)}}),Zf=vo(function(t,e){return s(e,function(e){e=Qo(e),kn(t,e,af(t[e],t))}),t}),Qf=qi(),td=qi(!0),ed=ni(function(t,e){return function(n){return wr(n,t,e)}}),nd=ni(function(t,e){return function(n){return wr(t,n,e)}}),rd=Qi(d),id=Qi(c),od=Qi(y),ad=no(),sd=no(!0),ud=Zi(function(t,e){return t+e},0),cd=oo("ceil"),ld=Zi(function(t,e){return t/e},1),hd=oo("floor"),fd=Zi(function(t,e){return t*e},1),dd=oo("round"),pd=Zi(function(t,e){return t-e},0);return e.after=Ss,e.ary=ws,e.assign=Af,e.assignIn=Of,e.assignInWith=Cf,e.assignWith=Pf,e.at=Mf,e.before=Rs,e.bind=af,e.bindAll=Zf,e.bindKey=sf,e.castArray=js,e.chain=$a,e.chunk=ra,e.compact=ia,e.concat=oa,e.cond=Rc,e.conforms=Ac,e.constant=Oc,e.countBy=$h,e.create=Ou,e.curry=As,e.curryRight=Os,e.debounce=Cs,e.defaults=Lf,e.defaultsDeep=kf,e.defer=uf,e.delay=cf,e.difference=Lh,e.differenceBy=kh,e.differenceWith=Ih,e.drop=aa,e.dropRight=sa,e.dropRightWhile=ua,e.dropWhile=ca,e.fill=la,e.filter=ss,e.flatMap=us,e.flatMapDeep=cs,e.flatMapDepth=ls,e.flatten=da,e.flattenDeep=pa,e.flattenDepth=va,e.flip=Ps,e.flow=Qf,e.flowRight=td,e.fromPairs=ga,e.functions=Du,e.functionsIn=Fu,e.groupBy=Qh,e.initial=_a,e.intersection=Dh,e.intersectionBy=Fh,e.intersectionWith=Nh,e.invert=If,e.invertBy=Df,e.invokeMap=tf,e.iteratee=Mc,e.keyBy=ef,e.keys=Bu,e.keysIn=Gu,e.map=ps,e.mapKeys=Hu,e.mapValues=Wu,e.matches=Lc,e.matchesProperty=kc,e.memoize=Ms,e.merge=Nf,e.mergeWith=Uf,e.method=ed,e.methodOf=nd,e.mixin=Ic,e.negate=Ls,e.nthArg=Nc,e.omit=jf,e.omitBy=zu,e.once=ks,e.orderBy=vs,e.over=rd,e.overArgs=lf,e.overEvery=id,e.overSome=od,e.partial=hf,e.partialRight=ff,e.partition=nf,e.pick=Bf,e.pickBy=Vu,e.property=Uc,e.propertyOf=jc,e.pull=Uh,e.pullAll=Sa,e.pullAllBy=wa,e.pullAllWith=Ra,e.pullAt=jh,e.range=ad,e.rangeRight=sd,e.rearg=df,e.reject=ms,e.remove=Aa,e.rest=Is,e.reverse=Oa,e.sampleSize=bs,e.set=Xu,e.setWith=Ku,e.shuffle=Es,e.slice=Ca,e.sortBy=rf,e.sortedUniq=Fa,e.sortedUniqBy=Na,e.split=vc,e.spread=Ds,e.tail=Ua,e.take=ja,e.takeRight=Ba,e.takeRightWhile=Ga,e.takeWhile=Ha,e.tap=Ja,e.throttle=Fs,e.thru=Za,e.toArray=bu,e.toPairs=Gf,e.toPairsIn=Hf,e.toPath=Yc,e.toPlainObject=wu,e.transform=qu,e.unary=Ns,e.union=Bh,e.unionBy=Gh,e.unionWith=Hh,e.uniq=Wa,e.uniqBy=za,e.uniqWith=Va,e.unset=$u,e.unzip=Ya,e.unzipWith=Xa,e.update=Ju,e.updateWith=Zu,e.values=Qu,e.valuesIn=tc,e.without=Wh,e.words=wc,e.wrap=Us,e.xor=zh,e.xorBy=Vh,e.xorWith=Yh,e.zip=Xh,e.zipObject=Ka,e.zipObjectDeep=qa,e.zipWith=Kh,e.entries=Gf,e.entriesIn=Hf,e.extend=Of,e.extendWith=Cf,Ic(e,e),e.add=ud,e.attempt=Jf,e.camelCase=Wf,e.capitalize=ic,e.ceil=cd,e.clamp=ec,e.clone=Bs,e.cloneDeep=Hs,e.cloneDeepWith=Ws,e.cloneWith=Gs,e.conformsTo=zs,e.deburr=oc,e.defaultTo=Cc,e.divide=ld,e.endsWith=ac,e.eq=Vs,e.escape=sc,e.escapeRegExp=uc,e.every=as,e.find=Jh,e.findIndex=ha,e.findKey=Cu,e.findLast=Zh,e.findLastIndex=fa,e.findLastKey=Pu,e.floor=hd,e.forEach=hs,e.forEachRight=fs,e.forIn=Mu,e.forInRight=Lu,e.forOwn=ku,e.forOwnRight=Iu,e.get=Nu,e.gt=pf,e.gte=vf,e.has=Uu,e.hasIn=ju,e.head=ya,e.identity=Pc,e.includes=ds,e.indexOf=ma,e.inRange=nc,e.invoke=Ff,e.isArguments=gf,e.isArray=yf,e.isArrayBuffer=mf,e.isArrayLike=Ys,e.isArrayLikeObject=Xs,e.isBoolean=Ks,e.isBuffer=_f,e.isDate=bf,e.isElement=qs,e.isEmpty=$s,e.isEqual=Js,e.isEqualWith=Zs,e.isError=Qs,e.isFinite=tu,e.isFunction=eu,e.isInteger=nu,e.isLength=ru,e.isMap=Ef,e.isMatch=au,e.isMatchWith=su,e.isNaN=uu,e.isNative=cu,e.isNil=hu,e.isNull=lu,e.isNumber=fu,e.isObject=iu,e.isObjectLike=ou,e.isPlainObject=du,e.isRegExp=Tf,e.isSafeInteger=pu,e.isSet=xf,e.isString=vu,e.isSymbol=gu,e.isTypedArray=Sf,e.isUndefined=yu,e.isWeakMap=mu,e.isWeakSet=_u,e.join=ba,e.kebabCase=zf,e.last=Ea,e.lastIndexOf=Ta,e.lowerCase=Vf,e.lowerFirst=Yf,e.lt=wf,e.lte=Rf,e.max=Kc,e.maxBy=qc,e.mean=$c,e.meanBy=Jc,e.min=Zc,e.minBy=Qc,e.stubArray=Bc,e.stubFalse=Gc,e.stubObject=Hc,e.stubString=Wc,e.stubTrue=zc,e.multiply=fd,e.nth=xa,e.noConflict=Dc,e.noop=Fc,e.now=of,e.pad=cc,e.padEnd=lc,e.padStart=hc,e.parseInt=fc,e.random=rc,e.reduce=gs,e.reduceRight=ys,e.repeat=dc,e.replace=pc,e.result=Yu,e.round=dd,e.runInContext=Tr,e.sample=_s,e.size=Ts,e.snakeCase=Xf,e.some=xs,e.sortedIndex=Pa,e.sortedIndexBy=Ma,e.sortedIndexOf=La,e.sortedLastIndex=ka,e.sortedLastIndexBy=Ia,e.sortedLastIndexOf=Da,e.startCase=Kf,e.startsWith=gc,e.subtract=pd,e.sum=tl,e.sumBy=el,e.template=yc,e.times=Vc,e.toFinite=Eu,e.toInteger=Tu,e.toLength=xu,e.toLower=mc,e.toNumber=Su,e.toSafeInteger=Ru,e.toString=Au,e.toUpper=_c,e.trim=bc,e.trimEnd=Ec,e.trimStart=Tc,e.truncate=xc,e.unescape=Sc,e.uniqueId=Xc,e.upperCase=qf,e.upperFirst=$f,e.each=hs,e.eachRight=fs,e.first=ya,Ic(e,function(){var t={};return Zn(e,function(n,r){gl.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=rt,s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),s(["drop","take"],function(t,e){i.prototype[t]=function(n){n=n===nt?1:Vl(Tu(n),0);var r=this.__filtered__&&!e?new i(this):this.clone();return r.__filtered__?r.__takeCount__=Yl(n,r.__takeCount__):r.__views__.push({size:Yl(n,Ft),type:t+(r.__dir__<0?"Right":"")}),r},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Ct||n==Mt;i.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:bo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[n](1)}}),i.prototype.compact=function(){return this.filter(Pc)},i.prototype.find=function(t){return this.filter(t).head()},i.prototype.findLast=function(t){return this.reverse().find(t)},i.prototype.invokeMap=ni(function(t,e){return"function"==typeof t?new i(this):this.map(function(n){return wr(n,t,e)})}),i.prototype.reject=function(t){return this.filter(Ls(bo(t)))},i.prototype.slice=function(t,e){t=Tu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new i(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==nt&&(e=Tu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},i.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},i.prototype.toArray=function(){return this.take(Ft)},Zn(i.prototype,function(t,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),a=/^(?:head|last)$/.test(n),s=e[a?"take"+("last"==n?"Right":""):n],u=a||/^find/.test(n);s&&(e.prototype[n]=function(){var n=this.__wrapped__,c=a?[1]:arguments,l=n instanceof i,h=c[0],f=l||yf(n),d=function(t){var n=s.apply(e,p([t],c));return a&&v?n[0]:n};f&&o&&"function"==typeof h&&1!=h.length&&(l=f=!1);var v=this.__chain__,g=!!this.__actions__.length,y=u&&!v,m=l&&!g;if(!u&&f){n=m?n:new i(this);var _=t.apply(n,c);return _.__actions__.push({func:Za,args:[d],thisArg:nt}),new r(_,v)}return y&&m?t.apply(this,c):(_=this.thru(d),y?a?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var n=hl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var e=this.value();return n.apply(yf(e)?e:[],t)}return this[r](function(e){return n.apply(yf(e)?e:[],t)})}}),Zn(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name+"",o=ih[i]||(ih[i]=[]);o.push({name:n,func:r})}}),ih[$i(nt,gt).name]=[{name:"wrapper",func:nt}],i.prototype.clone=m,i.prototype.reverse=A,i.prototype.value=q,e.prototype.at=qh,e.prototype.chain=Qa,e.prototype.commit=ts,e.prototype.next=es,e.prototype.plant=rs,e.prototype.reverse=is,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=os,e.prototype.first=e.prototype.head,Ll&&(e.prototype[Ll]=ns),e},Er=br();ir._=Er,r=function(){return Er}.call(e,n,e,i),!(r!==nt&&(i.exports=r))}).call(this)}).call(e,function(){return this}(),n(537)(t))}]);