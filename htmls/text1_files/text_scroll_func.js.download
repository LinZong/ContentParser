// no login functions
function initTextContentFunc(contentId){
	$('#_txt').data('total_page', 1);
	$('#_txt').data('page', 1);
	var txt_row = get_cookie('txt_row');
	if (isNaN(txt_row) || txt_row < 0 || txt_row > 3) {
		txt_row = 1;
	}
	row_change(txt_row);

	$('#_txt_prev').click(function() {
		var page = $('#_txt').data('page');
		if (page > 1) {
			txt_scroll(-1);
		}
		return false;
	});

	$('#_txt_next').click(function() {
		var total_page = $('#_txt').data('total_page');
		var page = $('#_txt').data('page');
		if (page < total_page) {
			txt_scroll(1);
		}
		return false;
	});

	$('#_txt_rows_down').click(function() {
		var row = $('#_txt').data('row');
		if (!row) {
			row = 0
		}
		row = Number(row);
		if (row < 3) {
			row_change(row + 1);
		}
		return false;
	});

	$('#_txt_rows_up').click(function() {
		var row = $('#_txt').data('row');
		if (!row) {
			row = 0
		}
		row = Number(row);
		if (row > 0) {
			row_change(row - 1);
		}
		return false;
	});
}

function row_change(row) {
	$('#_txt').data('row', row);
	txt_scroll(0);
	set_cookie('txt_row', row);
}

//	ページ切り替え -1:前へ、0:先頭、1:次へ
function txt_scroll(pos) {
	var row_array = new Array(0, 39, 23, 14);
	var total_page = $('#_txt').data('total_page');
	var now_page = $('#_txt').data('page');
	var txt_row = $('#_txt').data('row');
	var line_height = 20;

	var div_height_in = !row_array[txt_row] ? $('#_txt_main').get(0).offsetHeight : line_height * row_array[txt_row];
	var div_move = div_height_in - 2 * line_height;
	$('#_txt').css('height', (div_height_in + line_height + 40) + 'px');
	$('#_txt_frame').css('height', div_height_in + 'px');

	if (0 == pos) {
		var box_height = $('#_txt_main').get(0).offsetHeight;
		var lines = Math.ceil(box_height / line_height);
		total_page = 1;
		if (row_array[txt_row] && row_array[txt_row] < lines) {
				total_page = Math.ceil((lines - row_array[txt_row]) / (row_array[txt_row] - 2)) + 1;
		}
	}
	if (pos == 1 && now_page < total_page) {
		now_page++;
	} else if (pos == -1 && 1 < now_page) {
		now_page--;
	} else if (pos == 0 && total_page < now_page) {
		now_page = total_page;
	}

	var div_move_px = -1 * (now_page - 1) * div_move;
	$('#_txt_main').css('marginTop', div_move_px + 'px');
	$('#_txt_page').text(now_page);
	$('#_txt_total').text(total_page);
	$('.main_txt').show();
	$('#_txt').data('total_page', total_page);
	$('#_txt').data('page', now_page);
}
